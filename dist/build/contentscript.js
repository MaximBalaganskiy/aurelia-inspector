var contentscript;contentscript =
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@aurelia/kernel/dist/esm/index.js":
/*!********************************************************!*\
  !*** ./node_modules/@aurelia/kernel/dist/esm/index.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Metadata": () => /* reexport safe */ _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.Metadata,
/* harmony export */   "applyMetadataPolyfill": () => /* reexport safe */ _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.applyMetadataPolyfill,
/* harmony export */   "isNullOrUndefined": () => /* reexport safe */ _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.isNullOrUndefined,
/* harmony export */   "isObject": () => /* reexport safe */ _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.isObject,
/* harmony export */   "metadata": () => /* reexport safe */ _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.metadata,
/* harmony export */   "Platform": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.Platform,
/* harmony export */   "Task": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.Task,
/* harmony export */   "TaskAbortError": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskAbortError,
/* harmony export */   "TaskQueue": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskQueue,
/* harmony export */   "TaskQueuePriority": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskQueuePriority,
/* harmony export */   "TaskStatus": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskStatus,
/* harmony export */   "AnalyzedModule": () => /* binding */ AnalyzedModule,
/* harmony export */   "ColorOptions": () => /* binding */ Lt,
/* harmony export */   "ConsoleSink": () => /* binding */ Ht,
/* harmony export */   "ContainerConfiguration": () => /* binding */ ContainerConfiguration,
/* harmony export */   "DI": () => /* binding */ G,
/* harmony export */   "DefaultLogEvent": () => /* binding */ DefaultLogEvent,
/* harmony export */   "DefaultLogEventFactory": () => /* binding */ _t,
/* harmony export */   "DefaultLogger": () => /* binding */ Vt,
/* harmony export */   "DefaultResolver": () => /* binding */ z,
/* harmony export */   "EventAggregator": () => /* binding */ EventAggregator,
/* harmony export */   "IContainer": () => /* binding */ H,
/* harmony export */   "IEventAggregator": () => /* binding */ Yt,
/* harmony export */   "ILogConfig": () => /* binding */ Pt,
/* harmony export */   "ILogEventFactory": () => /* binding */ St,
/* harmony export */   "ILogger": () => /* binding */ Nt,
/* harmony export */   "IModuleLoader": () => /* binding */ Jt,
/* harmony export */   "IPlatform": () => /* binding */ Mt,
/* harmony export */   "IServiceLocator": () => /* binding */ V,
/* harmony export */   "ISink": () => /* binding */ Dt,
/* harmony export */   "InstanceProvider": () => /* binding */ InstanceProvider,
/* harmony export */   "LogConfig": () => /* binding */ LogConfig,
/* harmony export */   "LogLevel": () => /* binding */ Ut,
/* harmony export */   "LoggerConfiguration": () => /* binding */ qt,
/* harmony export */   "ModuleItem": () => /* binding */ ModuleItem,
/* harmony export */   "Protocol": () => /* binding */ S,
/* harmony export */   "Registration": () => /* binding */ $t,
/* harmony export */   "all": () => /* binding */ nt,
/* harmony export */   "bound": () => /* binding */ m,
/* harmony export */   "camelCase": () => /* binding */ l,
/* harmony export */   "compareNumber": () => /* binding */ w,
/* harmony export */   "emptyArray": () => /* binding */ Ot,
/* harmony export */   "emptyObject": () => /* binding */ kt,
/* harmony export */   "factory": () => /* binding */ ot,
/* harmony export */   "firstDefined": () => /* binding */ R,
/* harmony export */   "format": () => /* binding */ xt,
/* harmony export */   "fromAnnotationOrDefinitionOrTypeOrDefault": () => /* binding */ W,
/* harmony export */   "fromAnnotationOrTypeOrDefault": () => /* binding */ B,
/* harmony export */   "fromDefinitionOrDefault": () => /* binding */ Q,
/* harmony export */   "getPrototypeChain": () => /* binding */ b,
/* harmony export */   "ignore": () => /* binding */ st,
/* harmony export */   "inject": () => /* binding */ J,
/* harmony export */   "isArrayIndex": () => /* binding */ i,
/* harmony export */   "isNativeFunction": () => /* binding */ $,
/* harmony export */   "isNumberOrBigInt": () => /* binding */ s,
/* harmony export */   "isStringOrDate": () => /* binding */ o,
/* harmony export */   "kebabCase": () => /* binding */ f,
/* harmony export */   "lazy": () => /* binding */ rt,
/* harmony export */   "mergeArrays": () => /* binding */ p,
/* harmony export */   "mergeDistinct": () => /* binding */ g,
/* harmony export */   "mergeObjects": () => /* binding */ y,
/* harmony export */   "newInstanceForScope": () => /* binding */ ut,
/* harmony export */   "newInstanceOf": () => /* binding */ lt,
/* harmony export */   "nextId": () => /* binding */ d,
/* harmony export */   "noop": () => /* binding */ It,
/* harmony export */   "onResolve": () => /* binding */ E,
/* harmony export */   "optional": () => /* binding */ it,
/* harmony export */   "pascalCase": () => /* binding */ c,
/* harmony export */   "resetId": () => /* binding */ v,
/* harmony export */   "resolveAll": () => /* binding */ A,
/* harmony export */   "singleton": () => /* binding */ tt,
/* harmony export */   "sink": () => /* binding */ Qt,
/* harmony export */   "toArray": () => /* binding */ a,
/* harmony export */   "transient": () => /* binding */ Y
/* harmony export */ });
/* harmony import */ var _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/metadata */ "./node_modules/@aurelia/metadata/dist/esm/index.js");
/* harmony import */ var _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/platform */ "./node_modules/@aurelia/platform/dist/esm/index.js");






const r = {};

function i(t) {
    switch (typeof t) {
      case "number":
        return t >= 0 && (0 | t) === t;

      case "string":
        {
            const e = r[t];
            if (void 0 !== e) return e;
            const n = t.length;
            if (0 === n) return r[t] = false;
            let i = 0;
            let s = 0;
            for (;s < n; ++s) {
                i = t.charCodeAt(s);
                if (0 === s && 48 === i && n > 1 || i < 48 || i > 57) return r[t] = false;
            }
            return r[t] = true;
        }

      default:
        return false;
    }
}

function s(t) {
    switch (typeof t) {
      case "number":
      case "bigint":
        return true;

      default:
        return false;
    }
}

function o(t) {
    switch (typeof t) {
      case "string":
        return true;

      case "object":
        return t instanceof Date;

      default:
        return false;
    }
}

const u = function() {
    let t;
    (function(t) {
        t[t["none"] = 0] = "none";
        t[t["digit"] = 1] = "digit";
        t[t["upper"] = 2] = "upper";
        t[t["lower"] = 3] = "lower";
    })(t || (t = {}));
    const e = Object.assign(Object.create(null), {
        0: true,
        1: true,
        2: true,
        3: true,
        4: true,
        5: true,
        6: true,
        7: true,
        8: true,
        9: true
    });
    function n(t) {
        if ("" === t) return 0;
        if (t !== t.toUpperCase()) return 3;
        if (t !== t.toLowerCase()) return 2;
        if (true === e[t]) return 1;
        return 0;
    }
    return function(t, e) {
        const r = t.length;
        if (0 === r) return t;
        let i = false;
        let s = "";
        let o;
        let u = "";
        let l = 0;
        let c = t.charAt(0);
        let f = n(c);
        let a = 0;
        for (;a < r; ++a) {
            o = l;
            u = c;
            l = f;
            c = t.charAt(a + 1);
            f = n(c);
            if (0 === l) {
                if (s.length > 0) i = true;
            } else {
                if (!i && s.length > 0 && 2 === l) i = 3 === o || 3 === f;
                s += e(u, i);
                i = false;
            }
        }
        return s;
    };
}();

const l = function() {
    const t = Object.create(null);
    function e(t, e) {
        return e ? t.toUpperCase() : t.toLowerCase();
    }
    return function(n) {
        let r = t[n];
        if (void 0 === r) r = t[n] = u(n, e);
        return r;
    };
}();

const c = function() {
    const t = Object.create(null);
    return function(e) {
        let n = t[e];
        if (void 0 === n) {
            n = l(e);
            if (n.length > 0) n = n[0].toUpperCase() + n.slice(1);
            t[e] = n;
        }
        return n;
    };
}();

const f = function() {
    const t = Object.create(null);
    function e(t, e) {
        return e ? `-${t.toLowerCase()}` : t.toLowerCase();
    }
    return function(n) {
        let r = t[n];
        if (void 0 === r) r = t[n] = u(n, e);
        return r;
    };
}();

function a(t) {
    const {length: e} = t;
    const n = Array(e);
    let r = 0;
    for (;r < e; ++r) n[r] = t[r];
    return n;
}

const h = {};

function d(t) {
    if (void 0 === h[t]) h[t] = 0;
    return ++h[t];
}

function v(t) {
    h[t] = 0;
}

function w(t, e) {
    return t - e;
}

function g(t, e, n) {
    if (void 0 === t || null === t || t === Ot) if (void 0 === e || null === e || e === Ot) return Ot; else return n ? e.slice(0) : e; else if (void 0 === e || null === e || e === Ot) return n ? t.slice(0) : t;
    const r = {};
    const i = n ? t.slice(0) : t;
    let s = t.length;
    let o = e.length;
    while (s-- > 0) r[t[s]] = true;
    let u;
    while (o-- > 0) {
        u = e[o];
        if (void 0 === r[u]) {
            i.push(u);
            r[u] = true;
        }
    }
    return i;
}

function m(t, e, n) {
    return {
        configurable: true,
        enumerable: n.enumerable,
        get() {
            const t = n.value.bind(this);
            Reflect.defineProperty(this, e, {
                value: t,
                writable: true,
                configurable: true,
                enumerable: n.enumerable
            });
            return t;
        }
    };
}

function p(...t) {
    const e = [];
    let n = 0;
    const r = t.length;
    let i = 0;
    let s;
    let o = 0;
    for (;o < r; ++o) {
        s = t[o];
        if (void 0 !== s) {
            i = s.length;
            let t = 0;
            for (;t < i; ++t) e[n++] = s[t];
        }
    }
    return e;
}

function y(...t) {
    const e = {};
    const n = t.length;
    let r;
    let i;
    let s = 0;
    for (;n > s; ++s) {
        r = t[s];
        if (void 0 !== r) for (i in r) e[i] = r[i];
    }
    return e;
}

function R(...t) {
    const e = t.length;
    let n;
    let r = 0;
    for (;e > r; ++r) {
        n = t[r];
        if (void 0 !== n) return n;
    }
    throw new Error(`No default value found`);
}

const b = function() {
    const t = Function.prototype;
    const e = Object.getPrototypeOf;
    const n = new WeakMap;
    let r = t;
    let i = 0;
    let s;
    return function(o) {
        s = n.get(o);
        if (void 0 === s) {
            n.set(o, s = [ r = o ]);
            i = 0;
            while ((r = e(r)) !== t) s[++i] = r;
        }
        return s;
    };
}();

function C(...t) {
    return Object.assign(Object.create(null), ...t);
}

const $ = function() {
    const t = new WeakMap;
    let e = false;
    let n = "";
    let r = 0;
    return function(i) {
        e = t.get(i);
        if (void 0 === e) {
            n = i.toString();
            r = n.length;
            e = r >= 29 && r <= 100 && 125 === n.charCodeAt(r - 1) && n.charCodeAt(r - 2) <= 32 && 93 === n.charCodeAt(r - 3) && 101 === n.charCodeAt(r - 4) && 100 === n.charCodeAt(r - 5) && 111 === n.charCodeAt(r - 6) && 99 === n.charCodeAt(r - 7) && 32 === n.charCodeAt(r - 8) && 101 === n.charCodeAt(r - 9) && 118 === n.charCodeAt(r - 10) && 105 === n.charCodeAt(r - 11) && 116 === n.charCodeAt(r - 12) && 97 === n.charCodeAt(r - 13) && 110 === n.charCodeAt(r - 14) && 88 === n.charCodeAt(r - 15);
            t.set(i, e);
        }
        return e;
    };
}();

function E(t, e) {
    if (t instanceof Promise) return t.then(e);
    return e(t);
}

function A(...t) {
    let e;
    let n;
    let r;
    let i = 0;
    let s = t.length;
    for (;i < s; ++i) {
        e = t[i];
        if ((e = t[i]) instanceof Promise) if (void 0 === n) n = e; else if (void 0 === r) r = [ n, e ]; else r.push(e);
    }
    if (void 0 === r) return n;
    return Promise.all(r);
}

const j = _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.Metadata.getOwn;

const O = _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.Metadata.hasOwn;

const k = _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.Metadata.define;

const I = t => "function" === typeof t;

const M = t => "string" === typeof t;

const T = "au:annotation";

const F = (t, e) => {
    if (void 0 === e) return `${T}:${t}`;
    return `${T}:${t}:${e}`;
};

const U = (t, e) => {
    const n = j(T, t);
    if (void 0 === n) k(T, [ e ], t); else n.push(e);
};

const L = Object.freeze({
    name: "au:annotation",
    appendTo: U,
    set(t, e, n) {
        k(F(e), n, t);
    },
    get: (t, e) => j(F(e), t),
    getKeys(t) {
        let e = j(T, t);
        if (void 0 === e) k(T, e = [], t);
        return e;
    },
    isKey: t => t.startsWith(T),
    keyFor: F
});

const P = "au:resource";

const D = Object.freeze({
    name: P,
    appendTo(t, e) {
        const n = j(P, t);
        if (void 0 === n) k(P, [ e ], t); else n.push(e);
    },
    has: t => O(P, t),
    getAll(t) {
        const e = j(P, t);
        if (void 0 === e) return Ot; else return e.map((e => j(e, t)));
    },
    getKeys(t) {
        let e = j(P, t);
        if (void 0 === e) k(P, e = [], t);
        return e;
    },
    isKey: t => t.startsWith(P),
    keyFor(t, e) {
        if (void 0 === e) return `${P}:${t}`;
        return `${P}:${t}:${e}`;
    }
});

const S = {
    annotation: L,
    resource: D
};

const N = Object.prototype.hasOwnProperty;

function W(t, e, n, r) {
    let i = j(F(t), n);
    if (void 0 === i) {
        i = e[t];
        if (void 0 === i) {
            i = n[t];
            if (void 0 === i || !N.call(n, t)) return r();
            return i;
        }
        return i;
    }
    return i;
}

function B(t, e, n) {
    let r = j(F(t), e);
    if (void 0 === r) {
        r = e[t];
        if (void 0 === r || !N.call(e, t)) return n();
        return r;
    }
    return r;
}

function Q(t, e, n) {
    const r = e[t];
    if (void 0 === r) return n();
    return r;
}

(0,_aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.applyMetadataPolyfill)(Reflect, false, false);

class ResolverBuilder {
    constructor(t, e) {
        this.container = t;
        this.key = e;
    }
    instance(t) {
        return this.registerResolver(0, t);
    }
    singleton(t) {
        return this.registerResolver(1, t);
    }
    transient(t) {
        return this.registerResolver(2, t);
    }
    callback(t) {
        return this.registerResolver(3, t);
    }
    cachedCallback(t) {
        return this.registerResolver(3, Ct(t));
    }
    aliasTo(t) {
        return this.registerResolver(5, t);
    }
    registerResolver(t, e) {
        const {container: n, key: r} = this;
        this.container = this.key = void 0;
        return n.registerResolver(r, new Resolver(r, t, e));
    }
}

function x(t) {
    const e = t.slice();
    const n = Object.keys(t);
    const r = n.length;
    let s;
    for (let o = 0; o < r; ++o) {
        s = n[o];
        if (!i(s)) e[s] = t[s];
    }
    return e;
}

const z = {
    none(t) {
        throw Error(`AUR0002:${t.toString()}`);
    },
    singleton(t) {
        return new Resolver(t, 1, t);
    },
    transient(t) {
        return new Resolver(t, 2, t);
    }
};

class ContainerConfiguration {
    constructor(t, e) {
        this.inheritParentResources = t;
        this.defaultResolver = e;
    }
    static from(t) {
        var e, n;
        if (void 0 === t || t === ContainerConfiguration.DEFAULT) return ContainerConfiguration.DEFAULT;
        return new ContainerConfiguration(null !== (e = t.inheritParentResources) && void 0 !== e ? e : false, null !== (n = t.defaultResolver) && void 0 !== n ? n : z.singleton);
    }
}

ContainerConfiguration.DEFAULT = ContainerConfiguration.from({});

const G = {
    createContainer(t) {
        return new Container(null, ContainerConfiguration.from(t));
    },
    getDesignParamtypes(t) {
        return j("design:paramtypes", t);
    },
    getAnnotationParamtypes(t) {
        const e = F("di:paramtypes");
        return j(e, t);
    },
    getOrCreateAnnotationParamTypes: _,
    getDependencies: K,
    createInterface(t, e) {
        const n = I(t) ? t : e;
        const r = M(t) ? t : void 0;
        const i = function(t, e, n) {
            if (null == t || void 0 !== new.target) throw new Error(`AUR0001:${i.friendlyName}`);
            const r = _(t);
            r[n] = i;
        };
        i.$isInterface = true;
        i.friendlyName = null == r ? "(anonymous)" : r;
        if (null != n) i.register = function(t, e) {
            return n(new ResolverBuilder(t, null !== e && void 0 !== e ? e : i));
        };
        i.toString = function t() {
            return `InterfaceSymbol<${i.friendlyName}>`;
        };
        return i;
    },
    inject(...t) {
        return function(e, n, r) {
            if ("number" === typeof r) {
                const n = _(e);
                const i = t[0];
                if (void 0 !== i) n[r] = i;
            } else if (n) {
                const r = _(e.constructor);
                const i = t[0];
                if (void 0 !== i) r[n] = i;
            } else if (r) {
                const e = r.value;
                const n = _(e);
                let i;
                for (let e = 0; e < t.length; ++e) {
                    i = t[e];
                    if (void 0 !== i) n[e] = i;
                }
            } else {
                const n = _(e);
                let r;
                for (let e = 0; e < t.length; ++e) {
                    r = t[e];
                    if (void 0 !== r) n[e] = r;
                }
            }
        };
    },
    transient(t) {
        t.register = function e(n) {
            const r = $t.transient(t, t);
            return r.register(n, t);
        };
        t.registerInRequestor = false;
        return t;
    },
    singleton(t, e = Z) {
        t.register = function e(n) {
            const r = $t.singleton(t, t);
            return r.register(n, t);
        };
        t.registerInRequestor = e.scoped;
        return t;
    }
};

function K(t) {
    const e = F("di:dependencies");
    let n = j(e, t);
    if (void 0 === n) {
        const r = t.inject;
        if (void 0 === r) {
            const e = G.getDesignParamtypes(t);
            const r = G.getAnnotationParamtypes(t);
            if (void 0 === e) if (void 0 === r) {
                const e = Object.getPrototypeOf(t);
                if (I(e) && e !== Function.prototype) n = x(K(e)); else n = [];
            } else n = x(r); else if (void 0 === r) n = x(e); else {
                n = x(e);
                let t = r.length;
                let s;
                let o = 0;
                for (;o < t; ++o) {
                    s = r[o];
                    if (void 0 !== s) n[o] = s;
                }
                const u = Object.keys(r);
                let l;
                o = 0;
                t = u.length;
                for (o = 0; o < t; ++o) {
                    l = u[o];
                    if (!i(l)) n[l] = r[l];
                }
            }
        } else n = x(r);
        k(e, n, t);
        U(t, e);
    }
    return n;
}

function _(t) {
    const e = F("di:paramtypes");
    let n = j(e, t);
    if (void 0 === n) {
        k(e, n = [], t);
        U(t, e);
    }
    return n;
}

const H = G.createInterface("IContainer");

const V = H;

function q(t) {
    return function(e) {
        const n = function(t, e, r) {
            G.inject(n)(t, e, r);
        };
        n.$isResolver = true;
        n.resolve = function(n, r) {
            return t(e, n, r);
        };
        return n;
    };
}

const J = G.inject;

function X(t) {
    return G.transient(t);
}

function Y(t) {
    return null == t ? X : X(t);
}

const Z = {
    scoped: false
};

function tt(t) {
    if (I(t)) return G.singleton(t);
    return function(e) {
        return G.singleton(e, t);
    };
}

function et(t) {
    return function(e, n) {
        n = !!n;
        const r = function(t, e, n) {
            G.inject(r)(t, e, n);
        };
        r.$isResolver = true;
        r.resolve = function(r, i) {
            return t(e, r, i, n);
        };
        return r;
    };
}

const nt = et(((t, e, n, r) => n.getAll(t, r)));

const rt = q(((t, e, n) => () => n.get(t)));

const it = q(((t, e, n) => {
    if (n.has(t, true)) return n.get(t); else return;
}));

function st(t, e, n) {
    G.inject(st)(t, e, n);
}

st.$isResolver = true;

st.resolve = () => {};

const ot = q(((t, e, n) => (...r) => e.getFactory(t).construct(n, r)));

const ut = q(((t, e, n) => {
    const r = ct(t, e, n);
    const i = new InstanceProvider(String(t), r);
    n.registerResolver(t, i, true);
    return r;
}));

const lt = q(((t, e, n) => ct(t, e, n)));

function ct(t, e, n) {
    return e.getFactory(t).construct(n);
}

var ft;

(function(t) {
    t[t["instance"] = 0] = "instance";
    t[t["singleton"] = 1] = "singleton";
    t[t["transient"] = 2] = "transient";
    t[t["callback"] = 3] = "callback";
    t[t["array"] = 4] = "array";
    t[t["alias"] = 5] = "alias";
})(ft || (ft = {}));

class Resolver {
    constructor(t, e, n) {
        this.key = t;
        this.strategy = e;
        this.state = n;
        this.resolving = false;
    }
    get $isResolver() {
        return true;
    }
    register(t, e) {
        return t.registerResolver(e || this.key, this);
    }
    resolve(t, e) {
        switch (this.strategy) {
          case 0:
            return this.state;

          case 1:
            if (this.resolving) throw new Error(`AUR0003:${this.state.name}`);
            this.resolving = true;
            this.state = t.getFactory(this.state).construct(e);
            this.strategy = 0;
            this.resolving = false;
            return this.state;

          case 2:
            {
                const n = t.getFactory(this.state);
                if (null === n) throw new Error(`AUR0004:${String(this.key)}`);
                return n.construct(e);
            }

          case 3:
            return this.state(t, e, this);

          case 4:
            return this.state[0].resolve(t, e);

          case 5:
            return e.get(this.state);

          default:
            throw new Error(`AUR0005:${this.strategy}`);
        }
    }
    getFactory(t) {
        var e, n, r;
        switch (this.strategy) {
          case 1:
          case 2:
            return t.getFactory(this.state);

          case 5:
            return null !== (r = null === (n = null === (e = t.getResolver(this.state)) || void 0 === e ? void 0 : e.getFactory) || void 0 === n ? void 0 : n.call(e, t)) && void 0 !== r ? r : null;

          default:
            return null;
        }
    }
}

function at(t) {
    return this.get(t);
}

function ht(t, e) {
    return e(t);
}

class Factory {
    constructor(t, e) {
        this.Type = t;
        this.dependencies = e;
        this.transformers = null;
    }
    construct(t, e) {
        let n;
        if (void 0 === e) n = new this.Type(...this.dependencies.map(at, t)); else n = new this.Type(...this.dependencies.map(at, t), ...e);
        if (null == this.transformers) return n;
        return this.transformers.reduce(ht, n);
    }
    registerTransformer(t) {
        var e;
        (null !== (e = this.transformers) && void 0 !== e ? e : this.transformers = []).push(t);
    }
}

const dt = {
    $isResolver: true,
    resolve(t, e) {
        return e;
    }
};

function vt(t) {
    return I(t.register);
}

function wt(t) {
    return vt(t) && "boolean" === typeof t.registerInRequestor;
}

function gt(t) {
    return wt(t) && t.registerInRequestor;
}

function mt(t) {
    return void 0 !== t.prototype;
}

function pt(t) {
    return M(t) && t.indexOf(":") > 0;
}

const yt = new Set([ "Array", "ArrayBuffer", "Boolean", "DataView", "Date", "Error", "EvalError", "Float32Array", "Float64Array", "Function", "Int8Array", "Int16Array", "Int32Array", "Map", "Number", "Object", "Promise", "RangeError", "ReferenceError", "RegExp", "Set", "SharedArrayBuffer", "String", "SyntaxError", "TypeError", "Uint8Array", "Uint8ClampedArray", "Uint16Array", "Uint32Array", "URIError", "WeakMap", "WeakSet" ]);

let Rt = 0;

class Container {
    constructor(t, e) {
        this.parent = t;
        this.config = e;
        this.id = ++Rt;
        this.t = 0;
        this.i = new Map;
        if (null === t) {
            this.root = this;
            this.u = new Map;
            this.h = new Map;
            this.res = Object.create(null);
        } else {
            this.root = t.root;
            this.u = new Map;
            this.h = t.h;
            if (e.inheritParentResources) this.res = Object.assign(Object.create(null), t.res, this.root.res); else this.res = Object.create(null);
        }
        this.u.set(H, dt);
    }
    get depth() {
        return null === this.parent ? 0 : this.parent.depth + 1;
    }
    register(...t) {
        if (100 === ++this.t) throw new Error(`AUR0006:${t.map(String)}`);
        let e;
        let r;
        let i;
        let s;
        let o;
        let u = 0;
        let l = t.length;
        for (;u < l; ++u) {
            e = t[u];
            if (!(0,_aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.isObject)(e)) continue;
            if (vt(e)) e.register(this); else if (S.resource.has(e)) {
                const t = S.resource.getAll(e);
                if (1 === t.length) t[0].register(this); else {
                    s = 0;
                    o = t.length;
                    while (o > s) {
                        t[s].register(this);
                        ++s;
                    }
                }
            } else if (mt(e)) $t.singleton(e, e).register(this); else {
                r = Object.keys(e);
                s = 0;
                o = r.length;
                for (;s < o; ++s) {
                    i = e[r[s]];
                    if (!(0,_aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.isObject)(i)) continue;
                    if (vt(i)) i.register(this); else this.register(i);
                }
            }
        }
        --this.t;
        return this;
    }
    registerResolver(t, e, n = false) {
        Et(t);
        const r = this.u;
        const i = r.get(t);
        if (null == i) {
            r.set(t, e);
            if (pt(t)) {
                if (void 0 !== this.res[t]) throw new Error(`AUR0007:${t}`);
                this.res[t] = e;
            }
        } else if (i instanceof Resolver && 4 === i.strategy) i.state.push(e); else r.set(t, new Resolver(t, 4, [ i, e ]));
        if (n) this.i.set(t, e);
        return e;
    }
    registerTransformer(t, e) {
        const n = this.getResolver(t);
        if (null == n) return false;
        if (n.getFactory) {
            const t = n.getFactory(this);
            if (null == t) return false;
            t.registerTransformer(e);
            return true;
        }
        return false;
    }
    getResolver(t, e = true) {
        Et(t);
        if (void 0 !== t.resolve) return t;
        let n = this;
        let r;
        while (null != n) {
            r = n.u.get(t);
            if (null == r) {
                if (null == n.parent) {
                    const r = gt(t) ? this : n;
                    return e ? this.R(t, r) : null;
                }
                n = n.parent;
            } else return r;
        }
        return null;
    }
    has(t, e = false) {
        return this.u.has(t) ? true : e && null != this.parent ? this.parent.has(t, true) : false;
    }
    get(t) {
        Et(t);
        if (t.$isResolver) return t.resolve(this, this);
        let e = this;
        let n;
        while (null != e) {
            n = e.u.get(t);
            if (null == n) {
                if (null == e.parent) {
                    const r = gt(t) ? this : e;
                    n = this.R(t, r);
                    return n.resolve(e, this);
                }
                e = e.parent;
            } else return n.resolve(e, this);
        }
        throw new Error(`AUR0008:${t}`);
    }
    getAll(t, e = false) {
        Et(t);
        const n = this;
        let r = n;
        let i;
        if (e) {
            let e = Ot;
            while (null != r) {
                i = r.u.get(t);
                if (null != i) e = e.concat(At(i, r, n));
                r = r.parent;
            }
            return e;
        } else while (null != r) {
            i = r.u.get(t);
            if (null == i) {
                r = r.parent;
                if (null == r) return Ot;
            } else return At(i, r, n);
        }
        return Ot;
    }
    invoke(t, e) {
        if ($(t)) throw jt(t);
        if (void 0 === e) return new t(...K(t).map(at, this)); else return new t(...K(t).map(at, this), ...e);
    }
    getFactory(t) {
        let e = this.h.get(t);
        if (void 0 === e) {
            if ($(t)) throw jt(t);
            this.h.set(t, e = new Factory(t, K(t)));
        }
        return e;
    }
    registerFactory(t, e) {
        this.h.set(t, e);
    }
    createChild(t) {
        if (void 0 === t && this.config.inheritParentResources) {
            if (this.config === ContainerConfiguration.DEFAULT) return new Container(this, this.config);
            return new Container(this, ContainerConfiguration.from({
                ...this.config,
                inheritParentResources: false
            }));
        }
        return new Container(this, ContainerConfiguration.from(null !== t && void 0 !== t ? t : this.config));
    }
    disposeResolvers() {
        const t = this.u;
        const e = this.i;
        let n;
        let r;
        for ([r, n] of e.entries()) {
            n.dispose();
            t.delete(r);
        }
        e.clear();
    }
    find(t, e) {
        const n = t.keyFrom(e);
        let r = this.res[n];
        if (void 0 === r) {
            r = this.root.res[n];
            if (void 0 === r) return null;
        }
        if (null === r) return null;
        if (I(r.getFactory)) {
            const e = r.getFactory(this);
            if (null === e || void 0 === e) return null;
            const n = j(t.name, e.Type);
            if (void 0 === n) return null;
            return n;
        }
        return null;
    }
    create(t, e) {
        var n, r;
        const i = t.keyFrom(e);
        let s = this.res[i];
        if (void 0 === s) {
            s = this.root.res[i];
            if (void 0 === s) return null;
            return null !== (n = s.resolve(this.root, this)) && void 0 !== n ? n : null;
        }
        return null !== (r = s.resolve(this, this)) && void 0 !== r ? r : null;
    }
    dispose() {
        if (this.i.size > 0) this.disposeResolvers();
        this.u.clear();
    }
    R(t, e) {
        if (!I(t)) throw new Error(`AUR0009:${t}`);
        if (yt.has(t.name)) throw new Error(`AUR0010:${t.name}`);
        if (vt(t)) {
            const n = t.register(e, t);
            if (!(n instanceof Object) || null == n.resolve) {
                const n = e.u.get(t);
                if (void 0 != n) return n;
                throw new Error(`AUR0011`);
            }
            return n;
        } else if (S.resource.has(t)) {
            const n = S.resource.getAll(t);
            if (1 === n.length) n[0].register(e); else {
                const t = n.length;
                for (let r = 0; r < t; ++r) n[r].register(e);
            }
            const r = e.u.get(t);
            if (void 0 != r) return r;
            throw new Error(`AUR0011`);
        } else if (t.$isInterface) throw new Error(`AUR0012:${t.friendlyName}`); else {
            const n = this.config.defaultResolver(t, e);
            e.u.set(t, n);
            return n;
        }
    }
}

class ParameterizedRegistry {
    constructor(t, e) {
        this.key = t;
        this.params = e;
    }
    register(t) {
        if (t.has(this.key, true)) {
            const e = t.get(this.key);
            e.register(t, ...this.params);
        } else t.register(...this.params.filter((t => "object" === typeof t)));
    }
}

const bt = new WeakMap;

function Ct(t) {
    return function(e, n, r) {
        let i = bt.get(e);
        if (void 0 === i) bt.set(e, i = new WeakMap);
        if (i.has(r)) return i.get(r);
        const s = t(e, n, r);
        i.set(r, s);
        return s;
    };
}

const $t = {
    instance(t, e) {
        return new Resolver(t, 0, e);
    },
    singleton(t, e) {
        return new Resolver(t, 1, e);
    },
    transient(t, e) {
        return new Resolver(t, 2, e);
    },
    callback(t, e) {
        return new Resolver(t, 3, e);
    },
    cachedCallback(t, e) {
        return new Resolver(t, 3, Ct(e));
    },
    aliasTo(t, e) {
        return new Resolver(e, 5, t);
    },
    defer(t, ...e) {
        return new ParameterizedRegistry(t, e);
    }
};

class InstanceProvider {
    constructor(t, e) {
        this.C = null;
        this.$ = t;
        if (void 0 !== e) this.C = e;
    }
    get friendlyName() {
        return this.$;
    }
    prepare(t) {
        this.C = t;
    }
    get $isResolver() {
        return true;
    }
    resolve() {
        if (null == this.C) throw new Error(`AUR0013:${this.$}`);
        return this.C;
    }
    dispose() {
        this.C = null;
    }
}

function Et(t) {
    if (null === t || void 0 === t) throw new Error(`AUR0014`);
}

function At(t, e, n) {
    if (t instanceof Resolver && 4 === t.strategy) {
        const r = t.state;
        let i = r.length;
        const s = new Array(i);
        while (i--) s[i] = r[i].resolve(e, n);
        return s;
    }
    return [ t.resolve(e, n) ];
}

function jt(t) {
    return new Error(`AUR0015:${t.name}`);
}

const Ot = Object.freeze([]);

const kt = Object.freeze({});

function It() {}

const Mt = G.createInterface("IPlatform");

/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */ function Tt(t, e, n, r) {
    var i = arguments.length, s = i < 3 ? e : null === r ? r = Object.getOwnPropertyDescriptor(e, n) : r, o;
    if ("object" === typeof Reflect && "function" === typeof Reflect.decorate) s = Reflect.decorate(t, e, n, r); else for (var u = t.length - 1; u >= 0; u--) if (o = t[u]) s = (i < 3 ? o(s) : i > 3 ? o(e, n, s) : o(e, n)) || s;
    return i > 3 && s && Object.defineProperty(e, n, s), s;
}

function Ft(t, e) {
    return function(n, r) {
        e(n, r, t);
    };
}

var Ut;

(function(t) {
    t[t["trace"] = 0] = "trace";
    t[t["debug"] = 1] = "debug";
    t[t["info"] = 2] = "info";
    t[t["warn"] = 3] = "warn";
    t[t["error"] = 4] = "error";
    t[t["fatal"] = 5] = "fatal";
    t[t["none"] = 6] = "none";
})(Ut || (Ut = {}));

var Lt;

(function(t) {
    t[t["noColors"] = 0] = "noColors";
    t[t["colors"] = 1] = "colors";
})(Lt || (Lt = {}));

const Pt = G.createInterface("ILogConfig", (t => t.instance(new LogConfig(0, 3))));

const Dt = G.createInterface("ISink");

const St = G.createInterface("ILogEventFactory", (t => t.singleton(_t)));

const Nt = G.createInterface("ILogger", (t => t.singleton(Vt)));

const Wt = G.createInterface("ILogScope");

const Bt = Object.freeze({
    key: F("logger-sink-handles"),
    define(t, e) {
        k(this.key, e.handles, t.prototype);
        return t;
    },
    getHandles(e) {
        return _aurelia_metadata__WEBPACK_IMPORTED_MODULE_0__.Metadata.get(this.key, e);
    }
});

function Qt(t) {
    return function(e) {
        return Bt.define(e, t);
    };
}

const xt = C({
    red(t) {
        return `[31m${t}[39m`;
    },
    green(t) {
        return `[32m${t}[39m`;
    },
    yellow(t) {
        return `[33m${t}[39m`;
    },
    blue(t) {
        return `[34m${t}[39m`;
    },
    magenta(t) {
        return `[35m${t}[39m`;
    },
    cyan(t) {
        return `[36m${t}[39m`;
    },
    white(t) {
        return `[37m${t}[39m`;
    },
    grey(t) {
        return `[90m${t}[39m`;
    }
});

class LogConfig {
    constructor(t, e) {
        this.colorOptions = t;
        this.level = e;
    }
}

const zt = function() {
    const t = [ C({
        TRC: "TRC",
        DBG: "DBG",
        INF: "INF",
        WRN: "WRN",
        ERR: "ERR",
        FTL: "FTL",
        QQQ: "???"
    }), C({
        TRC: xt.grey("TRC"),
        DBG: xt.grey("DBG"),
        INF: xt.white("INF"),
        WRN: xt.yellow("WRN"),
        ERR: xt.red("ERR"),
        FTL: xt.red("FTL"),
        QQQ: xt.grey("???")
    }) ];
    return function(e, n) {
        if (e <= 0) return t[n].TRC;
        if (e <= 1) return t[n].DBG;
        if (e <= 2) return t[n].INF;
        if (e <= 3) return t[n].WRN;
        if (e <= 4) return t[n].ERR;
        if (e <= 5) return t[n].FTL;
        return t[n].QQQ;
    };
}();

function Gt(t, e) {
    if (0 === e) return t.join(".");
    return t.map(xt.cyan).join(".");
}

function Kt(t, e) {
    if (0 === e) return new Date(t).toISOString();
    return xt.grey(new Date(t).toISOString());
}

class DefaultLogEvent {
    constructor(t, e, n, r, i, s) {
        this.severity = t;
        this.message = e;
        this.optionalParams = n;
        this.scope = r;
        this.colorOptions = i;
        this.timestamp = s;
    }
    toString() {
        const {severity: t, message: e, scope: n, colorOptions: r, timestamp: i} = this;
        if (0 === n.length) return `${Kt(i, r)} [${zt(t, r)}] ${e}`;
        return `${Kt(i, r)} [${zt(t, r)} ${Gt(n, r)}] ${e}`;
    }
}

let _t = class DefaultLogEventFactory {
    constructor(t) {
        this.config = t;
    }
    createLogEvent(t, e, n, r) {
        return new DefaultLogEvent(e, n, r, t.scope, this.config.colorOptions, Date.now());
    }
};

_t = Tt([ Ft(0, Pt) ], _t);

let Ht = class ConsoleSink {
    constructor(t) {
        const e = t.console;
        this.handleEvent = function t(n) {
            const r = n.optionalParams;
            if (void 0 === r || 0 === r.length) {
                const t = n.toString();
                switch (n.severity) {
                  case 0:
                  case 1:
                    return e.debug(t);

                  case 2:
                    return e.info(t);

                  case 3:
                    return e.warn(t);

                  case 4:
                  case 5:
                    return e.error(t);
                }
            } else {
                let t = n.toString();
                let i = 0;
                while (t.includes("%s")) t = t.replace("%s", String(r[i++]));
                switch (n.severity) {
                  case 0:
                  case 1:
                    return e.debug(t, ...r.slice(i));

                  case 2:
                    return e.info(t, ...r.slice(i));

                  case 3:
                    return e.warn(t, ...r.slice(i));

                  case 4:
                  case 5:
                    return e.error(t, ...r.slice(i));
                }
            }
        };
    }
    static register(t) {
        $t.singleton(Dt, ConsoleSink).register(t);
    }
};

Ht = Tt([ Ft(0, Mt) ], Ht);

let Vt = class DefaultLogger {
    constructor(t, e, n, r = [], i = null) {
        var s, o, u, l, c, f;
        this.config = t;
        this.factory = e;
        this.scope = r;
        this.scopedLoggers = Object.create(null);
        let a;
        let h;
        let d;
        let v;
        let w;
        let g;
        if (null === i) {
            this.root = this;
            this.parent = this;
            a = this.traceSinks = [];
            h = this.debugSinks = [];
            d = this.infoSinks = [];
            v = this.warnSinks = [];
            w = this.errorSinks = [];
            g = this.fatalSinks = [];
            for (const t of n) {
                const e = Bt.getHandles(t);
                if (null !== (s = null === e || void 0 === e ? void 0 : e.includes(0)) && void 0 !== s ? s : true) a.push(t);
                if (null !== (o = null === e || void 0 === e ? void 0 : e.includes(1)) && void 0 !== o ? o : true) h.push(t);
                if (null !== (u = null === e || void 0 === e ? void 0 : e.includes(2)) && void 0 !== u ? u : true) d.push(t);
                if (null !== (l = null === e || void 0 === e ? void 0 : e.includes(3)) && void 0 !== l ? l : true) v.push(t);
                if (null !== (c = null === e || void 0 === e ? void 0 : e.includes(4)) && void 0 !== c ? c : true) w.push(t);
                if (null !== (f = null === e || void 0 === e ? void 0 : e.includes(5)) && void 0 !== f ? f : true) g.push(t);
            }
        } else {
            this.root = i.root;
            this.parent = i;
            a = this.traceSinks = i.traceSinks;
            h = this.debugSinks = i.debugSinks;
            d = this.infoSinks = i.infoSinks;
            v = this.warnSinks = i.warnSinks;
            w = this.errorSinks = i.errorSinks;
            g = this.fatalSinks = i.fatalSinks;
        }
    }
    trace(t, ...e) {
        if (this.config.level <= 0) this.emit(this.traceSinks, 0, t, e);
    }
    debug(t, ...e) {
        if (this.config.level <= 1) this.emit(this.debugSinks, 1, t, e);
    }
    info(t, ...e) {
        if (this.config.level <= 2) this.emit(this.infoSinks, 2, t, e);
    }
    warn(t, ...e) {
        if (this.config.level <= 3) this.emit(this.warnSinks, 3, t, e);
    }
    error(t, ...e) {
        if (this.config.level <= 4) this.emit(this.errorSinks, 4, t, e);
    }
    fatal(t, ...e) {
        if (this.config.level <= 5) this.emit(this.fatalSinks, 5, t, e);
    }
    scopeTo(t) {
        const e = this.scopedLoggers;
        let n = e[t];
        if (void 0 === n) n = e[t] = new DefaultLogger(this.config, this.factory, void 0, this.scope.concat(t), this);
        return n;
    }
    emit(t, e, n, r) {
        const i = I(n) ? n() : n;
        const s = this.factory.createLogEvent(this, e, i, r);
        for (let e = 0, n = t.length; e < n; ++e) t[e].handleEvent(s);
    }
};

Tt([ m ], Vt.prototype, "trace", null);

Tt([ m ], Vt.prototype, "debug", null);

Tt([ m ], Vt.prototype, "info", null);

Tt([ m ], Vt.prototype, "warn", null);

Tt([ m ], Vt.prototype, "error", null);

Tt([ m ], Vt.prototype, "fatal", null);

Vt = Tt([ Ft(0, Pt), Ft(1, St), Ft(2, nt(Dt)), Ft(3, it(Wt)), Ft(4, st) ], Vt);

const qt = C({
    create({level: t = 3, colorOptions: e = 0, sinks: n = []} = {}) {
        return C({
            register(r) {
                r.register($t.instance(Pt, new LogConfig(e, t)));
                for (const t of n) if (I(t)) r.register($t.singleton(Dt, t)); else r.register(t);
                return r;
            }
        });
    }
});

const Jt = G.createInterface((t => t.singleton(ModuleLoader)));

function Xt(t) {
    return t;
}

class ModuleTransformer {
    constructor(t) {
        this.$transform = t;
        this.A = new Map;
        this.j = new Map;
    }
    transform(t) {
        if (t instanceof Promise) return this.O(t); else if ("object" === typeof t && null !== t) return this.I(t); else throw new Error(`Invalid input: ${String(t)}. Expected Promise or Object.`);
    }
    O(t) {
        if (this.A.has(t)) return this.A.get(t);
        const e = t.then((t => this.I(t)));
        this.A.set(t, e);
        void e.then((e => {
            this.A.set(t, e);
        }));
        return e;
    }
    I(t) {
        if (this.j.has(t)) return this.j.get(t);
        const e = this.$transform(this.M(t));
        this.j.set(t, e);
        if (e instanceof Promise) void e.then((e => {
            this.j.set(t, e);
        }));
        return e;
    }
    M(t) {
        let e;
        let n;
        let r;
        let i;
        const s = [];
        for (const o in t) {
            switch (typeof (e = t[o])) {
              case "object":
                if (null === e) continue;
                n = I(e.register);
                r = false;
                i = Ot;
                break;

              case "function":
                n = I(e.register);
                r = void 0 !== e.prototype;
                i = S.resource.getAll(e);
                break;

              default:
                continue;
            }
            s.push(new ModuleItem(o, e, n, r, i));
        }
        return new AnalyzedModule(t, s);
    }
}

class ModuleLoader {
    constructor() {
        this.transformers = new Map;
    }
    load(t, e = Xt) {
        const n = this.transformers;
        let r = n.get(e);
        if (void 0 === r) n.set(e, r = new ModuleTransformer(e));
        return r.transform(t);
    }
    dispose() {
        this.transformers.clear();
    }
}

class AnalyzedModule {
    constructor(t, e) {
        this.raw = t;
        this.items = e;
    }
}

class ModuleItem {
    constructor(t, e, n, r, i) {
        this.key = t;
        this.value = e;
        this.isRegistry = n;
        this.isConstructable = r;
        this.definitions = i;
    }
}

class Handler {
    constructor(t, e) {
        this.messageType = t;
        this.callback = e;
    }
    handle(t) {
        if (t instanceof this.messageType) this.callback.call(null, t);
    }
}

const Yt = G.createInterface("IEventAggregator", (t => t.singleton(EventAggregator)));

class EventAggregator {
    constructor() {
        this.eventLookup = {};
        this.messageHandlers = [];
    }
    publish(t, e) {
        if (!t) throw new Error(`Invalid channel name or instance: ${t}.`);
        if (M(t)) {
            let n = this.eventLookup[t];
            if (void 0 !== n) {
                n = n.slice();
                let r = n.length;
                while (r-- > 0) n[r](e, t);
            }
        } else {
            const e = this.messageHandlers.slice();
            let n = e.length;
            while (n-- > 0) e[n].handle(t);
        }
    }
    subscribe(t, e) {
        if (!t) throw new Error(`Invalid channel name or type: ${t}.`);
        let n;
        let r;
        if (M(t)) {
            if (void 0 === this.eventLookup[t]) this.eventLookup[t] = [];
            n = e;
            r = this.eventLookup[t];
        } else {
            n = new Handler(t, e);
            r = this.messageHandlers;
        }
        r.push(n);
        return {
            dispose() {
                const t = r.indexOf(n);
                if (-1 !== t) r.splice(t, 1);
            }
        };
    }
    subscribeOnce(t, e) {
        const n = this.subscribe(t, (function(t, r) {
            n.dispose();
            e(t, r);
        }));
        return n;
    }
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/@aurelia/metadata/dist/esm/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@aurelia/metadata/dist/esm/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Metadata": () => /* binding */ A,
/* harmony export */   "applyMetadataPolyfill": () => /* binding */ S,
/* harmony export */   "isNullOrUndefined": () => /* binding */ e,
/* harmony export */   "isObject": () => /* binding */ t,
/* harmony export */   "metadata": () => /* binding */ g
/* harmony export */ });
function t(t) {
    return "object" === typeof t && null !== t || "function" === typeof t;
}

function e(t) {
    return null === t || void 0 === t;
}

const n = new WeakMap;

function r(t, e, n, r, a) {
    return new TypeError(`${t}(${e.map(String).join(",")}) - Expected '${n}' to be of type ${a}, but got: ${Object.prototype.toString.call(r)} (${String(r)})`);
}

function a(t) {
    switch (typeof t) {
      case "undefined":
      case "string":
      case "symbol":
        return t;

      default:
        return `${t}`;
    }
}

function o(t) {
    switch (typeof t) {
      case "string":
      case "symbol":
        return t;

      default:
        return `${t}`;
    }
}

function i(t) {
    switch (typeof t) {
      case "undefined":
      case "string":
      case "symbol":
        return t;

      default:
        throw new TypeError(`Invalid metadata propertyKey: ${t}.`);
    }
}

function u(t, e, r) {
    let a = n.get(t);
    if (void 0 === a) {
        if (!r) return;
        a = new Map;
        n.set(t, a);
    }
    let o = a.get(e);
    if (void 0 === o) {
        if (!r) return;
        o = new Map;
        a.set(e, o);
    }
    return o;
}

function c(t, e, n) {
    const r = u(e, n, false);
    if (void 0 === r) return false;
    return r.has(t);
}

function f(t, e, n) {
    if (c(t, e, n)) return true;
    const r = Object.getPrototypeOf(e);
    if (null !== r) return f(t, r, n);
    return false;
}

function s(t, e, n) {
    const r = u(e, n, false);
    if (void 0 === r) return;
    return r.get(t);
}

function l(t, e, n) {
    if (c(t, e, n)) return s(t, e, n);
    const r = Object.getPrototypeOf(e);
    if (null !== r) return l(t, r, n);
    return;
}

function d(t, e, n, r) {
    const a = u(n, r, true);
    a.set(t, e);
}

function w(t, e) {
    const n = [];
    const r = u(t, e, false);
    if (void 0 === r) return n;
    const a = r.keys();
    let o = 0;
    for (const t of a) {
        n[o] = t;
        ++o;
    }
    return n;
}

function y(t, e) {
    const n = w(t, e);
    const r = Object.getPrototypeOf(t);
    if (null === r) return n;
    const a = y(r, e);
    const o = n.length;
    if (0 === o) return a;
    const i = a.length;
    if (0 === i) return n;
    const u = new Set;
    const c = [];
    let f = 0;
    let s;
    for (let t = 0; t < o; ++t) {
        s = n[t];
        if (!u.has(s)) {
            u.add(s);
            c[f] = s;
            ++f;
        }
    }
    for (let t = 0; t < i; ++t) {
        s = a[t];
        if (!u.has(s)) {
            u.add(s);
            c[f] = s;
            ++f;
        }
    }
    return c;
}

function h(t, e, n) {
    const r = u(t, n, false);
    if (void 0 === r) return false;
    return r.delete(e);
}

function g(e, n) {
    function a(a, o) {
        if (!t(a)) throw r("@metadata", [ e, n, a, o ], "target", a, "Object or Function");
        d(e, n, a, i(o));
    }
    return a;
}

function p(n, a, i, u) {
    if (void 0 !== i) {
        if (!Array.isArray(n)) throw r("Metadata.decorate", [ n, a, i, u ], "decorators", n, "Array");
        if (!t(a)) throw r("Metadata.decorate", [ n, a, i, u ], "target", a, "Object or Function");
        if (!t(u) && !e(u)) throw r("Metadata.decorate", [ n, a, i, u ], "attributes", u, "Object, Function, null, or undefined");
        if (null === u) u = void 0;
        i = o(i);
        return b(n, a, i, u);
    } else {
        if (!Array.isArray(n)) throw r("Metadata.decorate", [ n, a, i, u ], "decorators", n, "Array");
        if ("function" !== typeof a) throw r("Metadata.decorate", [ n, a, i, u ], "target", a, "Function");
        return M(n, a);
    }
}

function M(t, n) {
    for (let a = t.length - 1; a >= 0; --a) {
        const o = t[a];
        const i = o(n);
        if (!e(i)) {
            if ("function" !== typeof i) throw r("DecorateConstructor", [ t, n ], "decorated", i, "Function, null, or undefined");
            n = i;
        }
    }
    return n;
}

function b(n, a, o, i) {
    for (let u = n.length - 1; u >= 0; --u) {
        const c = n[u];
        const f = c(a, o, i);
        if (!e(f)) {
            if (!t(f)) throw r("DecorateProperty", [ n, a, o, i ], "decorated", f, "Object, Function, null, or undefined");
            i = f;
        }
    }
    return i;
}

function O(e, n, o, i) {
    if (!t(o)) throw r("Metadata.define", [ e, n, o, i ], "target", o, "Object or Function");
    return d(e, n, o, a(i));
}

function m(e, n, o) {
    if (!t(n)) throw r("Metadata.has", [ e, n, o ], "target", n, "Object or Function");
    return f(e, n, a(o));
}

function j(e, n, o) {
    if (!t(n)) throw r("Metadata.hasOwn", [ e, n, o ], "target", n, "Object or Function");
    return c(e, n, a(o));
}

function v(e, n, o) {
    if (!t(n)) throw r("Metadata.get", [ e, n, o ], "target", n, "Object or Function");
    return l(e, n, a(o));
}

function $(e, n, o) {
    if (!t(n)) throw r("Metadata.getOwn", [ e, n, o ], "target", n, "Object or Function");
    return s(e, n, a(o));
}

function F(e, n) {
    if (!t(e)) throw r("Metadata.getKeys", [ e, n ], "target", e, "Object or Function");
    return y(e, a(n));
}

function K(e, n) {
    if (!t(e)) throw r("Metadata.getOwnKeys", [ e, n ], "target", e, "Object or Function");
    return w(e, a(n));
}

function E(e, n, o) {
    if (!t(n)) throw r("Metadata.delete", [ e, n, o ], "target", n, "Object or Function");
    return h(n, e, a(o));
}

const A = {
    define: O,
    has: m,
    hasOwn: j,
    get: v,
    getOwn: $,
    getKeys: F,
    getOwnKeys: K,
    delete: E
};

function k(t, e, n, r, a) {
    if (!Reflect.defineProperty(t, e, {
        writable: r,
        enumerable: false,
        configurable: a,
        value: n
    })) throw new Error(`Unable to apply metadata polyfill: could not add property '${e}' to the global Reflect object`);
}

const R = "[[$au]]";

function C(t) {
    return R in t;
}

function I(t, e, r) {
    k(t, R, n, e, r);
    k(t, "metadata", g, e, r);
    k(t, "decorate", p, e, r);
    k(t, "defineMetadata", O, e, r);
    k(t, "hasMetadata", m, e, r);
    k(t, "hasOwnMetadata", j, e, r);
    k(t, "getMetadata", v, e, r);
    k(t, "getOwnMetadata", $, e, r);
    k(t, "getMetadataKeys", F, e, r);
    k(t, "getOwnMetadataKeys", K, e, r);
    k(t, "deleteMetadata", E, e, r);
}

function S(t, e = true, r = false, a = true, o = true) {
    if (C(t)) {
        if (t[R] === n) return;
        throw new Error(`Conflicting @aurelia/metadata module import detected. Please make sure you have the same version of all Aurelia packages in your dependency tree.`);
    }
    const i = [ "metadata", "decorate", "defineMetadata", "hasMetadata", "hasOwnMetadata", "getMetadata", "getOwnMetadata", "getMetadataKeys", "getOwnMetadataKeys", "deleteMetadata" ].filter((function(t) {
        return t in Reflect;
    }));
    if (i.length > 0) {
        if (e) {
            const t = i.map((function(t) {
                const e = `${Reflect[t].toString().slice(0, 100)}...`;
                return `${t}:\n${e}`;
            })).join("\n\n");
            throw new Error(`Conflicting reflect.metadata polyfill found. If you have 'reflect-metadata' or any other reflect polyfill imported, please remove it, if not (or if you must use a specific polyfill) please file an issue at https://github.com/aurelia/aurelia/issues so that we can look into compatibility options for this scenario. Implementation summary:\n\n${t}`);
        } else if (r) I(t, a, o);
    } else I(t, a, o);
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/@aurelia/platform-browser/dist/esm/index.js":
/*!******************************************************************!*\
  !*** ./node_modules/@aurelia/platform-browser/dist/esm/index.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "BrowserPlatform": () => /* binding */ BrowserPlatform
/* harmony export */ });
/* harmony import */ var _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/platform */ "./node_modules/@aurelia/platform/dist/esm/index.js");


const s = new Map;

function e(t) {
    return function i() {
        throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`);
    };
}

class BrowserPlatform extends _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.Platform {
    constructor(t, s = {}) {
        super(t, s);
        this.t = false;
        this.i = -1;
        this.h = false;
        this.u = -1;
        ("Node,Element,HTMLElement,CustomEvent,CSSStyleSheet,ShadowRoot,MutationObserver," + "window,document,location,history,navigator,customElements").split(",").forEach((i => {
            this[i] = i in s ? s[i] : t[i];
        }));
        "fetch,requestAnimationFrame,cancelAnimationFrame".split(",").forEach((i => {
            var h, r;
            this[i] = i in s ? s[i] : null !== (r = null === (h = t[i]) || void 0 === h ? void 0 : h.bind(t)) && void 0 !== r ? r : e(i);
        }));
        this.flushDomRead = this.flushDomRead.bind(this);
        this.flushDomWrite = this.flushDomWrite.bind(this);
        this.domReadQueue = new _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.TaskQueue(this, this.requestDomRead.bind(this), this.cancelDomRead.bind(this));
        this.domWriteQueue = new _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.TaskQueue(this, this.requestDomWrite.bind(this), this.cancelDomWrite.bind(this));
    }
    static getOrCreate(t, i = {}) {
        let e = s.get(t);
        if (void 0 === e) s.set(t, e = new BrowserPlatform(t, i));
        return e;
    }
    static set(t, i) {
        s.set(t, i);
    }
    requestDomRead() {
        this.t = true;
        if (-1 === this.u) this.u = this.requestAnimationFrame(this.flushDomWrite);
    }
    cancelDomRead() {
        this.t = false;
        if (this.i > -1) {
            this.clearTimeout(this.i);
            this.i = -1;
        }
        if (false === this.h && this.u > -1) {
            this.cancelAnimationFrame(this.u);
            this.u = -1;
        }
    }
    flushDomRead() {
        this.i = -1;
        if (true === this.t) {
            this.t = false;
            this.domReadQueue.flush();
        }
    }
    requestDomWrite() {
        this.h = true;
        if (-1 === this.u) this.u = this.requestAnimationFrame(this.flushDomWrite);
    }
    cancelDomWrite() {
        this.h = false;
        if (this.u > -1 && (false === this.t || this.i > -1)) {
            this.cancelAnimationFrame(this.u);
            this.u = -1;
        }
    }
    flushDomWrite() {
        this.u = -1;
        if (true === this.h) {
            this.h = false;
            this.domWriteQueue.flush();
        }
        if (true === this.t && -1 === this.i) this.i = this.setTimeout(this.flushDomRead, 0);
    }
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/@aurelia/platform/dist/esm/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@aurelia/platform/dist/esm/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Platform": () => /* binding */ Platform,
/* harmony export */   "Task": () => /* binding */ Task,
/* harmony export */   "TaskAbortError": () => /* binding */ TaskAbortError,
/* harmony export */   "TaskQueue": () => /* binding */ TaskQueue,
/* harmony export */   "TaskQueuePriority": () => /* binding */ n,
/* harmony export */   "TaskStatus": () => /* binding */ h
/* harmony export */ });
const t = new Map;

function s(t) {
    return function s() {
        throw new Error(`The PLATFORM did not receive a valid reference to the global function '${t}'.`);
    };
}

class Platform {
    constructor(t, i = {}) {
        var e, h, r, n, o, a, l, c, u, f, d, v, w;
        this.macroTaskRequested = false;
        this.macroTaskHandle = -1;
        this.globalThis = t;
        this.decodeURI = "decodeURI" in i ? i.decodeURI : t.decodeURI;
        this.decodeURIComponent = "decodeURIComponent" in i ? i.decodeURIComponent : t.decodeURIComponent;
        this.encodeURI = "encodeURI" in i ? i.encodeURI : t.encodeURI;
        this.encodeURIComponent = "encodeURIComponent" in i ? i.encodeURIComponent : t.encodeURIComponent;
        this.Date = "Date" in i ? i.Date : t.Date;
        this.Reflect = "Reflect" in i ? i.Reflect : t.Reflect;
        this.clearInterval = "clearInterval" in i ? i.clearInterval : null !== (h = null === (e = t.clearInterval) || void 0 === e ? void 0 : e.bind(t)) && void 0 !== h ? h : s("clearInterval");
        this.clearTimeout = "clearTimeout" in i ? i.clearTimeout : null !== (n = null === (r = t.clearTimeout) || void 0 === r ? void 0 : r.bind(t)) && void 0 !== n ? n : s("clearTimeout");
        this.queueMicrotask = "queueMicrotask" in i ? i.queueMicrotask : null !== (a = null === (o = t.queueMicrotask) || void 0 === o ? void 0 : o.bind(t)) && void 0 !== a ? a : s("queueMicrotask");
        this.setInterval = "setInterval" in i ? i.setInterval : null !== (c = null === (l = t.setInterval) || void 0 === l ? void 0 : l.bind(t)) && void 0 !== c ? c : s("setInterval");
        this.setTimeout = "setTimeout" in i ? i.setTimeout : null !== (f = null === (u = t.setTimeout) || void 0 === u ? void 0 : u.bind(t)) && void 0 !== f ? f : s("setTimeout");
        this.console = "console" in i ? i.console : t.console;
        this.performanceNow = "performanceNow" in i ? i.performanceNow : null !== (w = null === (v = null === (d = t.performance) || void 0 === d ? void 0 : d.now) || void 0 === v ? void 0 : v.bind(t.performance)) && void 0 !== w ? w : s("performance.now");
        this.flushMacroTask = this.flushMacroTask.bind(this);
        this.taskQueue = new TaskQueue(this, this.requestMacroTask.bind(this), this.cancelMacroTask.bind(this));
    }
    static getOrCreate(s, i = {}) {
        let e = t.get(s);
        if (void 0 === e) t.set(s, e = new Platform(s, i));
        return e;
    }
    static set(s, i) {
        t.set(s, i);
    }
    requestMacroTask() {
        this.macroTaskRequested = true;
        if (-1 === this.macroTaskHandle) this.macroTaskHandle = this.setTimeout(this.flushMacroTask, 0);
    }
    cancelMacroTask() {
        this.macroTaskRequested = false;
        if (this.macroTaskHandle > -1) {
            this.clearTimeout(this.macroTaskHandle);
            this.macroTaskHandle = -1;
        }
    }
    flushMacroTask() {
        this.macroTaskHandle = -1;
        if (true === this.macroTaskRequested) {
            this.macroTaskRequested = false;
            this.taskQueue.flush();
        }
    }
}

function i(t) {
    return t.persistent;
}

class TaskQueue {
    constructor(t, s, i) {
        this.platform = t;
        this.$request = s;
        this.$cancel = i;
        this.t = void 0;
        this.i = 0;
        this.processing = [];
        this.pending = [];
        this.delayed = [];
        this.flushRequested = false;
        this.h = void 0;
        this.taskPool = [];
        this.u = 0;
        this.T = 0;
        this.$ = 0;
        this.I = () => {
            if (!this.flushRequested) {
                this.flushRequested = true;
                this.T = this.platform.performanceNow();
                this.$request();
            }
        };
        this.M = new Tracer(t.console);
    }
    get isEmpty() {
        return 0 === this.i && 0 === this.processing.length && 0 === this.pending.length && 0 === this.delayed.length;
    }
    get P() {
        return 0 === this.i && this.processing.every(i) && this.pending.every(i) && this.delayed.every(i);
    }
    flush(t = this.platform.performanceNow()) {
        this.flushRequested = false;
        this.$ = t;
        if (void 0 === this.t) {
            if (this.pending.length > 0) {
                this.processing.push(...this.pending);
                this.pending.length = 0;
            }
            if (this.delayed.length > 0) {
                let s = -1;
                while (++s < this.delayed.length && this.delayed[s].queueTime <= t) ;
                this.processing.push(...this.delayed.splice(0, s));
            }
            let s;
            while (this.processing.length > 0) {
                (s = this.processing.shift()).run();
                if (1 === s.status) if (true === s.suspend) {
                    this.t = s;
                    this.I();
                    return;
                } else ++this.i;
            }
            if (this.pending.length > 0) {
                this.processing.push(...this.pending);
                this.pending.length = 0;
            }
            if (this.delayed.length > 0) {
                let s = -1;
                while (++s < this.delayed.length && this.delayed[s].queueTime <= t) ;
                this.processing.push(...this.delayed.splice(0, s));
            }
            if (this.processing.length > 0 || this.delayed.length > 0 || this.i > 0) this.I();
            if (void 0 !== this.h && this.P) {
                const t = this.h;
                this.h = void 0;
                t.resolve();
            }
        } else this.I();
    }
    cancel() {
        if (this.flushRequested) {
            this.$cancel();
            this.flushRequested = false;
        }
    }
    async yield() {
        if (this.isEmpty) ; else {
            if (void 0 === this.h) this.h = u();
            await this.h;
        }
    }
    queueTask(t, s) {
        const {delay: i, preempt: e, persistent: h, reusable: r, suspend: n} = {
            ...o,
            ...s
        };
        if (e) {
            if (i > 0) throw new Error(`Invalid arguments: preempt cannot be combined with a greater-than-zero delay`);
            if (h) throw new Error(`Invalid arguments: preempt cannot be combined with persistent`);
        }
        if (0 === this.processing.length) this.I();
        const a = this.platform.performanceNow();
        let l;
        if (r) {
            const s = this.taskPool;
            const o = this.u - 1;
            if (o >= 0) {
                l = s[o];
                s[o] = void 0;
                this.u = o;
                l.reuse(a, i, e, h, n, t);
            } else l = new Task(this.M, this, a, a + i, e, h, n, r, t);
        } else l = new Task(this.M, this, a, a + i, e, h, n, r, t);
        if (e) this.processing[this.processing.length] = l; else if (0 === i) this.pending[this.pending.length] = l; else this.delayed[this.delayed.length] = l;
        return l;
    }
    remove(t) {
        let s = this.processing.indexOf(t);
        if (s > -1) {
            this.processing.splice(s, 1);
            return;
        }
        s = this.pending.indexOf(t);
        if (s > -1) {
            this.pending.splice(s, 1);
            return;
        }
        s = this.delayed.indexOf(t);
        if (s > -1) {
            this.delayed.splice(s, 1);
            return;
        }
        throw new Error(`Task #${t.id} could not be found`);
    }
    returnToPool(t) {
        this.taskPool[this.u++] = t;
    }
    resetPersistentTask(t) {
        t.reset(this.platform.performanceNow());
        if (t.createdTime === t.queueTime) this.pending[this.pending.length] = t; else this.delayed[this.delayed.length] = t;
    }
    completeAsyncTask(t) {
        var s;
        if (true === t.suspend) {
            if (this.t !== t) throw new Error(`Async task completion mismatch: suspenderTask=${null === (s = this.t) || void 0 === s ? void 0 : s.id}, task=${t.id}`);
            this.t = void 0;
        } else --this.i;
        if (void 0 !== this.h && this.P) {
            const t = this.h;
            this.h = void 0;
            t.resolve();
        }
        if (this.isEmpty) this.cancel();
    }
}

class TaskAbortError extends Error {
    constructor(t) {
        super("Task was canceled.");
        this.task = t;
    }
}

let e = 0;

var h;

(function(t) {
    t[t["pending"] = 0] = "pending";
    t[t["running"] = 1] = "running";
    t[t["completed"] = 2] = "completed";
    t[t["canceled"] = 3] = "canceled";
})(h || (h = {}));

class Task {
    constructor(t, s, i, h, r, n, o, a, l) {
        this.taskQueue = s;
        this.createdTime = i;
        this.queueTime = h;
        this.preempt = r;
        this.persistent = n;
        this.suspend = o;
        this.reusable = a;
        this.callback = l;
        this.id = ++e;
        this.R = void 0;
        this.A = void 0;
        this.q = void 0;
        this.C = 0;
        this.M = t;
    }
    get result() {
        const t = this.q;
        if (void 0 === t) switch (this.C) {
          case 0:
            {
                const t = this.q = u();
                this.R = t.resolve;
                this.A = t.reject;
                return t;
            }

          case 1:
            throw new Error("Trying to await task from within task will cause a deadlock.");

          case 2:
            return this.q = Promise.resolve();

          case 3:
            return this.q = Promise.reject(new TaskAbortError(this));
        }
        return t;
    }
    get status() {
        return this.C;
    }
    run(t = this.taskQueue.platform.performanceNow()) {
        if (0 !== this.C) throw new Error(`Cannot run task in ${this.C} state`);
        const {persistent: s, reusable: i, taskQueue: e, callback: h, R: r, A: n, createdTime: o} = this;
        let a;
        this.C = 1;
        try {
            a = h(t - o);
            if (a instanceof Promise) a.then((t => {
                if (this.persistent) e["resetPersistentTask"](this); else {
                    if (s) this.C = 3; else this.C = 2;
                    this.dispose();
                }
                e["completeAsyncTask"](this);
                if (false) {}
                if (void 0 !== r) r(t);
                if (!this.persistent && i) e["returnToPool"](this);
            })).catch((t => {
                if (!this.persistent) this.dispose();
                e["completeAsyncTask"](this);
                if (false) {}
                if (void 0 !== n) n(t); else throw t;
            })); else {
                if (this.persistent) e["resetPersistentTask"](this); else {
                    if (s) this.C = 3; else this.C = 2;
                    this.dispose();
                }
                if (false) {}
                if (void 0 !== r) r(a);
                if (!this.persistent && i) e["returnToPool"](this);
            }
        } catch (t) {
            if (!this.persistent) this.dispose();
            if (void 0 !== n) n(t); else throw t;
        }
    }
    cancel() {
        if (0 === this.C) {
            const t = this.taskQueue;
            const s = this.reusable;
            const i = this.A;
            t.remove(this);
            if (t.isEmpty) t.cancel();
            this.C = 3;
            this.dispose();
            if (s) t["returnToPool"](this);
            if (void 0 !== i) i(new TaskAbortError(this));
            return true;
        } else if (1 === this.C && this.persistent) {
            this.persistent = false;
            return true;
        }
        return false;
    }
    reset(t) {
        const s = this.queueTime - this.createdTime;
        this.createdTime = t;
        this.queueTime = t + s;
        this.C = 0;
        this.R = void 0;
        this.A = void 0;
        this.q = void 0;
    }
    reuse(t, s, i, e, h, r) {
        this.createdTime = t;
        this.queueTime = t + s;
        this.preempt = i;
        this.persistent = e;
        this.suspend = h;
        this.callback = r;
        this.C = 0;
    }
    dispose() {
        this.callback = void 0;
        this.R = void 0;
        this.A = void 0;
        this.q = void 0;
    }
}

function r(t) {
    switch (t) {
      case 0:
        return "pending";

      case 1:
        return "running";

      case 3:
        return "canceled";

      case 2:
        return "completed";
    }
}

class Tracer {
    constructor(t) {
        this.console = t;
        this.enabled = false;
        this.depth = 0;
    }
    enter(t, s) {
        this.log(`${"  ".repeat(this.depth++)}> `, t, s);
    }
    leave(t, s) {
        this.log(`${"  ".repeat(--this.depth)}< `, t, s);
    }
    trace(t, s) {
        this.log(`${"  ".repeat(this.depth)}- `, t, s);
    }
    log(t, s, i) {
        if (s instanceof TaskQueue) {
            const e = s["processing"].length;
            const h = s["pending"].length;
            const r = s["delayed"].length;
            const n = s["flushRequested"];
            const o = !!s.t;
            const a = `processing=${e} pending=${h} delayed=${r} flushReq=${n} susTask=${o}`;
            this.console.log(`${t}[Q.${i}] ${a}`);
        } else {
            const e = s["id"];
            const h = Math.round(10 * s["createdTime"]) / 10;
            const n = Math.round(10 * s["queueTime"]) / 10;
            const o = s["preempt"];
            const a = s["reusable"];
            const l = s["persistent"];
            const c = s["suspend"];
            const u = r(s["C"]);
            const f = `id=${e} created=${h} queue=${n} preempt=${o} persistent=${l} reusable=${a} status=${u} suspend=${c}`;
            this.console.log(`${t}[T.${i}] ${f}`);
        }
    }
}

var n;

(function(t) {
    t[t["render"] = 0] = "render";
    t[t["macroTask"] = 1] = "macroTask";
    t[t["postRender"] = 2] = "postRender";
})(n || (n = {}));

const o = {
    delay: 0,
    preempt: false,
    persistent: false,
    reusable: true,
    suspend: false
};

let a;

let l;

function c(t, s) {
    a = t;
    l = s;
}

function u() {
    const t = new Promise(c);
    t.resolve = a;
    t.reject = l;
    return t;
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/@aurelia/runtime-html/dist/esm/index.js":
/*!**************************************************************!*\
  !*** ./node_modules/@aurelia/runtime-html/dist/esm/index.js ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Platform": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.Platform,
/* harmony export */   "Task": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.Task,
/* harmony export */   "TaskAbortError": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.TaskAbortError,
/* harmony export */   "TaskQueue": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.TaskQueue,
/* harmony export */   "TaskQueuePriority": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.TaskQueuePriority,
/* harmony export */   "TaskStatus": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__.TaskStatus,
/* harmony export */   "BrowserPlatform": () => /* reexport safe */ _aurelia_platform_browser__WEBPACK_IMPORTED_MODULE_1__.BrowserPlatform,
/* harmony export */   "Access": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Access,
/* harmony export */   "AccessKeyedExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AccessKeyedExpression,
/* harmony export */   "AccessMemberExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AccessMemberExpression,
/* harmony export */   "AccessScopeExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AccessScopeExpression,
/* harmony export */   "AccessThisExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AccessThisExpression,
/* harmony export */   "AccessorType": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AccessorType,
/* harmony export */   "ArrayBindingPattern": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ArrayBindingPattern,
/* harmony export */   "ArrayIndexObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ArrayIndexObserver,
/* harmony export */   "ArrayLiteralExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ArrayLiteralExpression,
/* harmony export */   "ArrayObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ArrayObserver,
/* harmony export */   "AssignExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AssignExpression,
/* harmony export */   "BinaryExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BinaryExpression,
/* harmony export */   "BindingBehavior": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehavior,
/* harmony export */   "BindingBehaviorDefinition": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehaviorDefinition,
/* harmony export */   "BindingBehaviorExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehaviorExpression,
/* harmony export */   "BindingBehaviorFactory": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehaviorFactory,
/* harmony export */   "BindingBehaviorStrategy": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehaviorStrategy,
/* harmony export */   "BindingContext": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingContext,
/* harmony export */   "BindingIdentifier": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingIdentifier,
/* harmony export */   "BindingInterceptor": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingInterceptor,
/* harmony export */   "BindingMediator": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMediator,
/* harmony export */   "BindingMode": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode,
/* harmony export */   "CallFunctionExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CallFunctionExpression,
/* harmony export */   "CallMemberExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CallMemberExpression,
/* harmony export */   "CallScopeExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CallScopeExpression,
/* harmony export */   "Char": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Char,
/* harmony export */   "CollectionKind": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CollectionKind,
/* harmony export */   "CollectionLengthObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CollectionLengthObserver,
/* harmony export */   "CollectionSizeObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CollectionSizeObserver,
/* harmony export */   "ComputedObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ComputedObserver,
/* harmony export */   "ConditionalExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ConditionalExpression,
/* harmony export */   "CustomExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.CustomExpression,
/* harmony export */   "DelegationStrategy": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy,
/* harmony export */   "DirtyCheckProperty": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DirtyCheckProperty,
/* harmony export */   "DirtyCheckSettings": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DirtyCheckSettings,
/* harmony export */   "ExpressionKind": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ExpressionKind,
/* harmony export */   "ExpressionType": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ExpressionType,
/* harmony export */   "ForOfStatement": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ForOfStatement,
/* harmony export */   "HtmlLiteralExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.HtmlLiteralExpression,
/* harmony export */   "IDirtyChecker": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IDirtyChecker,
/* harmony export */   "IExpressionParser": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser,
/* harmony export */   "INodeObserverLocator": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.INodeObserverLocator,
/* harmony export */   "IObserverLocator": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator,
/* harmony export */   "ISignaler": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ISignaler,
/* harmony export */   "Interpolation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Interpolation,
/* harmony export */   "LifecycleFlags": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.LifecycleFlags,
/* harmony export */   "MapObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.MapObserver,
/* harmony export */   "ObjectBindingPattern": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ObjectBindingPattern,
/* harmony export */   "ObjectLiteralExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ObjectLiteralExpression,
/* harmony export */   "ObserverLocator": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ObserverLocator,
/* harmony export */   "OverrideContext": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.OverrideContext,
/* harmony export */   "Precedence": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Precedence,
/* harmony export */   "PrimitiveLiteralExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.PrimitiveLiteralExpression,
/* harmony export */   "PrimitiveObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.PrimitiveObserver,
/* harmony export */   "PropertyAccessor": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.PropertyAccessor,
/* harmony export */   "Scope": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope,
/* harmony export */   "SetObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.SetObserver,
/* harmony export */   "SetterObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.SetterObserver,
/* harmony export */   "TaggedTemplateExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.TaggedTemplateExpression,
/* harmony export */   "TemplateExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.TemplateExpression,
/* harmony export */   "UnaryExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.UnaryExpression,
/* harmony export */   "ValueConverter": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ValueConverter,
/* harmony export */   "ValueConverterDefinition": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ValueConverterDefinition,
/* harmony export */   "ValueConverterExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ValueConverterExpression,
/* harmony export */   "alias": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.alias,
/* harmony export */   "applyMutationsToIndices": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.applyMutationsToIndices,
/* harmony export */   "bindingBehavior": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior,
/* harmony export */   "cloneIndexMap": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.cloneIndexMap,
/* harmony export */   "connectable": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable,
/* harmony export */   "copyIndexMap": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.copyIndexMap,
/* harmony export */   "createIndexMap": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.createIndexMap,
/* harmony export */   "disableArrayObservation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.disableArrayObservation,
/* harmony export */   "disableMapObservation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.disableMapObservation,
/* harmony export */   "disableSetObservation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.disableSetObservation,
/* harmony export */   "enableArrayObservation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.enableArrayObservation,
/* harmony export */   "enableMapObservation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.enableMapObservation,
/* harmony export */   "enableSetObservation": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.enableSetObservation,
/* harmony export */   "getCollectionObserver": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.getCollectionObserver,
/* harmony export */   "isIndexMap": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.isIndexMap,
/* harmony export */   "observable": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.observable,
/* harmony export */   "parseExpression": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.parseExpression,
/* harmony export */   "registerAliases": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.registerAliases,
/* harmony export */   "subscriberCollection": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection,
/* harmony export */   "synchronizeIndices": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.synchronizeIndices,
/* harmony export */   "valueConverter": () => /* reexport safe */ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.valueConverter,
/* harmony export */   "AdoptedStyleSheetsStyles": () => /* binding */ AdoptedStyleSheetsStyles,
/* harmony export */   "AppRoot": () => /* binding */ AppRoot,
/* harmony export */   "AppTask": () => /* binding */ xe,
/* harmony export */   "AtPrefixedTriggerAttributePattern": () => /* binding */ Gt,
/* harmony export */   "AtPrefixedTriggerAttributePatternRegistration": () => /* binding */ ro,
/* harmony export */   "AttrBindingBehavior": () => /* binding */ AttrBindingBehavior,
/* harmony export */   "AttrBindingBehaviorRegistration": () => /* binding */ Go,
/* harmony export */   "AttrBindingCommand": () => /* binding */ Sn,
/* harmony export */   "AttrBindingCommandRegistration": () => /* binding */ Ao,
/* harmony export */   "AttrSyntax": () => /* binding */ AttrSyntax,
/* harmony export */   "AttributeBinding": () => /* binding */ AttributeBinding,
/* harmony export */   "AttributeBindingInstruction": () => /* binding */ AttributeBindingInstruction,
/* harmony export */   "AttributeBindingRendererRegistration": () => /* binding */ dl,
/* harmony export */   "AttributeNSAccessor": () => /* binding */ AttributeNSAccessor,
/* harmony export */   "AttributePattern": () => /* binding */ Nt,
/* harmony export */   "AuCompose": () => /* binding */ AuCompose,
/* harmony export */   "AuRender": () => /* binding */ AuRender,
/* harmony export */   "AuRenderRegistration": () => /* binding */ Yo,
/* harmony export */   "AuSlot": () => /* binding */ AuSlot,
/* harmony export */   "AuSlotsInfo": () => /* binding */ AuSlotsInfo,
/* harmony export */   "Aurelia": () => /* binding */ Aurelia,
/* harmony export */   "Bindable": () => /* binding */ Bt,
/* harmony export */   "BindableDefinition": () => /* binding */ BindableDefinition,
/* harmony export */   "BindableObserver": () => /* binding */ BindableObserver,
/* harmony export */   "BindablesInfo": () => /* binding */ BindablesInfo,
/* harmony export */   "BindingCommand": () => /* binding */ mn,
/* harmony export */   "BindingCommandDefinition": () => /* binding */ BindingCommandDefinition,
/* harmony export */   "BindingModeBehavior": () => /* binding */ BindingModeBehavior,
/* harmony export */   "CSSModulesProcessorRegistry": () => /* binding */ CSSModulesProcessorRegistry,
/* harmony export */   "CallBinding": () => /* binding */ CallBinding,
/* harmony export */   "CallBindingCommand": () => /* binding */ xn,
/* harmony export */   "CallBindingCommandRegistration": () => /* binding */ fo,
/* harmony export */   "CallBindingInstruction": () => /* binding */ CallBindingInstruction,
/* harmony export */   "CallBindingRendererRegistration": () => /* binding */ il,
/* harmony export */   "CaptureBindingCommand": () => /* binding */ An,
/* harmony export */   "CaptureBindingCommandRegistration": () => /* binding */ Co,
/* harmony export */   "Case": () => /* binding */ Br,
/* harmony export */   "CheckedObserver": () => /* binding */ CheckedObserver,
/* harmony export */   "Children": () => /* binding */ Se,
/* harmony export */   "ChildrenDefinition": () => /* binding */ ChildrenDefinition,
/* harmony export */   "ChildrenObserver": () => /* binding */ ChildrenObserver,
/* harmony export */   "ClassAttributeAccessor": () => /* binding */ ClassAttributeAccessor,
/* harmony export */   "ClassBindingCommand": () => /* binding */ En,
/* harmony export */   "ClassBindingCommandRegistration": () => /* binding */ So,
/* harmony export */   "ColonPrefixedBindAttributePattern": () => /* binding */ zt,
/* harmony export */   "ColonPrefixedBindAttributePatternRegistration": () => /* binding */ oo,
/* harmony export */   "CommandType": () => /* binding */ an,
/* harmony export */   "ComputedWatcher": () => /* binding */ ComputedWatcher,
/* harmony export */   "Controller": () => /* binding */ Controller,
/* harmony export */   "CustomAttribute": () => /* binding */ Me,
/* harmony export */   "CustomAttributeDefinition": () => /* binding */ CustomAttributeDefinition,
/* harmony export */   "CustomAttributeRendererRegistration": () => /* binding */ sl,
/* harmony export */   "CustomElement": () => /* binding */ si,
/* harmony export */   "CustomElementDefinition": () => /* binding */ CustomElementDefinition,
/* harmony export */   "CustomElementRendererRegistration": () => /* binding */ nl,
/* harmony export */   "DataAttributeAccessor": () => /* binding */ DataAttributeAccessor,
/* harmony export */   "DebounceBindingBehavior": () => /* binding */ DebounceBindingBehavior,
/* harmony export */   "DebounceBindingBehaviorRegistration": () => /* binding */ Xr,
/* harmony export */   "DefaultBindingCommand": () => /* binding */ bn,
/* harmony export */   "DefaultBindingCommandRegistration": () => /* binding */ mo,
/* harmony export */   "DefaultBindingLanguage": () => /* binding */ Bo,
/* harmony export */   "DefaultBindingSyntax": () => /* binding */ co,
/* harmony export */   "DefaultCase": () => /* binding */ Ir,
/* harmony export */   "DefaultComponents": () => /* binding */ so,
/* harmony export */   "DefaultDialogDom": () => /* binding */ DefaultDialogDom,
/* harmony export */   "DefaultDialogDomRenderer": () => /* binding */ DefaultDialogDomRenderer,
/* harmony export */   "DefaultDialogGlobalSettings": () => /* binding */ DefaultDialogGlobalSettings,
/* harmony export */   "DefaultRenderers": () => /* binding */ xl,
/* harmony export */   "DefaultResources": () => /* binding */ el,
/* harmony export */   "DefinitionType": () => /* binding */ Al,
/* harmony export */   "DelegateBindingCommand": () => /* binding */ Cn,
/* harmony export */   "DelegateBindingCommandRegistration": () => /* binding */ ko,
/* harmony export */   "DialogCloseResult": () => /* binding */ DialogCloseResult,
/* harmony export */   "DialogConfiguration": () => /* binding */ Ul,
/* harmony export */   "DialogController": () => /* binding */ DialogController,
/* harmony export */   "DialogDeactivationStatuses": () => /* binding */ Tl,
/* harmony export */   "DialogDefaultConfiguration": () => /* binding */ Fl,
/* harmony export */   "DialogOpenResult": () => /* binding */ DialogOpenResult,
/* harmony export */   "DialogService": () => /* binding */ DialogService,
/* harmony export */   "DotSeparatedAttributePattern": () => /* binding */ Wt,
/* harmony export */   "DotSeparatedAttributePatternRegistration": () => /* binding */ ho,
/* harmony export */   "Else": () => /* binding */ Else,
/* harmony export */   "ElseRegistration": () => /* binding */ $o,
/* harmony export */   "EventDelegator": () => /* binding */ EventDelegator,
/* harmony export */   "EventSubscriber": () => /* binding */ EventSubscriber,
/* harmony export */   "ExpressionWatcher": () => /* binding */ ExpressionWatcher,
/* harmony export */   "Focus": () => /* binding */ Focus,
/* harmony export */   "ForBindingCommand": () => /* binding */ yn,
/* harmony export */   "ForBindingCommandRegistration": () => /* binding */ vo,
/* harmony export */   "FragmentNodeSequence": () => /* binding */ FragmentNodeSequence,
/* harmony export */   "FrequentMutations": () => /* binding */ FrequentMutations,
/* harmony export */   "FromViewBindingBehavior": () => /* binding */ FromViewBindingBehavior,
/* harmony export */   "FromViewBindingBehaviorRegistration": () => /* binding */ Qr,
/* harmony export */   "FromViewBindingCommand": () => /* binding */ gn,
/* harmony export */   "FromViewBindingCommandRegistration": () => /* binding */ po,
/* harmony export */   "FulfilledTemplateController": () => /* binding */ Pr,
/* harmony export */   "HydrateAttributeInstruction": () => /* binding */ HydrateAttributeInstruction,
/* harmony export */   "HydrateElementInstruction": () => /* binding */ HydrateElementInstruction,
/* harmony export */   "HydrateLetElementInstruction": () => /* binding */ HydrateLetElementInstruction,
/* harmony export */   "HydrateTemplateController": () => /* binding */ HydrateTemplateController,
/* harmony export */   "IAppRoot": () => /* binding */ ts,
/* harmony export */   "IAppTask": () => /* binding */ be,
/* harmony export */   "IAttrMapper": () => /* binding */ Zt,
/* harmony export */   "IAttributeParser": () => /* binding */ Ut,
/* harmony export */   "IAttributePattern": () => /* binding */ Mt,
/* harmony export */   "IAuSlotsInfo": () => /* binding */ xs,
/* harmony export */   "IAurelia": () => /* binding */ Cl,
/* harmony export */   "IController": () => /* binding */ Xi,
/* harmony export */   "IDialogController": () => /* binding */ Rl,
/* harmony export */   "IDialogDom": () => /* binding */ Bl,
/* harmony export */   "IDialogDomRenderer": () => /* binding */ El,
/* harmony export */   "IDialogGlobalSettings": () => /* binding */ Il,
/* harmony export */   "IDialogService": () => /* binding */ Sl,
/* harmony export */   "IEventDelegator": () => /* binding */ ws,
/* harmony export */   "IEventTarget": () => /* binding */ rs,
/* harmony export */   "IHistory": () => /* binding */ vs,
/* harmony export */   "IHydrationContext": () => /* binding */ Ki,
/* harmony export */   "IInstruction": () => /* binding */ ks,
/* harmony export */   "ILifecycleHooks": () => /* binding */ bi,
/* harmony export */   "ILocation": () => /* binding */ ms,
/* harmony export */   "INode": () => /* binding */ ns,
/* harmony export */   "INodeObserverLocatorRegistration": () => /* binding */ io,
/* harmony export */   "IPlatform": () => /* binding */ Kt,
/* harmony export */   "IProjections": () => /* binding */ bs,
/* harmony export */   "IRenderLocation": () => /* binding */ os,
/* harmony export */   "IRenderer": () => /* binding */ Ss,
/* harmony export */   "IRendering": () => /* binding */ Pi,
/* harmony export */   "ISVGAnalyzer": () => /* binding */ Yt,
/* harmony export */   "ISanitizer": () => /* binding */ Hr,
/* harmony export */   "IShadowDOMGlobalStyles": () => /* binding */ di,
/* harmony export */   "IShadowDOMStyleFactory": () => /* binding */ ui,
/* harmony export */   "IShadowDOMStyles": () => /* binding */ fi,
/* harmony export */   "ISyntaxInterpreter": () => /* binding */ $t,
/* harmony export */   "ITemplateCompiler": () => /* binding */ As,
/* harmony export */   "ITemplateCompilerHooks": () => /* binding */ zn,
/* harmony export */   "ITemplateCompilerRegistration": () => /* binding */ eo,
/* harmony export */   "ITemplateElementFactory": () => /* binding */ Tn,
/* harmony export */   "IViewFactory": () => /* binding */ Ai,
/* harmony export */   "IViewLocator": () => /* binding */ Di,
/* harmony export */   "IWcElementRegistry": () => /* binding */ Vl,
/* harmony export */   "IWindow": () => /* binding */ ds,
/* harmony export */   "IWorkTracker": () => /* binding */ es,
/* harmony export */   "If": () => /* binding */ If,
/* harmony export */   "IfRegistration": () => /* binding */ Oo,
/* harmony export */   "InstructionType": () => /* binding */ ys,
/* harmony export */   "InterpolationBinding": () => /* binding */ InterpolationBinding,
/* harmony export */   "InterpolationBindingRendererRegistration": () => /* binding */ rl,
/* harmony export */   "InterpolationInstruction": () => /* binding */ InterpolationInstruction,
/* harmony export */   "Interpretation": () => /* binding */ Interpretation,
/* harmony export */   "IteratorBindingInstruction": () => /* binding */ IteratorBindingInstruction,
/* harmony export */   "IteratorBindingRendererRegistration": () => /* binding */ ol,
/* harmony export */   "LetBinding": () => /* binding */ LetBinding,
/* harmony export */   "LetBindingInstruction": () => /* binding */ LetBindingInstruction,
/* harmony export */   "LetElementRendererRegistration": () => /* binding */ ll,
/* harmony export */   "LifecycleHooks": () => /* binding */ ki,
/* harmony export */   "LifecycleHooksDefinition": () => /* binding */ LifecycleHooksDefinition,
/* harmony export */   "LifecycleHooksEntry": () => /* binding */ LifecycleHooksEntry,
/* harmony export */   "Listener": () => /* binding */ Listener,
/* harmony export */   "ListenerBindingInstruction": () => /* binding */ ListenerBindingInstruction,
/* harmony export */   "ListenerBindingRendererRegistration": () => /* binding */ fl,
/* harmony export */   "NodeObserverConfig": () => /* binding */ NodeObserverConfig,
/* harmony export */   "NodeObserverLocator": () => /* binding */ NodeObserverLocator,
/* harmony export */   "NodeType": () => /* binding */ ls,
/* harmony export */   "NoopSVGAnalyzer": () => /* binding */ NoopSVGAnalyzer,
/* harmony export */   "ObserveShallow": () => /* binding */ ObserveShallow,
/* harmony export */   "OneTimeBindingBehavior": () => /* binding */ OneTimeBindingBehavior,
/* harmony export */   "OneTimeBindingBehaviorRegistration": () => /* binding */ Kr,
/* harmony export */   "OneTimeBindingCommand": () => /* binding */ vn,
/* harmony export */   "OneTimeBindingCommandRegistration": () => /* binding */ go,
/* harmony export */   "PendingTemplateController": () => /* binding */ Dr,
/* harmony export */   "Portal": () => /* binding */ Portal,
/* harmony export */   "PromiseTemplateController": () => /* binding */ Tr,
/* harmony export */   "PropertyBinding": () => /* binding */ PropertyBinding,
/* harmony export */   "PropertyBindingInstruction": () => /* binding */ PropertyBindingInstruction,
/* harmony export */   "PropertyBindingRendererRegistration": () => /* binding */ hl,
/* harmony export */   "RefAttributePattern": () => /* binding */ Ht,
/* harmony export */   "RefAttributePatternRegistration": () => /* binding */ lo,
/* harmony export */   "RefBinding": () => /* binding */ RefBinding,
/* harmony export */   "RefBindingCommandRegistration": () => /* binding */ xo,
/* harmony export */   "RefBindingInstruction": () => /* binding */ RefBindingInstruction,
/* harmony export */   "RefBindingRendererRegistration": () => /* binding */ al,
/* harmony export */   "RejectedTemplateController": () => /* binding */ Or,
/* harmony export */   "RenderPlan": () => /* binding */ RenderPlan,
/* harmony export */   "Rendering": () => /* binding */ Rendering,
/* harmony export */   "Repeat": () => /* binding */ Repeat,
/* harmony export */   "RepeatRegistration": () => /* binding */ Lo,
/* harmony export */   "SVGAnalyzer": () => /* binding */ SVGAnalyzer,
/* harmony export */   "SVGAnalyzerRegistration": () => /* binding */ no,
/* harmony export */   "SanitizeValueConverter": () => /* binding */ zr,
/* harmony export */   "SanitizeValueConverterRegistration": () => /* binding */ Io,
/* harmony export */   "SelectValueObserver": () => /* binding */ SelectValueObserver,
/* harmony export */   "SelfBindingBehavior": () => /* binding */ SelfBindingBehavior,
/* harmony export */   "SelfBindingBehaviorRegistration": () => /* binding */ Xo,
/* harmony export */   "SetAttributeInstruction": () => /* binding */ SetAttributeInstruction,
/* harmony export */   "SetAttributeRendererRegistration": () => /* binding */ ml,
/* harmony export */   "SetClassAttributeInstruction": () => /* binding */ SetClassAttributeInstruction,
/* harmony export */   "SetClassAttributeRendererRegistration": () => /* binding */ vl,
/* harmony export */   "SetPropertyInstruction": () => /* binding */ SetPropertyInstruction,
/* harmony export */   "SetPropertyRendererRegistration": () => /* binding */ cl,
/* harmony export */   "SetStyleAttributeInstruction": () => /* binding */ SetStyleAttributeInstruction,
/* harmony export */   "SetStyleAttributeRendererRegistration": () => /* binding */ pl,
/* harmony export */   "ShadowDOMRegistry": () => /* binding */ ShadowDOMRegistry,
/* harmony export */   "ShortHandBindingSyntax": () => /* binding */ uo,
/* harmony export */   "SignalBindingBehavior": () => /* binding */ SignalBindingBehavior,
/* harmony export */   "SignalBindingBehaviorRegistration": () => /* binding */ Zr,
/* harmony export */   "StandardConfiguration": () => /* binding */ yl,
/* harmony export */   "StyleAttributeAccessor": () => /* binding */ StyleAttributeAccessor,
/* harmony export */   "StyleBindingCommand": () => /* binding */ Rn,
/* harmony export */   "StyleBindingCommandRegistration": () => /* binding */ Ro,
/* harmony export */   "StyleConfiguration": () => /* binding */ mi,
/* harmony export */   "StyleElementStyles": () => /* binding */ StyleElementStyles,
/* harmony export */   "StylePropertyBindingInstruction": () => /* binding */ StylePropertyBindingInstruction,
/* harmony export */   "StylePropertyBindingRendererRegistration": () => /* binding */ gl,
/* harmony export */   "Switch": () => /* binding */ Er,
/* harmony export */   "TemplateCompiler": () => /* binding */ TemplateCompiler,
/* harmony export */   "TemplateCompilerHooks": () => /* binding */ Kn,
/* harmony export */   "TemplateControllerRendererRegistration": () => /* binding */ ul,
/* harmony export */   "TextBindingInstruction": () => /* binding */ TextBindingInstruction,
/* harmony export */   "TextBindingRendererRegistration": () => /* binding */ wl,
/* harmony export */   "ThrottleBindingBehavior": () => /* binding */ ThrottleBindingBehavior,
/* harmony export */   "ThrottleBindingBehaviorRegistration": () => /* binding */ Jr,
/* harmony export */   "ToViewBindingBehavior": () => /* binding */ ToViewBindingBehavior,
/* harmony export */   "ToViewBindingBehaviorRegistration": () => /* binding */ Yr,
/* harmony export */   "ToViewBindingCommand": () => /* binding */ pn,
/* harmony export */   "ToViewBindingCommandRegistration": () => /* binding */ wo,
/* harmony export */   "TriggerBindingCommand": () => /* binding */ kn,
/* harmony export */   "TriggerBindingCommandRegistration": () => /* binding */ yo,
/* harmony export */   "TwoWayBindingBehavior": () => /* binding */ TwoWayBindingBehavior,
/* harmony export */   "TwoWayBindingBehaviorRegistration": () => /* binding */ to,
/* harmony export */   "TwoWayBindingCommand": () => /* binding */ wn,
/* harmony export */   "TwoWayBindingCommandRegistration": () => /* binding */ bo,
/* harmony export */   "UpdateTriggerBindingBehavior": () => /* binding */ UpdateTriggerBindingBehavior,
/* harmony export */   "UpdateTriggerBindingBehaviorRegistration": () => /* binding */ Ko,
/* harmony export */   "ValueAttributeObserver": () => /* binding */ ValueAttributeObserver,
/* harmony export */   "ViewFactory": () => /* binding */ ViewFactory,
/* harmony export */   "ViewLocator": () => /* binding */ ViewLocator,
/* harmony export */   "ViewModelKind": () => /* binding */ Hi,
/* harmony export */   "ViewValueConverter": () => /* binding */ Gr,
/* harmony export */   "ViewValueConverterRegistration": () => /* binding */ To,
/* harmony export */   "Views": () => /* binding */ Ii,
/* harmony export */   "Watch": () => /* binding */ _e,
/* harmony export */   "WcCustomElementRegistry": () => /* binding */ WcCustomElementRegistry,
/* harmony export */   "With": () => /* binding */ With,
/* harmony export */   "WithRegistration": () => /* binding */ qo,
/* harmony export */   "allResources": () => /* binding */ Pn,
/* harmony export */   "attributePattern": () => /* binding */ Ft,
/* harmony export */   "bindable": () => /* binding */ St,
/* harmony export */   "bindingCommand": () => /* binding */ cn,
/* harmony export */   "children": () => /* binding */ ke,
/* harmony export */   "coercer": () => /* binding */ It,
/* harmony export */   "containerless": () => /* binding */ We,
/* harmony export */   "convertToRenderLocation": () => /* binding */ us,
/* harmony export */   "createElement": () => /* binding */ Ur,
/* harmony export */   "cssModules": () => /* binding */ ai,
/* harmony export */   "customAttribute": () => /* binding */ Pe,
/* harmony export */   "customElement": () => /* binding */ je,
/* harmony export */   "getEffectiveParentNode": () => /* binding */ as,
/* harmony export */   "getRef": () => /* binding */ is,
/* harmony export */   "isCustomElementController": () => /* binding */ ji,
/* harmony export */   "isCustomElementViewModel": () => /* binding */ Ni,
/* harmony export */   "isInstruction": () => /* binding */ Cs,
/* harmony export */   "isRenderLocation": () => /* binding */ fs,
/* harmony export */   "lifecycleHooks": () => /* binding */ Ci,
/* harmony export */   "processContent": () => /* binding */ ri,
/* harmony export */   "renderer": () => /* binding */ Rs,
/* harmony export */   "setEffectiveParentNode": () => /* binding */ cs,
/* harmony export */   "setRef": () => /* binding */ ss,
/* harmony export */   "shadowCSS": () => /* binding */ ci,
/* harmony export */   "templateCompilerHooks": () => /* binding */ Yn,
/* harmony export */   "templateController": () => /* binding */ Oe,
/* harmony export */   "useShadowDOM": () => /* binding */ Ne,
/* harmony export */   "view": () => /* binding */ Ti,
/* harmony export */   "watch": () => /* binding */ Ue
/* harmony export */ });
/* harmony import */ var _aurelia_platform__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/platform */ "./node_modules/@aurelia/platform/dist/esm/index.js");
/* harmony import */ var _aurelia_platform_browser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/platform-browser */ "./node_modules/@aurelia/platform-browser/dist/esm/index.js");
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esm/index.js");
/* harmony import */ var _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aurelia/runtime */ "./node_modules/@aurelia/runtime/dist/esm/index.js");












/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */ function ot(t, e, i, s) {
    var n = arguments.length, r = n < 3 ? e : null === s ? s = Object.getOwnPropertyDescriptor(e, i) : s, o;
    if ("object" === typeof Reflect && "function" === typeof Reflect.decorate) r = Reflect.decorate(t, e, i, s); else for (var l = t.length - 1; l >= 0; l--) if (o = t[l]) r = (n < 3 ? o(r) : n > 3 ? o(e, i, r) : o(e, i)) || r;
    return n > 3 && r && Object.defineProperty(e, i, r), r;
}

function lt(t, e) {
    return function(i, s) {
        e(i, s, t);
    };
}

const ht = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Metadata.getOwn;

const at = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Metadata.hasOwn;

const ct = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Metadata.define;

const {annotation: ut, resource: ft} = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Protocol;

const dt = ut.keyFor;

const mt = ft.keyFor;

const vt = ft.appendTo;

const pt = ut.appendTo;

const gt = ut.getKeys;

const wt = () => Object.create(null);

const bt = Object.prototype.hasOwnProperty;

const xt = wt();

const yt = (t, e, i) => {
    if (true === xt[e]) return true;
    if (!At(e)) return false;
    const s = e.slice(0, 5);
    return xt[e] = "aria-" === s || "data-" === s || i.isStandardSvgAttribute(t, e);
};

const kt = t => t instanceof Promise;

const Ct = t => "function" === typeof t;

const At = t => "string" === typeof t;

function St(t, e) {
    let i;
    function s(t, e) {
        if (arguments.length > 1) i.property = e;
        ct(Et, BindableDefinition.create(e, t, i), t.constructor, e);
        pt(t.constructor, Bt.keyFrom(e));
    }
    if (arguments.length > 1) {
        i = {};
        s(t, e);
        return;
    } else if (At(t)) {
        i = {};
        return s;
    }
    i = void 0 === t ? {} : t;
    return s;
}

function Rt(t) {
    return t.startsWith(Et);
}

const Et = dt("bindable");

const Bt = Object.freeze({
    name: Et,
    keyFrom: t => `${Et}:${t}`,
    from(t, ...e) {
        const i = {};
        const s = Array.isArray;
        function n(e) {
            i[e] = BindableDefinition.create(e, t);
        }
        function r(e, s) {
            i[e] = s instanceof BindableDefinition ? s : BindableDefinition.create(e, t, s);
        }
        function o(t) {
            if (s(t)) t.forEach(n); else if (t instanceof BindableDefinition) i[t.property] = t; else if (void 0 !== t) Object.keys(t).forEach((e => r(e, t[e])));
        }
        e.forEach(o);
        return i;
    },
    for(t) {
        let e;
        const i = {
            add(s) {
                let n;
                let r;
                if (At(s)) {
                    n = s;
                    r = {
                        property: n
                    };
                } else {
                    n = s.property;
                    r = s;
                }
                e = BindableDefinition.create(n, t, r);
                if (!at(Et, t, n)) pt(t, Bt.keyFrom(n));
                ct(Et, e, t, n);
                return i;
            },
            mode(t) {
                e.mode = t;
                return i;
            },
            callback(t) {
                e.callback = t;
                return i;
            },
            attribute(t) {
                e.attribute = t;
                return i;
            },
            primary() {
                e.primary = true;
                return i;
            },
            set(t) {
                e.set = t;
                return i;
            }
        };
        return i;
    },
    getAll(t) {
        const e = Et.length + 1;
        const i = [];
        const n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.getPrototypeChain)(t);
        let r = n.length;
        let o = 0;
        let l;
        let h;
        let a;
        let c;
        while (--r >= 0) {
            a = n[r];
            l = gt(a).filter(Rt);
            h = l.length;
            for (c = 0; c < h; ++c) i[o++] = ht(Et, a, l[c].slice(e));
        }
        return i;
    }
});

class BindableDefinition {
    constructor(t, e, i, s, n, r) {
        this.attribute = t;
        this.callback = e;
        this.mode = i;
        this.primary = s;
        this.property = n;
        this.set = r;
    }
    static create(t, e, i = {}) {
        return new BindableDefinition((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(i.attribute, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.kebabCase)(t)), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(i.callback, `${t}Changed`), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(i.mode, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(i.primary, false), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(i.property, t), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(i.set, Dt(t, e, i)));
    }
}

function It(t, e, i) {
    Tt.define(t, e);
}

const Tt = {
    key: dt("coercer"),
    define(t, e) {
        ct(Tt.key, t[e].bind(t), t);
    },
    for(t) {
        return ht(Tt.key, t);
    }
};

function Dt(t, e, i = {}) {
    var s, n, r;
    const l = null !== (n = null !== (s = i.type) && void 0 !== s ? s : Reflect.getMetadata("design:type", e, t)) && void 0 !== n ? n : null;
    if (null == l) return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop;
    let h;
    switch (l) {
      case Number:
      case Boolean:
      case String:
      case BigInt:
        h = l;
        break;

      default:
        {
            const t = l.coerce;
            h = "function" === typeof t ? t.bind(l) : null !== (r = Tt.for(l)) && void 0 !== r ? r : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop;
            break;
        }
    }
    return h === _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop ? h : Pt(h, i.nullable);
}

function Pt(t, e) {
    return function(i, s) {
        var n;
        if (!(null === s || void 0 === s ? void 0 : s.enableCoercion)) return i;
        return (null !== e && void 0 !== e ? e : (null !== (n = null === s || void 0 === s ? void 0 : s.coerceNullish) && void 0 !== n ? n : false) ? false : true) && null == i ? i : t(i, s);
    };
}

class BindableObserver {
    constructor(t, e, i, s, n, r) {
        this.set = s;
        this.$controller = n;
        this.t = r;
        this.v = void 0;
        this.ov = void 0;
        this.f = 0;
        const l = t[i];
        const h = t.propertyChanged;
        const a = this.i = Ct(l);
        const c = this.u = Ct(h);
        const u = this.hs = s !== _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop;
        let f;
        this.o = t;
        this.k = e;
        this.cb = a ? l : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop;
        this.C = c ? h : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop;
        if (void 0 === this.cb && !c && !u) this.iO = false; else {
            this.iO = true;
            f = t[e];
            this.v = u && void 0 !== f ? s(f, this.t) : f;
            this.A();
        }
    }
    get type() {
        return 1;
    }
    getValue() {
        return this.v;
    }
    setValue(t, e) {
        if (this.hs) t = this.set(t, this.t);
        const i = this.v;
        if (this.iO) {
            if (Object.is(t, i)) return;
            this.v = t;
            this.ov = i;
            this.f = e;
            if (null == this.$controller || this.$controller.isBound) {
                if (this.i) this.cb.call(this.o, t, i, e);
                if (this.u) this.C.call(this.o, this.k, t, i, e);
            }
            this.queue.add(this);
        } else this.o[this.k] = t;
    }
    subscribe(t) {
        if (false === !this.iO) {
            this.iO = true;
            this.v = this.hs ? this.set(this.o[this.k], this.t) : this.o[this.k];
            this.A();
        }
        this.subs.add(t);
    }
    flush() {
        Ot = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, Ot, this.f);
    }
    A() {
        Reflect.defineProperty(this.o, this.k, {
            enumerable: true,
            configurable: true,
            get: () => this.v,
            set: t => {
                this.setValue(t, 0);
            }
        });
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection)(BindableObserver);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.withFlushQueue)(BindableObserver);

let Ot;

class CharSpec {
    constructor(t, e, i, s) {
        this.chars = t;
        this.repeat = e;
        this.isSymbol = i;
        this.isInverted = s;
        if (s) switch (t.length) {
          case 0:
            this.has = this.R;
            break;

          case 1:
            this.has = this.B;
            break;

          default:
            this.has = this.I;
        } else switch (t.length) {
          case 0:
            this.has = this.T;
            break;

          case 1:
            this.has = this.P;
            break;

          default:
            this.has = this.O;
        }
    }
    equals(t) {
        return this.chars === t.chars && this.repeat === t.repeat && this.isSymbol === t.isSymbol && this.isInverted === t.isInverted;
    }
    O(t) {
        return this.chars.includes(t);
    }
    P(t) {
        return this.chars === t;
    }
    T(t) {
        return false;
    }
    I(t) {
        return !this.chars.includes(t);
    }
    B(t) {
        return this.chars !== t;
    }
    R(t) {
        return true;
    }
}

class Interpretation {
    constructor() {
        this.parts = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
        this.$ = "";
        this.L = {};
        this.q = {};
    }
    get pattern() {
        const t = this.$;
        if ("" === t) return null; else return t;
    }
    set pattern(t) {
        if (null == t) {
            this.$ = "";
            this.parts = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
        } else {
            this.$ = t;
            this.parts = this.q[t];
        }
    }
    append(t, e) {
        const i = this.L;
        if (void 0 === i[t]) i[t] = e; else i[t] += e;
    }
    next(t) {
        const e = this.L;
        let i;
        if (void 0 !== e[t]) {
            i = this.q;
            if (void 0 === i[t]) i[t] = [ e[t] ]; else i[t].push(e[t]);
            e[t] = void 0;
        }
    }
}

class State$1 {
    constructor(t, ...e) {
        this.charSpec = t;
        this.nextStates = [];
        this.types = null;
        this.isEndpoint = false;
        this.patterns = e;
    }
    get pattern() {
        return this.isEndpoint ? this.patterns[0] : null;
    }
    findChild(t) {
        const e = this.nextStates;
        const i = e.length;
        let s = null;
        let n = 0;
        for (;n < i; ++n) {
            s = e[n];
            if (t.equals(s.charSpec)) return s;
        }
        return null;
    }
    append(t, e) {
        const i = this.patterns;
        if (!i.includes(e)) i.push(e);
        let s = this.findChild(t);
        if (null == s) {
            s = new State$1(t, e);
            this.nextStates.push(s);
            if (t.repeat) s.nextStates.push(s);
        }
        return s;
    }
    findMatches(t, e) {
        const i = [];
        const s = this.nextStates;
        const n = s.length;
        let r = 0;
        let o = null;
        let l = 0;
        let h = 0;
        for (;l < n; ++l) {
            o = s[l];
            if (o.charSpec.has(t)) {
                i.push(o);
                r = o.patterns.length;
                h = 0;
                if (o.charSpec.isSymbol) for (;h < r; ++h) e.next(o.patterns[h]); else for (;h < r; ++h) e.append(o.patterns[h], t);
            }
        }
        return i;
    }
}

class StaticSegment {
    constructor(t) {
        this.text = t;
        const e = this.len = t.length;
        const i = this.specs = [];
        let s = 0;
        for (;e > s; ++s) i.push(new CharSpec(t[s], false, false, false));
    }
    eachChar(t) {
        const e = this.len;
        const i = this.specs;
        let s = 0;
        for (;e > s; ++s) t(i[s]);
    }
}

class DynamicSegment {
    constructor(t) {
        this.text = "PART";
        this.spec = new CharSpec(t, true, false, true);
    }
    eachChar(t) {
        t(this.spec);
    }
}

class SymbolSegment {
    constructor(t) {
        this.text = t;
        this.spec = new CharSpec(t, false, true, false);
    }
    eachChar(t) {
        t(this.spec);
    }
}

class SegmentTypes {
    constructor() {
        this.statics = 0;
        this.dynamics = 0;
        this.symbols = 0;
    }
}

const $t = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ISyntaxInterpreter", (t => t.singleton(SyntaxInterpreter)));

class SyntaxInterpreter {
    constructor() {
        this.rootState = new State$1(null);
        this.initialStates = [ this.rootState ];
    }
    add(t) {
        t = t.slice(0).sort(((t, e) => t.pattern > e.pattern ? 1 : -1));
        const e = t.length;
        let i;
        let s;
        let n;
        let r;
        let o;
        let l;
        let h;
        let a = 0;
        let c;
        while (e > a) {
            i = this.rootState;
            s = t[a];
            n = s.pattern;
            r = new SegmentTypes;
            o = this.parse(s, r);
            l = o.length;
            h = t => {
                i = i.append(t, n);
            };
            for (c = 0; l > c; ++c) o[c].eachChar(h);
            i.types = r;
            i.isEndpoint = true;
            ++a;
        }
    }
    interpret(t) {
        const e = new Interpretation;
        const i = t.length;
        let s = this.initialStates;
        let n = 0;
        let r;
        for (;n < i; ++n) {
            s = this.getNextStates(s, t.charAt(n), e);
            if (0 === s.length) break;
        }
        s = s.filter(Lt);
        if (s.length > 0) {
            s.sort(qt);
            r = s[0];
            if (!r.charSpec.isSymbol) e.next(r.pattern);
            e.pattern = r.pattern;
        }
        return e;
    }
    getNextStates(t, e, i) {
        const s = [];
        let n = null;
        const r = t.length;
        let o = 0;
        for (;o < r; ++o) {
            n = t[o];
            s.push(...n.findMatches(e, i));
        }
        return s;
    }
    parse(t, e) {
        const i = [];
        const s = t.pattern;
        const n = s.length;
        const r = t.symbols;
        let o = 0;
        let l = 0;
        let h = "";
        while (o < n) {
            h = s.charAt(o);
            if (0 === r.length || !r.includes(h)) if (o === l) if ("P" === h && "PART" === s.slice(o, o + 4)) {
                l = o += 4;
                i.push(new DynamicSegment(r));
                ++e.dynamics;
            } else ++o; else ++o; else if (o !== l) {
                i.push(new StaticSegment(s.slice(l, o)));
                ++e.statics;
                l = o;
            } else {
                i.push(new SymbolSegment(s.slice(l, o + 1)));
                ++e.symbols;
                l = ++o;
            }
        }
        if (l !== o) {
            i.push(new StaticSegment(s.slice(l, o)));
            ++e.statics;
        }
        return i;
    }
}

function Lt(t) {
    return t.isEndpoint;
}

function qt(t, e) {
    const i = t.types;
    const s = e.types;
    if (i.statics !== s.statics) return s.statics - i.statics;
    if (i.dynamics !== s.dynamics) return s.dynamics - i.dynamics;
    if (i.symbols !== s.symbols) return s.symbols - i.symbols;
    return 0;
}

class AttrSyntax {
    constructor(t, e, i, s) {
        this.rawName = t;
        this.rawValue = e;
        this.target = i;
        this.command = s;
    }
}

const Mt = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAttributePattern");

const Ut = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAttributeParser", (t => t.singleton(AttributeParser)));

class AttributeParser {
    constructor(t, e) {
        this.M = {};
        this.U = t;
        const i = this.F = {};
        const s = e.reduce(((t, e) => {
            const s = jt(e.constructor);
            s.forEach((t => i[t.pattern] = e));
            return t.concat(s);
        }), _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray);
        t.add(s);
    }
    parse(t, e) {
        let i = this.M[t];
        if (null == i) i = this.M[t] = this.U.interpret(t);
        const s = i.pattern;
        if (null == s) return new AttrSyntax(t, e, t, null); else return this.F[s][s](t, e, i.parts);
    }
}

AttributeParser.inject = [ $t, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.all)(Mt) ];

function Ft(...t) {
    return function e(i) {
        return Nt.define(t, i);
    };
}

class AttributePatternResourceDefinition {
    constructor(t) {
        this.Type = t;
        this.name = void 0;
    }
    register(t) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(Mt, this.Type).register(t);
    }
}

const Vt = mt("attribute-pattern");

const _t = "attribute-pattern-definitions";

const jt = t => _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Protocol.annotation.get(t, _t);

const Nt = Object.freeze({
    name: Vt,
    definitionAnnotationKey: _t,
    define(t, e) {
        const s = new AttributePatternResourceDefinition(e);
        ct(Vt, s, e);
        vt(e, Vt);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Protocol.annotation.set(e, _t, t);
        pt(e, _t);
        return e;
    },
    getPatternDefinitions: jt
});

let Wt = class DotSeparatedAttributePattern {
    "PART.PART"(t, e, i) {
        return new AttrSyntax(t, e, i[0], i[1]);
    }
    "PART.PART.PART"(t, e, i) {
        return new AttrSyntax(t, e, i[0], i[2]);
    }
};

Wt = ot([ Ft({
    pattern: "PART.PART",
    symbols: "."
}, {
    pattern: "PART.PART.PART",
    symbols: "."
}) ], Wt);

let Ht = class RefAttributePattern {
    ref(t, e, i) {
        return new AttrSyntax(t, e, "element", "ref");
    }
    "PART.ref"(t, e, i) {
        return new AttrSyntax(t, e, i[0], "ref");
    }
};

Ht = ot([ Ft({
    pattern: "ref",
    symbols: ""
}, {
    pattern: "PART.ref",
    symbols: "."
}) ], Ht);

let zt = class ColonPrefixedBindAttributePattern {
    ":PART"(t, e, i) {
        return new AttrSyntax(t, e, i[0], "bind");
    }
};

zt = ot([ Ft({
    pattern: ":PART",
    symbols: ":"
}) ], zt);

let Gt = class AtPrefixedTriggerAttributePattern {
    "@PART"(t, e, i) {
        return new AttrSyntax(t, e, i[0], "trigger");
    }
};

Gt = ot([ Ft({
    pattern: "@PART",
    symbols: "@"
}) ], Gt);

let Xt = class SpreadAttributePattern {
    "...$attrs"(t, e, i) {
        return new AttrSyntax(t, e, "", "...$attrs");
    }
};

Xt = ot([ Ft({
    pattern: "...$attrs",
    symbols: ""
}) ], Xt);

const Kt = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IPlatform;

const Yt = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ISVGAnalyzer", (t => t.singleton(NoopSVGAnalyzer)));

class NoopSVGAnalyzer {
    isStandardSvgAttribute(t, e) {
        return false;
    }
}

function Qt(t) {
    const e = wt();
    let i;
    for (i of t) e[i] = true;
    return e;
}

class SVGAnalyzer {
    constructor(t) {
        this.V = Object.assign(wt(), {
            a: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "target", "transform", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            altGlyph: Qt([ "class", "dx", "dy", "externalResourcesRequired", "format", "glyphRef", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "rotate", "style", "systemLanguage", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            altglyph: wt(),
            altGlyphDef: Qt([ "id", "xml:base", "xml:lang", "xml:space" ]),
            altglyphdef: wt(),
            altGlyphItem: Qt([ "id", "xml:base", "xml:lang", "xml:space" ]),
            altglyphitem: wt(),
            animate: Qt([ "accumulate", "additive", "attributeName", "attributeType", "begin", "by", "calcMode", "dur", "end", "externalResourcesRequired", "fill", "from", "id", "keySplines", "keyTimes", "max", "min", "onbegin", "onend", "onload", "onrepeat", "repeatCount", "repeatDur", "requiredExtensions", "requiredFeatures", "restart", "systemLanguage", "to", "values", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            animateColor: Qt([ "accumulate", "additive", "attributeName", "attributeType", "begin", "by", "calcMode", "dur", "end", "externalResourcesRequired", "fill", "from", "id", "keySplines", "keyTimes", "max", "min", "onbegin", "onend", "onload", "onrepeat", "repeatCount", "repeatDur", "requiredExtensions", "requiredFeatures", "restart", "systemLanguage", "to", "values", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            animateMotion: Qt([ "accumulate", "additive", "begin", "by", "calcMode", "dur", "end", "externalResourcesRequired", "fill", "from", "id", "keyPoints", "keySplines", "keyTimes", "max", "min", "onbegin", "onend", "onload", "onrepeat", "origin", "path", "repeatCount", "repeatDur", "requiredExtensions", "requiredFeatures", "restart", "rotate", "systemLanguage", "to", "values", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            animateTransform: Qt([ "accumulate", "additive", "attributeName", "attributeType", "begin", "by", "calcMode", "dur", "end", "externalResourcesRequired", "fill", "from", "id", "keySplines", "keyTimes", "max", "min", "onbegin", "onend", "onload", "onrepeat", "repeatCount", "repeatDur", "requiredExtensions", "requiredFeatures", "restart", "systemLanguage", "to", "type", "values", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            circle: Qt([ "class", "cx", "cy", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "r", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            clipPath: Qt([ "class", "clipPathUnits", "externalResourcesRequired", "id", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            "color-profile": Qt([ "id", "local", "name", "rendering-intent", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            cursor: Qt([ "externalResourcesRequired", "id", "requiredExtensions", "requiredFeatures", "systemLanguage", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            defs: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            desc: Qt([ "class", "id", "style", "xml:base", "xml:lang", "xml:space" ]),
            ellipse: Qt([ "class", "cx", "cy", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "rx", "ry", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            feBlend: Qt([ "class", "height", "id", "in", "in2", "mode", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feColorMatrix: Qt([ "class", "height", "id", "in", "result", "style", "type", "values", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feComponentTransfer: Qt([ "class", "height", "id", "in", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feComposite: Qt([ "class", "height", "id", "in", "in2", "k1", "k2", "k3", "k4", "operator", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feConvolveMatrix: Qt([ "bias", "class", "divisor", "edgeMode", "height", "id", "in", "kernelMatrix", "kernelUnitLength", "order", "preserveAlpha", "result", "style", "targetX", "targetY", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feDiffuseLighting: Qt([ "class", "diffuseConstant", "height", "id", "in", "kernelUnitLength", "result", "style", "surfaceScale", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feDisplacementMap: Qt([ "class", "height", "id", "in", "in2", "result", "scale", "style", "width", "x", "xChannelSelector", "xml:base", "xml:lang", "xml:space", "y", "yChannelSelector" ]),
            feDistantLight: Qt([ "azimuth", "elevation", "id", "xml:base", "xml:lang", "xml:space" ]),
            feFlood: Qt([ "class", "height", "id", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feFuncA: Qt([ "amplitude", "exponent", "id", "intercept", "offset", "slope", "tableValues", "type", "xml:base", "xml:lang", "xml:space" ]),
            feFuncB: Qt([ "amplitude", "exponent", "id", "intercept", "offset", "slope", "tableValues", "type", "xml:base", "xml:lang", "xml:space" ]),
            feFuncG: Qt([ "amplitude", "exponent", "id", "intercept", "offset", "slope", "tableValues", "type", "xml:base", "xml:lang", "xml:space" ]),
            feFuncR: Qt([ "amplitude", "exponent", "id", "intercept", "offset", "slope", "tableValues", "type", "xml:base", "xml:lang", "xml:space" ]),
            feGaussianBlur: Qt([ "class", "height", "id", "in", "result", "stdDeviation", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feImage: Qt([ "class", "externalResourcesRequired", "height", "id", "preserveAspectRatio", "result", "style", "width", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            feMerge: Qt([ "class", "height", "id", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feMergeNode: Qt([ "id", "xml:base", "xml:lang", "xml:space" ]),
            feMorphology: Qt([ "class", "height", "id", "in", "operator", "radius", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feOffset: Qt([ "class", "dx", "dy", "height", "id", "in", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            fePointLight: Qt([ "id", "x", "xml:base", "xml:lang", "xml:space", "y", "z" ]),
            feSpecularLighting: Qt([ "class", "height", "id", "in", "kernelUnitLength", "result", "specularConstant", "specularExponent", "style", "surfaceScale", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feSpotLight: Qt([ "id", "limitingConeAngle", "pointsAtX", "pointsAtY", "pointsAtZ", "specularExponent", "x", "xml:base", "xml:lang", "xml:space", "y", "z" ]),
            feTile: Qt([ "class", "height", "id", "in", "result", "style", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            feTurbulence: Qt([ "baseFrequency", "class", "height", "id", "numOctaves", "result", "seed", "stitchTiles", "style", "type", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            filter: Qt([ "class", "externalResourcesRequired", "filterRes", "filterUnits", "height", "id", "primitiveUnits", "style", "width", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            font: Qt([ "class", "externalResourcesRequired", "horiz-adv-x", "horiz-origin-x", "horiz-origin-y", "id", "style", "vert-adv-y", "vert-origin-x", "vert-origin-y", "xml:base", "xml:lang", "xml:space" ]),
            "font-face": Qt([ "accent-height", "alphabetic", "ascent", "bbox", "cap-height", "descent", "font-family", "font-size", "font-stretch", "font-style", "font-variant", "font-weight", "hanging", "id", "ideographic", "mathematical", "overline-position", "overline-thickness", "panose-1", "slope", "stemh", "stemv", "strikethrough-position", "strikethrough-thickness", "underline-position", "underline-thickness", "unicode-range", "units-per-em", "v-alphabetic", "v-hanging", "v-ideographic", "v-mathematical", "widths", "x-height", "xml:base", "xml:lang", "xml:space" ]),
            "font-face-format": Qt([ "id", "string", "xml:base", "xml:lang", "xml:space" ]),
            "font-face-name": Qt([ "id", "name", "xml:base", "xml:lang", "xml:space" ]),
            "font-face-src": Qt([ "id", "xml:base", "xml:lang", "xml:space" ]),
            "font-face-uri": Qt([ "id", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            foreignObject: Qt([ "class", "externalResourcesRequired", "height", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            g: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            glyph: Qt([ "arabic-form", "class", "d", "glyph-name", "horiz-adv-x", "id", "lang", "orientation", "style", "unicode", "vert-adv-y", "vert-origin-x", "vert-origin-y", "xml:base", "xml:lang", "xml:space" ]),
            glyphRef: Qt([ "class", "dx", "dy", "format", "glyphRef", "id", "style", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            glyphref: wt(),
            hkern: Qt([ "g1", "g2", "id", "k", "u1", "u2", "xml:base", "xml:lang", "xml:space" ]),
            image: Qt([ "class", "externalResourcesRequired", "height", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "preserveAspectRatio", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "width", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            line: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "x1", "x2", "xml:base", "xml:lang", "xml:space", "y1", "y2" ]),
            linearGradient: Qt([ "class", "externalResourcesRequired", "gradientTransform", "gradientUnits", "id", "spreadMethod", "style", "x1", "x2", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y1", "y2" ]),
            marker: Qt([ "class", "externalResourcesRequired", "id", "markerHeight", "markerUnits", "markerWidth", "orient", "preserveAspectRatio", "refX", "refY", "style", "viewBox", "xml:base", "xml:lang", "xml:space" ]),
            mask: Qt([ "class", "externalResourcesRequired", "height", "id", "maskContentUnits", "maskUnits", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            metadata: Qt([ "id", "xml:base", "xml:lang", "xml:space" ]),
            "missing-glyph": Qt([ "class", "d", "horiz-adv-x", "id", "style", "vert-adv-y", "vert-origin-x", "vert-origin-y", "xml:base", "xml:lang", "xml:space" ]),
            mpath: Qt([ "externalResourcesRequired", "id", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            path: Qt([ "class", "d", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "pathLength", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            pattern: Qt([ "class", "externalResourcesRequired", "height", "id", "patternContentUnits", "patternTransform", "patternUnits", "preserveAspectRatio", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "viewBox", "width", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            polygon: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "points", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            polyline: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "points", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            radialGradient: Qt([ "class", "cx", "cy", "externalResourcesRequired", "fx", "fy", "gradientTransform", "gradientUnits", "id", "r", "spreadMethod", "style", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            rect: Qt([ "class", "externalResourcesRequired", "height", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "rx", "ry", "style", "systemLanguage", "transform", "width", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            script: Qt([ "externalResourcesRequired", "id", "type", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            set: Qt([ "attributeName", "attributeType", "begin", "dur", "end", "externalResourcesRequired", "fill", "id", "max", "min", "onbegin", "onend", "onload", "onrepeat", "repeatCount", "repeatDur", "requiredExtensions", "requiredFeatures", "restart", "systemLanguage", "to", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            stop: Qt([ "class", "id", "offset", "style", "xml:base", "xml:lang", "xml:space" ]),
            style: Qt([ "id", "media", "title", "type", "xml:base", "xml:lang", "xml:space" ]),
            svg: Qt([ "baseProfile", "class", "contentScriptType", "contentStyleType", "externalResourcesRequired", "height", "id", "onabort", "onactivate", "onclick", "onerror", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "onresize", "onscroll", "onunload", "onzoom", "preserveAspectRatio", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "version", "viewBox", "width", "x", "xml:base", "xml:lang", "xml:space", "y", "zoomAndPan" ]),
            switch: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "xml:base", "xml:lang", "xml:space" ]),
            symbol: Qt([ "class", "externalResourcesRequired", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "preserveAspectRatio", "style", "viewBox", "xml:base", "xml:lang", "xml:space" ]),
            text: Qt([ "class", "dx", "dy", "externalResourcesRequired", "id", "lengthAdjust", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "rotate", "style", "systemLanguage", "textLength", "transform", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            textPath: Qt([ "class", "externalResourcesRequired", "id", "lengthAdjust", "method", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "spacing", "startOffset", "style", "systemLanguage", "textLength", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space" ]),
            title: Qt([ "class", "id", "style", "xml:base", "xml:lang", "xml:space" ]),
            tref: Qt([ "class", "dx", "dy", "externalResourcesRequired", "id", "lengthAdjust", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "rotate", "style", "systemLanguage", "textLength", "x", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            tspan: Qt([ "class", "dx", "dy", "externalResourcesRequired", "id", "lengthAdjust", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "rotate", "style", "systemLanguage", "textLength", "x", "xml:base", "xml:lang", "xml:space", "y" ]),
            use: Qt([ "class", "externalResourcesRequired", "height", "id", "onactivate", "onclick", "onfocusin", "onfocusout", "onload", "onmousedown", "onmousemove", "onmouseout", "onmouseover", "onmouseup", "requiredExtensions", "requiredFeatures", "style", "systemLanguage", "transform", "width", "x", "xlink:actuate", "xlink:arcrole", "xlink:href", "xlink:role", "xlink:show", "xlink:title", "xlink:type", "xml:base", "xml:lang", "xml:space", "y" ]),
            view: Qt([ "externalResourcesRequired", "id", "preserveAspectRatio", "viewBox", "viewTarget", "xml:base", "xml:lang", "xml:space", "zoomAndPan" ]),
            vkern: Qt([ "g1", "g2", "id", "k", "u1", "u2", "xml:base", "xml:lang", "xml:space" ])
        });
        this._ = Qt([ "a", "altGlyph", "animate", "animateColor", "circle", "clipPath", "defs", "ellipse", "feBlend", "feColorMatrix", "feComponentTransfer", "feComposite", "feConvolveMatrix", "feDiffuseLighting", "feDisplacementMap", "feFlood", "feGaussianBlur", "feImage", "feMerge", "feMorphology", "feOffset", "feSpecularLighting", "feTile", "feTurbulence", "filter", "font", "foreignObject", "g", "glyph", "glyphRef", "image", "line", "linearGradient", "marker", "mask", "missing-glyph", "path", "pattern", "polygon", "polyline", "radialGradient", "rect", "stop", "svg", "switch", "symbol", "text", "textPath", "tref", "tspan", "use" ]);
        this.j = Qt([ "alignment-baseline", "baseline-shift", "clip-path", "clip-rule", "clip", "color-interpolation-filters", "color-interpolation", "color-profile", "color-rendering", "color", "cursor", "direction", "display", "dominant-baseline", "enable-background", "fill-opacity", "fill-rule", "fill", "filter", "flood-color", "flood-opacity", "font-family", "font-size-adjust", "font-size", "font-stretch", "font-style", "font-variant", "font-weight", "glyph-orientation-horizontal", "glyph-orientation-vertical", "image-rendering", "kerning", "letter-spacing", "lighting-color", "marker-end", "marker-mid", "marker-start", "mask", "opacity", "overflow", "pointer-events", "shape-rendering", "stop-color", "stop-opacity", "stroke-dasharray", "stroke-dashoffset", "stroke-linecap", "stroke-linejoin", "stroke-miterlimit", "stroke-opacity", "stroke-width", "stroke", "text-anchor", "text-decoration", "text-rendering", "unicode-bidi", "visibility", "word-spacing", "writing-mode" ]);
        this.SVGElement = t.globalThis.SVGElement;
        const e = t.document.createElement("div");
        e.innerHTML = "<svg><altGlyph /></svg>";
        if ("altglyph" === e.firstElementChild.nodeName) {
            const t = this.V;
            let e = t.altGlyph;
            t.altGlyph = t.altglyph;
            t.altglyph = e;
            e = t.altGlyphDef;
            t.altGlyphDef = t.altglyphdef;
            t.altglyphdef = e;
            e = t.altGlyphItem;
            t.altGlyphItem = t.altglyphitem;
            t.altglyphitem = e;
            e = t.glyphRef;
            t.glyphRef = t.glyphref;
            t.glyphref = e;
        }
    }
    static register(t) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(Yt, this).register(t);
    }
    isStandardSvgAttribute(t, e) {
        var i;
        if (!(t instanceof this.SVGElement)) return false;
        return true === this._[t.nodeName] && true === this.j[e] || true === (null === (i = this.V[t.nodeName]) || void 0 === i ? void 0 : i[e]);
    }
}

SVGAnalyzer.inject = [ Kt ];

const Zt = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAttrMapper", (t => t.singleton(AttrMapper)));

class AttrMapper {
    constructor(t) {
        this.svg = t;
        this.fns = [];
        this.N = wt();
        this.W = wt();
        this.useMapping({
            LABEL: {
                for: "htmlFor"
            },
            IMG: {
                usemap: "useMap"
            },
            INPUT: {
                maxlength: "maxLength",
                minlength: "minLength",
                formaction: "formAction",
                formenctype: "formEncType",
                formmethod: "formMethod",
                formnovalidate: "formNoValidate",
                formtarget: "formTarget",
                inputmode: "inputMode"
            },
            TEXTAREA: {
                maxlength: "maxLength"
            },
            TD: {
                rowspan: "rowSpan",
                colspan: "colSpan"
            },
            TH: {
                rowspan: "rowSpan",
                colspan: "colSpan"
            }
        });
        this.useGlobalMapping({
            accesskey: "accessKey",
            contenteditable: "contentEditable",
            tabindex: "tabIndex",
            textcontent: "textContent",
            innerhtml: "innerHTML",
            scrolltop: "scrollTop",
            scrollleft: "scrollLeft",
            readonly: "readOnly"
        });
    }
    static get inject() {
        return [ Yt ];
    }
    useMapping(t) {
        var e;
        var i;
        let s;
        let n;
        let r;
        let o;
        for (r in t) {
            s = t[r];
            n = null !== (e = (i = this.N)[r]) && void 0 !== e ? e : i[r] = wt();
            for (o in s) {
                if (void 0 !== n[o]) throw te(o, r);
                n[o] = s[o];
            }
        }
    }
    useGlobalMapping(t) {
        const e = this.W;
        for (const i in t) {
            if (void 0 !== e[i]) throw te(i, "*");
            e[i] = t[i];
        }
    }
    useTwoWay(t) {
        this.fns.push(t);
    }
    isTwoWay(t, e) {
        return Jt(t, e) || this.fns.length > 0 && this.fns.some((i => i(t, e)));
    }
    map(t, e) {
        var i, s, n;
        return null !== (n = null !== (s = null === (i = this.N[t.nodeName]) || void 0 === i ? void 0 : i[e]) && void 0 !== s ? s : this.W[e]) && void 0 !== n ? n : yt(t, e, this.svg) ? e : null;
    }
}

function Jt(t, e) {
    switch (t.nodeName) {
      case "INPUT":
        switch (t.type) {
          case "checkbox":
          case "radio":
            return "checked" === e;

          default:
            return "value" === e || "files" === e || "value-as-number" === e || "value-as-date" === e;
        }

      case "TEXTAREA":
      case "SELECT":
        return "value" === e;

      default:
        switch (e) {
          case "textcontent":
          case "innerhtml":
            return t.hasAttribute("contenteditable");

          case "scrolltop":
          case "scrollleft":
            return true;

          default:
            return false;
        }
    }
}

function te(t, e) {
    return new Error(`Attribute ${t} has been already registered for ${"*" === e ? "all elements" : `<${e}/>`}`);
}

class CallBinding {
    constructor(t, e, i, s, n) {
        this.sourceExpression = t;
        this.target = e;
        this.targetProperty = i;
        this.locator = n;
        this.interceptor = this;
        this.isBound = false;
        this.targetObserver = s.getAccessor(e, i);
    }
    callSource(t) {
        const e = this.$scope.overrideContext;
        e.$event = t;
        const i = this.sourceExpression.evaluate(8, this.$scope, this.locator, null);
        Reflect.deleteProperty(e, "$event");
        return i;
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(2 | t);
        }
        this.$scope = e;
        if (this.sourceExpression.hasBind) this.sourceExpression.bind(t, e, this.interceptor);
        this.targetObserver.setValue((t => this.interceptor.callSource(t)), t, this.target, this.targetProperty);
        this.isBound = true;
    }
    $unbind(t) {
        if (!this.isBound) return;
        if (this.sourceExpression.hasUnbind) this.sourceExpression.unbind(t, this.$scope, this.interceptor);
        this.$scope = void 0;
        this.targetObserver.setValue(null, t, this.target, this.targetProperty);
        this.isBound = false;
    }
    observe(t, e) {
        return;
    }
    handleChange(t, e, i) {
        return;
    }
}

class AttributeObserver {
    constructor(t, e, i) {
        this.type = 2 | 1 | 4;
        this.v = null;
        this.ov = null;
        this.H = false;
        this.f = 0;
        this.o = t;
        this.G = e;
        this.X = i;
    }
    getValue() {
        return this.v;
    }
    setValue(t, e) {
        this.v = t;
        this.H = t !== this.ov;
        if (0 === (256 & e)) this.K();
    }
    K() {
        if (this.H) {
            this.H = false;
            this.ov = this.v;
            switch (this.X) {
              case "class":
                this.o.classList.toggle(this.G, !!this.v);
                break;

              case "style":
                {
                    let t = "";
                    let e = this.v;
                    if (At(e) && e.includes("!important")) {
                        t = "important";
                        e = e.replace("!important", "");
                    }
                    this.o.style.setProperty(this.G, e, t);
                    break;
                }

              default:
                if (null == this.v) this.o.removeAttribute(this.X); else this.o.setAttribute(this.X, String(this.v));
            }
        }
    }
    handleMutation(t) {
        let e = false;
        for (let i = 0, s = t.length; s > i; ++i) {
            const s = t[i];
            if ("attributes" === s.type && s.attributeName === this.G) {
                e = true;
                break;
            }
        }
        if (e) {
            let t;
            switch (this.X) {
              case "class":
                t = this.o.classList.contains(this.G);
                break;

              case "style":
                t = this.o.style.getPropertyValue(this.G);
                break;

              default:
                throw new Error(`AUR0651:${this.X}`);
            }
            if (t !== this.v) {
                this.ov = this.v;
                this.v = t;
                this.H = false;
                this.f = 0;
                this.queue.add(this);
            }
        }
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) {
            this.v = this.ov = this.o.getAttribute(this.G);
            ee(this.o.ownerDocument.defaultView.MutationObserver, this.o, this);
        }
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) ie(this.o, this);
    }
    flush() {
        re = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, re, this.f);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection)(AttributeObserver);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.withFlushQueue)(AttributeObserver);

const ee = (t, e, i) => {
    if (void 0 === e.$eMObs) e.$eMObs = new Set;
    if (void 0 === e.$mObs) (e.$mObs = new t(se)).observe(e, {
        attributes: true
    });
    e.$eMObs.add(i);
};

const ie = (t, e) => {
    const i = t.$eMObs;
    if (i && i.delete(e)) {
        if (0 === i.size) {
            t.$mObs.disconnect();
            t.$mObs = void 0;
        }
        return true;
    }
    return false;
};

const se = t => {
    t[0].target.$eMObs.forEach(ne, t);
};

function ne(t) {
    t.handleMutation(this);
}

let re;

class BindingTargetSubscriber {
    constructor(t) {
        this.b = t;
    }
    handleChange(t, e, i) {
        const s = this.b;
        if (t !== s.sourceExpression.evaluate(i, s.$scope, s.locator, null)) s.updateSource(t, i);
    }
}

const {oneTime: oe, toView: le, fromView: he} = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode;

const ae = le | oe;

const ce = {
    reusable: false,
    preempt: true
};

class AttributeBinding {
    constructor(t, e, i, s, n, r, o) {
        this.sourceExpression = t;
        this.targetAttribute = i;
        this.targetProperty = s;
        this.mode = n;
        this.locator = o;
        this.interceptor = this;
        this.isBound = false;
        this.$scope = null;
        this.task = null;
        this.targetSubscriber = null;
        this.persistentFlags = 0;
        this.value = void 0;
        this.target = e;
        this.p = o.get(Kt);
        this.oL = r;
    }
    updateTarget(t, e) {
        e |= this.persistentFlags;
        this.targetObserver.setValue(t, e, this.target, this.targetProperty);
    }
    updateSource(t, e) {
        e |= this.persistentFlags;
        this.sourceExpression.assign(e, this.$scope, this.locator, t);
    }
    handleChange(t, e, i) {
        if (!this.isBound) return;
        i |= this.persistentFlags;
        const s = this.mode;
        const n = this.interceptor;
        const r = this.sourceExpression;
        const o = this.$scope;
        const l = this.locator;
        const h = this.targetObserver;
        const a = 0 === (2 & i) && (4 & h.type) > 0;
        let c = false;
        let u;
        if (10082 !== r.$kind || this.obs.count > 1) {
            c = 0 === (s & oe);
            if (c) this.obs.version++;
            t = r.evaluate(i, o, l, n);
            if (c) this.obs.clear();
        }
        if (t !== this.value) {
            this.value = t;
            if (a) {
                u = this.task;
                this.task = this.p.domWriteQueue.queueTask((() => {
                    this.task = null;
                    n.updateTarget(t, i);
                }), ce);
                null === u || void 0 === u ? void 0 : u.cancel();
            } else n.updateTarget(t, i);
        }
    }
    $bind(t, e) {
        var i;
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(2 | t);
        }
        this.persistentFlags = 961 & t;
        this.$scope = e;
        let s = this.sourceExpression;
        if (s.hasBind) s.bind(t, e, this.interceptor);
        let n = this.targetObserver;
        if (!n) n = this.targetObserver = new AttributeObserver(this.target, this.targetProperty, this.targetAttribute);
        s = this.sourceExpression;
        const r = this.mode;
        const o = this.interceptor;
        let l = false;
        if (r & ae) {
            l = (r & le) > 0;
            o.updateTarget(this.value = s.evaluate(t, e, this.locator, l ? o : null), t);
        }
        if (r & he) n.subscribe(null !== (i = this.targetSubscriber) && void 0 !== i ? i : this.targetSubscriber = new BindingTargetSubscriber(o));
        this.isBound = true;
    }
    $unbind(t) {
        var e;
        if (!this.isBound) return;
        this.persistentFlags = 0;
        if (this.sourceExpression.hasUnbind) this.sourceExpression.unbind(t, this.$scope, this.interceptor);
        this.$scope = null;
        this.value = void 0;
        if (this.targetSubscriber) this.targetObserver.unsubscribe(this.targetSubscriber);
        null === (e = this.task) || void 0 === e ? void 0 : e.cancel();
        this.task = null;
        this.obs.clearAll();
        this.isBound = false;
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(AttributeBinding);

const {toView: ue} = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode;

const fe = {
    reusable: false,
    preempt: true
};

class InterpolationBinding {
    constructor(t, e, i, s, n, r, o) {
        this.interpolation = e;
        this.target = i;
        this.targetProperty = s;
        this.mode = n;
        this.locator = r;
        this.taskQueue = o;
        this.interceptor = this;
        this.isBound = false;
        this.$scope = void 0;
        this.task = null;
        this.oL = t;
        this.targetObserver = t.getAccessor(i, s);
        const l = e.expressions;
        const h = this.partBindings = Array(l.length);
        const a = l.length;
        let c = 0;
        for (;a > c; ++c) h[c] = new InterpolationPartBinding(l[c], i, s, r, t, this);
    }
    updateTarget(t, e) {
        const i = this.partBindings;
        const s = this.interpolation.parts;
        const n = i.length;
        let r = "";
        let o = 0;
        if (1 === n) r = s[0] + i[0].value + s[1]; else {
            r = s[0];
            for (;n > o; ++o) r += i[o].value + s[o + 1];
        }
        const l = this.targetObserver;
        const h = 0 === (2 & e) && (4 & l.type) > 0;
        let a;
        if (h) {
            a = this.task;
            this.task = this.taskQueue.queueTask((() => {
                this.task = null;
                l.setValue(r, e, this.target, this.targetProperty);
            }), fe);
            null === a || void 0 === a ? void 0 : a.cancel();
            a = null;
        } else l.setValue(r, e, this.target, this.targetProperty);
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(t);
        }
        this.isBound = true;
        this.$scope = e;
        const i = this.partBindings;
        const s = i.length;
        let n = 0;
        for (;s > n; ++n) i[n].$bind(t, e);
        this.updateTarget(void 0, t);
    }
    $unbind(t) {
        var e;
        if (!this.isBound) return;
        this.isBound = false;
        this.$scope = void 0;
        const i = this.partBindings;
        const s = i.length;
        let n = 0;
        for (;s > n; ++n) i[n].interceptor.$unbind(t);
        null === (e = this.task) || void 0 === e ? void 0 : e.cancel();
        this.task = null;
    }
}

class InterpolationPartBinding {
    constructor(t, e, i, s, n, r) {
        this.sourceExpression = t;
        this.target = e;
        this.targetProperty = i;
        this.locator = s;
        this.owner = r;
        this.interceptor = this;
        this.mode = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView;
        this.value = "";
        this.task = null;
        this.isBound = false;
        this.oL = n;
    }
    handleChange(t, e, i) {
        if (!this.isBound) return;
        const s = this.sourceExpression;
        const n = this.obs;
        const r = 10082 === s.$kind && 1 === n.count;
        let o = false;
        if (!r) {
            o = (this.mode & ue) > 0;
            if (o) n.version++;
            t = s.evaluate(i, this.$scope, this.locator, o ? this.interceptor : null);
            if (o) n.clear();
        }
        if (t != this.value) {
            this.value = t;
            if (t instanceof Array) this.observeCollection(t);
            this.owner.updateTarget(t, i);
        }
    }
    handleCollectionChange(t, e) {
        this.owner.updateTarget(void 0, e);
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(t);
        }
        this.isBound = true;
        this.$scope = e;
        if (this.sourceExpression.hasBind) this.sourceExpression.bind(t, e, this.interceptor);
        this.value = this.sourceExpression.evaluate(t, e, this.locator, (this.mode & ue) > 0 ? this.interceptor : null);
        if (this.value instanceof Array) this.observeCollection(this.value);
    }
    $unbind(t) {
        if (!this.isBound) return;
        this.isBound = false;
        if (this.sourceExpression.hasUnbind) this.sourceExpression.unbind(t, this.$scope, this.interceptor);
        this.$scope = void 0;
        this.obs.clearAll();
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(InterpolationPartBinding);

class ContentBinding {
    constructor(t, e, i, s, n, r) {
        this.sourceExpression = t;
        this.target = e;
        this.locator = i;
        this.p = n;
        this.strict = r;
        this.interceptor = this;
        this.mode = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView;
        this.value = "";
        this.task = null;
        this.isBound = false;
        this.oL = s;
    }
    updateTarget(t, e) {
        var i, s;
        const n = this.target;
        const r = this.p.Node;
        const o = this.value;
        this.value = t;
        if (o instanceof r) null === (i = o.parentNode) || void 0 === i ? void 0 : i.removeChild(o);
        if (t instanceof r) {
            n.textContent = "";
            null === (s = n.parentNode) || void 0 === s ? void 0 : s.insertBefore(t, n);
        } else n.textContent = String(t);
    }
    handleChange(t, e, i) {
        var s;
        if (!this.isBound) return;
        const n = this.sourceExpression;
        const r = this.obs;
        const o = 10082 === n.$kind && 1 === r.count;
        let l = false;
        if (!o) {
            l = (this.mode & ue) > 0;
            if (l) r.version++;
            i |= this.strict ? 1 : 0;
            t = n.evaluate(i, this.$scope, this.locator, l ? this.interceptor : null);
            if (l) r.clear();
        }
        if (t === this.value) {
            null === (s = this.task) || void 0 === s ? void 0 : s.cancel();
            this.task = null;
            return;
        }
        const h = 0 === (2 & i);
        if (h) this.queueUpdate(t, i); else this.updateTarget(t, i);
    }
    handleCollectionChange() {
        this.queueUpdate(this.value, 0);
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(t);
        }
        this.isBound = true;
        this.$scope = e;
        if (this.sourceExpression.hasBind) this.sourceExpression.bind(t, e, this.interceptor);
        t |= this.strict ? 1 : 0;
        const i = this.value = this.sourceExpression.evaluate(t, e, this.locator, (this.mode & ue) > 0 ? this.interceptor : null);
        if (i instanceof Array) this.observeCollection(i);
        this.updateTarget(i, t);
    }
    $unbind(t) {
        var e;
        if (!this.isBound) return;
        this.isBound = false;
        if (this.sourceExpression.hasUnbind) this.sourceExpression.unbind(t, this.$scope, this.interceptor);
        this.$scope = void 0;
        this.obs.clearAll();
        null === (e = this.task) || void 0 === e ? void 0 : e.cancel();
        this.task = null;
    }
    queueUpdate(t, e) {
        const i = this.task;
        this.task = this.p.domWriteQueue.queueTask((() => {
            this.task = null;
            this.updateTarget(t, e);
        }), fe);
        null === i || void 0 === i ? void 0 : i.cancel();
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(ContentBinding);

class LetBinding {
    constructor(t, e, i, s, n = false) {
        this.sourceExpression = t;
        this.targetProperty = e;
        this.locator = s;
        this.interceptor = this;
        this.isBound = false;
        this.$scope = void 0;
        this.task = null;
        this.target = null;
        this.oL = i;
        this.Y = n;
    }
    handleChange(t, e, i) {
        if (!this.isBound) return;
        const s = this.target;
        const n = this.targetProperty;
        const r = s[n];
        this.obs.version++;
        t = this.sourceExpression.evaluate(i, this.$scope, this.locator, this.interceptor);
        this.obs.clear();
        if (t !== r) s[n] = t;
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(2 | t);
        }
        this.$scope = e;
        this.target = this.Y ? e.bindingContext : e.overrideContext;
        const i = this.sourceExpression;
        if (i.hasBind) i.bind(t, e, this.interceptor);
        this.target[this.targetProperty] = this.sourceExpression.evaluate(2 | t, e, this.locator, this.interceptor);
        this.isBound = true;
    }
    $unbind(t) {
        if (!this.isBound) return;
        const e = this.sourceExpression;
        if (e.hasUnbind) e.unbind(t, this.$scope, this.interceptor);
        this.$scope = void 0;
        this.obs.clearAll();
        this.isBound = false;
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(LetBinding);

const {oneTime: de, toView: me, fromView: ve} = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode;

const pe = me | de;

const ge = {
    reusable: false,
    preempt: true
};

class PropertyBinding {
    constructor(t, e, i, s, n, r, o) {
        this.sourceExpression = t;
        this.target = e;
        this.targetProperty = i;
        this.mode = s;
        this.locator = r;
        this.taskQueue = o;
        this.interceptor = this;
        this.isBound = false;
        this.$scope = void 0;
        this.targetObserver = void 0;
        this.persistentFlags = 0;
        this.task = null;
        this.targetSubscriber = null;
        this.oL = n;
    }
    updateTarget(t, e) {
        e |= this.persistentFlags;
        this.targetObserver.setValue(t, e, this.target, this.targetProperty);
    }
    updateSource(t, e) {
        e |= this.persistentFlags;
        this.sourceExpression.assign(e, this.$scope, this.locator, t);
    }
    handleChange(t, e, i) {
        if (!this.isBound) return;
        i |= this.persistentFlags;
        const s = 0 === (2 & i) && (4 & this.targetObserver.type) > 0;
        const n = this.obs;
        let r = false;
        if (10082 !== this.sourceExpression.$kind || n.count > 1) {
            r = this.mode > de;
            if (r) n.version++;
            t = this.sourceExpression.evaluate(i, this.$scope, this.locator, this.interceptor);
            if (r) n.clear();
        }
        if (s) {
            we = this.task;
            this.task = this.taskQueue.queueTask((() => {
                this.interceptor.updateTarget(t, i);
                this.task = null;
            }), ge);
            null === we || void 0 === we ? void 0 : we.cancel();
            we = null;
        } else this.interceptor.updateTarget(t, i);
    }
    $bind(t, e) {
        var i;
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(2 | t);
        }
        t |= 1;
        this.persistentFlags = 961 & t;
        this.$scope = e;
        let s = this.sourceExpression;
        if (s.hasBind) s.bind(t, e, this.interceptor);
        const n = this.oL;
        const r = this.mode;
        let o = this.targetObserver;
        if (!o) {
            if (r & ve) o = n.getObserver(this.target, this.targetProperty); else o = n.getAccessor(this.target, this.targetProperty);
            this.targetObserver = o;
        }
        s = this.sourceExpression;
        const l = this.interceptor;
        const h = (r & me) > 0;
        if (r & pe) l.updateTarget(s.evaluate(t, e, this.locator, h ? l : null), t);
        if (r & ve) {
            o.subscribe(null !== (i = this.targetSubscriber) && void 0 !== i ? i : this.targetSubscriber = new BindingTargetSubscriber(l));
            if (!h) l.updateSource(o.getValue(this.target, this.targetProperty), t);
        }
        this.isBound = true;
    }
    $unbind(t) {
        if (!this.isBound) return;
        this.persistentFlags = 0;
        if (this.sourceExpression.hasUnbind) this.sourceExpression.unbind(t, this.$scope, this.interceptor);
        this.$scope = void 0;
        we = this.task;
        if (this.targetSubscriber) this.targetObserver.unsubscribe(this.targetSubscriber);
        if (null != we) {
            we.cancel();
            we = this.task = null;
        }
        this.obs.clearAll();
        this.isBound = false;
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(PropertyBinding);

let we = null;

class RefBinding {
    constructor(t, e, i) {
        this.sourceExpression = t;
        this.target = e;
        this.locator = i;
        this.interceptor = this;
        this.isBound = false;
        this.$scope = void 0;
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(2 | t);
        }
        this.$scope = e;
        if (this.sourceExpression.hasBind) this.sourceExpression.bind(t, e, this);
        this.sourceExpression.assign(t, this.$scope, this.locator, this.target);
        this.isBound = true;
    }
    $unbind(t) {
        if (!this.isBound) return;
        let e = this.sourceExpression;
        if (e.evaluate(t, this.$scope, this.locator, null) === this.target) e.assign(t, this.$scope, this.locator, null);
        e = this.sourceExpression;
        if (e.hasUnbind) e.unbind(t, this.$scope, this.interceptor);
        this.$scope = void 0;
        this.isBound = false;
    }
    observe(t, e) {
        return;
    }
    handleChange(t, e, i) {
        return;
    }
}

const be = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAppTask");

class $AppTask {
    constructor(t, e, i) {
        this.c = void 0;
        this.slot = t;
        this.k = e;
        this.cb = i;
    }
    register(t) {
        return this.c = t.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(be, this));
    }
    run() {
        const t = this.k;
        const e = this.cb;
        return null === t ? e() : e(this.c.get(t));
    }
}

const xe = Object.freeze({
    beforeCreate: ye("beforeCreate"),
    hydrating: ye("hydrating"),
    hydrated: ye("hydrated"),
    beforeActivate: ye("beforeActivate"),
    afterActivate: ye("afterActivate"),
    beforeDeactivate: ye("beforeDeactivate"),
    afterDeactivate: ye("afterDeactivate")
});

function ye(t) {
    function e(e, i) {
        if (Ct(i)) return new $AppTask(t, e, i);
        return new $AppTask(t, null, e);
    }
    return e;
}

function ke(t, e) {
    let i;
    function s(t, e) {
        if (arguments.length > 1) i.property = e;
        ct(Ae, ChildrenDefinition.create(e, i), t.constructor, e);
        pt(t.constructor, Se.keyFrom(e));
    }
    if (arguments.length > 1) {
        i = {};
        s(t, e);
        return;
    } else if (At(t)) {
        i = {};
        return s;
    }
    i = void 0 === t ? {} : t;
    return s;
}

function Ce(t) {
    return t.startsWith(Ae);
}

const Ae = dt("children-observer");

const Se = Object.freeze({
    name: Ae,
    keyFrom: t => `${Ae}:${t}`,
    from(...t) {
        const e = {};
        const i = Array.isArray;
        function s(t) {
            e[t] = ChildrenDefinition.create(t);
        }
        function n(t, i) {
            e[t] = ChildrenDefinition.create(t, i);
        }
        function r(t) {
            if (i(t)) t.forEach(s); else if (t instanceof ChildrenDefinition) e[t.property] = t; else if (void 0 !== t) Object.keys(t).forEach((e => n(e, t)));
        }
        t.forEach(r);
        return e;
    },
    getAll(t) {
        const e = Ae.length + 1;
        const i = [];
        const n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.getPrototypeChain)(t);
        let r = n.length;
        let o = 0;
        let l;
        let h;
        let a;
        while (--r >= 0) {
            a = n[r];
            l = gt(a).filter(Ce);
            h = l.length;
            for (let t = 0; t < h; ++t) i[o++] = ht(Ae, a, l[t].slice(e));
        }
        return i;
    }
});

const Re = {
    childList: true
};

class ChildrenDefinition {
    constructor(t, e, i, s, n, r) {
        this.callback = t;
        this.property = e;
        this.options = i;
        this.query = s;
        this.filter = n;
        this.map = r;
    }
    static create(t, e = {}) {
        var i;
        return new ChildrenDefinition((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(e.callback, `${t}Changed`), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(e.property, t), null !== (i = e.options) && void 0 !== i ? i : Re, e.query, e.filter, e.map);
    }
}

class ChildrenObserver {
    constructor(t, e, i, s, n = Ee, r = Be, o = Ie, l) {
        this.controller = t;
        this.obj = e;
        this.propertyKey = i;
        this.query = n;
        this.filter = r;
        this.map = o;
        this.options = l;
        this.observing = false;
        this.children = void 0;
        this.observer = void 0;
        this.callback = e[s];
        Reflect.defineProperty(this.obj, this.propertyKey, {
            enumerable: true,
            configurable: true,
            get: () => this.getValue(),
            set: () => {}
        });
    }
    getValue() {
        return this.observing ? this.children : this.get();
    }
    setValue(t) {}
    start() {
        var t;
        if (!this.observing) {
            this.observing = true;
            this.children = this.get();
            (null !== (t = this.observer) && void 0 !== t ? t : this.observer = new this.controller.host.ownerDocument.defaultView.MutationObserver((() => {
                this.Z();
            }))).observe(this.controller.host, this.options);
        }
    }
    stop() {
        if (this.observing) {
            this.observing = false;
            this.observer.disconnect();
            this.children = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
        }
    }
    Z() {
        this.children = this.get();
        if (void 0 !== this.callback) this.callback.call(this.obj);
        this.subs.notify(this.children, void 0, 0);
    }
    get() {
        return De(this.controller, this.query, this.filter, this.map);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection)()(ChildrenObserver);

function Ee(t) {
    return t.host.childNodes;
}

function Be(t, e, i) {
    return !!i;
}

function Ie(t, e, i) {
    return i;
}

const Te = {
    optional: true
};

function De(t, e, i, s) {
    var n;
    const r = e(t);
    const o = r.length;
    const l = [];
    let h;
    let a;
    let c;
    let u = 0;
    for (;u < o; ++u) {
        h = r[u];
        a = si.for(h, Te);
        c = null !== (n = null === a || void 0 === a ? void 0 : a.viewModel) && void 0 !== n ? n : null;
        if (i(h, a, c)) l.push(s(h, a, c));
    }
    return l;
}

function Pe(t) {
    return function(e) {
        return Me.define(t, e);
    };
}

function Oe(t) {
    return function(e) {
        return Me.define(At(t) ? {
            isTemplateController: true,
            name: t
        } : {
            isTemplateController: true,
            ...t
        }, e);
    };
}

class CustomAttributeDefinition {
    constructor(t, e, i, s, n, r, o, l, h) {
        this.Type = t;
        this.name = e;
        this.aliases = i;
        this.key = s;
        this.defaultBindingMode = n;
        this.isTemplateController = r;
        this.bindables = o;
        this.noMultiBindings = l;
        this.watches = h;
    }
    get type() {
        return 2;
    }
    static create(t, e) {
        let i;
        let s;
        if (At(t)) {
            i = t;
            s = {
                name: i
            };
        } else {
            i = t.name;
            s = t;
        }
        return new CustomAttributeDefinition(e, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(qe(e, "name"), i), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(qe(e, "aliases"), s.aliases, e.aliases), Me.keyFrom(i), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(qe(e, "defaultBindingMode"), s.defaultBindingMode, e.defaultBindingMode, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(qe(e, "isTemplateController"), s.isTemplateController, e.isTemplateController, false), Bt.from(e, ...Bt.getAll(e), qe(e, "bindables"), e.bindables, s.bindables), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(qe(e, "noMultiBindings"), s.noMultiBindings, e.noMultiBindings, false), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(_e.getAnnotation(e), e.watches));
    }
    register(t) {
        const {Type: e, key: i, aliases: s} = this;
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.transient(i, e).register(t);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.aliasTo(i, e).register(t);
        (0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.registerAliases)(s, Me, i, t);
    }
}

const $e = mt("custom-attribute");

const Le = t => `${$e}:${t}`;

const qe = (t, e) => ht(dt(e), t);

const Me = Object.freeze({
    name: $e,
    keyFrom: Le,
    isType(t) {
        return Ct(t) && at($e, t);
    },
    for(t, e) {
        var i;
        return null !== (i = is(t, Le(e))) && void 0 !== i ? i : void 0;
    },
    define(t, e) {
        const i = CustomAttributeDefinition.create(t, e);
        ct($e, i, i.Type);
        ct($e, i, i);
        vt(e, $e);
        return i.Type;
    },
    getDefinition(t) {
        const e = ht($e, t);
        if (void 0 === e) throw new Error(`AUR0759:${t.name}`);
        return e;
    },
    annotate(t, e, i) {
        ct(dt(e), i, t);
    },
    getAnnotation: qe
});

function Ue(t, e) {
    if (!t) throw new Error("AUR0772");
    return function i(s, n, r) {
        const o = null == n;
        const l = o ? s : s.constructor;
        const h = new WatchDefinition(t, o ? e : r.value);
        if (o) {
            if (!Ct(e) && (null == e || !(e in l.prototype))) throw new Error(`AUR0773:${String(e)}@${l.name}}`);
        } else if (!Ct(null === r || void 0 === r ? void 0 : r.value)) throw new Error(`AUR0774:${String(n)}`);
        _e.add(l, h);
        if (Me.isType(l)) Me.getDefinition(l).watches.push(h);
        if (si.isType(l)) si.getDefinition(l).watches.push(h);
    };
}

class WatchDefinition {
    constructor(t, e) {
        this.expression = t;
        this.callback = e;
    }
}

const Fe = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;

const Ve = dt("watch");

const _e = Object.freeze({
    name: Ve,
    add(t, e) {
        let i = ht(Ve, t);
        if (null == i) ct(Ve, i = [], t);
        i.push(e);
    },
    getAnnotation(t) {
        var e;
        return null !== (e = ht(Ve, t)) && void 0 !== e ? e : Fe;
    }
});

function je(t) {
    return function(e) {
        return si.define(t, e);
    };
}

function Ne(t) {
    if (void 0 === t) return function(t) {
        ei(t, "shadowOptions", {
            mode: "open"
        });
    };
    if (!Ct(t)) return function(e) {
        ei(e, "shadowOptions", t);
    };
    ei(t, "shadowOptions", {
        mode: "open"
    });
}

function We(t) {
    if (void 0 === t) return function(t) {
        ei(t, "containerless", true);
    };
    ei(t, "containerless", true);
}

const He = new WeakMap;

class CustomElementDefinition {
    constructor(t, e, i, s, n, r, o, l, h, a, c, u, f, d, m, v, p, g, w, b, x) {
        this.Type = t;
        this.name = e;
        this.aliases = i;
        this.key = s;
        this.cache = n;
        this.capture = r;
        this.template = o;
        this.instructions = l;
        this.dependencies = h;
        this.injectable = a;
        this.needsCompile = c;
        this.surrogates = u;
        this.bindables = f;
        this.childrenObservers = d;
        this.containerless = m;
        this.isStrictBinding = v;
        this.shadowOptions = p;
        this.hasSlots = g;
        this.enhance = w;
        this.watches = b;
        this.processContent = x;
    }
    get type() {
        return 1;
    }
    static create(t, e = null) {
        if (null === e) {
            const i = t;
            if (At(i)) throw new Error(`AUR0761:${t}`);
            const s = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("name", i, ti);
            if (Ct(i.Type)) e = i.Type; else e = si.generateType((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.pascalCase)(s));
            return new CustomElementDefinition(e, s, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(i.aliases), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("key", i, (() => si.keyFrom(s))), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("cache", i, Ge), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("capture", i, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("template", i, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(i.instructions), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(i.dependencies), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("injectable", i, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("needsCompile", i, Ye), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(i.surrogates), Bt.from(e, i.bindables), Se.from(i.childrenObservers), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("containerless", i, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("isStrictBinding", i, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("shadowOptions", i, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("hasSlots", i, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("enhance", i, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("watches", i, Qe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("processContent", e, Xe));
        }
        if (At(t)) return new CustomElementDefinition(e, t, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "aliases"), e.aliases), si.keyFrom(t), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("cache", e, Ge), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("capture", e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("template", e, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "instructions"), e.instructions), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "dependencies"), e.dependencies), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("injectable", e, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("needsCompile", e, Ye), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "surrogates"), e.surrogates), Bt.from(e, ...Bt.getAll(e), ii(e, "bindables"), e.bindables), Se.from(...Se.getAll(e), ii(e, "childrenObservers"), e.childrenObservers), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("containerless", e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("isStrictBinding", e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("shadowOptions", e, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("hasSlots", e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("enhance", e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(_e.getAnnotation(e), e.watches), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrTypeOrDefault)("processContent", e, Xe));
        const i = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromDefinitionOrDefault)("name", t, ti);
        return new CustomElementDefinition(e, i, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "aliases"), t.aliases, e.aliases), si.keyFrom(i), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("cache", t, e, Ge), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("capture", t, e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("template", t, e, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "instructions"), t.instructions, e.instructions), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "dependencies"), t.dependencies, e.dependencies), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("injectable", t, e, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("needsCompile", t, e, Ye), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(ii(e, "surrogates"), t.surrogates, e.surrogates), Bt.from(e, ...Bt.getAll(e), ii(e, "bindables"), e.bindables, t.bindables), Se.from(...Se.getAll(e), ii(e, "childrenObservers"), e.childrenObservers, t.childrenObservers), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("containerless", t, e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("isStrictBinding", t, e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("shadowOptions", t, e, Xe), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("hasSlots", t, e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("enhance", t, e, Ke), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(t.watches, _e.getAnnotation(e), e.watches), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.fromAnnotationOrDefinitionOrTypeOrDefault)("processContent", t, e, Xe));
    }
    static getOrCreate(t) {
        if (t instanceof CustomElementDefinition) return t;
        if (He.has(t)) return He.get(t);
        const e = CustomElementDefinition.create(t);
        He.set(t, e);
        ct(Ze, e, e.Type);
        return e;
    }
    register(t) {
        const {Type: e, key: i, aliases: s} = this;
        if (!t.has(i, false)) {
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.transient(i, e).register(t);
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.aliasTo(i, e).register(t);
            (0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.registerAliases)(s, si, i, t);
        }
    }
}

const ze = {
    name: void 0,
    searchParents: false,
    optional: false
};

const Ge = () => 0;

const Xe = () => null;

const Ke = () => false;

const Ye = () => true;

const Qe = () => _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;

const Ze = mt("custom-element");

const Je = t => `${Ze}:${t}`;

const ti = (() => {
    let t = 0;
    return () => `unnamed-${++t}`;
})();

const ei = (t, e, i) => {
    ct(dt(e), i, t);
};

const ii = (t, e) => ht(dt(e), t);

const si = Object.freeze({
    name: Ze,
    keyFrom: Je,
    isType(t) {
        return Ct(t) && at(Ze, t);
    },
    for(t, e = ze) {
        if (void 0 === e.name && true !== e.searchParents) {
            const i = is(t, Ze);
            if (null === i) {
                if (true === e.optional) return null;
                throw new Error("AUR0762");
            }
            return i;
        }
        if (void 0 !== e.name) {
            if (true !== e.searchParents) {
                const i = is(t, Ze);
                if (null === i) throw new Error("AUR0763");
                if (i.is(e.name)) return i;
                return;
            }
            let i = t;
            let s = false;
            while (null !== i) {
                const t = is(i, Ze);
                if (null !== t) {
                    s = true;
                    if (t.is(e.name)) return t;
                }
                i = as(i);
            }
            if (s) return;
            throw new Error("AUR0764");
        }
        let i = t;
        while (null !== i) {
            const t = is(i, Ze);
            if (null !== t) return t;
            i = as(i);
        }
        throw new Error("AUR0765");
    },
    define(t, e) {
        const i = CustomElementDefinition.create(t, e);
        ct(Ze, i, i.Type);
        ct(Ze, i, i);
        vt(i.Type, Ze);
        return i.Type;
    },
    getDefinition(t) {
        const e = ht(Ze, t);
        if (void 0 === e) throw new Error(`AUR0760:${t.name}`);
        return e;
    },
    annotate: ei,
    getAnnotation: ii,
    generateName: ti,
    createInjectable() {
        const t = function(e, i, s) {
            const n = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.getOrCreateAnnotationParamTypes(e);
            n[s] = t;
            return e;
        };
        t.register = function(e) {
            return {
                resolve(e, i) {
                    if (i.has(t, true)) return i.get(t); else return null;
                }
            };
        };
        return t;
    },
    generateType: function() {
        const t = {
            value: "",
            writable: false,
            enumerable: false,
            configurable: true
        };
        const e = {};
        return function(i, s = e) {
            const n = class {};
            t.value = i;
            Reflect.defineProperty(n, "name", t);
            if (s !== e) Object.assign(n.prototype, s);
            return n;
        };
    }()
});

const ni = dt("processContent");

function ri(t) {
    return void 0 === t ? function(t, e, i) {
        ct(ni, oi(t, e), t);
    } : function(e) {
        t = oi(e, t);
        const i = ht(Ze, e);
        if (void 0 !== i) i.processContent = t; else ct(ni, t, e);
        return e;
    };
}

function oi(t, e) {
    if (At(e)) e = t[e];
    if (!Ct(e)) throw new Error(`AUR0766:${typeof e}`);
    return e;
}

class ClassAttributeAccessor {
    constructor(t) {
        this.obj = t;
        this.type = 2 | 4;
        this.value = "";
        this.ov = "";
        this.J = {};
        this.tt = 0;
        this.H = false;
    }
    get doNotCache() {
        return true;
    }
    getValue() {
        return this.value;
    }
    setValue(t, e) {
        this.value = t;
        this.H = t !== this.ov;
        if (0 === (256 & e)) this.K();
    }
    K() {
        if (this.H) {
            this.H = false;
            const t = this.value;
            const e = this.J;
            const i = li(t);
            let s = this.tt;
            this.ov = t;
            if (i.length > 0) this.et(i);
            this.tt += 1;
            if (0 === s) return;
            s -= 1;
            for (const t in e) {
                if (!Object.prototype.hasOwnProperty.call(e, t) || e[t] !== s) continue;
                this.obj.classList.remove(t);
            }
        }
    }
    et(t) {
        const e = this.obj;
        const i = t.length;
        let s = 0;
        let n;
        for (;s < i; s++) {
            n = t[s];
            if (0 === n.length) continue;
            this.J[n] = this.tt;
            e.classList.add(n);
        }
    }
}

function li(t) {
    if (At(t)) return hi(t);
    if ("object" !== typeof t) return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
    if (t instanceof Array) {
        const e = t.length;
        if (e > 0) {
            const i = [];
            let s = 0;
            for (;e > s; ++s) i.push(...li(t[s]));
            return i;
        } else return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
    }
    const e = [];
    let i;
    for (i in t) if (Boolean(t[i])) if (i.includes(" ")) e.push(...hi(i)); else e.push(i);
    return e;
}

function hi(t) {
    const e = t.match(/\S+/g);
    if (null === e) return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
    return e;
}

function ai(...t) {
    return new CSSModulesProcessorRegistry(t);
}

class CSSModulesProcessorRegistry {
    constructor(t) {
        this.modules = t;
    }
    register(t) {
        var e;
        const i = Object.assign({}, ...this.modules);
        const s = Me.define({
            name: "class",
            bindables: [ "value" ]
        }, (e = class CustomAttributeClass {
            constructor(t) {
                this.element = t;
            }
            binding() {
                this.valueChanged();
            }
            valueChanged() {
                if (!this.value) {
                    this.element.className = "";
                    return;
                }
                this.element.className = li(this.value).map((t => i[t] || t)).join(" ");
            }
        }, e.inject = [ ns ], e));
        t.register(s);
    }
}

function ci(...t) {
    return new ShadowDOMRegistry(t);
}

const ui = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IShadowDOMStyleFactory", (t => t.cachedCallback((t => {
    if (AdoptedStyleSheetsStyles.supported(t.get(Kt))) return t.get(AdoptedStyleSheetsStylesFactory);
    return t.get(StyleElementStylesFactory);
}))));

class ShadowDOMRegistry {
    constructor(t) {
        this.css = t;
    }
    register(t) {
        const e = t.get(di);
        const i = t.get(ui);
        t.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(fi, i.createStyles(this.css, e)));
    }
}

class AdoptedStyleSheetsStylesFactory {
    constructor(t) {
        this.p = t;
        this.cache = new Map;
    }
    createStyles(t, e) {
        return new AdoptedStyleSheetsStyles(this.p, t, this.cache, e);
    }
}

AdoptedStyleSheetsStylesFactory.inject = [ Kt ];

class StyleElementStylesFactory {
    constructor(t) {
        this.p = t;
    }
    createStyles(t, e) {
        return new StyleElementStyles(this.p, t, e);
    }
}

StyleElementStylesFactory.inject = [ Kt ];

const fi = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IShadowDOMStyles");

const di = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IShadowDOMGlobalStyles", (t => t.instance({
    applyTo: _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop
})));

class AdoptedStyleSheetsStyles {
    constructor(t, e, i, s = null) {
        this.sharedStyles = s;
        this.styleSheets = e.map((e => {
            let s;
            if (e instanceof t.CSSStyleSheet) s = e; else {
                s = i.get(e);
                if (void 0 === s) {
                    s = new t.CSSStyleSheet;
                    s.replaceSync(e);
                    i.set(e, s);
                }
            }
            return s;
        }));
    }
    static supported(t) {
        return "adoptedStyleSheets" in t.ShadowRoot.prototype;
    }
    applyTo(t) {
        if (null !== this.sharedStyles) this.sharedStyles.applyTo(t);
        t.adoptedStyleSheets = [ ...t.adoptedStyleSheets, ...this.styleSheets ];
    }
}

class StyleElementStyles {
    constructor(t, e, i = null) {
        this.p = t;
        this.localStyles = e;
        this.sharedStyles = i;
    }
    applyTo(t) {
        const e = this.localStyles;
        const i = this.p;
        for (let s = e.length - 1; s > -1; --s) {
            const n = i.document.createElement("style");
            n.innerHTML = e[s];
            t.prepend(n);
        }
        if (null !== this.sharedStyles) this.sharedStyles.applyTo(t);
    }
}

const mi = {
    shadowDOM(t) {
        return xe.beforeCreate(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IContainer, (e => {
            if (null != t.sharedStyles) {
                const i = e.get(ui);
                e.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(di, i.createStyles(t.sharedStyles, null)));
            }
        }));
    }
};

const {enter: vi, exit: pi} = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ConnectableSwitcher;

const {wrap: gi, unwrap: wi} = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ProxyObservable;

class ComputedWatcher {
    constructor(t, e, i, s, n) {
        this.obj = t;
        this.get = i;
        this.cb = s;
        this.useProxy = n;
        this.interceptor = this;
        this.value = void 0;
        this.isBound = false;
        this.running = false;
        this.oL = e;
    }
    handleChange() {
        this.run();
    }
    handleCollectionChange() {
        this.run();
    }
    $bind() {
        if (this.isBound) return;
        this.isBound = true;
        this.compute();
    }
    $unbind() {
        if (!this.isBound) return;
        this.isBound = false;
        this.obs.clearAll();
    }
    run() {
        if (!this.isBound || this.running) return;
        const t = this.obj;
        const e = this.value;
        const i = this.compute();
        if (!Object.is(i, e)) this.cb.call(t, i, e, t);
    }
    compute() {
        this.running = true;
        this.obs.version++;
        try {
            vi(this);
            return this.value = wi(this.get.call(void 0, this.useProxy ? gi(this.obj) : this.obj, this));
        } finally {
            this.obs.clear();
            this.running = false;
            pi(this);
        }
    }
}

class ExpressionWatcher {
    constructor(t, e, i, s, n) {
        this.scope = t;
        this.locator = e;
        this.oL = i;
        this.expression = s;
        this.callback = n;
        this.interceptor = this;
        this.isBound = false;
        this.obj = t.bindingContext;
    }
    handleChange(t) {
        const e = this.expression;
        const i = this.obj;
        const s = this.value;
        const n = 10082 === e.$kind && 1 === this.obs.count;
        if (!n) {
            this.obs.version++;
            t = e.evaluate(0, this.scope, this.locator, this);
            this.obs.clear();
        }
        if (!Object.is(t, s)) {
            this.value = t;
            this.callback.call(i, t, s, i);
        }
    }
    $bind() {
        if (this.isBound) return;
        this.isBound = true;
        this.obs.version++;
        this.value = this.expression.evaluate(0, this.scope, this.locator, this);
        this.obs.clear();
    }
    $unbind() {
        if (!this.isBound) return;
        this.isBound = false;
        this.obs.clearAll();
        this.value = void 0;
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(ComputedWatcher);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.connectable)(ExpressionWatcher);

const bi = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ILifecycleHooks");

class LifecycleHooksEntry {
    constructor(t, e) {
        this.definition = t;
        this.instance = e;
    }
}

class LifecycleHooksDefinition {
    constructor(t, e) {
        this.Type = t;
        this.propertyNames = e;
    }
    static create(t, e) {
        const i = new Set;
        let s = e.prototype;
        while (s !== Object.prototype) {
            for (const t of Object.getOwnPropertyNames(s)) if ("constructor" !== t) i.add(t);
            s = Object.getPrototypeOf(s);
        }
        return new LifecycleHooksDefinition(e, i);
    }
    register(t) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(bi, this.Type).register(t);
    }
}

const xi = new WeakMap;

const yi = dt("lifecycle-hooks");

const ki = Object.freeze({
    name: yi,
    define(t, e) {
        const i = LifecycleHooksDefinition.create(t, e);
        ct(yi, i, e);
        vt(e, yi);
        return i.Type;
    },
    resolve(t) {
        let e = xi.get(t);
        if (void 0 === e) {
            e = new LifecycleHooksLookupImpl;
            const i = t.root;
            const s = i.id === t.id ? t.getAll(bi) : t.has(bi, false) ? [ ...i.getAll(bi), ...t.getAll(bi) ] : i.getAll(bi);
            let n;
            let r;
            let o;
            let l;
            let h;
            for (n of s) {
                r = ht(yi, n.constructor);
                o = new LifecycleHooksEntry(r, n);
                for (l of r.propertyNames) {
                    h = e[l];
                    if (void 0 === h) e[l] = [ o ]; else h.push(o);
                }
            }
        }
        return e;
    }
});

class LifecycleHooksLookupImpl {}

function Ci() {
    return function t(e) {
        return ki.define({}, e);
    };
}

const Ai = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IViewFactory");

class ViewFactory {
    constructor(t, e) {
        this.isCaching = false;
        this.cache = null;
        this.cacheSize = -1;
        this.name = e.name;
        this.container = t;
        this.def = e;
    }
    setCacheSize(t, e) {
        if (t) {
            if ("*" === t) t = ViewFactory.maxCacheSize; else if (At(t)) t = parseInt(t, 10);
            if (-1 === this.cacheSize || !e) this.cacheSize = t;
        }
        if (this.cacheSize > 0) this.cache = []; else this.cache = null;
        this.isCaching = this.cacheSize > 0;
    }
    canReturnToCache(t) {
        return null != this.cache && this.cache.length < this.cacheSize;
    }
    tryReturnToCache(t) {
        if (this.canReturnToCache(t)) {
            this.cache.push(t);
            return true;
        }
        return false;
    }
    create(t) {
        const e = this.cache;
        let i;
        if (null != e && e.length > 0) {
            i = e.pop();
            return i;
        }
        i = Controller.$view(this, t);
        return i;
    }
}

ViewFactory.maxCacheSize = 65535;

const Si = new WeakSet;

function Ri(t) {
    return !Si.has(t);
}

function Ei(t) {
    Si.add(t);
    return CustomElementDefinition.create(t);
}

const Bi = mt("views");

const Ii = Object.freeze({
    name: Bi,
    has(t) {
        return Ct(t) && (at(Bi, t) || "$views" in t);
    },
    get(t) {
        if (Ct(t) && "$views" in t) {
            const e = t.$views;
            const i = e.filter(Ri).map(Ei);
            for (const e of i) Ii.add(t, e);
        }
        let e = ht(Bi, t);
        if (void 0 === e) ct(Bi, e = [], t);
        return e;
    },
    add(t, e) {
        const i = CustomElementDefinition.create(e);
        let s = ht(Bi, t);
        if (void 0 === s) ct(Bi, s = [ i ], t); else s.push(i);
        return s;
    }
});

function Ti(t) {
    return function(e) {
        Ii.add(e, t);
    };
}

const Di = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IViewLocator", (t => t.singleton(ViewLocator)));

class ViewLocator {
    constructor() {
        this.it = new WeakMap;
        this.st = new Map;
    }
    getViewComponentForObject(t, e) {
        if (t) {
            const i = Ii.has(t.constructor) ? Ii.get(t.constructor) : [];
            const s = Ct(e) ? e(t, i) : this.nt(i, e);
            return this.rt(t, i, s);
        }
        return null;
    }
    rt(t, e, i) {
        let s = this.it.get(t);
        let n;
        if (void 0 === s) {
            s = {};
            this.it.set(t, s);
        } else n = s[i];
        if (void 0 === n) {
            const r = this.ot(t, e, i);
            n = si.define(si.getDefinition(r), class extends r {
                constructor() {
                    super(t);
                }
            });
            s[i] = n;
        }
        return n;
    }
    ot(t, e, i) {
        let s = this.st.get(t.constructor);
        let n;
        if (void 0 === s) {
            s = {};
            this.st.set(t.constructor, s);
        } else n = s[i];
        if (void 0 === n) {
            n = si.define(this.lt(e, i), class {
                constructor(t) {
                    this.viewModel = t;
                }
                define(t, e, i) {
                    const s = this.viewModel;
                    t.scope = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(t.scope, s);
                    if (void 0 !== s.define) return s.define(t, e, i);
                }
            });
            const r = n.prototype;
            if ("hydrating" in t) r.hydrating = function t(e) {
                this.viewModel.hydrating(e);
            };
            if ("hydrated" in t) r.hydrated = function t(e) {
                this.viewModel.hydrated(e);
            };
            if ("created" in t) r.created = function t(e) {
                this.viewModel.created(e);
            };
            if ("binding" in t) r.binding = function t(e, i, s) {
                return this.viewModel.binding(e, i, s);
            };
            if ("bound" in t) r.bound = function t(e, i, s) {
                return this.viewModel.bound(e, i, s);
            };
            if ("attaching" in t) r.attaching = function t(e, i, s) {
                return this.viewModel.attaching(e, i, s);
            };
            if ("attached" in t) r.attached = function t(e, i) {
                return this.viewModel.attached(e, i);
            };
            if ("detaching" in t) r.detaching = function t(e, i, s) {
                return this.viewModel.detaching(e, i, s);
            };
            if ("unbinding" in t) r.unbinding = function t(e, i, s) {
                return this.viewModel.unbinding(e, i, s);
            };
            if ("dispose" in t) r.dispose = function t() {
                this.viewModel.dispose();
            };
            s[i] = n;
        }
        return n;
    }
    nt(t, e) {
        if (e) return e;
        if (1 === t.length) return t[0].name;
        return "default-view";
    }
    lt(t, e) {
        const i = t.find((t => t.name === e));
        if (void 0 === i) throw new Error(`Could not find view: ${e}`);
        return i;
    }
}

const Pi = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IRendering", (t => t.singleton(Rendering)));

class Rendering {
    constructor(t) {
        this.ht = new WeakMap;
        this.at = new WeakMap;
        this.ct = (this.ut = t.root).get(Kt);
        this.ft = new FragmentNodeSequence(this.ct, this.ct.document.createDocumentFragment());
    }
    get renderers() {
        return null == this.rs ? this.rs = this.ut.getAll(Ss, false).reduce(((t, e) => {
            t[e.instructionType] = e;
            return t;
        }), wt()) : this.rs;
    }
    compile(t, e, i) {
        if (false !== t.needsCompile) {
            const s = this.ht;
            const n = e.get(As);
            let r = s.get(t);
            if (null == r) s.set(t, r = n.compile(t, e, i)); else e.register(...r.dependencies);
            return r;
        }
        return t;
    }
    getViewFactory(t, e) {
        return new ViewFactory(e, CustomElementDefinition.getOrCreate(t));
    }
    createNodes(t) {
        if (true === t.enhance) return new FragmentNodeSequence(this.ct, t.template);
        let e;
        const i = this.at;
        if (i.has(t)) e = i.get(t); else {
            const s = this.ct;
            const n = s.document;
            const r = t.template;
            let o;
            if (null === r) e = null; else if (r instanceof s.Node) if ("TEMPLATE" === r.nodeName) e = n.adoptNode(r.content); else (e = n.adoptNode(n.createDocumentFragment())).appendChild(r.cloneNode(true)); else {
                o = n.createElement("template");
                if (At(r)) o.innerHTML = r;
                n.adoptNode(e = o.content);
            }
            i.set(t, e);
        }
        return null == e ? this.ft : new FragmentNodeSequence(this.ct, e.cloneNode(true));
    }
    render(t, e, i, s) {
        const n = i.instructions;
        const r = this.renderers;
        const o = e.length;
        if (e.length !== n.length) throw new Error(`AUR0757:${o}<>${n.length}`);
        let l = 0;
        let h = 0;
        let a = 0;
        let c;
        let u;
        let f;
        if (o > 0) while (o > l) {
            c = n[l];
            f = e[l];
            h = 0;
            a = c.length;
            while (a > h) {
                u = c[h];
                r[u.type].render(t, f, u);
                ++h;
            }
            ++l;
        }
        if (void 0 !== s && null !== s) {
            c = i.surrogates;
            if ((a = c.length) > 0) {
                h = 0;
                while (a > h) {
                    u = c[h];
                    r[u.type].render(t, s, u);
                    ++h;
                }
            }
        }
    }
}

Rendering.inject = [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IContainer ];

var Oi;

(function(t) {
    t[t["none"] = 0] = "none";
    t[t["host"] = 1] = "host";
    t[t["shadowRoot"] = 2] = "shadowRoot";
    t[t["location"] = 3] = "location";
})(Oi || (Oi = {}));

const $i = {
    optional: true
};

const Li = new WeakMap;

class Controller {
    constructor(t, e, i, s, n, r) {
        this.container = t;
        this.vmKind = e;
        this.definition = i;
        this.viewFactory = s;
        this.viewModel = n;
        this.host = r;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.head = null;
        this.tail = null;
        this.next = null;
        this.parent = null;
        this.bindings = null;
        this.children = null;
        this.hasLockedScope = false;
        this.isStrictBinding = false;
        this.scope = null;
        this.isBound = false;
        this.hostController = null;
        this.mountTarget = 0;
        this.shadowRoot = null;
        this.nodes = null;
        this.location = null;
        this.lifecycleHooks = null;
        this.state = 0;
        this.dt = false;
        this.vt = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
        this.flags = 0;
        this.$initiator = null;
        this.$flags = 0;
        this.$resolve = void 0;
        this.$reject = void 0;
        this.$promise = void 0;
        this.gt = 0;
        this.wt = 0;
        this.bt = 0;
        this.r = t.root.get(Pi);
        switch (e) {
          case 1:
          case 0:
            this.hooks = new HooksDefinition(n);
            break;

          case 2:
            this.hooks = HooksDefinition.none;
            break;
        }
    }
    get isActive() {
        return (this.state & (1 | 2)) > 0 && 0 === (4 & this.state);
    }
    get name() {
        var t;
        if (null === this.parent) switch (this.vmKind) {
          case 1:
            return `[${this.definition.name}]`;

          case 0:
            return this.definition.name;

          case 2:
            return this.viewFactory.name;
        }
        switch (this.vmKind) {
          case 1:
            return `${this.parent.name}>[${this.definition.name}]`;

          case 0:
            return `${this.parent.name}>${this.definition.name}`;

          case 2:
            return this.viewFactory.name === (null === (t = this.parent.definition) || void 0 === t ? void 0 : t.name) ? `${this.parent.name}[view]` : `${this.parent.name}[view:${this.viewFactory.name}]`;
        }
    }
    static getCached(t) {
        return Li.get(t);
    }
    static getCachedOrThrow(t) {
        const e = Controller.getCached(t);
        if (void 0 === e) throw new Error(`AUR0500:${t}`);
        return e;
    }
    static $el(t, e, i, s, n = void 0) {
        if (Li.has(e)) return Li.get(e);
        n = null !== n && void 0 !== n ? n : si.getDefinition(e.constructor);
        const r = new Controller(t, 0, n, null, e, i);
        const o = t.get((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.optional)(Ki));
        if (n.dependencies.length > 0) t.register(...n.dependencies);
        t.registerResolver(Ki, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("IHydrationContext", new HydrationContext(r, s, o)));
        Li.set(e, r);
        if (null == s || false !== s.hydrate) r.xt(s, o);
        return r;
    }
    static $attr(t, e, i, s) {
        if (Li.has(e)) return Li.get(e);
        s = null !== s && void 0 !== s ? s : Me.getDefinition(e.constructor);
        const n = new Controller(t, 1, s, null, e, i);
        Li.set(e, n);
        n.yt();
        return n;
    }
    static $view(t, e = void 0) {
        const i = new Controller(t.container, 2, null, t, null, null);
        i.parent = null !== e && void 0 !== e ? e : null;
        i.kt();
        return i;
    }
    xt(t, e) {
        const i = this.container;
        const s = this.flags;
        const n = this.viewModel;
        let r = this.definition;
        this.scope = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.create(n, null, true);
        if (r.watches.length > 0) _i(this, i, r, n);
        Mi(this, r, s, n);
        this.vt = Ui(this, r, n);
        if (this.hooks.hasDefine) {
            const t = n.define(this, e, r);
            if (void 0 !== t && t !== r) r = CustomElementDefinition.getOrCreate(t);
        }
        this.lifecycleHooks = ki.resolve(i);
        r.register(i);
        if (null !== r.injectable) i.registerResolver(r.injectable, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("definition.injectable", n));
        if (null == t || false !== t.hydrate) {
            this.Ct(t);
            this.At();
        }
    }
    Ct(t) {
        if (this.hooks.hasHydrating) this.viewModel.hydrating(this);
        const e = this.St = this.r.compile(this.definition, this.container, t);
        const {shadowOptions: i, isStrictBinding: s, hasSlots: n, containerless: r} = e;
        this.isStrictBinding = s;
        if (null !== (this.hostController = si.for(this.host, $i))) this.host = this.container.root.get(Kt).document.createElement(this.definition.name);
        ss(this.host, si.name, this);
        ss(this.host, this.definition.key, this);
        if (null !== i || n) {
            if (r) throw new Error("AUR0501");
            ss(this.shadowRoot = this.host.attachShadow(null !== i && void 0 !== i ? i : Wi), si.name, this);
            ss(this.shadowRoot, this.definition.key, this);
            this.mountTarget = 2;
        } else if (r) {
            ss(this.location = us(this.host), si.name, this);
            ss(this.location, this.definition.key, this);
            this.mountTarget = 3;
        } else this.mountTarget = 1;
        this.viewModel.$controller = this;
        this.nodes = this.r.createNodes(e);
        if (this.hooks.hasHydrated) this.viewModel.hydrated(this);
    }
    At() {
        this.r.render(this, this.nodes.findTargets(), this.St, this.host);
        if (this.hooks.hasCreated) this.viewModel.created(this);
    }
    yt() {
        const t = this.definition;
        const e = this.viewModel;
        if (t.watches.length > 0) _i(this, this.container, t, e);
        Mi(this, t, this.flags, e);
        e.$controller = this;
        this.lifecycleHooks = ki.resolve(this.container);
        if (this.hooks.hasCreated) this.viewModel.created(this);
    }
    kt() {
        this.St = this.r.compile(this.viewFactory.def, this.container, null);
        this.isStrictBinding = this.St.isStrictBinding;
        this.r.render(this, (this.nodes = this.r.createNodes(this.St)).findTargets(), this.St, void 0);
    }
    activate(t, e, i, s) {
        switch (this.state) {
          case 0:
          case 8:
            if (!(null === e || e.isActive)) return;
            this.state = 1;
            break;

          case 2:
            return;

          case 32:
            throw new Error(`AUR0502:${this.name}`);

          default:
            throw new Error(`AUR0503:${this.name} ${Gi(this.state)}`);
        }
        this.parent = e;
        i |= 2;
        switch (this.vmKind) {
          case 0:
            this.scope.parentScope = null !== s && void 0 !== s ? s : null;
            break;

          case 1:
            this.scope = null !== s && void 0 !== s ? s : null;
            break;

          case 2:
            if (void 0 === s || null === s) throw new Error("AUR0504");
            if (!this.hasLockedScope) this.scope = s;
            break;
        }
        if (this.isStrictBinding) i |= 1;
        this.$initiator = t;
        this.$flags = i;
        this.Rt();
        if (this.hooks.hasBinding) {
            const t = this.viewModel.binding(this.$initiator, this.parent, this.$flags);
            if (t instanceof Promise) {
                this.Et();
                t.then((() => {
                    this.bind();
                })).catch((t => {
                    this.Bt(t);
                }));
                return this.$promise;
            }
        }
        this.bind();
        return this.$promise;
    }
    bind() {
        let t = 0;
        let e = this.vt.length;
        let i;
        if (e > 0) while (e > t) {
            this.vt[t].start();
            ++t;
        }
        if (null !== this.bindings) {
            t = 0;
            e = this.bindings.length;
            while (e > t) {
                this.bindings[t].$bind(this.$flags, this.scope);
                ++t;
            }
        }
        if (this.hooks.hasBound) {
            i = this.viewModel.bound(this.$initiator, this.parent, this.$flags);
            if (i instanceof Promise) {
                this.Et();
                i.then((() => {
                    this.isBound = true;
                    this.It();
                })).catch((t => {
                    this.Bt(t);
                }));
                return;
            }
        }
        this.isBound = true;
        this.It();
    }
    Tt(...t) {
        switch (this.mountTarget) {
          case 1:
            this.host.append(...t);
            break;

          case 2:
            this.shadowRoot.append(...t);
            break;

          case 3:
            {
                let e = 0;
                for (;e < t.length; ++e) this.location.parentNode.insertBefore(t[e], this.location);
                break;
            }
        }
    }
    It() {
        if (null !== this.hostController) switch (this.mountTarget) {
          case 1:
          case 2:
            this.hostController.Tt(this.host);
            break;

          case 3:
            this.hostController.Tt(this.location.$start, this.location);
            break;
        }
        switch (this.mountTarget) {
          case 1:
            this.nodes.appendTo(this.host, null != this.definition && this.definition.enhance);
            break;

          case 2:
            {
                const t = this.container;
                const e = t.has(fi, false) ? t.get(fi) : t.get(di);
                e.applyTo(this.shadowRoot);
                this.nodes.appendTo(this.shadowRoot);
                break;
            }

          case 3:
            this.nodes.insertBefore(this.location);
            break;
        }
        if (this.hooks.hasAttaching) {
            const t = this.viewModel.attaching(this.$initiator, this.parent, this.$flags);
            if (t instanceof Promise) {
                this.Et();
                this.Rt();
                t.then((() => {
                    this.Dt();
                })).catch((t => {
                    this.Bt(t);
                }));
            }
        }
        if (null !== this.children) {
            let t = 0;
            for (;t < this.children.length; ++t) void this.children[t].activate(this.$initiator, this, this.$flags, this.scope);
        }
        this.Dt();
    }
    deactivate(t, e, i) {
        switch (~16 & this.state) {
          case 2:
            this.state = 4;
            break;

          case 0:
          case 8:
          case 32:
          case 8 | 32:
            return;

          default:
            throw new Error(`AUR0505:${this.name} ${Gi(this.state)}`);
        }
        this.$initiator = t;
        this.$flags = i;
        if (t === this) this.Pt();
        let s = 0;
        if (this.vt.length) for (;s < this.vt.length; ++s) this.vt[s].stop();
        if (null !== this.children) for (s = 0; s < this.children.length; ++s) void this.children[s].deactivate(t, this, i);
        if (this.hooks.hasDetaching) {
            const e = this.viewModel.detaching(this.$initiator, this.parent, this.$flags);
            if (e instanceof Promise) {
                this.Et();
                t.Pt();
                e.then((() => {
                    t.Ot();
                })).catch((e => {
                    t.Bt(e);
                }));
            }
        }
        if (null === t.head) t.head = this; else t.tail.next = this;
        t.tail = this;
        if (t !== this) return;
        this.Ot();
        return this.$promise;
    }
    removeNodes() {
        switch (this.vmKind) {
          case 0:
          case 2:
            this.nodes.remove();
            this.nodes.unlink();
        }
        if (null !== this.hostController) switch (this.mountTarget) {
          case 1:
          case 2:
            this.host.remove();
            break;

          case 3:
            this.location.$start.remove();
            this.location.remove();
            break;
        }
    }
    unbind() {
        const t = 4 | this.$flags;
        let e = 0;
        if (null !== this.bindings) for (;e < this.bindings.length; ++e) this.bindings[e].$unbind(t);
        this.parent = null;
        switch (this.vmKind) {
          case 1:
            this.scope = null;
            break;

          case 2:
            if (!this.hasLockedScope) this.scope = null;
            if (16 === (16 & this.state) && !this.viewFactory.tryReturnToCache(this) && this.$initiator === this) this.dispose();
            break;

          case 0:
            this.scope.parentScope = null;
            break;
        }
        if (32 === (32 & t) && this.$initiator === this) this.dispose();
        this.state = 32 & this.state | 8;
        this.$initiator = null;
        this.$t();
    }
    Et() {
        if (void 0 === this.$promise) {
            this.$promise = new Promise(((t, e) => {
                this.$resolve = t;
                this.$reject = e;
            }));
            if (this.$initiator !== this) this.parent.Et();
        }
    }
    $t() {
        if (void 0 !== this.$promise) {
            Qi = this.$resolve;
            this.$resolve = this.$reject = this.$promise = void 0;
            Qi();
            Qi = void 0;
        }
    }
    Bt(t) {
        if (void 0 !== this.$promise) {
            Zi = this.$reject;
            this.$resolve = this.$reject = this.$promise = void 0;
            Zi(t);
            Zi = void 0;
        }
        if (this.$initiator !== this) this.parent.Bt(t);
    }
    Rt() {
        ++this.gt;
        if (this.$initiator !== this) this.parent.Rt();
    }
    Dt() {
        if (0 === --this.gt) {
            if (this.hooks.hasAttached) {
                Ji = this.viewModel.attached(this.$initiator, this.$flags);
                if (Ji instanceof Promise) {
                    this.Et();
                    Ji.then((() => {
                        this.state = 2;
                        this.$t();
                        if (this.$initiator !== this) this.parent.Dt();
                    })).catch((t => {
                        this.Bt(t);
                    }));
                    Ji = void 0;
                    return;
                }
                Ji = void 0;
            }
            this.state = 2;
            this.$t();
        }
        if (this.$initiator !== this) this.parent.Dt();
    }
    Pt() {
        ++this.wt;
    }
    Ot() {
        if (0 === --this.wt) {
            this.Lt();
            this.removeNodes();
            let t = this.$initiator.head;
            while (null !== t) {
                if (t !== this) {
                    if (t.debug) t.logger.trace(`detach()`);
                    t.removeNodes();
                }
                if (t.hooks.hasUnbinding) {
                    if (t.debug) t.logger.trace("unbinding()");
                    Ji = t.viewModel.unbinding(t.$initiator, t.parent, t.$flags);
                    if (Ji instanceof Promise) {
                        this.Et();
                        this.Lt();
                        Ji.then((() => {
                            this.qt();
                        })).catch((t => {
                            this.Bt(t);
                        }));
                    }
                    Ji = void 0;
                }
                t = t.next;
            }
            this.qt();
        }
    }
    Lt() {
        ++this.bt;
    }
    qt() {
        if (0 === --this.bt) {
            let t = this.$initiator.head;
            let e = null;
            while (null !== t) {
                if (t !== this) {
                    t.isBound = false;
                    t.unbind();
                }
                e = t.next;
                t.next = null;
                t = e;
            }
            this.head = this.tail = null;
            this.isBound = false;
            this.unbind();
        }
    }
    addBinding(t) {
        if (null === this.bindings) this.bindings = [ t ]; else this.bindings[this.bindings.length] = t;
    }
    addChild(t) {
        if (null === this.children) this.children = [ t ]; else this.children[this.children.length] = t;
    }
    is(t) {
        switch (this.vmKind) {
          case 1:
            return Me.getDefinition(this.viewModel.constructor).name === t;

          case 0:
            return si.getDefinition(this.viewModel.constructor).name === t;

          case 2:
            return this.viewFactory.name === t;
        }
    }
    lockScope(t) {
        this.scope = t;
        this.hasLockedScope = true;
    }
    setHost(t) {
        if (0 === this.vmKind) {
            ss(t, si.name, this);
            ss(t, this.definition.key, this);
        }
        this.host = t;
        this.mountTarget = 1;
        return this;
    }
    setShadowRoot(t) {
        if (0 === this.vmKind) {
            ss(t, si.name, this);
            ss(t, this.definition.key, this);
        }
        this.shadowRoot = t;
        this.mountTarget = 2;
        return this;
    }
    setLocation(t) {
        if (0 === this.vmKind) {
            ss(t, si.name, this);
            ss(t, this.definition.key, this);
        }
        this.location = t;
        this.mountTarget = 3;
        return this;
    }
    release() {
        this.state |= 16;
    }
    dispose() {
        if (32 === (32 & this.state)) return;
        this.state |= 32;
        if (this.hooks.hasDispose) this.viewModel.dispose();
        if (null !== this.children) {
            this.children.forEach(Yi);
            this.children = null;
        }
        this.hostController = null;
        this.scope = null;
        this.nodes = null;
        this.location = null;
        this.viewFactory = null;
        if (null !== this.viewModel) {
            Li.delete(this.viewModel);
            this.viewModel = null;
        }
        this.viewModel = null;
        this.host = null;
        this.shadowRoot = null;
        this.container.disposeResolvers();
    }
    accept(t) {
        if (true === t(this)) return true;
        if (this.hooks.hasAccept && true === this.viewModel.accept(t)) return true;
        if (null !== this.children) {
            const {children: e} = this;
            for (let i = 0, s = e.length; i < s; ++i) if (true === e[i].accept(t)) return true;
        }
    }
}

function qi(t) {
    let e = t.$observers;
    if (void 0 === e) Reflect.defineProperty(t, "$observers", {
        enumerable: false,
        value: e = {}
    });
    return e;
}

function Mi(t, e, i, s) {
    const n = e.bindables;
    const r = Object.getOwnPropertyNames(n);
    const o = r.length;
    if (o > 0) {
        let e;
        let i;
        let l = 0;
        const h = qi(s);
        const a = t.container;
        const c = a.has(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ICoercionConfiguration, true) ? a.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ICoercionConfiguration) : null;
        for (;l < o; ++l) {
            e = r[l];
            if (void 0 === h[e]) {
                i = n[e];
                h[e] = new BindableObserver(s, e, i.callback, i.set, t, c);
            }
        }
    }
}

function Ui(t, e, i) {
    const s = e.childrenObservers;
    const n = Object.getOwnPropertyNames(s);
    const r = n.length;
    if (r > 0) {
        const e = qi(i);
        const o = [];
        let l;
        let h = 0;
        let a;
        for (;h < r; ++h) {
            l = n[h];
            if (void 0 == e[l]) {
                a = s[l];
                o[o.length] = e[l] = new ChildrenObserver(t, i, l, a.callback, a.query, a.filter, a.map, a.options);
            }
        }
        return o;
    }
    return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
}

const Fi = new Map;

const Vi = t => {
    let e = Fi.get(t);
    if (null == e) {
        e = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.AccessScopeExpression(t, 0);
        Fi.set(t, e);
    }
    return e;
};

function _i(t, e, i, s) {
    const n = e.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator);
    const r = e.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser);
    const o = i.watches;
    const l = 0 === t.vmKind ? t.scope : _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.create(s, null, true);
    const h = o.length;
    let a;
    let c;
    let u;
    let f = 0;
    for (;h > f; ++f) {
        ({expression: a, callback: c} = o[f]);
        c = Ct(c) ? c : Reflect.get(s, c);
        if (!Ct(c)) throw new Error(`AUR0506:${String(c)}`);
        if (Ct(a)) t.addBinding(new ComputedWatcher(s, n, a, c, true)); else {
            u = At(a) ? r.parse(a, 8) : Vi(a);
            t.addBinding(new ExpressionWatcher(l, e, n, u, c));
        }
    }
}

function ji(t) {
    return t instanceof Controller && 0 === t.vmKind;
}

function Ni(t) {
    return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.isObject)(t) && si.isType(t.constructor);
}

class HooksDefinition {
    constructor(t) {
        this.hasDefine = "define" in t;
        this.hasHydrating = "hydrating" in t;
        this.hasHydrated = "hydrated" in t;
        this.hasCreated = "created" in t;
        this.hasBinding = "binding" in t;
        this.hasBound = "bound" in t;
        this.hasAttaching = "attaching" in t;
        this.hasAttached = "attached" in t;
        this.hasDetaching = "detaching" in t;
        this.hasUnbinding = "unbinding" in t;
        this.hasDispose = "dispose" in t;
        this.hasAccept = "accept" in t;
    }
}

HooksDefinition.none = new HooksDefinition({});

const Wi = {
    mode: "open"
};

var Hi;

(function(t) {
    t[t["customElement"] = 0] = "customElement";
    t[t["customAttribute"] = 1] = "customAttribute";
    t[t["synthetic"] = 2] = "synthetic";
})(Hi || (Hi = {}));

var zi;

(function(t) {
    t[t["none"] = 0] = "none";
    t[t["activating"] = 1] = "activating";
    t[t["activated"] = 2] = "activated";
    t[t["deactivating"] = 4] = "deactivating";
    t[t["deactivated"] = 8] = "deactivated";
    t[t["released"] = 16] = "released";
    t[t["disposed"] = 32] = "disposed";
})(zi || (zi = {}));

function Gi(t) {
    const e = [];
    if (1 === (1 & t)) e.push("activating");
    if (2 === (2 & t)) e.push("activated");
    if (4 === (4 & t)) e.push("deactivating");
    if (8 === (8 & t)) e.push("deactivated");
    if (16 === (16 & t)) e.push("released");
    if (32 === (32 & t)) e.push("disposed");
    return 0 === e.length ? "none" : e.join("|");
}

const Xi = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IController");

const Ki = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IHydrationContext");

class HydrationContext {
    constructor(t, e, i) {
        this.instruction = e;
        this.parent = i;
        this.controller = t;
    }
}

function Yi(t) {
    t.dispose();
}

let Qi;

let Zi;

let Ji;

const ts = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAppRoot");

const es = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IWorkTracker", (t => t.singleton(WorkTracker)));

class WorkTracker {
    constructor(t) {
        this.Mt = 0;
        this.Ut = null;
        this.$t = null;
        this.Ft = t.scopeTo("WorkTracker");
    }
    start() {
        this.Ft.trace(`start(stack:${this.Mt})`);
        ++this.Mt;
    }
    finish() {
        this.Ft.trace(`finish(stack:${this.Mt})`);
        if (0 === --this.Mt) {
            const t = this.$t;
            if (null !== t) {
                this.$t = this.Ut = null;
                t();
            }
        }
    }
    wait() {
        this.Ft.trace(`wait(stack:${this.Mt})`);
        if (null === this.Ut) {
            if (0 === this.Mt) return Promise.resolve();
            this.Ut = new Promise((t => {
                this.$t = t;
            }));
        }
        return this.Ut;
    }
}

WorkTracker.inject = [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.ILogger ];

class AppRoot {
    constructor(t, e, i, s) {
        this.config = t;
        this.platform = e;
        this.container = i;
        this.controller = void 0;
        this.Vt = void 0;
        this.host = t.host;
        this.work = i.get(es);
        s.prepare(this);
        i.registerResolver(e.HTMLElement, i.registerResolver(e.Element, i.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementResolver", t.host))));
        this.Vt = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this._t("beforeCreate"), (() => {
            const e = t.component;
            const s = i.createChild();
            let n;
            if (si.isType(e)) n = this.container.get(e); else n = t.component;
            const r = {
                hydrate: false,
                projections: null
            };
            const o = this.controller = Controller.$el(s, n, this.host, r);
            o.xt(r, null);
            return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this._t("hydrating"), (() => {
                o.Ct(null);
                return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this._t("hydrated"), (() => {
                    o.At();
                    this.Vt = void 0;
                }));
            }));
        }));
    }
    activate() {
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.Vt, (() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this._t("beforeActivate"), (() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.controller.activate(this.controller, null, 2, void 0), (() => this._t("afterActivate")))))));
    }
    deactivate() {
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this._t("beforeDeactivate"), (() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.controller.deactivate(this.controller, null, 0), (() => this._t("afterDeactivate")))));
    }
    _t(t) {
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(...this.container.getAll(be).reduce(((e, i) => {
            if (i.slot === t) e.push(i.run());
            return e;
        }), []));
    }
    dispose() {
        var t;
        null === (t = this.controller) || void 0 === t ? void 0 : t.dispose();
    }
}

class Refs {}

function is(t, e) {
    var i, s;
    return null !== (s = null === (i = t.$au) || void 0 === i ? void 0 : i[e]) && void 0 !== s ? s : null;
}

function ss(t, e, i) {
    var s;
    var n;
    (null !== (s = (n = t).$au) && void 0 !== s ? s : n.$au = new Refs)[e] = i;
}

const ns = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("INode");

const rs = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IEventTarget", (t => t.cachedCallback((t => {
    if (t.has(ts, true)) return t.get(ts).host;
    return t.get(Kt).document;
}))));

const os = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IRenderLocation");

var ls;

(function(t) {
    t[t["Element"] = 1] = "Element";
    t[t["Attr"] = 2] = "Attr";
    t[t["Text"] = 3] = "Text";
    t[t["CDATASection"] = 4] = "CDATASection";
    t[t["EntityReference"] = 5] = "EntityReference";
    t[t["Entity"] = 6] = "Entity";
    t[t["ProcessingInstruction"] = 7] = "ProcessingInstruction";
    t[t["Comment"] = 8] = "Comment";
    t[t["Document"] = 9] = "Document";
    t[t["DocumentType"] = 10] = "DocumentType";
    t[t["DocumentFragment"] = 11] = "DocumentFragment";
    t[t["Notation"] = 12] = "Notation";
})(ls || (ls = {}));

const hs = new WeakMap;

function as(t) {
    if (hs.has(t)) return hs.get(t);
    let e = 0;
    let i = t.nextSibling;
    while (null !== i) {
        if (8 === i.nodeType) switch (i.textContent) {
          case "au-start":
            ++e;
            break;

          case "au-end":
            if (0 === e--) return i;
        }
        i = i.nextSibling;
    }
    if (null === t.parentNode && 11 === t.nodeType) {
        const e = si.for(t);
        if (void 0 === e) return null;
        if (2 === e.mountTarget) return as(e.host);
    }
    return t.parentNode;
}

function cs(t, e) {
    if (void 0 !== t.platform && !(t instanceof t.platform.Node)) {
        const i = t.childNodes;
        for (let t = 0, s = i.length; t < s; ++t) hs.set(i[t], e);
    } else hs.set(t, e);
}

function us(t) {
    if (fs(t)) return t;
    const e = t.ownerDocument.createComment("au-end");
    const i = t.ownerDocument.createComment("au-start");
    if (null !== t.parentNode) {
        t.parentNode.replaceChild(e, t);
        e.parentNode.insertBefore(i, e);
    }
    e.$start = i;
    return e;
}

function fs(t) {
    return "au-end" === t.textContent;
}

class FragmentNodeSequence {
    constructor(t, e) {
        this.platform = t;
        this.fragment = e;
        this.isMounted = false;
        this.isLinked = false;
        this.next = void 0;
        this.refNode = void 0;
        const i = e.querySelectorAll(".au");
        let s = 0;
        let n = i.length;
        let r;
        let o = this.targets = Array(n);
        while (n > s) {
            r = i[s];
            if ("AU-M" === r.nodeName) o[s] = us(r); else o[s] = r;
            ++s;
        }
        const l = e.childNodes;
        const h = this.childNodes = Array(n = l.length);
        s = 0;
        while (n > s) {
            h[s] = l[s];
            ++s;
        }
        this.firstChild = e.firstChild;
        this.lastChild = e.lastChild;
    }
    findTargets() {
        return this.targets;
    }
    insertBefore(t) {
        if (this.isLinked && !!this.refNode) this.addToLinked(); else {
            const e = t.parentNode;
            if (this.isMounted) {
                let i = this.firstChild;
                let s;
                const n = this.lastChild;
                while (null != i) {
                    s = i.nextSibling;
                    e.insertBefore(i, t);
                    if (i === n) break;
                    i = s;
                }
            } else {
                this.isMounted = true;
                t.parentNode.insertBefore(this.fragment, t);
            }
        }
    }
    appendTo(t, e = false) {
        if (this.isMounted) {
            let e = this.firstChild;
            let i;
            const s = this.lastChild;
            while (null != e) {
                i = e.nextSibling;
                t.appendChild(e);
                if (e === s) break;
                e = i;
            }
        } else {
            this.isMounted = true;
            if (!e) t.appendChild(this.fragment);
        }
    }
    remove() {
        if (this.isMounted) {
            this.isMounted = false;
            const t = this.fragment;
            const e = this.lastChild;
            let i;
            let s = this.firstChild;
            while (null !== s) {
                i = s.nextSibling;
                t.appendChild(s);
                if (s === e) break;
                s = i;
            }
        }
    }
    addToLinked() {
        const t = this.refNode;
        const e = t.parentNode;
        if (this.isMounted) {
            let i = this.firstChild;
            let s;
            const n = this.lastChild;
            while (null != i) {
                s = i.nextSibling;
                e.insertBefore(i, t);
                if (i === n) break;
                i = s;
            }
        } else {
            this.isMounted = true;
            e.insertBefore(this.fragment, t);
        }
    }
    unlink() {
        this.isLinked = false;
        this.next = void 0;
        this.refNode = void 0;
    }
    link(t) {
        this.isLinked = true;
        if (fs(t)) this.refNode = t; else {
            this.next = t;
            this.obtainRefNode();
        }
    }
    obtainRefNode() {
        if (void 0 !== this.next) this.refNode = this.next.firstChild; else this.refNode = void 0;
    }
}

const ds = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IWindow", (t => t.callback((t => t.get(Kt).window))));

const ms = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ILocation", (t => t.callback((t => t.get(ds).location))));

const vs = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IHistory", (t => t.callback((t => t.get(ds).history))));

const ps = {
    [_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.capturing]: {
        capture: true
    },
    [_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.bubbling]: {
        capture: false
    }
};

class Listener {
    constructor(t, e, i, s, n, r, o, l) {
        this.platform = t;
        this.targetEvent = e;
        this.delegationStrategy = i;
        this.sourceExpression = s;
        this.target = n;
        this.preventDefault = r;
        this.eventDelegator = o;
        this.locator = l;
        this.interceptor = this;
        this.isBound = false;
        this.handler = null;
    }
    callSource(t) {
        const e = this.$scope.overrideContext;
        e.$event = t;
        const i = this.sourceExpression.evaluate(8, this.$scope, this.locator, null);
        Reflect.deleteProperty(e, "$event");
        if (true !== i && this.preventDefault) t.preventDefault();
        return i;
    }
    handleEvent(t) {
        this.interceptor.callSource(t);
    }
    $bind(t, e) {
        if (this.isBound) {
            if (this.$scope === e) return;
            this.interceptor.$unbind(2 | t);
        }
        this.$scope = e;
        const i = this.sourceExpression;
        if (i.hasBind) i.bind(t, e, this.interceptor);
        if (this.delegationStrategy === _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.none) this.target.addEventListener(this.targetEvent, this); else this.handler = this.eventDelegator.addEventListener(this.locator.get(rs), this.target, this.targetEvent, this, ps[this.delegationStrategy]);
        this.isBound = true;
    }
    $unbind(t) {
        if (!this.isBound) return;
        const e = this.sourceExpression;
        if (e.hasUnbind) e.unbind(t, this.$scope, this.interceptor);
        this.$scope = null;
        if (this.delegationStrategy === _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.none) this.target.removeEventListener(this.targetEvent, this); else {
            this.handler.dispose();
            this.handler = null;
        }
        this.isBound = false;
    }
    observe(t, e) {
        return;
    }
    handleChange(t, e, i) {
        return;
    }
}

const gs = {
    capture: false
};

class ListenerTracker {
    constructor(t, e, i = gs) {
        this.jt = t;
        this.Nt = e;
        this.Wt = i;
        this.Ht = 0;
        this.zt = new Map;
        this.Gt = new Map;
    }
    Xt() {
        if (1 === ++this.Ht) this.jt.addEventListener(this.Nt, this, this.Wt);
    }
    Kt() {
        if (0 === --this.Ht) this.jt.removeEventListener(this.Nt, this, this.Wt);
    }
    dispose() {
        if (this.Ht > 0) {
            this.Ht = 0;
            this.jt.removeEventListener(this.Nt, this, this.Wt);
        }
        this.zt.clear();
        this.Gt.clear();
    }
    Yt(t) {
        const e = true === this.Wt.capture ? this.zt : this.Gt;
        let i = e.get(t);
        if (void 0 === i) e.set(t, i = wt());
        return i;
    }
    handleEvent(t) {
        const e = true === this.Wt.capture ? this.zt : this.Gt;
        const i = t.composedPath();
        if (true === this.Wt.capture) i.reverse();
        for (const s of i) {
            const i = e.get(s);
            if (void 0 === i) continue;
            const n = i[this.Nt];
            if (void 0 === n) continue;
            if (Ct(n)) n(t); else n.handleEvent(t);
            if (true === t.cancelBubble) return;
        }
    }
}

class DelegateSubscription {
    constructor(t, e, i, s) {
        this.Qt = t;
        this.Zt = e;
        this.Nt = i;
        t.Xt();
        e[i] = s;
    }
    dispose() {
        this.Qt.Kt();
        this.Zt[this.Nt] = void 0;
    }
}

class EventSubscriber {
    constructor(t) {
        this.config = t;
        this.target = null;
        this.handler = null;
    }
    subscribe(t, e) {
        this.target = t;
        this.handler = e;
        let i;
        for (i of this.config.events) t.addEventListener(i, e);
    }
    dispose() {
        const {target: t, handler: e} = this;
        let i;
        if (null !== t && null !== e) for (i of this.config.events) t.removeEventListener(i, e);
        this.target = this.handler = null;
    }
}

const ws = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IEventDelegator", (t => t.singleton(EventDelegator)));

class EventDelegator {
    constructor() {
        this.Jt = wt();
    }
    addEventListener(t, e, i, s, n) {
        var r;
        var o;
        const l = null !== (r = (o = this.Jt)[i]) && void 0 !== r ? r : o[i] = new Map;
        let h = l.get(t);
        if (void 0 === h) l.set(t, h = new ListenerTracker(t, i, n));
        return new DelegateSubscription(h, h.Yt(e), i, s);
    }
    dispose() {
        for (const t in this.Jt) {
            const e = this.Jt[t];
            for (const t of e.values()) t.dispose();
            e.clear();
        }
    }
}

const bs = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IProjections");

const xs = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAuSlotsInfo");

class AuSlotsInfo {
    constructor(t) {
        this.projectedSlots = t;
    }
}

var ys;

(function(t) {
    t["hydrateElement"] = "ra";
    t["hydrateAttribute"] = "rb";
    t["hydrateTemplateController"] = "rc";
    t["hydrateLetElement"] = "rd";
    t["setProperty"] = "re";
    t["interpolation"] = "rf";
    t["propertyBinding"] = "rg";
    t["callBinding"] = "rh";
    t["letBinding"] = "ri";
    t["refBinding"] = "rj";
    t["iteratorBinding"] = "rk";
    t["textBinding"] = "ha";
    t["listenerBinding"] = "hb";
    t["attributeBinding"] = "hc";
    t["stylePropertyBinding"] = "hd";
    t["setAttribute"] = "he";
    t["setClassAttribute"] = "hf";
    t["setStyleAttribute"] = "hg";
    t["spreadBinding"] = "hs";
    t["spreadElementProp"] = "hp";
})(ys || (ys = {}));

const ks = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("Instruction");

function Cs(t) {
    const e = t.type;
    return At(e) && 2 === e.length;
}

class InterpolationInstruction {
    constructor(t, e) {
        this.from = t;
        this.to = e;
    }
    get type() {
        return "rf";
    }
}

class PropertyBindingInstruction {
    constructor(t, e, i) {
        this.from = t;
        this.to = e;
        this.mode = i;
    }
    get type() {
        return "rg";
    }
}

class IteratorBindingInstruction {
    constructor(t, e) {
        this.from = t;
        this.to = e;
    }
    get type() {
        return "rk";
    }
}

class CallBindingInstruction {
    constructor(t, e) {
        this.from = t;
        this.to = e;
    }
    get type() {
        return "rh";
    }
}

class RefBindingInstruction {
    constructor(t, e) {
        this.from = t;
        this.to = e;
    }
    get type() {
        return "rj";
    }
}

class SetPropertyInstruction {
    constructor(t, e) {
        this.value = t;
        this.to = e;
    }
    get type() {
        return "re";
    }
}

class HydrateElementInstruction {
    constructor(t, e, i, s, n, r) {
        this.res = t;
        this.alias = e;
        this.props = i;
        this.projections = s;
        this.containerless = n;
        this.captures = r;
        this.auSlot = null;
    }
    get type() {
        return "ra";
    }
}

class HydrateAttributeInstruction {
    constructor(t, e, i) {
        this.res = t;
        this.alias = e;
        this.props = i;
    }
    get type() {
        return "rb";
    }
}

class HydrateTemplateController {
    constructor(t, e, i, s) {
        this.def = t;
        this.res = e;
        this.alias = i;
        this.props = s;
    }
    get type() {
        return "rc";
    }
}

class HydrateLetElementInstruction {
    constructor(t, e) {
        this.instructions = t;
        this.toBindingContext = e;
    }
    get type() {
        return "rd";
    }
}

class LetBindingInstruction {
    constructor(t, e) {
        this.from = t;
        this.to = e;
    }
    get type() {
        return "ri";
    }
}

class TextBindingInstruction {
    constructor(t, e) {
        this.from = t;
        this.strict = e;
    }
    get type() {
        return "ha";
    }
}

class ListenerBindingInstruction {
    constructor(t, e, i, s) {
        this.from = t;
        this.to = e;
        this.preventDefault = i;
        this.strategy = s;
    }
    get type() {
        return "hb";
    }
}

class StylePropertyBindingInstruction {
    constructor(t, e) {
        this.from = t;
        this.to = e;
    }
    get type() {
        return "hd";
    }
}

class SetAttributeInstruction {
    constructor(t, e) {
        this.value = t;
        this.to = e;
    }
    get type() {
        return "he";
    }
}

class SetClassAttributeInstruction {
    constructor(t) {
        this.value = t;
        this.type = "hf";
    }
}

class SetStyleAttributeInstruction {
    constructor(t) {
        this.value = t;
        this.type = "hg";
    }
}

class AttributeBindingInstruction {
    constructor(t, e, i) {
        this.attr = t;
        this.from = e;
        this.to = i;
    }
    get type() {
        return "hc";
    }
}

class SpreadBindingInstruction {
    get type() {
        return "hs";
    }
}

class SpreadElementPropBindingInstruction {
    constructor(t) {
        this.instructions = t;
    }
    get type() {
        return "hp";
    }
}

const As = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ITemplateCompiler");

const Ss = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IRenderer");

function Rs(t) {
    return function i(s) {
        const n = function(...e) {
            const i = new s(...e);
            i.instructionType = t;
            return i;
        };
        n.register = function t(e) {
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(Ss, n).register(e);
        };
        const r = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Metadata.getOwnKeys(s);
        for (const t of r) ct(t, ht(t, s), n);
        const o = Object.getOwnPropertyDescriptors(s);
        Object.keys(o).filter((t => "prototype" !== t)).forEach((t => {
            Reflect.defineProperty(n, t, o[t]);
        }));
        return n;
    };
}

function Es(t, e, i) {
    if (At(e)) return t.parse(e, i);
    return e;
}

function Bs(t) {
    if (null != t.viewModel) return t.viewModel;
    return t;
}

function Is(t, e) {
    if ("element" === e) return t;
    switch (e) {
      case "controller":
        return si.for(t);

      case "view":
        throw new Error("AUR0750");

      case "view-model":
        return si.for(t).viewModel;

      default:
        {
            const i = Me.for(t, e);
            if (void 0 !== i) return i.viewModel;
            const s = si.for(t, {
                name: e
            });
            if (void 0 === s) throw new Error(`AUR0751:${e}`);
            return s.viewModel;
        }
    }
}

let Ts = class SetPropertyRenderer {
    render(t, e, i) {
        const s = Bs(e);
        if (void 0 !== s.$observers && void 0 !== s.$observers[i.to]) s.$observers[i.to].setValue(i.value, 2); else s[i.to] = i.value;
    }
};

Ts = ot([ Rs("re") ], Ts);

let Ds = class CustomElementRenderer {
    constructor(t, e) {
        this.r = t;
        this.p = e;
    }
    static get inject() {
        return [ Pi, Kt ];
    }
    render(t, e, i) {
        let s;
        let n;
        let r;
        let o;
        const l = i.res;
        const h = i.projections;
        const a = t.container;
        const c = nn(this.p, t, e, i, e, null == h ? void 0 : new AuSlotsInfo(Object.keys(h)));
        switch (typeof l) {
          case "string":
            s = a.find(si, l);
            if (null == s) throw new Error(`AUR0752:${l}@${t["name"]}`);
            break;

          default:
            s = l;
        }
        n = s.Type;
        r = c.invoke(n);
        c.registerResolver(n, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(s.key, r));
        o = Controller.$el(c, r, e, i, s);
        ss(e, s.key, o);
        const u = this.r.renderers;
        const f = i.props;
        const d = f.length;
        let m = 0;
        let v;
        while (d > m) {
            v = f[m];
            u[v.type].render(t, o, v);
            ++m;
        }
        t.addChild(o);
    }
};

Ds = ot([ Rs("ra") ], Ds);

let Ps = class CustomAttributeRenderer {
    constructor(t, e) {
        this.r = t;
        this.p = e;
    }
    static get inject() {
        return [ Pi, Kt ];
    }
    render(t, e, i) {
        let s = t.container;
        let n;
        switch (typeof i.res) {
          case "string":
            n = s.find(Me, i.res);
            if (null == n) throw new Error(`AUR0753:${i.res}@${t["name"]}`);
            break;

          default:
            n = i.res;
        }
        const r = rn(this.p, n, t, e, i, void 0, void 0);
        const o = Controller.$attr(t.container, r, e, n);
        ss(e, n.key, o);
        const l = this.r.renderers;
        const h = i.props;
        const a = h.length;
        let c = 0;
        let u;
        while (a > c) {
            u = h[c];
            l[u.type].render(t, o, u);
            ++c;
        }
        t.addChild(o);
    }
};

Ps = ot([ Rs("rb") ], Ps);

let Os = class TemplateControllerRenderer {
    constructor(t, e) {
        this.r = t;
        this.p = e;
    }
    static get inject() {
        return [ Pi, Kt ];
    }
    render(t, e, i) {
        var s;
        let n = t.container;
        let r;
        switch (typeof i.res) {
          case "string":
            r = n.find(Me, i.res);
            if (null == r) throw new Error(`AUR0754:${i.res}@${t["name"]}`);
            break;

          default:
            r = i.res;
        }
        const o = this.r.getViewFactory(i.def, n);
        const l = us(e);
        const h = rn(this.p, r, t, e, i, o, l);
        const a = Controller.$attr(t.container, h, e, r);
        ss(l, r.key, a);
        null === (s = h.link) || void 0 === s ? void 0 : s.call(h, t, a, e, i);
        const c = this.r.renderers;
        const u = i.props;
        const f = u.length;
        let d = 0;
        let m;
        while (f > d) {
            m = u[d];
            c[m.type].render(t, a, m);
            ++d;
        }
        t.addChild(a);
    }
};

Os = ot([ Rs("rc") ], Os);

let $s = class LetElementRenderer {
    constructor(t, e) {
        this.ep = t;
        this.oL = e;
    }
    render(t, e, i) {
        e.remove();
        const s = i.instructions;
        const n = i.toBindingContext;
        const r = t.container;
        const o = s.length;
        let l;
        let h;
        let a;
        let c = 0;
        while (o > c) {
            l = s[c];
            h = Es(this.ep, l.from, 8);
            a = new LetBinding(h, l.to, this.oL, r, n);
            t.addBinding(38962 === h.$kind ? js(a, h, r) : a);
            ++c;
        }
    }
};

$s.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator ];

$s = ot([ Rs("rd") ], $s);

let Ls = class CallBindingRenderer {
    constructor(t, e) {
        this.ep = t;
        this.oL = e;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 8 | 4);
        const n = new CallBinding(s, Bs(e), i.to, this.oL, t.container);
        t.addBinding(38962 === s.$kind ? js(n, s, t.container) : n);
    }
};

Ls.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator ];

Ls = ot([ Rs("rh") ], Ls);

let qs = class RefBindingRenderer {
    constructor(t) {
        this.ep = t;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 8);
        const n = new RefBinding(s, Is(e, i.to), t.container);
        t.addBinding(38962 === s.$kind ? js(n, s, t.container) : n);
    }
};

qs.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

qs = ot([ Rs("rj") ], qs);

let Ms = class InterpolationBindingRenderer {
    constructor(t, e, i) {
        this.ep = t;
        this.oL = e;
        this.p = i;
    }
    render(t, e, i) {
        const s = t.container;
        const n = Es(this.ep, i.from, 1);
        const r = new InterpolationBinding(this.oL, n, Bs(e), i.to, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView, s, this.p.domWriteQueue);
        const o = r.partBindings;
        const l = o.length;
        let h = 0;
        let a;
        for (;l > h; ++h) {
            a = o[h];
            if (38962 === a.sourceExpression.$kind) o[h] = js(a, a.sourceExpression, s);
        }
        t.addBinding(r);
    }
};

Ms.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator, Kt ];

Ms = ot([ Rs("rf") ], Ms);

let Us = class PropertyBindingRenderer {
    constructor(t, e, i) {
        this.ep = t;
        this.oL = e;
        this.p = i;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 8);
        const n = new PropertyBinding(s, Bs(e), i.to, i.mode, this.oL, t.container, this.p.domWriteQueue);
        t.addBinding(38962 === s.$kind ? js(n, s, t.container) : n);
    }
};

Us.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator, Kt ];

Us = ot([ Rs("rg") ], Us);

let Fs = class IteratorBindingRenderer {
    constructor(t, e, i) {
        this.ep = t;
        this.oL = e;
        this.p = i;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 2);
        const n = new PropertyBinding(s, Bs(e), i.to, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView, this.oL, t.container, this.p.domWriteQueue);
        t.addBinding(38962 === s.iterable.$kind ? js(n, s.iterable, t.container) : n);
    }
};

Fs.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator, Kt ];

Fs = ot([ Rs("rk") ], Fs);

let Vs = 0;

const _s = [];

function js(t, e, i) {
    while (e instanceof _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehaviorExpression) {
        _s[Vs++] = e;
        e = e.expression;
    }
    while (Vs > 0) {
        const e = _s[--Vs];
        const s = i.get(e.behaviorKey);
        if (s instanceof _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingBehaviorFactory) t = s.construct(t, e);
    }
    _s.length = 0;
    return t;
}

let Ns = class TextBindingRenderer {
    constructor(t, e, i) {
        this.ep = t;
        this.oL = e;
        this.p = i;
    }
    render(t, e, i) {
        const s = t.container;
        const n = e.nextSibling;
        const r = e.parentNode;
        const o = this.p.document;
        const l = Es(this.ep, i.from, 1);
        const h = l.parts;
        const a = l.expressions;
        const c = a.length;
        let u = 0;
        let f = h[0];
        let d;
        let m;
        if ("" !== f) r.insertBefore(o.createTextNode(f), n);
        for (;c > u; ++u) {
            m = a[u];
            d = new ContentBinding(m, r.insertBefore(o.createTextNode(""), n), s, this.oL, this.p, i.strict);
            t.addBinding(38962 === m.$kind ? js(d, m, s) : d);
            f = h[u + 1];
            if ("" !== f) r.insertBefore(o.createTextNode(f), n);
        }
        if ("AU-M" === e.nodeName) e.remove();
    }
};

Ns.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator, Kt ];

Ns = ot([ Rs("ha") ], Ns);

let Ws = class ListenerBindingRenderer {
    constructor(t, e, i) {
        this.ep = t;
        this.te = e;
        this.p = i;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 4);
        const n = new Listener(this.p, i.to, i.strategy, s, e, i.preventDefault, this.te, t.container);
        t.addBinding(38962 === s.$kind ? js(n, s, t.container) : n);
    }
};

Ws.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, ws, Kt ];

Ws = ot([ Rs("hb") ], Ws);

let Hs = class SetAttributeRenderer {
    render(t, e, i) {
        e.setAttribute(i.to, i.value);
    }
};

Hs = ot([ Rs("he") ], Hs);

let zs = class SetClassAttributeRenderer {
    render(t, e, i) {
        Qs(e.classList, i.value);
    }
};

zs = ot([ Rs("hf") ], zs);

let Gs = class SetStyleAttributeRenderer {
    render(t, e, i) {
        e.style.cssText += i.value;
    }
};

Gs = ot([ Rs("hg") ], Gs);

let Xs = class StylePropertyBindingRenderer {
    constructor(t, e, i) {
        this.ep = t;
        this.oL = e;
        this.p = i;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 8);
        const n = new PropertyBinding(s, e.style, i.to, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView, this.oL, t.container, this.p.domWriteQueue);
        t.addBinding(38962 === s.$kind ? js(n, s, t.container) : n);
    }
};

Xs.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator, Kt ];

Xs = ot([ Rs("hd") ], Xs);

let Ks = class AttributeBindingRenderer {
    constructor(t, e) {
        this.ep = t;
        this.oL = e;
    }
    render(t, e, i) {
        const s = Es(this.ep, i.from, 8);
        const n = new AttributeBinding(s, e, i.attr, i.to, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView, this.oL, t.container);
        t.addBinding(38962 === s.$kind ? js(n, s, t.container) : n);
    }
};

Ks.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator ];

Ks = ot([ Rs("hc") ], Ks);

let Ys = class SpreadRenderer {
    constructor(t, e) {
        this.ee = t;
        this.r = e;
    }
    static get inject() {
        return [ As, Pi ];
    }
    render(t, e, i) {
        const s = t.container;
        const n = s.get(Ki);
        const r = this.r.renderers;
        const o = t => {
            let e = t;
            let i = n;
            while (null != i && e > 0) {
                i = i.parent;
                --e;
            }
            if (null == i) throw new Error("No scope context for spread binding.");
            return i;
        };
        const l = i => {
            var s, n;
            const a = o(i);
            const c = Zs(a);
            const u = this.ee.compileSpread(a.controller.definition, null !== (n = null === (s = a.instruction) || void 0 === s ? void 0 : s.captures) && void 0 !== n ? n : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray, a.controller.container, e);
            let f;
            for (f of u) switch (f.type) {
              case "hs":
                l(i + 1);
                break;

              case "hp":
                r[f.instructions.type].render(c, si.for(e), f.instructions);
                break;

              default:
                r[f.type].render(c, e, f);
            }
            t.addBinding(c);
        };
        l(0);
    }
};

Ys = ot([ Rs("hs") ], Ys);

class SpreadBinding {
    constructor(t, e) {
        this.ie = t;
        this.se = e;
        this.interceptor = this;
        this.isBound = false;
        this.ctrl = e.controller;
        this.locator = this.ctrl.container;
    }
    get container() {
        return this.locator;
    }
    get definition() {
        return this.ctrl.definition;
    }
    get isStrictBinding() {
        return this.ctrl.isStrictBinding;
    }
    $bind(t, e) {
        var i;
        if (this.isBound) return;
        this.isBound = true;
        const s = this.$scope = null !== (i = this.se.controller.scope.parentScope) && void 0 !== i ? i : void 0;
        if (null == s) throw new Error("Invalid spreading. Context scope is null/undefined");
        this.ie.forEach((e => e.$bind(t, s)));
    }
    $unbind(t) {
        this.ie.forEach((e => e.$unbind(t)));
        this.isBound = false;
    }
    addBinding(t) {
        this.ie.push(t);
    }
    addChild(t) {
        if (1 !== t.vmKind) throw new Error("Spread binding does not support spreading custom attributes/template controllers");
        this.ctrl.addChild(t);
    }
}

function Qs(t, e) {
    const i = e.length;
    let s = 0;
    for (let n = 0; n < i; ++n) if (32 === e.charCodeAt(n)) {
        if (n !== s) t.add(e.slice(s, n));
        s = n + 1;
    } else if (n + 1 === i) t.add(e.slice(s));
}

const Zs = t => new SpreadBinding([], t);

const Js = "IController";

const tn = "IInstruction";

const en = "IRenderLocation";

const sn = "IAuSlotsInfo";

function nn(t, e, i, s, n, r) {
    const o = e.container.createChild();
    o.registerResolver(t.HTMLElement, o.registerResolver(t.Element, o.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementResolver", i))));
    o.registerResolver(Xi, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(Js, e));
    o.registerResolver(ks, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(tn, s));
    o.registerResolver(os, null == n ? on : new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(en, n));
    o.registerResolver(Ai, ln);
    o.registerResolver(xs, null == r ? hn : new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(sn, r));
    return o;
}

class ViewFactoryProvider {
    constructor(t) {
        this.f = t;
    }
    get $isResolver() {
        return true;
    }
    resolve() {
        const t = this.f;
        if (null === t) throw new Error("AUR7055");
        if (!At(t.name) || 0 === t.name.length) throw new Error("AUR0756");
        return t;
    }
}

function rn(t, e, i, s, n, r, o, l) {
    const h = i.container.createChild();
    h.registerResolver(t.HTMLElement, h.registerResolver(t.Element, h.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementResolver", s))));
    i = i instanceof Controller ? i : i.ctrl;
    h.registerResolver(Xi, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(Js, i));
    h.registerResolver(ks, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(tn, n));
    h.registerResolver(os, null == o ? on : new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(en, o));
    h.registerResolver(Ai, null == r ? ln : new ViewFactoryProvider(r));
    h.registerResolver(xs, null == l ? hn : new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(sn, l));
    return h.invoke(e.Type);
}

const on = new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(en);

const ln = new ViewFactoryProvider(null);

const hn = new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider(sn, new AuSlotsInfo(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray));

var an;

(function(t) {
    t[t["None"] = 0] = "None";
    t[t["IgnoreAttr"] = 1] = "IgnoreAttr";
})(an || (an = {}));

function cn(t) {
    return function(e) {
        return mn.define(t, e);
    };
}

class BindingCommandDefinition {
    constructor(t, e, i, s, n) {
        this.Type = t;
        this.name = e;
        this.aliases = i;
        this.key = s;
        this.type = n;
    }
    static create(t, e) {
        let i;
        let s;
        if (At(t)) {
            i = t;
            s = {
                name: i
            };
        } else {
            i = t.name;
            s = t;
        }
        return new BindingCommandDefinition(e, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(dn(e, "name"), i), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.mergeArrays)(dn(e, "aliases"), s.aliases, e.aliases), fn(i), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.firstDefined)(dn(e, "type"), s.type, e.type, null));
    }
    register(t) {
        const {Type: e, key: i, aliases: s} = this;
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(i, e).register(t);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.aliasTo(i, e).register(t);
        (0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.registerAliases)(s, mn, i, t);
    }
}

const un = mt("binding-command");

const fn = t => `${un}:${t}`;

const dn = (t, e) => ht(dt(e), t);

const mn = Object.freeze({
    name: un,
    keyFrom: fn,
    define(t, e) {
        const i = BindingCommandDefinition.create(t, e);
        ct(un, i, i.Type);
        ct(un, i, i);
        vt(e, un);
        return i.Type;
    },
    getAnnotation: dn
});

let vn = class OneTimeBindingCommand {
    constructor(t, e) {
        this.type = 0;
        this.m = t;
        this.ep = e;
    }
    get name() {
        return "one-time";
    }
    build(t) {
        var e;
        const i = t.attr;
        let s = i.target;
        let n = t.attr.rawValue;
        if (null == t.bindable) s = null !== (e = this.m.map(t.node, s)) && void 0 !== e ? e : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s); else {
            if ("" === n && 1 === t.def.type) n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s);
            s = t.bindable.property;
        }
        return new PropertyBindingInstruction(this.ep.parse(n, 8), s, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.oneTime);
    }
};

vn.inject = [ Zt, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

vn = ot([ cn("one-time") ], vn);

let pn = class ToViewBindingCommand {
    constructor(t, e) {
        this.type = 0;
        this.m = t;
        this.ep = e;
    }
    get name() {
        return "to-view";
    }
    build(t) {
        var e;
        const i = t.attr;
        let s = i.target;
        let n = t.attr.rawValue;
        if (null == t.bindable) s = null !== (e = this.m.map(t.node, s)) && void 0 !== e ? e : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s); else {
            if ("" === n && 1 === t.def.type) n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s);
            s = t.bindable.property;
        }
        return new PropertyBindingInstruction(this.ep.parse(n, 8), s, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView);
    }
};

pn.inject = [ Zt, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

pn = ot([ cn("to-view") ], pn);

let gn = class FromViewBindingCommand {
    constructor(t, e) {
        this.type = 0;
        this.m = t;
        this.ep = e;
    }
    get name() {
        return "from-view";
    }
    build(t) {
        var e;
        const i = t.attr;
        let s = i.target;
        let n = i.rawValue;
        if (null == t.bindable) s = null !== (e = this.m.map(t.node, s)) && void 0 !== e ? e : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s); else {
            if ("" === n && 1 === t.def.type) n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s);
            s = t.bindable.property;
        }
        return new PropertyBindingInstruction(this.ep.parse(n, 8), s, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView);
    }
};

gn.inject = [ Zt, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

gn = ot([ cn("from-view") ], gn);

let wn = class TwoWayBindingCommand {
    constructor(t, e) {
        this.type = 0;
        this.m = t;
        this.ep = e;
    }
    get name() {
        return "two-way";
    }
    build(t) {
        var e;
        const i = t.attr;
        let s = i.target;
        let n = i.rawValue;
        if (null == t.bindable) s = null !== (e = this.m.map(t.node, s)) && void 0 !== e ? e : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s); else {
            if ("" === n && 1 === t.def.type) n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(s);
            s = t.bindable.property;
        }
        return new PropertyBindingInstruction(this.ep.parse(n, 8), s, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.twoWay);
    }
};

wn.inject = [ Zt, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

wn = ot([ cn("two-way") ], wn);

let bn = class DefaultBindingCommand {
    constructor(t, e) {
        this.type = 0;
        this.m = t;
        this.ep = e;
    }
    get name() {
        return "bind";
    }
    build(t) {
        var e;
        const i = t.attr;
        const s = t.bindable;
        let n;
        let r;
        let o = i.target;
        let l = i.rawValue;
        if (null == s) {
            r = this.m.isTwoWay(t.node, o) ? _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.twoWay : _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView;
            o = null !== (e = this.m.map(t.node, o)) && void 0 !== e ? e : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(o);
        } else {
            if ("" === l && 1 === t.def.type) l = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(o);
            n = t.def.defaultBindingMode;
            r = s.mode === _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.default || null == s.mode ? null == n || n === _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.default ? _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView : n : s.mode;
            o = s.property;
        }
        return new PropertyBindingInstruction(this.ep.parse(l, 8), o, r);
    }
};

bn.inject = [ Zt, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

bn = ot([ cn("bind") ], bn);

let xn = class CallBindingCommand {
    constructor(t) {
        this.type = 0;
        this.ep = t;
    }
    get name() {
        return "call";
    }
    build(t) {
        const e = null === t.bindable ? (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(t.attr.target) : t.bindable.property;
        return new CallBindingInstruction(this.ep.parse(t.attr.rawValue, 8 | 4), e);
    }
};

xn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

xn = ot([ cn("call") ], xn);

let yn = class ForBindingCommand {
    constructor(t) {
        this.type = 0;
        this.ep = t;
    }
    get name() {
        return "for";
    }
    build(t) {
        const e = null === t.bindable ? (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(t.attr.target) : t.bindable.property;
        return new IteratorBindingInstruction(this.ep.parse(t.attr.rawValue, 2), e);
    }
};

yn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

yn = ot([ cn("for") ], yn);

let kn = class TriggerBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "trigger";
    }
    build(t) {
        return new ListenerBindingInstruction(this.ep.parse(t.attr.rawValue, 4), t.attr.target, true, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.none);
    }
};

kn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

kn = ot([ cn("trigger") ], kn);

let Cn = class DelegateBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "delegate";
    }
    build(t) {
        return new ListenerBindingInstruction(this.ep.parse(t.attr.rawValue, 4), t.attr.target, false, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.bubbling);
    }
};

Cn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

Cn = ot([ cn("delegate") ], Cn);

let An = class CaptureBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "capture";
    }
    build(t) {
        return new ListenerBindingInstruction(this.ep.parse(t.attr.rawValue, 4), t.attr.target, false, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.DelegationStrategy.capturing);
    }
};

An.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

An = ot([ cn("capture") ], An);

let Sn = class AttrBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "attr";
    }
    build(t) {
        return new AttributeBindingInstruction(t.attr.target, this.ep.parse(t.attr.rawValue, 8), t.attr.target);
    }
};

Sn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

Sn = ot([ cn("attr") ], Sn);

let Rn = class StyleBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "style";
    }
    build(t) {
        return new AttributeBindingInstruction("style", this.ep.parse(t.attr.rawValue, 8), t.attr.target);
    }
};

Rn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

Rn = ot([ cn("style") ], Rn);

let En = class ClassBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "class";
    }
    build(t) {
        return new AttributeBindingInstruction("class", this.ep.parse(t.attr.rawValue, 8), t.attr.target);
    }
};

En.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

En = ot([ cn("class") ], En);

let Bn = class RefBindingCommand {
    constructor(t) {
        this.type = 1;
        this.ep = t;
    }
    get name() {
        return "ref";
    }
    build(t) {
        return new RefBindingInstruction(this.ep.parse(t.attr.rawValue, 8), t.attr.target);
    }
};

Bn.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser ];

Bn = ot([ cn("ref") ], Bn);

let In = class SpreadBindingCommand {
    constructor() {
        this.type = 1;
    }
    get name() {
        return "...$attrs";
    }
    build(t) {
        return new SpreadBindingInstruction;
    }
};

In = ot([ cn("...$attrs") ], In);

const Tn = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ITemplateElementFactory", (t => t.singleton(TemplateElementFactory)));

const Dn = {};

class TemplateElementFactory {
    constructor(t) {
        this.p = t;
        this.ne = t.document.createElement("template");
    }
    createTemplate(t) {
        var e;
        if (At(t)) {
            let e = Dn[t];
            if (void 0 === e) {
                const i = this.ne;
                i.innerHTML = t;
                const s = i.content.firstElementChild;
                if (null == s || "TEMPLATE" !== s.nodeName || null != s.nextElementSibling) {
                    this.ne = this.p.document.createElement("template");
                    e = i;
                } else {
                    i.content.removeChild(s);
                    e = s;
                }
                Dn[t] = e;
            }
            return e.cloneNode(true);
        }
        if ("TEMPLATE" !== t.nodeName) {
            const e = this.p.document.createElement("template");
            e.content.appendChild(t);
            return e;
        }
        null === (e = t.parentNode) || void 0 === e ? void 0 : e.removeChild(t);
        return t.cloneNode(true);
    }
}

TemplateElementFactory.inject = [ Kt ];

const Pn = function(t) {
    function e(t, i, s) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.inject(e)(t, i, s);
    }
    e.$isResolver = true;
    e.resolve = function(e, i) {
        if (i.root === i) return i.getAll(t, false);
        return i.has(t, false) ? i.getAll(t, false).concat(i.root.getAll(t, false)) : i.root.getAll(t, false);
    };
    return e;
};

class TemplateCompiler {
    constructor() {
        this.debug = false;
        this.resolveResources = true;
    }
    static register(t) {
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(As, this).register(t);
    }
    compile(t, e, i) {
        var s, n, r, o;
        const l = CustomElementDefinition.getOrCreate(t);
        if (null === l.template || void 0 === l.template) return l;
        if (false === l.needsCompile) return l;
        null !== i && void 0 !== i ? i : i = Ln;
        const a = new CompilationContext(t, e, i, null, null, void 0);
        const c = At(l.template) || !t.enhance ? a.re.createTemplate(l.template) : l.template;
        const u = "TEMPLATE" === c.nodeName && null != c.content;
        const f = u ? c.content : c;
        const d = e.get(Pn(zn));
        const m = d.length;
        let v = 0;
        if (m > 0) while (m > v) {
            null === (n = (s = d[v]).compiling) || void 0 === n ? void 0 : n.call(s, c);
            ++v;
        }
        if (c.hasAttribute(Nn)) throw new Error("AUR0701");
        this.oe(f, a);
        this.le(f, a);
        return CustomElementDefinition.create({
            ...t,
            name: t.name || Qn(),
            dependencies: (null !== (r = t.dependencies) && void 0 !== r ? r : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray).concat(null !== (o = a.deps) && void 0 !== o ? o : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray),
            instructions: a.rows,
            surrogates: u ? this.he(c, a) : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray,
            template: c,
            hasSlots: a.hasSlot,
            needsCompile: false
        });
    }
    compileSpread(t, e, i, s) {
        var n;
        const r = new CompilationContext(t, i, Ln, null, null, void 0);
        const o = [];
        const l = r.ae(s.nodeName.toLowerCase());
        const h = r.ep;
        const a = e.length;
        let c = 0;
        let u;
        let f = null;
        let d;
        let m;
        let v;
        let p;
        let g;
        let w = null;
        let b;
        let x;
        let y;
        let k;
        for (;a > c; ++c) {
            u = e[c];
            y = u.target;
            k = u.rawValue;
            w = r.ce(u);
            if (null !== w && (1 & w.type) > 0) {
                Mn.node = s;
                Mn.attr = u;
                Mn.bindable = null;
                Mn.def = null;
                o.push(w.build(Mn));
                continue;
            }
            f = r.ue(y);
            if (null !== f) {
                if (f.isTemplateController) throw new Error(`AUR0703:${y}`);
                v = BindablesInfo.from(f, true);
                x = false === f.noMultiBindings && null === w && On(k);
                if (x) m = this.fe(s, k, f, r); else {
                    g = v.primary;
                    if (null === w) {
                        b = h.parse(k, 1);
                        m = [ null === b ? new SetPropertyInstruction(k, g.property) : new InterpolationInstruction(b, g.property) ];
                    } else {
                        Mn.node = s;
                        Mn.attr = u;
                        Mn.bindable = g;
                        Mn.def = f;
                        m = [ w.build(Mn) ];
                    }
                }
                (null !== d && void 0 !== d ? d : d = []).push(new HydrateAttributeInstruction(this.resolveResources ? f : f.name, null != f.aliases && f.aliases.includes(y) ? y : void 0, m));
                continue;
            }
            if (null === w) {
                b = h.parse(k, 1);
                if (null !== l) {
                    v = BindablesInfo.from(l, false);
                    p = v.attrs[y];
                    if (void 0 !== p) {
                        b = h.parse(k, 1);
                        o.push(new SpreadElementPropBindingInstruction(null == b ? new SetPropertyInstruction(k, p.property) : new InterpolationInstruction(b, p.property)));
                        continue;
                    }
                }
                if (null != b) o.push(new InterpolationInstruction(b, null !== (n = r.m.map(s, y)) && void 0 !== n ? n : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(y))); else switch (y) {
                  case "class":
                    o.push(new SetClassAttributeInstruction(k));
                    break;

                  case "style":
                    o.push(new SetStyleAttributeInstruction(k));
                    break;

                  default:
                    o.push(new SetAttributeInstruction(k, y));
                }
            } else {
                if (null !== l) {
                    v = BindablesInfo.from(l, false);
                    p = v.attrs[y];
                    if (void 0 !== p) {
                        Mn.node = s;
                        Mn.attr = u;
                        Mn.bindable = p;
                        Mn.def = l;
                        o.push(new SpreadElementPropBindingInstruction(w.build(Mn)));
                        continue;
                    }
                }
                Mn.node = s;
                Mn.attr = u;
                Mn.bindable = null;
                Mn.def = null;
                o.push(w.build(Mn));
            }
        }
        $n();
        if (null != d) return d.concat(o);
        return o;
    }
    he(t, e) {
        var i;
        const s = [];
        const n = t.attributes;
        const r = e.ep;
        let o = n.length;
        let l = 0;
        let h;
        let a;
        let c;
        let u;
        let f = null;
        let d;
        let m;
        let v;
        let p;
        let g = null;
        let w;
        let b;
        let x;
        let y;
        for (;o > l; ++l) {
            h = n[l];
            a = h.name;
            c = h.value;
            u = e.de.parse(a, c);
            x = u.target;
            y = u.rawValue;
            if (Un[x]) throw new Error(`AUR0702:${a}`);
            g = e.ce(u);
            if (null !== g && (1 & g.type) > 0) {
                Mn.node = t;
                Mn.attr = u;
                Mn.bindable = null;
                Mn.def = null;
                s.push(g.build(Mn));
                continue;
            }
            f = e.ue(x);
            if (null !== f) {
                if (f.isTemplateController) throw new Error(`AUR0703:${x}`);
                v = BindablesInfo.from(f, true);
                b = false === f.noMultiBindings && null === g && On(y);
                if (b) m = this.fe(t, y, f, e); else {
                    p = v.primary;
                    if (null === g) {
                        w = r.parse(y, 1);
                        m = [ null === w ? new SetPropertyInstruction(y, p.property) : new InterpolationInstruction(w, p.property) ];
                    } else {
                        Mn.node = t;
                        Mn.attr = u;
                        Mn.bindable = p;
                        Mn.def = f;
                        m = [ g.build(Mn) ];
                    }
                }
                t.removeAttribute(a);
                --l;
                --o;
                (null !== d && void 0 !== d ? d : d = []).push(new HydrateAttributeInstruction(this.resolveResources ? f : f.name, null != f.aliases && f.aliases.includes(x) ? x : void 0, m));
                continue;
            }
            if (null === g) {
                w = r.parse(y, 1);
                if (null != w) {
                    t.removeAttribute(a);
                    --l;
                    --o;
                    s.push(new InterpolationInstruction(w, null !== (i = e.m.map(t, x)) && void 0 !== i ? i : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(x)));
                } else switch (a) {
                  case "class":
                    s.push(new SetClassAttributeInstruction(y));
                    break;

                  case "style":
                    s.push(new SetStyleAttributeInstruction(y));
                    break;

                  default:
                    s.push(new SetAttributeInstruction(y, a));
                }
            } else {
                Mn.node = t;
                Mn.attr = u;
                Mn.bindable = null;
                Mn.def = null;
                s.push(g.build(Mn));
            }
        }
        $n();
        if (null != d) return d.concat(s);
        return s;
    }
    le(t, e) {
        switch (t.nodeType) {
          case 1:
            switch (t.nodeName) {
              case "LET":
                return this.me(t, e);

              default:
                return this.ve(t, e);
            }

          case 3:
            return this.pe(t, e);

          case 11:
            {
                let i = t.firstChild;
                while (null !== i) i = this.le(i, e);
                break;
            }
        }
        return t.nextSibling;
    }
    me(t, e) {
        const i = t.attributes;
        const s = i.length;
        const n = [];
        const r = e.ep;
        let o = false;
        let l = 0;
        let h;
        let a;
        let c;
        let u;
        let f;
        let d;
        let m;
        let v;
        for (;s > l; ++l) {
            h = i[l];
            c = h.name;
            u = h.value;
            if ("to-binding-context" === c) {
                o = true;
                continue;
            }
            a = e.de.parse(c, u);
            d = a.target;
            m = a.rawValue;
            f = e.ce(a);
            if (null !== f) switch (f.name) {
              case "to-view":
              case "bind":
                n.push(new LetBindingInstruction(r.parse(m, 8), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(d)));
                continue;

              default:
                throw new Error(`AUR0704:${a.command}`);
            }
            v = r.parse(m, 1);
            n.push(new LetBindingInstruction(null === v ? new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.PrimitiveLiteralExpression(m) : v, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(d)));
        }
        e.rows.push([ new HydrateLetElementInstruction(n, o) ]);
        return this.ge(t).nextSibling;
    }
    ve(t, e) {
        var i, s, n, r, l, a;
        var c, u;
        const f = t.nextSibling;
        const d = (null !== (i = t.getAttribute("as-element")) && void 0 !== i ? i : t.nodeName).toLowerCase();
        const m = e.ae(d);
        const v = !!(null === m || void 0 === m ? void 0 : m.capture);
        const p = v ? [] : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
        const g = e.ep;
        const w = this.debug ? _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop : () => {
            t.removeAttribute(A);
            --k;
            --y;
        };
        let b = t.attributes;
        let x;
        let y = b.length;
        let k = 0;
        let C;
        let A;
        let R;
        let E;
        let B;
        let I;
        let T = null;
        let D = false;
        let P;
        let O;
        let $;
        let L;
        let q;
        let M;
        let U;
        let F = null;
        let V;
        let _;
        let j;
        let N;
        let W = true;
        let H = false;
        if ("slot" === d) e.root.hasSlot = true;
        if (null !== m) {
            W = null === (s = m.processContent) || void 0 === s ? void 0 : s.call(m.Type, t, e.p);
            b = t.attributes;
            y = b.length;
        }
        if (e.root.def.enhance && t.classList.contains("au")) throw new Error(`AUR0705`);
        for (;y > k; ++k) {
            C = b[k];
            A = C.name;
            R = C.value;
            switch (A) {
              case "as-element":
              case "containerless":
                w();
                if (!H) H = "containerless" === A;
                continue;
            }
            E = e.de.parse(A, R);
            F = e.ce(E);
            j = E.target;
            N = E.rawValue;
            if (v) {
                if (null != F && 1 & F.type) {
                    w();
                    p.push(E);
                    continue;
                }
                if ("au-slot" !== j) {
                    V = BindablesInfo.from(m, false);
                    if (null == V.attrs[j] && !(null === (n = e.ue(j)) || void 0 === n ? void 0 : n.isTemplateController)) {
                        w();
                        p.push(E);
                        continue;
                    }
                }
            }
            if (null !== F && 1 & F.type) {
                Mn.node = t;
                Mn.attr = E;
                Mn.bindable = null;
                Mn.def = null;
                (null !== B && void 0 !== B ? B : B = []).push(F.build(Mn));
                w();
                continue;
            }
            T = e.ue(j);
            if (null !== T) {
                V = BindablesInfo.from(T, true);
                D = false === T.noMultiBindings && null === F && On(R);
                if (D) $ = this.fe(t, R, T, e); else {
                    _ = V.primary;
                    if (null === F) {
                        M = g.parse(R, 1);
                        $ = [ null === M ? new SetPropertyInstruction(R, _.property) : new InterpolationInstruction(M, _.property) ];
                    } else {
                        Mn.node = t;
                        Mn.attr = E;
                        Mn.bindable = _;
                        Mn.def = T;
                        $ = [ F.build(Mn) ];
                    }
                }
                w();
                if (T.isTemplateController) (null !== L && void 0 !== L ? L : L = []).push(new HydrateTemplateController(qn, this.resolveResources ? T : T.name, void 0, $)); else (null !== O && void 0 !== O ? O : O = []).push(new HydrateAttributeInstruction(this.resolveResources ? T : T.name, null != T.aliases && T.aliases.includes(j) ? j : void 0, $));
                continue;
            }
            if (null === F) {
                if (null !== m) {
                    V = BindablesInfo.from(m, false);
                    P = V.attrs[j];
                    if (void 0 !== P) {
                        M = g.parse(N, 1);
                        (null !== I && void 0 !== I ? I : I = []).push(null == M ? new SetPropertyInstruction(N, P.property) : new InterpolationInstruction(M, P.property));
                        w();
                        continue;
                    }
                }
                M = g.parse(N, 1);
                if (null != M) {
                    w();
                    (null !== B && void 0 !== B ? B : B = []).push(new InterpolationInstruction(M, null !== (r = e.m.map(t, j)) && void 0 !== r ? r : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.camelCase)(j)));
                }
                continue;
            }
            w();
            if (null !== m) {
                V = BindablesInfo.from(m, false);
                P = V.attrs[j];
                if (void 0 !== P) {
                    Mn.node = t;
                    Mn.attr = E;
                    Mn.bindable = P;
                    Mn.def = m;
                    (null !== I && void 0 !== I ? I : I = []).push(F.build(Mn));
                    continue;
                }
            }
            Mn.node = t;
            Mn.attr = E;
            Mn.bindable = null;
            Mn.def = null;
            (null !== B && void 0 !== B ? B : B = []).push(F.build(Mn));
        }
        $n();
        if (this.we(t) && null != B && B.length > 1) this.be(t, B);
        if (null !== m) {
            U = new HydrateElementInstruction(this.resolveResources ? m : m.name, void 0, null !== I && void 0 !== I ? I : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray, null, H, p);
            if ("au-slot" === d) {
                const i = t.getAttribute("name") || "default";
                const s = e.h("template");
                const n = e.xe();
                let r = t.firstChild;
                while (null !== r) {
                    if (1 === r.nodeType && r.hasAttribute("au-slot")) t.removeChild(r); else s.content.appendChild(r);
                    r = t.firstChild;
                }
                this.le(s.content, n);
                U.auSlot = {
                    name: i,
                    fallback: CustomElementDefinition.create({
                        name: Qn(),
                        template: s,
                        instructions: n.rows,
                        needsCompile: false
                    })
                };
                t = this.ye(t, e);
            }
        }
        if (null != B || null != U || null != O) {
            x = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray.concat(null !== U && void 0 !== U ? U : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray, null !== O && void 0 !== O ? O : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray, null !== B && void 0 !== B ? B : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray);
            this.ge(t);
        }
        let z;
        if (null != L) {
            y = L.length - 1;
            k = y;
            q = L[k];
            let i;
            this.ye(t, e);
            if ("TEMPLATE" === t.nodeName) i = t; else {
                i = e.h("template");
                i.content.appendChild(t);
            }
            const s = i;
            const n = e.xe(null == x ? [] : [ x ]);
            let r;
            let o;
            let h;
            let a;
            let u;
            let f;
            let v;
            let p;
            let g = 0, w = 0;
            let b = t.firstChild;
            if (false !== W) while (null !== b) if (1 === b.nodeType) {
                r = b;
                b = b.nextSibling;
                o = r.getAttribute("au-slot");
                if (null !== o) {
                    if (null === m) throw new Error(`AUR0706:${d}[${o}]`);
                    if ("" === o) o = "default";
                    r.removeAttribute("au-slot");
                    t.removeChild(r);
                    (null !== (l = (c = null !== a && void 0 !== a ? a : a = {})[o]) && void 0 !== l ? l : c[o] = []).push(r);
                }
            } else b = b.nextSibling;
            if (null != a) {
                h = {};
                for (o in a) {
                    i = e.h("template");
                    u = a[o];
                    for (g = 0, w = u.length; w > g; ++g) {
                        f = u[g];
                        if ("TEMPLATE" === f.nodeName) if (f.attributes.length > 0) i.content.appendChild(f); else i.content.appendChild(f.content); else i.content.appendChild(f);
                    }
                    p = e.xe();
                    this.le(i.content, p);
                    h[o] = CustomElementDefinition.create({
                        name: Qn(),
                        template: i,
                        instructions: p.rows,
                        needsCompile: false,
                        isStrictBinding: e.root.def.isStrictBinding
                    });
                }
                U.projections = h;
            }
            if (null !== m && m.containerless) this.ye(t, e);
            z = null === m || !m.containerless && !H && false !== W;
            if (z) if ("TEMPLATE" === t.nodeName) this.le(t.content, n); else {
                b = t.firstChild;
                while (null !== b) b = this.le(b, n);
            }
            q.def = CustomElementDefinition.create({
                name: Qn(),
                template: s,
                instructions: n.rows,
                needsCompile: false,
                isStrictBinding: e.root.def.isStrictBinding
            });
            while (k-- > 0) {
                q = L[k];
                i = e.h("template");
                v = e.h("au-m");
                v.classList.add("au");
                i.content.appendChild(v);
                q.def = CustomElementDefinition.create({
                    name: Qn(),
                    template: i,
                    needsCompile: false,
                    instructions: [ [ L[k + 1] ] ],
                    isStrictBinding: e.root.def.isStrictBinding
                });
            }
            e.rows.push([ q ]);
        } else {
            if (null != x) e.rows.push(x);
            let i = t.firstChild;
            let s;
            let n;
            let r = null;
            let o;
            let l;
            let h;
            let c;
            let f;
            let d = 0, v = 0;
            if (false !== W) while (null !== i) if (1 === i.nodeType) {
                s = i;
                i = i.nextSibling;
                n = s.getAttribute("au-slot");
                if (null !== n) {
                    if (null === m) throw new Error(`AUR0706:${t.nodeName}[${n}]`);
                    if ("" === n) n = "default";
                    t.removeChild(s);
                    s.removeAttribute("au-slot");
                    (null !== (a = (u = null !== o && void 0 !== o ? o : o = {})[n]) && void 0 !== a ? a : u[n] = []).push(s);
                }
            } else i = i.nextSibling;
            if (null != o) {
                r = {};
                for (n in o) {
                    c = e.h("template");
                    l = o[n];
                    for (d = 0, v = l.length; v > d; ++d) {
                        h = l[d];
                        if ("TEMPLATE" === h.nodeName) if (h.attributes.length > 0) c.content.appendChild(h); else c.content.appendChild(h.content); else c.content.appendChild(h);
                    }
                    f = e.xe();
                    this.le(c.content, f);
                    r[n] = CustomElementDefinition.create({
                        name: Qn(),
                        template: c,
                        instructions: f.rows,
                        needsCompile: false,
                        isStrictBinding: e.root.def.isStrictBinding
                    });
                }
                U.projections = r;
            }
            if (null !== m && m.containerless) this.ye(t, e);
            z = null === m || !m.containerless && !H && false !== W;
            if (z && t.childNodes.length > 0) {
                i = t.firstChild;
                while (null !== i) i = this.le(i, e);
            }
        }
        return f;
    }
    pe(t, e) {
        let i = "";
        let s = t;
        while (null !== s && 3 === s.nodeType) {
            i += s.textContent;
            s = s.nextSibling;
        }
        const n = e.ep.parse(i, 1);
        if (null === n) return s;
        const r = t.parentNode;
        r.insertBefore(this.ge(e.h("au-m")), t);
        e.rows.push([ new TextBindingInstruction(n, !!e.def.isStrictBinding) ]);
        t.textContent = "";
        s = t.nextSibling;
        while (null !== s && 3 === s.nodeType) {
            r.removeChild(s);
            s = t.nextSibling;
        }
        return t.nextSibling;
    }
    fe(t, e, i, s) {
        const n = BindablesInfo.from(i, true);
        const r = e.length;
        const o = [];
        let l;
        let h;
        let a = 0;
        let c = 0;
        let u;
        let f;
        let d;
        let m;
        for (let v = 0; v < r; ++v) {
            c = e.charCodeAt(v);
            if (92 === c) ++v; else if (58 === c) {
                l = e.slice(a, v);
                while (e.charCodeAt(++v) <= 32) ;
                a = v;
                for (;v < r; ++v) {
                    c = e.charCodeAt(v);
                    if (92 === c) ++v; else if (59 === c) {
                        h = e.slice(a, v);
                        break;
                    }
                }
                if (void 0 === h) h = e.slice(a);
                f = s.de.parse(l, h);
                d = s.ce(f);
                m = n.attrs[f.target];
                if (null == m) throw new Error(`AUR0707:${i.name}.${f.target}`);
                if (null === d) {
                    u = s.ep.parse(h, 1);
                    o.push(null === u ? new SetPropertyInstruction(h, m.property) : new InterpolationInstruction(u, m.property));
                } else {
                    Mn.node = t;
                    Mn.attr = f;
                    Mn.bindable = m;
                    Mn.def = i;
                    o.push(d.build(Mn));
                }
                while (v < r && e.charCodeAt(++v) <= 32) ;
                a = v;
                l = void 0;
                h = void 0;
            }
        }
        $n();
        return o;
    }
    oe(t, e) {
        const i = t;
        const s = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.toArray)(i.querySelectorAll("template[as-custom-element]"));
        const n = s.length;
        if (0 === n) return;
        if (n === i.childElementCount) throw new Error("AUR0708");
        const r = new Set;
        for (const t of s) {
            if (t.parentNode !== i) throw new Error("AUR0709");
            const s = Wn(t, r);
            const n = class LocalTemplate {};
            const o = t.content;
            const l = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.toArray)(o.querySelectorAll("bindable"));
            const h = Bt.for(n);
            const a = new Set;
            const c = new Set;
            for (const t of l) {
                if (t.parentNode !== o) throw new Error("AUR0710");
                const e = t.getAttribute("property");
                if (null === e) throw new Error("AUR0711");
                const i = t.getAttribute("attribute");
                if (null !== i && c.has(i) || a.has(e)) throw new Error(`AUR0712:${e}+${i}`); else {
                    if (null !== i) c.add(i);
                    a.add(e);
                }
                h.add({
                    property: e,
                    attribute: null !== i && void 0 !== i ? i : void 0,
                    mode: Hn(t)
                });
                const s = t.getAttributeNames().filter((t => !jn.includes(t)));
                if (s.length > 0) ;
                o.removeChild(t);
            }
            e.ke(si.define({
                name: s,
                template: t
            }, n));
            i.removeChild(t);
        }
    }
    we(t) {
        return "INPUT" === t.nodeName && 1 === Fn[t.type];
    }
    be(t, e) {
        switch (t.nodeName) {
          case "INPUT":
            {
                const t = e;
                let i;
                let s;
                let n = 0;
                let r;
                for (let e = 0; e < t.length && n < 3; e++) {
                    r = t[e];
                    switch (r.to) {
                      case "model":
                      case "value":
                      case "matcher":
                        i = e;
                        n++;
                        break;

                      case "checked":
                        s = e;
                        n++;
                        break;
                    }
                }
                if (void 0 !== s && void 0 !== i && s < i) [t[i], t[s]] = [ t[s], t[i] ];
            }
        }
    }
    ge(t) {
        t.classList.add("au");
        return t;
    }
    ye(t, e) {
        const i = t.parentNode;
        const s = e.h("au-m");
        this.ge(i.insertBefore(s, t));
        i.removeChild(t);
        return s;
    }
}

class CompilationContext {
    constructor(t, e, i, s, n, r) {
        this.hasSlot = false;
        this.Ce = wt();
        const o = null !== s;
        this.c = e;
        this.root = null === n ? this : n;
        this.def = t;
        this.ci = i;
        this.parent = s;
        this.re = o ? s.re : e.get(Tn);
        this.de = o ? s.de : e.get(Ut);
        this.ep = o ? s.ep : e.get(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IExpressionParser);
        this.m = o ? s.m : e.get(Zt);
        this.Ft = o ? s.Ft : e.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.ILogger);
        this.p = o ? s.p : e.get(Kt);
        this.localEls = o ? s.localEls : new Set;
        this.rows = null !== r && void 0 !== r ? r : [];
    }
    ke(t) {
        var e;
        var i;
        (null !== (e = (i = this.root).deps) && void 0 !== e ? e : i.deps = []).push(t);
        this.root.c.register(t);
    }
    h(t) {
        const e = this.p.document.createElement(t);
        if ("template" === t) this.p.document.adoptNode(e.content);
        return e;
    }
    ae(t) {
        return this.c.find(si, t);
    }
    ue(t) {
        return this.c.find(Me, t);
    }
    xe(t) {
        return new CompilationContext(this.def, this.c, this.ci, this, this.root, t);
    }
    ce(t) {
        if (this.root !== this) return this.root.ce(t);
        const e = t.command;
        if (null === e) return null;
        let i = this.Ce[e];
        if (void 0 === i) {
            i = this.c.create(mn, e);
            if (null === i) throw new Error(`AUR0713:${e}`);
            this.Ce[e] = i;
        }
        return i;
    }
}

function On(t) {
    const e = t.length;
    let i = 0;
    let s = 0;
    while (e > s) {
        i = t.charCodeAt(s);
        if (92 === i) ++s; else if (58 === i) return true; else if (36 === i && 123 === t.charCodeAt(s + 1)) return false;
        ++s;
    }
    return false;
}

function $n() {
    Mn.node = Mn.attr = Mn.bindable = Mn.def = null;
}

const Ln = {
    projections: null
};

const qn = {
    name: "unnamed"
};

const Mn = {
    node: null,
    attr: null,
    bindable: null,
    def: null
};

const Un = Object.assign(wt(), {
    id: true,
    name: true,
    "au-slot": true,
    "as-element": true
});

const Fn = {
    checkbox: 1,
    radio: 1
};

const Vn = new WeakMap;

class BindablesInfo {
    constructor(t, e, i) {
        this.attrs = t;
        this.bindables = e;
        this.primary = i;
    }
    static from(t, e) {
        let i = Vn.get(t);
        if (null == i) {
            const s = t.bindables;
            const n = wt();
            const r = e ? void 0 === t.defaultBindingMode ? _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.default : t.defaultBindingMode : _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.default;
            let o;
            let l;
            let h = false;
            let a;
            let c;
            for (l in s) {
                o = s[l];
                c = o.attribute;
                if (true === o.primary) {
                    if (h) throw new Error(`AUR0714:${t.name}`);
                    h = true;
                    a = o;
                } else if (!h && null == a) a = o;
                n[c] = BindableDefinition.create(l, t.Type, o);
            }
            if (null == o && e) a = n.value = BindableDefinition.create("value", t.Type, {
                mode: r
            });
            Vn.set(t, i = new BindablesInfo(n, s, a));
        }
        return i;
    }
}

var _n;

(function(t) {
    t["property"] = "property";
    t["attribute"] = "attribute";
    t["mode"] = "mode";
})(_n || (_n = {}));

const jn = Object.freeze([ "property", "attribute", "mode" ]);

const Nn = "as-custom-element";

function Wn(t, e) {
    const i = t.getAttribute(Nn);
    if (null === i || "" === i) throw new Error("AUR0715");
    if (e.has(i)) throw new Error(`AUR0716:${i}`); else {
        e.add(i);
        t.removeAttribute(Nn);
    }
    return i;
}

function Hn(t) {
    switch (t.getAttribute("mode")) {
      case "oneTime":
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.oneTime;

      case "toView":
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView;

      case "fromView":
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView;

      case "twoWay":
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.twoWay;

      case "default":
      default:
        return _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.default;
    }
}

const zn = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ITemplateCompilerHooks");

const Gn = new WeakMap;

const Xn = mt("compiler-hooks");

const Kn = Object.freeze({
    name: Xn,
    define(t) {
        let e = Gn.get(t);
        if (void 0 === e) {
            Gn.set(t, e = new TemplateCompilerHooksDefinition(t));
            ct(Xn, e, t);
            vt(t, Xn);
        }
        return t;
    }
});

class TemplateCompilerHooksDefinition {
    constructor(t) {
        this.Type = t;
    }
    get name() {
        return "";
    }
    register(t) {
        t.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(zn, this.Type));
    }
}

const Yn = t => {
    return void 0 === t ? e : e(t);
    function e(t) {
        return Kn.define(t);
    }
};

const Qn = si.generateName;

class BindingModeBehavior {
    constructor(t) {
        this.mode = t;
        this.Ae = new Map;
    }
    bind(t, e, i) {
        this.Ae.set(i, i.mode);
        i.mode = this.mode;
    }
    unbind(t, e, i) {
        i.mode = this.Ae.get(i);
        this.Ae.delete(i);
    }
}

class OneTimeBindingBehavior extends BindingModeBehavior {
    constructor() {
        super(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.oneTime);
    }
}

class ToViewBindingBehavior extends BindingModeBehavior {
    constructor() {
        super(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView);
    }
}

class FromViewBindingBehavior extends BindingModeBehavior {
    constructor() {
        super(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView);
    }
}

class TwoWayBindingBehavior extends BindingModeBehavior {
    constructor() {
        super(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.twoWay);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("oneTime")(OneTimeBindingBehavior);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("toView")(ToViewBindingBehavior);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("fromView")(FromViewBindingBehavior);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("twoWay")(TwoWayBindingBehavior);

const Zn = 200;

class DebounceBindingBehavior extends _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingInterceptor {
    constructor(t, e) {
        super(t, e);
        this.opts = {
            delay: Zn
        };
        this.firstArg = null;
        this.task = null;
        this.taskQueue = t.locator.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IPlatform).taskQueue;
        if (e.args.length > 0) this.firstArg = e.args[0];
    }
    callSource(t) {
        this.queueTask((() => this.binding.callSource(t)));
        return;
    }
    handleChange(t, e, i) {
        if (null !== this.task) {
            this.task.cancel();
            this.task = null;
        }
        this.binding.handleChange(t, e, i);
    }
    updateSource(t, e) {
        this.queueTask((() => this.binding.updateSource(t, e)));
    }
    queueTask(t) {
        const e = this.task;
        this.task = this.taskQueue.queueTask((() => {
            this.task = null;
            return t();
        }), this.opts);
        null === e || void 0 === e ? void 0 : e.cancel();
    }
    $bind(t, e) {
        if (null !== this.firstArg) {
            const i = Number(this.firstArg.evaluate(t, e, this.locator, null));
            this.opts.delay = isNaN(i) ? Zn : i;
        }
        this.binding.$bind(t, e);
    }
    $unbind(t) {
        var e;
        null === (e = this.task) || void 0 === e ? void 0 : e.cancel();
        this.task = null;
        this.binding.$unbind(t);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("debounce")(DebounceBindingBehavior);

class SignalBindingBehavior {
    constructor(t) {
        this.Zt = new Map;
        this.Se = t;
    }
    bind(t, e, i, ...s) {
        if (!("handleChange" in i)) throw new Error("AUR0817");
        if (0 === s.length) throw new Error("AUR0818");
        this.Zt.set(i, s);
        let n;
        for (n of s) this.Se.addSignalListener(n, i);
    }
    unbind(t, e, i) {
        const s = this.Zt.get(i);
        this.Zt.delete(i);
        let n;
        for (n of s) this.Se.removeSignalListener(n, i);
    }
}

SignalBindingBehavior.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ISignaler ];

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("signal")(SignalBindingBehavior);

const Jn = 200;

class ThrottleBindingBehavior extends _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingInterceptor {
    constructor(t, e) {
        super(t, e);
        this.opts = {
            delay: Jn
        };
        this.firstArg = null;
        this.task = null;
        this.lastCall = 0;
        this.delay = 0;
        this.p = t.locator.get(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IPlatform);
        this.Re = this.p.taskQueue;
        if (e.args.length > 0) this.firstArg = e.args[0];
    }
    callSource(t) {
        this.Ee((() => this.binding.callSource(t)));
        return;
    }
    handleChange(t, e, i) {
        if (null !== this.task) {
            this.task.cancel();
            this.task = null;
            this.lastCall = this.p.performanceNow();
        }
        this.binding.handleChange(t, e, i);
    }
    updateSource(t, e) {
        this.Ee((() => this.binding.updateSource(t, e)));
    }
    Ee(t) {
        const e = this.opts;
        const i = this.p;
        const s = this.lastCall + e.delay - i.performanceNow();
        if (s > 0) {
            const n = this.task;
            e.delay = s;
            this.task = this.Re.queueTask((() => {
                this.lastCall = i.performanceNow();
                this.task = null;
                e.delay = this.delay;
                t();
            }), e);
            null === n || void 0 === n ? void 0 : n.cancel();
        } else {
            this.lastCall = i.performanceNow();
            t();
        }
    }
    $bind(t, e) {
        if (null !== this.firstArg) {
            const i = Number(this.firstArg.evaluate(t, e, this.locator, null));
            this.opts.delay = this.delay = isNaN(i) ? Jn : i;
        }
        this.binding.$bind(t, e);
    }
    $unbind(t) {
        var e;
        null === (e = this.task) || void 0 === e ? void 0 : e.cancel();
        this.task = null;
        super.$unbind(t);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("throttle")(ThrottleBindingBehavior);

class DataAttributeAccessor {
    constructor() {
        this.type = 2 | 4;
    }
    getValue(t, e) {
        return t.getAttribute(e);
    }
    setValue(t, e, i, s) {
        if (void 0 == t) i.removeAttribute(s); else i.setAttribute(s, t);
    }
}

const tr = new DataAttributeAccessor;

class AttrBindingBehavior {
    bind(t, e, i) {
        i.targetObserver = tr;
    }
    unbind(t, e, i) {
        return;
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("attr")(AttrBindingBehavior);

function er(t) {
    const e = t.composedPath()[0];
    if (this.target !== e) return;
    return this.selfEventCallSource(t);
}

class SelfBindingBehavior {
    bind(t, e, i) {
        if (!i.callSource || !i.targetEvent) throw new Error("AUR0801");
        i.selfEventCallSource = i.callSource;
        i.callSource = er;
    }
    unbind(t, e, i) {
        i.callSource = i.selfEventCallSource;
        i.selfEventCallSource = null;
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("self")(SelfBindingBehavior);

const ir = wt();

class AttributeNSAccessor {
    constructor(t) {
        this.ns = t;
        this.type = 2 | 4;
    }
    static forNs(t) {
        var e;
        return null !== (e = ir[t]) && void 0 !== e ? e : ir[t] = new AttributeNSAccessor(t);
    }
    getValue(t, e) {
        return t.getAttributeNS(this.ns, e);
    }
    setValue(t, e, i, s) {
        if (void 0 == t) i.removeAttributeNS(this.ns, s); else i.setAttributeNS(this.ns, s, t);
    }
}

function sr(t, e) {
    return t === e;
}

class CheckedObserver {
    constructor(t, e, i, s) {
        this.handler = i;
        this.type = 2 | 1 | 4;
        this.v = void 0;
        this.ov = void 0;
        this.Be = void 0;
        this.Ie = void 0;
        this.f = 0;
        this.o = t;
        this.oL = s;
    }
    getValue() {
        return this.v;
    }
    setValue(t, e) {
        const i = this.v;
        if (t === i) return;
        this.v = t;
        this.ov = i;
        this.f = e;
        this.Te();
        this.De();
        this.queue.add(this);
    }
    handleCollectionChange(t, e) {
        this.De();
    }
    handleChange(t, e, i) {
        this.De();
    }
    De() {
        const t = this.v;
        const e = this.o;
        const i = bt.call(e, "model") ? e.model : e.value;
        const s = "radio" === e.type;
        const n = void 0 !== e.matcher ? e.matcher : sr;
        if (s) e.checked = !!n(t, i); else if (true === t) e.checked = true; else {
            let s = false;
            if (t instanceof Array) s = -1 !== t.findIndex((t => !!n(t, i))); else if (t instanceof Set) {
                for (const e of t) if (n(e, i)) {
                    s = true;
                    break;
                }
            } else if (t instanceof Map) for (const e of t) {
                const t = e[0];
                const r = e[1];
                if (n(t, i) && true === r) {
                    s = true;
                    break;
                }
            }
            e.checked = s;
        }
    }
    handleEvent() {
        let t = this.ov = this.v;
        const e = this.o;
        const i = bt.call(e, "model") ? e.model : e.value;
        const s = e.checked;
        const n = void 0 !== e.matcher ? e.matcher : sr;
        if ("checkbox" === e.type) {
            if (t instanceof Array) {
                const e = t.findIndex((t => !!n(t, i)));
                if (s && -1 === e) t.push(i); else if (!s && -1 !== e) t.splice(e, 1);
                return;
            } else if (t instanceof Set) {
                const e = {};
                let r = e;
                for (const e of t) if (true === n(e, i)) {
                    r = e;
                    break;
                }
                if (s && r === e) t.add(i); else if (!s && r !== e) t.delete(r);
                return;
            } else if (t instanceof Map) {
                let e;
                for (const s of t) {
                    const t = s[0];
                    if (true === n(t, i)) {
                        e = t;
                        break;
                    }
                }
                t.set(e, s);
                return;
            }
            t = s;
        } else if (s) t = i; else return;
        this.v = t;
        this.queue.add(this);
    }
    start() {
        this.handler.subscribe(this.o, this);
        this.Te();
    }
    stop() {
        var t, e;
        this.handler.dispose();
        null === (t = this.Be) || void 0 === t ? void 0 : t.unsubscribe(this);
        this.Be = void 0;
        null === (e = this.Ie) || void 0 === e ? void 0 : e.unsubscribe(this);
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) this.start();
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) this.stop();
    }
    flush() {
        nr = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, nr, this.f);
    }
    Te() {
        var t, e, i, s, n, r, o;
        const l = this.o;
        null === (n = null !== (t = this.Ie) && void 0 !== t ? t : this.Ie = null !== (i = null === (e = l.$observers) || void 0 === e ? void 0 : e.model) && void 0 !== i ? i : null === (s = l.$observers) || void 0 === s ? void 0 : s.value) || void 0 === n ? void 0 : n.subscribe(this);
        null === (r = this.Be) || void 0 === r ? void 0 : r.unsubscribe(this);
        this.Be = void 0;
        if ("checkbox" === l.type) null === (o = this.Be = gr(this.v, this.oL)) || void 0 === o ? void 0 : o.subscribe(this);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection)(CheckedObserver);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.withFlushQueue)(CheckedObserver);

let nr;

const rr = Object.prototype.hasOwnProperty;

const or = {
    childList: true,
    subtree: true,
    characterData: true
};

function lr(t, e) {
    return t === e;
}

class SelectValueObserver {
    constructor(t, e, i, s) {
        this.type = 2 | 1 | 4;
        this.v = void 0;
        this.ov = void 0;
        this.H = false;
        this.Pe = void 0;
        this.Oe = void 0;
        this.iO = false;
        this.o = t;
        this.oL = s;
        this.handler = i;
    }
    getValue() {
        return this.iO ? this.v : this.o.multiple ? hr(this.o.options) : this.o.value;
    }
    setValue(t, e) {
        this.ov = this.v;
        this.v = t;
        this.H = t !== this.ov;
        this.$e(t instanceof Array ? t : null);
        if (0 === (256 & e)) this.K();
    }
    K() {
        if (this.H) {
            this.H = false;
            this.syncOptions();
        }
    }
    handleCollectionChange() {
        this.syncOptions();
    }
    syncOptions() {
        var t;
        const e = this.v;
        const i = this.o;
        const s = Array.isArray(e);
        const n = null !== (t = i.matcher) && void 0 !== t ? t : lr;
        const r = i.options;
        let o = r.length;
        while (o-- > 0) {
            const t = r[o];
            const i = rr.call(t, "model") ? t.model : t.value;
            if (s) {
                t.selected = -1 !== e.findIndex((t => !!n(i, t)));
                continue;
            }
            t.selected = !!n(i, e);
        }
    }
    syncValue() {
        const t = this.o;
        const e = t.options;
        const i = e.length;
        const s = this.v;
        let n = 0;
        if (t.multiple) {
            if (!(s instanceof Array)) return true;
            let r;
            const o = t.matcher || lr;
            const l = [];
            while (n < i) {
                r = e[n];
                if (r.selected) l.push(rr.call(r, "model") ? r.model : r.value);
                ++n;
            }
            let h;
            n = 0;
            while (n < s.length) {
                h = s[n];
                if (-1 === l.findIndex((t => !!o(h, t)))) s.splice(n, 1); else ++n;
            }
            n = 0;
            while (n < l.length) {
                h = l[n];
                if (-1 === s.findIndex((t => !!o(h, t)))) s.push(h);
                ++n;
            }
            return false;
        }
        let r = null;
        let o;
        while (n < i) {
            o = e[n];
            if (o.selected) {
                r = rr.call(o, "model") ? o.model : o.value;
                break;
            }
            ++n;
        }
        this.ov = this.v;
        this.v = r;
        return true;
    }
    Le() {
        (this.Oe = new this.o.ownerDocument.defaultView.MutationObserver(this.qe.bind(this))).observe(this.o, or);
        this.$e(this.v instanceof Array ? this.v : null);
        this.iO = true;
    }
    Me() {
        var t;
        this.Oe.disconnect();
        null === (t = this.Pe) || void 0 === t ? void 0 : t.unsubscribe(this);
        this.Oe = this.Pe = void 0;
        this.iO = false;
    }
    $e(t) {
        var e;
        null === (e = this.Pe) || void 0 === e ? void 0 : e.unsubscribe(this);
        this.Pe = void 0;
        if (null != t) {
            if (!this.o.multiple) throw new Error("AUR0654");
            (this.Pe = this.oL.getArrayObserver(t)).subscribe(this);
        }
    }
    handleEvent() {
        const t = this.syncValue();
        if (t) this.queue.add(this);
    }
    qe(t) {
        this.syncOptions();
        const e = this.syncValue();
        if (e) this.queue.add(this);
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) {
            this.handler.subscribe(this.o, this);
            this.Le();
        }
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) {
            this.handler.dispose();
            this.Me();
        }
    }
    flush() {
        ar = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, ar, 0);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection)(SelectValueObserver);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.withFlushQueue)(SelectValueObserver);

function hr(t) {
    const e = [];
    if (0 === t.length) return e;
    const i = t.length;
    let s = 0;
    let n;
    while (i > s) {
        n = t[s];
        if (n.selected) e[e.length] = rr.call(n, "model") ? n.model : n.value;
        ++s;
    }
    return e;
}

let ar;

const cr = "--";

class StyleAttributeAccessor {
    constructor(t) {
        this.obj = t;
        this.type = 2 | 4;
        this.value = "";
        this.ov = "";
        this.styles = {};
        this.version = 0;
        this.H = false;
    }
    getValue() {
        return this.obj.style.cssText;
    }
    setValue(t, e) {
        this.value = t;
        this.H = t !== this.ov;
        if (0 === (256 & e)) this.K();
    }
    Ue(t) {
        const e = [];
        const i = /url\([^)]+$/;
        let s = 0;
        let n = "";
        let r;
        let o;
        let l;
        let h;
        while (s < t.length) {
            r = t.indexOf(";", s);
            if (-1 === r) r = t.length;
            n += t.substring(s, r);
            s = r + 1;
            if (i.test(n)) {
                n += ";";
                continue;
            }
            o = n.indexOf(":");
            l = n.substring(0, o).trim();
            h = n.substring(o + 1).trim();
            e.push([ l, h ]);
            n = "";
        }
        return e;
    }
    Fe(t) {
        let e;
        let i;
        const s = [];
        for (i in t) {
            e = t[i];
            if (null == e) continue;
            if (At(e)) {
                if (i.startsWith(cr)) {
                    s.push([ i, e ]);
                    continue;
                }
                s.push([ (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.kebabCase)(i), e ]);
                continue;
            }
            s.push(...this.Ve(e));
        }
        return s;
    }
    _e(t) {
        const e = t.length;
        if (e > 0) {
            const i = [];
            let s = 0;
            for (;e > s; ++s) i.push(...this.Ve(t[s]));
            return i;
        }
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
    }
    Ve(t) {
        if (At(t)) return this.Ue(t);
        if (t instanceof Array) return this._e(t);
        if (t instanceof Object) return this.Fe(t);
        return _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyArray;
    }
    K() {
        if (this.H) {
            this.H = false;
            const t = this.value;
            const e = this.styles;
            const i = this.Ve(t);
            let s;
            let n = this.version;
            this.ov = t;
            let r;
            let o;
            let l;
            let h = 0;
            const a = i.length;
            for (;h < a; ++h) {
                r = i[h];
                o = r[0];
                l = r[1];
                this.setProperty(o, l);
                e[o] = n;
            }
            this.styles = e;
            this.version += 1;
            if (0 === n) return;
            n -= 1;
            for (s in e) {
                if (!Object.prototype.hasOwnProperty.call(e, s) || e[s] !== n) continue;
                this.obj.style.removeProperty(s);
            }
        }
    }
    setProperty(t, e) {
        let i = "";
        if (null != e && Ct(e.indexOf) && e.includes("!important")) {
            i = "important";
            e = e.replace("!important", "");
        }
        this.obj.style.setProperty(t, e, i);
    }
    bind(t) {
        this.value = this.ov = this.obj.style.cssText;
    }
}

class ValueAttributeObserver {
    constructor(t, e, i) {
        this.handler = i;
        this.type = 2 | 1 | 4;
        this.v = "";
        this.ov = "";
        this.H = false;
        this.o = t;
        this.k = e;
    }
    getValue() {
        return this.v;
    }
    setValue(t, e) {
        if (Object.is(t, this.v)) return;
        this.ov = this.v;
        this.v = t;
        this.H = true;
        if (!this.handler.config.readonly && 0 === (256 & e)) this.K(e);
    }
    K(t) {
        var e;
        if (this.H) {
            this.H = false;
            this.o[this.k] = null !== (e = this.v) && void 0 !== e ? e : this.handler.config.default;
            if (0 === (2 & t)) this.queue.add(this);
        }
    }
    handleEvent() {
        this.ov = this.v;
        this.v = this.o[this.k];
        if (this.ov !== this.v) {
            this.H = false;
            this.queue.add(this);
        }
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) {
            this.handler.subscribe(this.o, this);
            this.v = this.ov = this.o[this.k];
        }
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) this.handler.dispose();
    }
    flush() {
        ur = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, ur, 0);
    }
}

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.subscriberCollection)(ValueAttributeObserver);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.withFlushQueue)(ValueAttributeObserver);

let ur;

const fr = "http://www.w3.org/1999/xlink";

const dr = "http://www.w3.org/XML/1998/namespace";

const mr = "http://www.w3.org/2000/xmlns/";

const vr = Object.assign(wt(), {
    "xlink:actuate": [ "actuate", fr ],
    "xlink:arcrole": [ "arcrole", fr ],
    "xlink:href": [ "href", fr ],
    "xlink:role": [ "role", fr ],
    "xlink:show": [ "show", fr ],
    "xlink:title": [ "title", fr ],
    "xlink:type": [ "type", fr ],
    "xml:lang": [ "lang", dr ],
    "xml:space": [ "space", dr ],
    xmlns: [ "xmlns", mr ],
    "xmlns:xlink": [ "xlink", mr ]
});

const pr = new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.PropertyAccessor;

pr.type = 2 | 4;

class NodeObserverConfig {
    constructor(t) {
        var e;
        this.type = null !== (e = t.type) && void 0 !== e ? e : ValueAttributeObserver;
        this.events = t.events;
        this.readonly = t.readonly;
        this.default = t.default;
    }
}

class NodeObserverLocator {
    constructor(t, e, i, s) {
        this.locator = t;
        this.platform = e;
        this.dirtyChecker = i;
        this.svgAnalyzer = s;
        this.allowDirtyCheck = true;
        this.je = wt();
        this.Ne = wt();
        this.We = wt();
        this.He = wt();
        const n = [ "change", "input" ];
        const r = {
            events: n,
            default: ""
        };
        this.useConfig({
            INPUT: {
                value: r,
                valueAsNumber: {
                    events: n,
                    default: 0
                },
                checked: {
                    type: CheckedObserver,
                    events: n
                },
                files: {
                    events: n,
                    readonly: true
                }
            },
            SELECT: {
                value: {
                    type: SelectValueObserver,
                    events: [ "change" ],
                    default: ""
                }
            },
            TEXTAREA: {
                value: r
            }
        });
        const o = {
            events: [ "change", "input", "blur", "keyup", "paste" ],
            default: ""
        };
        const l = {
            events: [ "scroll" ],
            default: 0
        };
        this.useConfigGlobal({
            scrollTop: l,
            scrollLeft: l,
            textContent: o,
            innerHTML: o
        });
        this.overrideAccessorGlobal("css", "style", "class");
        this.overrideAccessor({
            INPUT: [ "value", "checked", "model" ],
            SELECT: [ "value" ],
            TEXTAREA: [ "value" ]
        });
    }
    static register(t) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.aliasTo(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.INodeObserverLocator, NodeObserverLocator).register(t);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.INodeObserverLocator, NodeObserverLocator).register(t);
    }
    handles(t, e) {
        return t instanceof this.platform.Node;
    }
    useConfig(t, e, i) {
        var s, n;
        const r = this.je;
        let o;
        if (At(t)) {
            o = null !== (s = r[t]) && void 0 !== s ? s : r[t] = wt();
            if (null == o[e]) o[e] = new NodeObserverConfig(i); else wr(t, e);
        } else for (const i in t) {
            o = null !== (n = r[i]) && void 0 !== n ? n : r[i] = wt();
            const s = t[i];
            for (e in s) if (null == o[e]) o[e] = new NodeObserverConfig(s[e]); else wr(i, e);
        }
    }
    useConfigGlobal(t, e) {
        const i = this.Ne;
        if ("object" === typeof t) for (const e in t) if (null == i[e]) i[e] = new NodeObserverConfig(t[e]); else wr("*", e); else if (null == i[t]) i[t] = new NodeObserverConfig(e); else wr("*", t);
    }
    getAccessor(t, e, i) {
        var s;
        if (e in this.He || e in (null !== (s = this.We[t.tagName]) && void 0 !== s ? s : _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.emptyObject)) return this.getObserver(t, e, i);
        switch (e) {
          case "src":
          case "href":
          case "role":
            return tr;

          default:
            {
                const i = vr[e];
                if (void 0 !== i) return AttributeNSAccessor.forNs(i[1]);
                if (yt(t, e, this.svgAnalyzer)) return tr;
                return pr;
            }
        }
    }
    overrideAccessor(t, e) {
        var i, s;
        var n, r;
        let o;
        if (At(t)) {
            o = null !== (i = (n = this.We)[t]) && void 0 !== i ? i : n[t] = wt();
            o[e] = true;
        } else for (const e in t) for (const i of t[e]) {
            o = null !== (s = (r = this.We)[e]) && void 0 !== s ? s : r[e] = wt();
            o[i] = true;
        }
    }
    overrideAccessorGlobal(...t) {
        for (const e of t) this.He[e] = true;
    }
    getObserver(t, e, i) {
        var s, n;
        switch (e) {
          case "role":
            return tr;

          case "class":
            return new ClassAttributeAccessor(t);

          case "css":
          case "style":
            return new StyleAttributeAccessor(t);
        }
        const r = null !== (n = null === (s = this.je[t.tagName]) || void 0 === s ? void 0 : s[e]) && void 0 !== n ? n : this.Ne[e];
        if (null != r) return new r.type(t, e, new EventSubscriber(r), i, this.locator);
        const o = vr[e];
        if (void 0 !== o) return AttributeNSAccessor.forNs(o[1]);
        if (yt(t, e, this.svgAnalyzer)) return tr;
        if (e in t.constructor.prototype) {
            if (this.allowDirtyCheck) return this.dirtyChecker.createProperty(t, e);
            throw new Error(`AUR0652:${String(e)}`);
        } else return new _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.SetterObserver(t, e);
    }
}

NodeObserverLocator.inject = [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IServiceLocator, Kt, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IDirtyChecker, Yt ];

function gr(t, e) {
    if (t instanceof Array) return e.getArrayObserver(t);
    if (t instanceof Map) return e.getMapObserver(t);
    if (t instanceof Set) return e.getSetObserver(t);
}

function wr(t, e) {
    throw new Error(`AUR0653:${String(e)}@${t}`);
}

class UpdateTriggerBindingBehavior {
    constructor(t) {
        this.oL = t;
    }
    bind(t, e, i, ...s) {
        if (0 === s.length) throw new Error(`AUR0802`);
        if (i.mode !== _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.twoWay && i.mode !== _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView) throw new Error("AUR0803");
        const n = this.oL.getObserver(i.target, i.targetProperty);
        if (!n.handler) throw new Error("AUR0804");
        i.targetObserver = n;
        const r = n.handler;
        n.originalHandler = r;
        n.handler = new EventSubscriber(new NodeObserverConfig({
            default: r.config.default,
            events: s,
            readonly: r.config.readonly
        }));
    }
    unbind(t, e, i) {
        i.targetObserver.handler.dispose();
        i.targetObserver.handler = i.targetObserver.originalHandler;
        i.targetObserver.originalHandler = null;
    }
}

UpdateTriggerBindingBehavior.inject = [ _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator ];

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.bindingBehavior)("updateTrigger")(UpdateTriggerBindingBehavior);

class Focus {
    constructor(t, e) {
        this.ze = t;
        this.p = e;
        this.Ge = false;
    }
    binding() {
        this.valueChanged();
    }
    valueChanged() {
        if (this.$controller.isActive) this.Xe(); else this.Ge = true;
    }
    attached() {
        if (this.Ge) {
            this.Ge = false;
            this.Xe();
        }
        this.ze.addEventListener("focus", this);
        this.ze.addEventListener("blur", this);
    }
    afterDetachChildren() {
        const t = this.ze;
        t.removeEventListener("focus", this);
        t.removeEventListener("blur", this);
    }
    handleEvent(t) {
        if ("focus" === t.type) this.value = true; else if (!this.Ke) this.value = false;
    }
    Xe() {
        const t = this.ze;
        const e = this.Ke;
        const i = this.value;
        if (i && !e) t.focus(); else if (!i && e) t.blur();
    }
    get Ke() {
        return this.ze === this.p.document.activeElement;
    }
}

Focus.inject = [ ns, Kt ];

ot([ St({
    mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.twoWay
}) ], Focus.prototype, "value", void 0);

Pe("focus")(Focus);

let br = class Show {
    constructor(t, e, i) {
        this.el = t;
        this.p = e;
        this.Ye = false;
        this.Qe = null;
        this.$val = "";
        this.$prio = "";
        this.update = () => {
            this.Qe = null;
            if (Boolean(this.value) !== this.Ze) if (this.Ze === this.Je) {
                this.Ze = !this.Je;
                this.$val = this.el.style.getPropertyValue("display");
                this.$prio = this.el.style.getPropertyPriority("display");
                this.el.style.setProperty("display", "none", "important");
            } else {
                this.Ze = this.Je;
                this.el.style.setProperty("display", this.$val, this.$prio);
                if ("" === this.el.getAttribute("style")) this.el.removeAttribute("style");
            }
        };
        this.Ze = this.Je = "hide" !== i.alias;
    }
    binding() {
        this.Ye = true;
        this.update();
    }
    detaching() {
        var t;
        this.Ye = false;
        null === (t = this.Qe) || void 0 === t ? void 0 : t.cancel();
        this.Qe = null;
    }
    valueChanged() {
        if (this.Ye && null === this.Qe) this.Qe = this.p.domWriteQueue.queueTask(this.update);
    }
};

ot([ St ], br.prototype, "value", void 0);

br = ot([ lt(0, ns), lt(1, Kt), lt(2, ks) ], br);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.alias)("hide")(br);

Pe("show")(br);

class Portal {
    constructor(t, e, i) {
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.strict = false;
        this.p = i;
        this.ti = i.document.createElement("div");
        this.view = t.create();
        cs(this.view.nodes, e);
    }
    attaching(t, e, i) {
        if (null == this.callbackContext) this.callbackContext = this.$controller.scope.bindingContext;
        const s = this.ti = this.ei();
        this.view.setHost(s);
        return this.ii(t, s, i);
    }
    detaching(t, e, i) {
        return this.si(t, this.ti, i);
    }
    targetChanged() {
        const {$controller: t} = this;
        if (!t.isActive) return;
        const e = this.ti;
        const i = this.ti = this.ei();
        if (e === i) return;
        this.view.setHost(i);
        const s = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.si(null, i, t.flags), (() => this.ii(null, i, t.flags)));
        if (s instanceof Promise) s.catch((t => {
            throw t;
        }));
    }
    ii(t, e, i) {
        const {activating: s, callbackContext: n, view: r} = this;
        r.setHost(e);
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === s || void 0 === s ? void 0 : s.call(n, e, r), (() => this.ni(t, e, i)));
    }
    ni(t, e, i) {
        const {$controller: s, view: n} = this;
        if (null === t) n.nodes.appendTo(e); else return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(n.activate(null !== t && void 0 !== t ? t : n, s, i, s.scope), (() => this.ri(e)));
        return this.ri(e);
    }
    ri(t) {
        const {activated: e, callbackContext: i, view: s} = this;
        return null === e || void 0 === e ? void 0 : e.call(i, t, s);
    }
    si(t, e, i) {
        const {deactivating: s, callbackContext: n, view: r} = this;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === s || void 0 === s ? void 0 : s.call(n, e, r), (() => this.oi(t, e, i)));
    }
    oi(t, e, i) {
        const {$controller: s, view: n} = this;
        if (null === t) n.nodes.remove(); else return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(n.deactivate(t, s, i), (() => this.li(e)));
        return this.li(e);
    }
    li(t) {
        const {deactivated: e, callbackContext: i, view: s} = this;
        return null === e || void 0 === e ? void 0 : e.call(i, t, s);
    }
    ei() {
        const t = this.p;
        const e = t.document;
        let i = this.target;
        let s = this.renderContext;
        if ("" === i) {
            if (this.strict) throw new Error("AUR0811");
            return e.body;
        }
        if (At(i)) {
            let n = e;
            if (At(s)) s = e.querySelector(s);
            if (s instanceof t.Node) n = s;
            i = n.querySelector(i);
        }
        if (i instanceof t.Node) return i;
        if (null == i) {
            if (this.strict) throw new Error("AUR0812");
            return e.body;
        }
        return i;
    }
    dispose() {
        this.view.dispose();
        this.view = void 0;
        this.callbackContext = null;
    }
    accept(t) {
        var e;
        if (true === (null === (e = this.view) || void 0 === e ? void 0 : e.accept(t))) return true;
    }
}

Portal.inject = [ Ai, os, Kt ];

ot([ St({
    primary: true
}) ], Portal.prototype, "target", void 0);

ot([ St({
    callback: "targetChanged"
}) ], Portal.prototype, "renderContext", void 0);

ot([ St() ], Portal.prototype, "strict", void 0);

ot([ St() ], Portal.prototype, "deactivating", void 0);

ot([ St() ], Portal.prototype, "activating", void 0);

ot([ St() ], Portal.prototype, "deactivated", void 0);

ot([ St() ], Portal.prototype, "activated", void 0);

ot([ St() ], Portal.prototype, "callbackContext", void 0);

Oe("portal")(Portal);

class FlagsTemplateController {
    constructor(t, e, i) {
        this.fs = i;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.view = t.create().setLocation(e);
    }
    attaching(t, e, i) {
        const {$controller: s} = this;
        return this.view.activate(t, s, i | this.fs, s.scope);
    }
    detaching(t, e, i) {
        return this.view.deactivate(t, this.$controller, i);
    }
    dispose() {
        this.view.dispose();
        this.view = void 0;
    }
    accept(t) {
        var e;
        if (true === (null === (e = this.view) || void 0 === e ? void 0 : e.accept(t))) return true;
    }
}

class FrequentMutations extends FlagsTemplateController {
    constructor(t, e) {
        super(t, e, 512);
    }
}

FrequentMutations.inject = [ Ai, os ];

class ObserveShallow extends FlagsTemplateController {
    constructor(t, e) {
        super(t, e, 128);
    }
}

ObserveShallow.inject = [ Ai, os ];

Oe("frequent-mutations")(FrequentMutations);

Oe("observe-shallow")(ObserveShallow);

class If {
    constructor(t, e, i) {
        this.ifFactory = t;
        this.location = e;
        this.work = i;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.elseFactory = void 0;
        this.elseView = void 0;
        this.ifView = void 0;
        this.view = void 0;
        this.value = false;
        this.cache = true;
        this.pending = void 0;
        this.hi = false;
        this.ai = 0;
    }
    attaching(t, e, i) {
        let s;
        const n = this.$controller;
        const r = this.ai++;
        const o = () => !this.hi && this.ai === r + 1;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.pending, (() => {
            var e;
            if (!o()) return;
            this.pending = void 0;
            if (this.value) s = this.view = this.ifView = this.cache && null != this.ifView ? this.ifView : this.ifFactory.create(); else s = this.view = this.elseView = this.cache && null != this.elseView ? this.elseView : null === (e = this.elseFactory) || void 0 === e ? void 0 : e.create();
            if (null == s) return;
            s.setLocation(this.location);
            this.pending = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(s.activate(t, n, i, n.scope), (() => {
                if (o()) this.pending = void 0;
            }));
        }));
    }
    detaching(t, e, i) {
        this.hi = true;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.pending, (() => {
            var e;
            this.hi = false;
            this.pending = void 0;
            void (null === (e = this.view) || void 0 === e ? void 0 : e.deactivate(t, this.$controller, i));
        }));
    }
    valueChanged(t, e, i) {
        if (!this.$controller.isActive) return;
        t = !!t;
        e = !!e;
        if (t === e) return;
        this.work.start();
        const s = this.view;
        const n = this.$controller;
        const r = this.ai++;
        const o = () => !this.hi && this.ai === r + 1;
        let l;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.pending, (() => this.pending = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === s || void 0 === s ? void 0 : s.deactivate(s, n, i), (() => {
            var e;
            if (!o()) return;
            if (t) l = this.view = this.ifView = this.cache && null != this.ifView ? this.ifView : this.ifFactory.create(); else l = this.view = this.elseView = this.cache && null != this.elseView ? this.elseView : null === (e = this.elseFactory) || void 0 === e ? void 0 : e.create();
            if (null == l) return;
            l.setLocation(this.location);
            return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(l.activate(l, n, i, n.scope), (() => {
                if (o()) this.pending = void 0;
            }));
        })))), (() => this.work.finish()));
    }
    dispose() {
        var t, e;
        null === (t = this.ifView) || void 0 === t ? void 0 : t.dispose();
        null === (e = this.elseView) || void 0 === e ? void 0 : e.dispose();
        this.ifView = this.elseView = this.view = void 0;
    }
    accept(t) {
        var e;
        if (true === (null === (e = this.view) || void 0 === e ? void 0 : e.accept(t))) return true;
    }
}

If.inject = [ Ai, os, es ];

ot([ St ], If.prototype, "value", void 0);

ot([ St({
    set: t => "" === t || !!t && "false" !== t
}) ], If.prototype, "cache", void 0);

Oe("if")(If);

class Else {
    constructor(t) {
        this.factory = t;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
    }
    link(t, e, i, s) {
        const n = t.children;
        const r = n[n.length - 1];
        if (r instanceof If) r.elseFactory = this.factory; else if (r.viewModel instanceof If) r.viewModel.elseFactory = this.factory; else throw new Error("AUR0810");
    }
}

Else.inject = [ Ai ];

Oe({
    name: "else"
})(Else);

function xr(t) {
    t.dispose();
}

const yr = [ 38962, 36913 ];

class Repeat {
    constructor(t, e, i) {
        this.l = t;
        this.ui = e;
        this.f = i;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.views = [];
        this.key = void 0;
        this.fi = void 0;
        this.di = false;
        this.mi = false;
        this.vi = null;
        this.pi = void 0;
        this.gi = false;
    }
    binding(t, e, i) {
        const s = this.ui.bindings;
        const n = s.length;
        let r;
        let o;
        let l = 0;
        for (;n > l; ++l) {
            r = s[l];
            if (r.target === this && "items" === r.targetProperty) {
                o = this.forOf = r.sourceExpression;
                this.wi = r;
                let t = o.iterable;
                while (null != t && yr.includes(t.$kind)) {
                    t = t.expression;
                    this.di = true;
                }
                this.vi = t;
                break;
            }
        }
        this.bi(i);
        const h = o.declaration;
        if (!(this.gi = 90137 === h.$kind || 106521 === h.$kind)) this.local = h.evaluate(i, this.$controller.scope, r.locator, null);
    }
    attaching(t, e, i) {
        this.xi(i);
        return this.yi(t, i);
    }
    detaching(t, e, i) {
        this.bi(i);
        return this.ki(t, i);
    }
    itemsChanged(t) {
        const {$controller: e} = this;
        if (!e.isActive) return;
        t |= e.flags;
        this.bi(t);
        this.xi(t);
        const i = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.ki(null, t), (() => this.yi(null, t)));
        if (i instanceof Promise) i.catch((t => {
            throw t;
        }));
    }
    handleCollectionChange(t, e) {
        const {$controller: i} = this;
        if (!i.isActive) return;
        if (this.di) {
            if (this.mi) return;
            this.mi = true;
            this.items = this.forOf.iterable.evaluate(e, i.scope, this.wi.locator, null);
            this.mi = false;
            return;
        }
        e |= i.flags;
        this.xi(e);
        if (void 0 === t) {
            const t = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.ki(null, e), (() => this.yi(null, e)));
            if (t instanceof Promise) t.catch((t => {
                throw t;
            }));
        } else {
            const i = this.views.length;
            (0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.applyMutationsToIndices)(t);
            if (t.deletedItems.length > 0) {
                t.deletedItems.sort(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.compareNumber);
                const s = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.Ci(t, e), (() => this.Ai(i, t, e)));
                if (s instanceof Promise) s.catch((t => {
                    throw t;
                }));
            } else this.Ai(i, t, e);
        }
    }
    bi(t) {
        var e;
        const i = this.$controller.scope;
        let s = this.Si;
        let n = this.di;
        if (n) {
            s = this.Si = null !== (e = this.vi.evaluate(t, i, this.wi.locator, null)) && void 0 !== e ? e : null;
            n = this.di = !Object.is(this.items, s);
        }
        const r = this.fi;
        if (4 & t) {
            if (void 0 !== r) r.unsubscribe(this);
        } else if (this.$controller.isActive) {
            const t = this.fi = (0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.getCollectionObserver)(n ? s : this.items);
            if (r !== t && r) r.unsubscribe(this);
            if (t) t.subscribe(this);
        }
    }
    xi(t) {
        const e = this.items;
        if (e instanceof Array) {
            this.pi = e;
            return;
        }
        const i = this.forOf;
        if (void 0 === i) return;
        const s = [];
        this.forOf.iterate(t, e, ((t, e, i) => {
            s[e] = i;
        }));
        this.pi = s;
    }
    yi(t, e) {
        let i;
        let s;
        let n;
        let r;
        const {$controller: o, f: l, local: h, l: a, items: c} = this;
        const u = o.scope;
        const f = this.forOf;
        const d = f.count(e, c);
        const m = this.views = Array(d);
        f.iterate(e, c, ((c, v, p) => {
            n = m[v] = l.create().setLocation(a);
            n.nodes.unlink();
            if (this.gi) f.declaration.assign(e, r = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(u, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingContext.create()), this.wi.locator, p); else r = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(u, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingContext.create(h, p));
            Rr(r.overrideContext, v, d);
            s = n.activate(null !== t && void 0 !== t ? t : n, o, e, r);
            if (s instanceof Promise) (null !== i && void 0 !== i ? i : i = []).push(s);
        }));
        if (void 0 !== i) return 1 === i.length ? i[0] : Promise.all(i);
    }
    ki(t, e) {
        let i;
        let s;
        let n;
        let r = 0;
        const {views: o, $controller: l} = this;
        const h = o.length;
        for (;h > r; ++r) {
            n = o[r];
            n.release();
            s = n.deactivate(null !== t && void 0 !== t ? t : n, l, e);
            if (s instanceof Promise) (null !== i && void 0 !== i ? i : i = []).push(s);
        }
        if (void 0 !== i) return 1 === i.length ? i[0] : Promise.all(i);
    }
    Ci(t, e) {
        let i;
        let s;
        let n;
        const {$controller: r, views: o} = this;
        const l = t.deletedItems;
        const h = l.length;
        let a = 0;
        for (;h > a; ++a) {
            n = o[l[a]];
            n.release();
            s = n.deactivate(n, r, e);
            if (s instanceof Promise) (null !== i && void 0 !== i ? i : i = []).push(s);
        }
        a = 0;
        let c = 0;
        for (;h > a; ++a) {
            c = l[a] - a;
            o.splice(c, 1);
        }
        if (void 0 !== i) return 1 === i.length ? i[0] : Promise.all(i);
    }
    Ai(t, e, i) {
        var s;
        let n;
        let r;
        let o;
        let l;
        let h = 0;
        const {$controller: a, f: c, local: u, pi: f, l: d, views: m} = this;
        const v = e.length;
        for (;v > h; ++h) if (-2 === e[h]) {
            o = c.create();
            m.splice(h, 0, o);
        }
        if (m.length !== v) throw new Error(`AUR0814:${m.length}!=${v}`);
        const p = a.scope;
        const g = e.length;
        (0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.synchronizeIndices)(m, e);
        const w = Sr(e);
        const b = w.length;
        let x;
        let y = b - 1;
        h = g - 1;
        for (;h >= 0; --h) {
            o = m[h];
            x = m[h + 1];
            o.nodes.link(null !== (s = null === x || void 0 === x ? void 0 : x.nodes) && void 0 !== s ? s : d);
            if (-2 === e[h]) {
                if (this.gi) this.forOf.declaration.assign(i, l = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(p, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingContext.create()), this.wi.locator, f[h]); else l = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(p, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingContext.create(u, f[h]));
                Rr(l.overrideContext, h, g);
                o.setLocation(d);
                r = o.activate(o, a, i, l);
                if (r instanceof Promise) (null !== n && void 0 !== n ? n : n = []).push(r);
            } else if (y < 0 || 1 === b || h !== w[y]) {
                Rr(o.scope.overrideContext, h, g);
                o.nodes.insertBefore(o.location);
            } else {
                if (t !== g) Rr(o.scope.overrideContext, h, g);
                --y;
            }
        }
        if (void 0 !== n) return 1 === n.length ? n[0] : Promise.all(n);
    }
    dispose() {
        this.views.forEach(xr);
        this.views = void 0;
    }
    accept(t) {
        const {views: e} = this;
        if (void 0 !== e) for (let i = 0, s = e.length; i < s; ++i) if (true === e[i].accept(t)) return true;
    }
}

Repeat.inject = [ os, Xi, Ai ];

ot([ St ], Repeat.prototype, "items", void 0);

Oe("repeat")(Repeat);

let kr = 16;

let Cr = new Int32Array(kr);

let Ar = new Int32Array(kr);

function Sr(t) {
    const e = t.length;
    if (e > kr) {
        kr = e;
        Cr = new Int32Array(e);
        Ar = new Int32Array(e);
    }
    let i = 0;
    let s = 0;
    let n = 0;
    let r = 0;
    let o = 0;
    let l = 0;
    let h = 0;
    let a = 0;
    for (;r < e; r++) {
        s = t[r];
        if (-2 !== s) {
            o = Cr[i];
            n = t[o];
            if (-2 !== n && n < s) {
                Ar[r] = o;
                Cr[++i] = r;
                continue;
            }
            l = 0;
            h = i;
            while (l < h) {
                a = l + h >> 1;
                n = t[Cr[a]];
                if (-2 !== n && n < s) l = a + 1; else h = a;
            }
            n = t[Cr[l]];
            if (s < n || -2 === n) {
                if (l > 0) Ar[r] = Cr[l - 1];
                Cr[l] = r;
            }
        }
    }
    r = ++i;
    const c = new Int32Array(r);
    s = Cr[i - 1];
    while (i-- > 0) {
        c[i] = s;
        s = Ar[s];
    }
    while (r-- > 0) Cr[r] = 0;
    return c;
}

function Rr(t, e, i) {
    const s = 0 === e;
    const n = e === i - 1;
    const r = e % 2 === 0;
    t.$index = e;
    t.$first = s;
    t.$last = n;
    t.$middle = !s && !n;
    t.$even = r;
    t.$odd = !r;
    t.$length = i;
}

class With {
    constructor(t, e) {
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.view = t.create().setLocation(e);
    }
    valueChanged(t, e, i) {
        const s = this.$controller;
        const n = this.view.bindings;
        let r;
        let o = 0, l = 0;
        if (s.isActive && null != n) {
            r = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(s.scope, void 0 === t ? {} : t);
            for (l = n.length; l > o; ++o) n[o].$bind(2, r);
        }
    }
    attaching(t, e, i) {
        const {$controller: s, value: n} = this;
        const r = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(s.scope, void 0 === n ? {} : n);
        return this.view.activate(t, s, i, r);
    }
    detaching(t, e, i) {
        return this.view.deactivate(t, this.$controller, i);
    }
    dispose() {
        this.view.dispose();
        this.view = void 0;
    }
    accept(t) {
        var e;
        if (true === (null === (e = this.view) || void 0 === e ? void 0 : e.accept(t))) return true;
    }
}

With.inject = [ Ai, os ];

ot([ St ], With.prototype, "value", void 0);

Oe("with")(With);

let Er = class Switch {
    constructor(t, e) {
        this.f = t;
        this.l = e;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.cases = [];
        this.activeCases = [];
        this.promise = void 0;
    }
    link(t, e, i, s) {
        this.view = this.f.create(this.$controller).setLocation(this.l);
    }
    attaching(t, e, i) {
        const s = this.view;
        const n = this.$controller;
        this.queue((() => s.activate(t, n, i, n.scope)));
        this.queue((() => this.swap(t, i, this.value)));
        return this.promise;
    }
    detaching(t, e, i) {
        this.queue((() => {
            const e = this.view;
            return e.deactivate(t, this.$controller, i);
        }));
        return this.promise;
    }
    dispose() {
        var t;
        null === (t = this.view) || void 0 === t ? void 0 : t.dispose();
        this.view = void 0;
    }
    valueChanged(t, e, i) {
        if (!this.$controller.isActive) return;
        this.queue((() => this.swap(null, i, this.value)));
    }
    caseChanged(t, e) {
        this.queue((() => this.Ri(t, e)));
    }
    Ri(t, e) {
        const i = t.isMatch(this.value, e);
        const s = this.activeCases;
        const n = s.length;
        if (!i) {
            if (n > 0 && s[0].id === t.id) return this.Ei(null, e);
            return;
        }
        if (n > 0 && s[0].id < t.id) return;
        const r = [];
        let o = t.fallThrough;
        if (!o) r.push(t); else {
            const e = this.cases;
            const i = e.indexOf(t);
            for (let t = i, s = e.length; t < s && o; t++) {
                const i = e[t];
                r.push(i);
                o = i.fallThrough;
            }
        }
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.Ei(null, e, r), (() => {
            this.activeCases = r;
            return this.Bi(null, e);
        }));
    }
    swap(t, e, i) {
        const s = [];
        let n = false;
        for (const t of this.cases) {
            if (n || t.isMatch(i, e)) {
                s.push(t);
                n = t.fallThrough;
            }
            if (s.length > 0 && !n) break;
        }
        const r = this.defaultCase;
        if (0 === s.length && void 0 !== r) s.push(r);
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.activeCases.length > 0 ? this.Ei(t, e, s) : void 0, (() => {
            this.activeCases = s;
            if (0 === s.length) return;
            return this.Bi(t, e);
        }));
    }
    Bi(t, e) {
        const i = this.$controller;
        if (!i.isActive) return;
        const s = this.activeCases;
        const n = s.length;
        if (0 === n) return;
        const r = i.scope;
        if (1 === n) return s[0].activate(t, e, r);
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(...s.map((i => i.activate(t, e, r))));
    }
    Ei(t, e, i = []) {
        const s = this.activeCases;
        const n = s.length;
        if (0 === n) return;
        if (1 === n) {
            const n = s[0];
            if (!i.includes(n)) {
                s.length = 0;
                return n.deactivate(t, e);
            }
            return;
        }
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(...s.reduce(((s, n) => {
            if (!i.includes(n)) s.push(n.deactivate(t, e));
            return s;
        }), [])), (() => {
            s.length = 0;
        }));
    }
    queue(t) {
        const e = this.promise;
        let i;
        i = this.promise = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(e, t), (() => {
            if (this.promise === i) this.promise = void 0;
        }));
    }
    accept(t) {
        if (true === this.$controller.accept(t)) return true;
        if (this.activeCases.some((e => e.accept(t)))) return true;
    }
};

ot([ St ], Er.prototype, "value", void 0);

Er = ot([ Oe("switch"), lt(0, Ai), lt(1, os) ], Er);

let Br = class Case {
    constructor(t, e, i, s) {
        this.Ii = e;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.fallThrough = false;
        this.Ti = s.config.level <= 1;
        this.Ft = s.scopeTo(`${this.constructor.name}-#${this.id}`);
        this.view = t.create().setLocation(i);
    }
    link(t, e, i, s) {
        const n = t.parent;
        const r = null === n || void 0 === n ? void 0 : n.viewModel;
        if (r instanceof Er) {
            this.$switch = r;
            this.linkToSwitch(r);
        } else throw new Error("AUR0815");
    }
    detaching(t, e, i) {
        return this.deactivate(t, i);
    }
    isMatch(t, e) {
        this.Ft.debug("isMatch()");
        const i = this.value;
        if (Array.isArray(i)) {
            if (void 0 === this.fi) this.fi = this.Di(e, i);
            return i.includes(t);
        }
        return i === t;
    }
    valueChanged(t, e, i) {
        var s;
        if (Array.isArray(t)) {
            null === (s = this.fi) || void 0 === s ? void 0 : s.unsubscribe(this);
            this.fi = this.Di(i, t);
        } else if (void 0 !== this.fi) this.fi.unsubscribe(this);
        this.$switch.caseChanged(this, i);
    }
    handleCollectionChange(t, e) {
        this.$switch.caseChanged(this, e);
    }
    activate(t, e, i) {
        const s = this.view;
        if (s.isActive) return;
        return s.activate(null !== t && void 0 !== t ? t : s, this.$controller, e, i);
    }
    deactivate(t, e) {
        const i = this.view;
        if (!i.isActive) return;
        return i.deactivate(null !== t && void 0 !== t ? t : i, this.$controller, e);
    }
    dispose() {
        var t, e;
        null === (t = this.fi) || void 0 === t ? void 0 : t.unsubscribe(this);
        null === (e = this.view) || void 0 === e ? void 0 : e.dispose();
        this.view = void 0;
    }
    linkToSwitch(t) {
        t.cases.push(this);
    }
    Di(t, e) {
        const i = this.Ii.getArrayObserver(e);
        i.subscribe(this);
        return i;
    }
    accept(t) {
        var e;
        if (true === this.$controller.accept(t)) return true;
        return null === (e = this.view) || void 0 === e ? void 0 : e.accept(t);
    }
};

Br.inject = [ Ai, _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.IObserverLocator, os, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.ILogger ];

ot([ St ], Br.prototype, "value", void 0);

ot([ St({
    set: t => {
        switch (t) {
          case "true":
            return true;

          case "false":
            return false;

          default:
            return !!t;
        }
    },
    mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.oneTime
}) ], Br.prototype, "fallThrough", void 0);

Br = ot([ Oe("case") ], Br);

let Ir = class DefaultCase extends Br {
    linkToSwitch(t) {
        if (void 0 !== t.defaultCase) throw new Error("AUR0816");
        t.defaultCase = this;
    }
};

Ir = ot([ Oe("default-case") ], Ir);

let Tr = class PromiseTemplateController {
    constructor(t, e, i, s) {
        this.f = t;
        this.l = e;
        this.p = i;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.preSettledTask = null;
        this.postSettledTask = null;
        this.logger = s.scopeTo("promise.resolve");
    }
    link(t, e, i, s) {
        this.view = this.f.create(this.$controller).setLocation(this.l);
    }
    attaching(t, e, i) {
        const s = this.view;
        const n = this.$controller;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(s.activate(t, n, i, this.viewScope = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(n.scope, {})), (() => this.swap(t, i)));
    }
    valueChanged(t, e, i) {
        if (!this.$controller.isActive) return;
        this.swap(null, i);
    }
    swap(t, e) {
        var i, s;
        const n = this.value;
        if (!(n instanceof Promise)) {
            this.logger.warn(`The value '${String(n)}' is not a promise. No change will be done.`);
            return;
        }
        const r = this.p.domWriteQueue;
        const o = this.fulfilled;
        const l = this.rejected;
        const h = this.pending;
        const a = this.viewScope;
        let c;
        const u = {
            reusable: false
        };
        const f = () => {
            void (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(c = (this.preSettledTask = r.queueTask((() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(null === o || void 0 === o ? void 0 : o.deactivate(t, e), null === l || void 0 === l ? void 0 : l.deactivate(t, e), null === h || void 0 === h ? void 0 : h.activate(t, e, a))), u)).result, n.then((i => {
                if (this.value !== n) return;
                const s = () => {
                    this.postSettlePromise = (this.postSettledTask = r.queueTask((() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(null === h || void 0 === h ? void 0 : h.deactivate(t, e), null === l || void 0 === l ? void 0 : l.deactivate(t, e), null === o || void 0 === o ? void 0 : o.activate(t, e, a, i))), u)).result;
                };
                if (1 === this.preSettledTask.status) void c.then(s); else {
                    this.preSettledTask.cancel();
                    s();
                }
            }), (i => {
                if (this.value !== n) return;
                const s = () => {
                    this.postSettlePromise = (this.postSettledTask = r.queueTask((() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(null === h || void 0 === h ? void 0 : h.deactivate(t, e), null === o || void 0 === o ? void 0 : o.deactivate(t, e), null === l || void 0 === l ? void 0 : l.activate(t, e, a, i))), u)).result;
                };
                if (1 === this.preSettledTask.status) void c.then(s); else {
                    this.preSettledTask.cancel();
                    s();
                }
            })));
        };
        if (1 === (null === (i = this.postSettledTask) || void 0 === i ? void 0 : i.status)) void this.postSettlePromise.then(f); else {
            null === (s = this.postSettledTask) || void 0 === s ? void 0 : s.cancel();
            f();
        }
    }
    detaching(t, e, i) {
        var s, n;
        null === (s = this.preSettledTask) || void 0 === s ? void 0 : s.cancel();
        null === (n = this.postSettledTask) || void 0 === n ? void 0 : n.cancel();
        this.preSettledTask = this.postSettledTask = null;
        return this.view.deactivate(t, this.$controller, i);
    }
    dispose() {
        var t;
        null === (t = this.view) || void 0 === t ? void 0 : t.dispose();
        this.view = void 0;
    }
};

ot([ St ], Tr.prototype, "value", void 0);

Tr = ot([ Oe("promise"), lt(0, Ai), lt(1, os), lt(2, Kt), lt(3, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.ILogger) ], Tr);

let Dr = class PendingTemplateController {
    constructor(t, e) {
        this.factory = t;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.view = this.factory.create().setLocation(e);
    }
    link(t, e, i, s) {
        $r(t).pending = this;
    }
    activate(t, e, i) {
        const s = this.view;
        if (s.isActive) return;
        return s.activate(s, this.$controller, e, i);
    }
    deactivate(t, e) {
        const i = this.view;
        if (!i.isActive) return;
        return i.deactivate(i, this.$controller, e);
    }
    detaching(t, e, i) {
        return this.deactivate(t, i);
    }
    dispose() {
        var t;
        null === (t = this.view) || void 0 === t ? void 0 : t.dispose();
        this.view = void 0;
    }
};

ot([ St({
    mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.toView
}) ], Dr.prototype, "value", void 0);

Dr = ot([ Oe("pending"), lt(0, Ai), lt(1, os) ], Dr);

let Pr = class FulfilledTemplateController {
    constructor(t, e) {
        this.factory = t;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.view = this.factory.create().setLocation(e);
    }
    link(t, e, i, s) {
        $r(t).fulfilled = this;
    }
    activate(t, e, i, s) {
        this.value = s;
        const n = this.view;
        if (n.isActive) return;
        return n.activate(n, this.$controller, e, i);
    }
    deactivate(t, e) {
        const i = this.view;
        if (!i.isActive) return;
        return i.deactivate(i, this.$controller, e);
    }
    detaching(t, e, i) {
        return this.deactivate(t, i);
    }
    dispose() {
        var t;
        null === (t = this.view) || void 0 === t ? void 0 : t.dispose();
        this.view = void 0;
    }
};

ot([ St({
    mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView
}) ], Pr.prototype, "value", void 0);

Pr = ot([ Oe("then"), lt(0, Ai), lt(1, os) ], Pr);

let Or = class RejectedTemplateController {
    constructor(t, e) {
        this.factory = t;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.view = this.factory.create().setLocation(e);
    }
    link(t, e, i, s) {
        $r(t).rejected = this;
    }
    activate(t, e, i, s) {
        this.value = s;
        const n = this.view;
        if (n.isActive) return;
        return n.activate(n, this.$controller, e, i);
    }
    deactivate(t, e) {
        const i = this.view;
        if (!i.isActive) return;
        return i.deactivate(i, this.$controller, e);
    }
    detaching(t, e, i) {
        return this.deactivate(t, i);
    }
    dispose() {
        var t;
        null === (t = this.view) || void 0 === t ? void 0 : t.dispose();
        this.view = void 0;
    }
};

ot([ St({
    mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView
}) ], Or.prototype, "value", void 0);

Or = ot([ Oe("catch"), lt(0, Ai), lt(1, os) ], Or);

function $r(t) {
    const e = t.parent;
    const i = null === e || void 0 === e ? void 0 : e.viewModel;
    if (i instanceof Tr) return i;
    throw new Error("AUR0813");
}

let Lr = class PromiseAttributePattern {
    "promise.resolve"(t, e, i) {
        return new AttrSyntax(t, e, "promise", "bind");
    }
};

Lr = ot([ Ft({
    pattern: "promise.resolve",
    symbols: ""
}) ], Lr);

let qr = class FulfilledAttributePattern {
    then(t, e, i) {
        return new AttrSyntax(t, e, "then", "from-view");
    }
};

qr = ot([ Ft({
    pattern: "then",
    symbols: ""
}) ], qr);

let Mr = class RejectedAttributePattern {
    catch(t, e, i) {
        return new AttrSyntax(t, e, "catch", "from-view");
    }
};

Mr = ot([ Ft({
    pattern: "catch",
    symbols: ""
}) ], Mr);

function Ur(t, e, i, s) {
    if (At(e)) return Fr(t, e, i, s);
    if (si.isType(e)) return Vr(t, e, i, s);
    throw new Error(`Invalid Tag or Type.`);
}

class RenderPlan {
    constructor(t, e, i) {
        this.node = t;
        this.instructions = e;
        this.Pi = i;
        this.Oi = void 0;
    }
    get definition() {
        if (void 0 === this.Oi) this.Oi = CustomElementDefinition.create({
            name: si.generateName(),
            template: this.node,
            needsCompile: At(this.node),
            instructions: this.instructions,
            dependencies: this.Pi
        });
        return this.Oi;
    }
    createView(t) {
        return this.getViewFactory(t).create();
    }
    getViewFactory(t) {
        return t.root.get(Pi).getViewFactory(this.definition, t.createChild().register(...this.Pi));
    }
    mergeInto(t, e, i) {
        t.appendChild(this.node);
        e.push(...this.instructions);
        i.push(...this.Pi);
    }
}

function Fr(t, e, i, s) {
    const n = [];
    const r = [];
    const o = [];
    const l = t.document.createElement(e);
    let h = false;
    if (i) Object.keys(i).forEach((t => {
        const e = i[t];
        if (Cs(e)) {
            h = true;
            n.push(e);
        } else l.setAttribute(t, e);
    }));
    if (h) {
        l.className = "au";
        r.push(n);
    }
    if (s) _r(t, l, s, r, o);
    return new RenderPlan(l, r, o);
}

function Vr(t, e, i, s) {
    const n = si.getDefinition(e);
    const r = [];
    const o = [ r ];
    const l = [];
    const h = [];
    const a = n.bindables;
    const c = t.document.createElement(n.name);
    c.className = "au";
    if (!l.includes(e)) l.push(e);
    r.push(new HydrateElementInstruction(n, void 0, h, null, false, void 0));
    if (i) Object.keys(i).forEach((t => {
        const e = i[t];
        if (Cs(e)) h.push(e); else if (void 0 === a[t]) h.push(new SetAttributeInstruction(e, t)); else h.push(new SetPropertyInstruction(e, t));
    }));
    if (s) _r(t, c, s, o, l);
    return new RenderPlan(c, o, l);
}

function _r(t, e, i, s, n) {
    for (let r = 0, o = i.length; r < o; ++r) {
        const o = i[r];
        switch (typeof o) {
          case "string":
            e.appendChild(t.document.createTextNode(o));
            break;

          case "object":
            if (o instanceof t.Node) e.appendChild(o); else if ("mergeInto" in o) o.mergeInto(e, s, n);
        }
    }
}

function jr(t, e) {
    const i = e.to;
    if (void 0 !== i && "subject" !== i && "composing" !== i) t[i] = e;
    return t;
}

class AuRender {
    constructor(t, e, i, s) {
        this.p = t;
        this.$i = e;
        this.Li = i;
        this.r = s;
        this.id = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.nextId)("au$component");
        this.component = void 0;
        this.composing = false;
        this.view = void 0;
        this.qi = void 0;
        this.Mi = e.props.reduce(jr, {});
    }
    attaching(t, e, i) {
        const {component: s, view: n} = this;
        if (void 0 === n || this.qi !== s) {
            this.qi = s;
            this.composing = true;
            return this.compose(void 0, s, t, i);
        }
        return this.compose(n, s, t, i);
    }
    detaching(t, e, i) {
        return this.oi(this.view, t, i);
    }
    componentChanged(t, e, i) {
        const {$controller: s} = this;
        if (!s.isActive) return;
        if (this.qi === t) return;
        this.qi = t;
        this.composing = true;
        i |= s.flags;
        const n = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.oi(this.view, null, i), (() => this.compose(void 0, t, null, i)));
        if (n instanceof Promise) n.catch((t => {
            throw t;
        }));
    }
    compose(t, e, i, s) {
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(void 0 === t ? (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(e, (t => this.Ui(t, s))) : t, (t => this.ni(this.view = t, i, s)));
    }
    oi(t, e, i) {
        return null === t || void 0 === t ? void 0 : t.deactivate(null !== e && void 0 !== e ? e : t, this.$controller, i);
    }
    ni(t, e, i) {
        const {$controller: s} = this;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === t || void 0 === t ? void 0 : t.activate(null !== e && void 0 !== e ? e : t, s, i, s.scope), (() => {
            this.composing = false;
        }));
    }
    Ui(t, e) {
        const i = this.Fi(t, e);
        if (i) {
            i.setLocation(this.$controller.location);
            i.lockScope(this.$controller.scope);
            return i;
        }
        return;
    }
    Fi(t, e) {
        if (!t) return;
        const i = this.Li.controller.container;
        if ("object" === typeof t) {
            if (Nr(t)) return t;
            if ("createView" in t) return t.createView(i);
            if ("create" in t) return t.create();
            if ("template" in t) return this.r.getViewFactory(CustomElementDefinition.getOrCreate(t), i).create();
        }
        if (At(t)) {
            const e = i.find(si, t);
            if (null == e) throw new Error(`AUR0809:${t}`);
            t = e.Type;
        }
        return Ur(this.p, t, this.Mi, this.$controller.host.childNodes).createView(i);
    }
    dispose() {
        var t;
        null === (t = this.view) || void 0 === t ? void 0 : t.dispose();
        this.view = void 0;
    }
    accept(t) {
        var e;
        if (true === (null === (e = this.view) || void 0 === e ? void 0 : e.accept(t))) return true;
    }
}

AuRender.inject = [ Kt, ks, Ki, Pi ];

ot([ St ], AuRender.prototype, "component", void 0);

ot([ St({
    mode: _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.BindingMode.fromView
}) ], AuRender.prototype, "composing", void 0);

je({
    name: "au-render",
    template: null,
    containerless: true,
    capture: true
})(AuRender);

function Nr(t) {
    return "lockScope" in t;
}

class AuCompose {
    constructor(t, e, i, s, n, r) {
        this.c = t;
        this.parent = e;
        this.host = i;
        this.p = s;
        this.scopeBehavior = "auto";
        this.Vi = void 0;
        this.l = n.containerless ? us(this.host) : void 0;
        this.r = t.get(Pi);
        this.$i = n;
        this._i = r;
    }
    static get inject() {
        return [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IContainer, Xi, ns, Kt, ks, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.transient)(CompositionContextFactory) ];
    }
    get pending() {
        return this.ji;
    }
    get composition() {
        return this.Vi;
    }
    attaching(t, e, i) {
        return this.ji = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.queue(new ChangeInfo(this.view, this.viewModel, this.model, void 0), t), (t => {
            if (this._i.isCurrent(t)) this.ji = void 0;
        }));
    }
    detaching(t) {
        const e = this.Vi;
        const i = this.ji;
        this._i.invalidate();
        this.Vi = this.ji = void 0;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(i, (() => null === e || void 0 === e ? void 0 : e.deactivate(t)));
    }
    propertyChanged(t) {
        if ("model" === t && null != this.Vi) {
            this.Vi.update(this.model);
            return;
        }
        this.ji = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.ji, (() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.queue(new ChangeInfo(this.view, this.viewModel, this.model, t), void 0), (t => {
            if (this._i.isCurrent(t)) this.ji = void 0;
        }))));
    }
    queue(t, e) {
        const i = this._i;
        const s = this.Vi;
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(i.create(t), (t => {
            if (i.isCurrent(t)) return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.compose(t), (n => {
                if (i.isCurrent(t)) return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(n.activate(e), (() => {
                    if (i.isCurrent(t)) {
                        this.Vi = n;
                        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === s || void 0 === s ? void 0 : s.deactivate(e), (() => t));
                    } else return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(n.controller.deactivate(n.controller, this.$controller, 4), (() => {
                        n.controller.dispose();
                        return t;
                    }));
                }));
                n.controller.dispose();
                return t;
            }));
            return t;
        }));
    }
    compose(t) {
        let e;
        let i;
        let s;
        const {view: n, viewModel: r, model: o} = t.change;
        const {c: l, host: h, $controller: a, l: c} = this;
        const u = this.getDef(r);
        const f = l.createChild();
        const d = null == c ? h.parentNode : c.parentNode;
        if (null !== u) {
            if (u.containerless) throw new Error("AUR0806");
            if (null == c) {
                i = h;
                s = () => {};
            } else {
                i = d.insertBefore(this.p.document.createElement(u.name), c);
                s = () => {
                    i.remove();
                };
            }
            e = this.getVm(f, r, i);
        } else {
            i = null == c ? h : c;
            e = this.getVm(f, r, i);
        }
        const m = () => {
            if (null !== u) {
                const n = Controller.$el(f, e, i, {
                    projections: this.$i.projections
                }, u);
                return new CompositionController(n, (t => n.activate(null !== t && void 0 !== t ? t : n, a, 2, a.scope.parentScope)), (t => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(n.deactivate(null !== t && void 0 !== t ? t : n, a, 4), s)), (t => {
                    var i;
                    return null === (i = e.activate) || void 0 === i ? void 0 : i.call(e, t);
                }), t);
            } else {
                const s = CustomElementDefinition.create({
                    name: si.generateName(),
                    template: n
                });
                const r = this.r.getViewFactory(s, f);
                const o = Controller.$view(r, a);
                const l = "auto" === this.scopeBehavior ? _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(this.parent.scope, e) : _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.create(e);
                if (fs(i)) o.setLocation(i); else o.setHost(i);
                return new CompositionController(o, (t => o.activate(null !== t && void 0 !== t ? t : o, a, 2, l)), (t => o.deactivate(null !== t && void 0 !== t ? t : o, a, 4)), (t => {
                    var i;
                    return null === (i = e.activate) || void 0 === i ? void 0 : i.call(e, t);
                }), t);
            }
        };
        if ("activate" in e) return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(e.activate(o), (() => m())); else return m();
    }
    getVm(t, e, i) {
        if (null == e) return new EmptyComponent$1;
        if ("object" === typeof e) return e;
        const s = this.p;
        const n = fs(i);
        t.registerResolver(s.Element, t.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementResolver", n ? null : i)));
        t.registerResolver(os, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("IRenderLocation", n ? i : null));
        const r = t.invoke(e);
        t.registerResolver(e, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("au-compose.viewModel", r));
        return r;
    }
    getDef(t) {
        const e = Ct(t) ? t : null === t || void 0 === t ? void 0 : t.constructor;
        return si.isType(e) ? si.getDefinition(e) : null;
    }
}

ot([ St ], AuCompose.prototype, "view", void 0);

ot([ St ], AuCompose.prototype, "viewModel", void 0);

ot([ St ], AuCompose.prototype, "model", void 0);

ot([ St({
    set: t => {
        if ("scoped" === t || "auto" === t) return t;
        throw new Error("AUR0805");
    }
}) ], AuCompose.prototype, "scopeBehavior", void 0);

je("au-compose")(AuCompose);

class EmptyComponent$1 {}

class CompositionContextFactory {
    constructor() {
        this.id = 0;
    }
    isCurrent(t) {
        return t.id === this.id;
    }
    create(t) {
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(t.load(), (t => new CompositionContext(++this.id, t)));
    }
    invalidate() {
        this.id++;
    }
}

class ChangeInfo {
    constructor(t, e, i, s) {
        this.view = t;
        this.viewModel = e;
        this.model = i;
        this.src = s;
    }
    load() {
        if (kt(this.view) || kt(this.viewModel)) return Promise.all([ this.view, this.viewModel ]).then((([t, e]) => new LoadedChangeInfo(t, e, this.model, this.src))); else return new LoadedChangeInfo(this.view, this.viewModel, this.model, this.src);
    }
}

class LoadedChangeInfo {
    constructor(t, e, i, s) {
        this.view = t;
        this.viewModel = e;
        this.model = i;
        this.src = s;
    }
}

class CompositionContext {
    constructor(t, e) {
        this.id = t;
        this.change = e;
    }
}

class CompositionController {
    constructor(t, e, i, s, n) {
        this.controller = t;
        this.start = e;
        this.stop = i;
        this.update = s;
        this.context = n;
        this.state = 0;
    }
    activate(t) {
        if (0 !== this.state) throw new Error(`AUR0807:${this.controller.name}`);
        this.state = 1;
        return this.start(t);
    }
    deactivate(t) {
        switch (this.state) {
          case 1:
            this.state = -1;
            return this.stop(t);

          case -1:
            throw new Error("AUR0808");

          default:
            this.state = -1;
        }
    }
}

class AuSlot {
    constructor(t, e, i, s) {
        var n, r;
        this.Ni = null;
        this.Wi = null;
        let o;
        const l = e.auSlot;
        const h = null === (r = null === (n = i.instruction) || void 0 === n ? void 0 : n.projections) || void 0 === r ? void 0 : r[l.name];
        if (null == h) {
            o = s.getViewFactory(l.fallback, i.controller.container);
            this.Hi = false;
        } else {
            o = s.getViewFactory(h, i.parent.controller.container);
            this.Hi = true;
        }
        this.Li = i;
        this.view = o.create().setLocation(t);
    }
    static get inject() {
        return [ os, ks, Ki, Pi ];
    }
    binding(t, e, i) {
        var s;
        this.Ni = this.$controller.scope.parentScope;
        let n;
        if (this.Hi) {
            n = this.Li.controller.scope.parentScope;
            (this.Wi = _aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.Scope.fromParent(n, n.bindingContext)).overrideContext.$host = null !== (s = this.expose) && void 0 !== s ? s : this.Ni.bindingContext;
        }
    }
    attaching(t, e, i) {
        return this.view.activate(t, this.$controller, i, this.Hi ? this.Wi : this.Ni);
    }
    detaching(t, e, i) {
        return this.view.deactivate(t, this.$controller, i);
    }
    exposeChanged(t) {
        if (this.Hi && null != this.Wi) this.Wi.overrideContext.$host = t;
    }
    dispose() {
        this.view.dispose();
        this.view = void 0;
    }
    accept(t) {
        var e;
        if (true === (null === (e = this.view) || void 0 === e ? void 0 : e.accept(t))) return true;
    }
}

ot([ St ], AuSlot.prototype, "expose", void 0);

je({
    name: "au-slot",
    template: null,
    containerless: true
})(AuSlot);

const Wr = /<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi;

const Hr = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("ISanitizer", (t => t.singleton(class {
    sanitize(t) {
        return t.replace(Wr, "");
    }
})));

let zr = class SanitizeValueConverter {
    constructor(t) {
        this.zi = t;
    }
    toView(t) {
        if (null == t) return null;
        return this.zi.sanitize(t);
    }
};

zr = ot([ lt(0, Hr) ], zr);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.valueConverter)("sanitize")(zr);

let Gr = class ViewValueConverter {
    constructor(t) {
        this.Gi = t;
    }
    toView(t, e) {
        return this.Gi.getViewComponentForObject(t, e);
    }
};

Gr = ot([ lt(0, Di) ], Gr);

(0,_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.valueConverter)("view")(Gr);

const Xr = DebounceBindingBehavior;

const Kr = OneTimeBindingBehavior;

const Yr = ToViewBindingBehavior;

const Qr = FromViewBindingBehavior;

const Zr = SignalBindingBehavior;

const Jr = ThrottleBindingBehavior;

const to = TwoWayBindingBehavior;

const eo = TemplateCompiler;

const io = NodeObserverLocator;

const so = [ eo, io ];

const no = SVGAnalyzer;

const ro = Gt;

const oo = zt;

const lo = Ht;

const ho = Wt;

const ao = Xt;

const co = [ lo, ho, ao ];

const uo = [ ro, oo ];

const fo = xn;

const mo = bn;

const vo = yn;

const po = gn;

const go = vn;

const wo = pn;

const bo = wn;

const xo = Bn;

const yo = kn;

const ko = Cn;

const Co = An;

const Ao = Sn;

const So = En;

const Ro = Rn;

const Eo = In;

const Bo = [ mo, go, po, wo, bo, fo, vo, xo, yo, ko, Co, So, Ro, Ao, Eo ];

const Io = zr;

const To = Gr;

const Do = FrequentMutations;

const Po = ObserveShallow;

const Oo = If;

const $o = Else;

const Lo = Repeat;

const qo = With;

const Mo = Er;

const Uo = Br;

const Fo = Ir;

const Vo = Tr;

const _o = Dr;

const jo = Pr;

const No = Or;

const Wo = Lr;

const Ho = qr;

const zo = Mr;

const Go = AttrBindingBehavior;

const Xo = SelfBindingBehavior;

const Ko = UpdateTriggerBindingBehavior;

const Yo = AuRender;

const Qo = AuCompose;

const Zo = Portal;

const Jo = Focus;

const tl = br;

const el = [ Xr, Kr, Yr, Qr, Zr, Jr, to, Io, To, Do, Po, Oo, $o, Lo, qo, Mo, Uo, Fo, Vo, _o, jo, No, Wo, Ho, zo, Go, Xo, Ko, Yo, Qo, Zo, Jo, tl, AuSlot ];

const il = Ls;

const sl = Ps;

const nl = Ds;

const rl = Ms;

const ol = Fs;

const ll = $s;

const hl = Us;

const al = qs;

const cl = Ts;

const ul = Os;

const fl = Ws;

const dl = Ks;

const ml = Hs;

const vl = zs;

const pl = Gs;

const gl = Xs;

const wl = Ns;

const bl = Ys;

const xl = [ hl, ol, il, al, rl, cl, nl, sl, ul, ll, fl, dl, ml, vl, pl, gl, wl, bl ];

const yl = kl(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop);

function kl(t) {
    return {
        optionsProvider: t,
        register(e) {
            const i = {
                coercingOptions: {
                    enableCoercion: false,
                    coerceNullish: false
                }
            };
            t(i);
            return e.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(_aurelia_runtime__WEBPACK_IMPORTED_MODULE_3__.ICoercionConfiguration, i.coercingOptions), ...so, ...el, ...co, ...Bo, ...xl);
        },
        customize(e) {
            return kl(null !== e && void 0 !== e ? e : t);
        }
    };
}

const Cl = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IAurelia");

class Aurelia {
    constructor(t = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createContainer()) {
        this.container = t;
        this.ir = false;
        this.Xi = false;
        this.Ki = false;
        this.Yi = void 0;
        this.next = void 0;
        this.Qi = void 0;
        this.Zi = void 0;
        if (t.has(Cl, true)) throw new Error("AUR0768");
        t.registerResolver(Cl, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("IAurelia", this));
        t.registerResolver(ts, this.Ji = new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("IAppRoot"));
    }
    get isRunning() {
        return this.ir;
    }
    get isStarting() {
        return this.Xi;
    }
    get isStopping() {
        return this.Ki;
    }
    get root() {
        if (null == this.Yi) {
            if (null == this.next) throw new Error("AUR0767");
            return this.next;
        }
        return this.Yi;
    }
    register(...t) {
        this.container.register(...t);
        return this;
    }
    app(t) {
        this.next = new AppRoot(t, this.ts(t.host), this.container, this.Ji);
        return this;
    }
    enhance(t, e) {
        var i;
        const s = null !== (i = t.container) && void 0 !== i ? i : this.container.createChild();
        const n = t.host;
        const r = this.ts(n);
        const o = t.component;
        let l;
        if (Ct(o)) {
            s.registerResolver(r.HTMLElement, s.registerResolver(r.Element, s.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementResolver", n))));
            l = s.invoke(o);
        } else l = o;
        s.registerResolver(rs, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("IEventTarget", n));
        e = null !== e && void 0 !== e ? e : null;
        const h = Controller.$el(s, l, n, null, CustomElementDefinition.create({
            name: si.generateName(),
            template: n,
            enhance: true
        }));
        return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(h.activate(h, e, 2), (() => h));
    }
    async waitForIdle() {
        const t = this.root.platform;
        await t.domWriteQueue.yield();
        await t.domReadQueue.yield();
        await t.taskQueue.yield();
    }
    ts(e) {
        let i;
        if (!this.container.has(Kt, false)) {
            if (null === e.ownerDocument.defaultView) throw new Error("AUR0769");
            i = new _aurelia_platform_browser__WEBPACK_IMPORTED_MODULE_1__.BrowserPlatform(e.ownerDocument.defaultView);
            this.container.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(Kt, i));
        } else i = this.container.get(Kt);
        return i;
    }
    start(t = this.next) {
        if (null == t) throw new Error("AUR0770");
        if (this.Qi instanceof Promise) return this.Qi;
        return this.Qi = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.stop(), (() => {
            Reflect.set(t.host, "$aurelia", this);
            this.Ji.prepare(this.Yi = t);
            this.Xi = true;
            return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(t.activate(), (() => {
                this.ir = true;
                this.Xi = false;
                this.Qi = void 0;
                this.es(t, "au-started", t.host);
            }));
        }));
    }
    stop(t = false) {
        if (this.Zi instanceof Promise) return this.Zi;
        if (true === this.ir) {
            const e = this.Yi;
            this.ir = false;
            this.Ki = true;
            return this.Zi = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(e.deactivate(), (() => {
                Reflect.deleteProperty(e.host, "$aurelia");
                if (t) e.dispose();
                this.Yi = void 0;
                this.Ji.dispose();
                this.Ki = false;
                this.es(e, "au-stopped", e.host);
            }));
        }
    }
    dispose() {
        if (this.ir || this.Ki) throw new Error("AUR0771");
        this.container.dispose();
    }
    es(t, e, i) {
        const s = new t.platform.window.CustomEvent(e, {
            detail: this,
            bubbles: true,
            cancelable: true
        });
        i.dispatchEvent(s);
    }
}

var Al;

(function(t) {
    t[t["Element"] = 1] = "Element";
    t[t["Attribute"] = 2] = "Attribute";
})(Al || (Al = {}));

const Sl = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IDialogService");

const Rl = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IDialogController");

const El = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IDialogDomRenderer");

const Bl = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IDialogDom");

const Il = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface("IDialogGlobalSettings");

class DialogOpenResult {
    constructor(t, e) {
        this.wasCancelled = t;
        this.dialog = e;
    }
    static create(t, e) {
        return new DialogOpenResult(t, e);
    }
}

class DialogCloseResult {
    constructor(t, e) {
        this.status = t;
        this.value = e;
    }
    static create(t, e) {
        return new DialogCloseResult(t, e);
    }
}

var Tl;

(function(t) {
    t["Ok"] = "ok";
    t["Error"] = "error";
    t["Cancel"] = "cancel";
    t["Abort"] = "abort";
})(Tl || (Tl = {}));

class DialogController {
    constructor(t, e) {
        this.p = t;
        this.ctn = e;
        this.closed = new Promise(((t, e) => {
            this.$t = t;
            this.Bt = e;
        }));
    }
    static get inject() {
        return [ Kt, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IContainer ];
    }
    activate(t) {
        var e;
        const i = this.ctn.createChild();
        const {model: s, template: n, rejectOnCancel: r} = t;
        const o = i.get(El);
        const l = null !== (e = t.host) && void 0 !== e ? e : this.p.document.body;
        const h = this.dom = o.render(l, t);
        const a = i.has(rs, true) ? i.get(rs) : null;
        const u = h.contentHost;
        this.settings = t;
        if (null == a || !a.contains(l)) i.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(rs, l));
        i.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(ns, u), _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(Bl, h));
        return new Promise((e => {
            var n, r;
            const o = Object.assign(this.cmp = this.getOrCreateVm(i, t, u), {
                $dialog: this
            });
            e(null !== (r = null === (n = o.canActivate) || void 0 === n ? void 0 : n.call(o, s)) && void 0 !== r ? r : true);
        })).then((e => {
            var o;
            if (true !== e) {
                h.dispose();
                if (r) throw Dl(null, "Dialog activation rejected");
                return DialogOpenResult.create(true, this);
            }
            const l = this.cmp;
            return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === (o = l.activate) || void 0 === o ? void 0 : o.call(l, s), (() => {
                var e;
                const s = this.controller = Controller.$el(i, l, u, null, CustomElementDefinition.create(null !== (e = this.getDefinition(l)) && void 0 !== e ? e : {
                    name: si.generateName(),
                    template: n
                }));
                return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(s.activate(s, null, 2), (() => {
                    var e;
                    h.overlay.addEventListener(null !== (e = t.mouseEvent) && void 0 !== e ? e : "click", this);
                    return DialogOpenResult.create(false, this);
                }));
            }));
        }), (t => {
            h.dispose();
            throw t;
        }));
    }
    deactivate(t, e) {
        if (this.ss) return this.ss;
        let i = true;
        const {controller: s, dom: n, cmp: r, settings: {mouseEvent: o, rejectOnCancel: l}} = this;
        const h = DialogCloseResult.create(t, e);
        const a = new Promise((a => {
            var c, u;
            a((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null !== (u = null === (c = r.canDeactivate) || void 0 === c ? void 0 : c.call(r, h)) && void 0 !== u ? u : true, (a => {
                var c;
                if (true !== a) {
                    i = false;
                    this.ss = void 0;
                    if (l) throw Dl(null, "Dialog cancellation rejected");
                    return DialogCloseResult.create("abort");
                }
                return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === (c = r.deactivate) || void 0 === c ? void 0 : c.call(r, h), (() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(s.deactivate(s, null, 4), (() => {
                    n.dispose();
                    n.overlay.removeEventListener(null !== o && void 0 !== o ? o : "click", this);
                    if (!l && "error" !== t) this.$t(h); else this.Bt(Dl(e, "Dialog cancelled with a rejection on cancel"));
                    return h;
                }))));
            })));
        })).catch((t => {
            this.ss = void 0;
            throw t;
        }));
        this.ss = i ? a : void 0;
        return a;
    }
    ok(t) {
        return this.deactivate("ok", t);
    }
    cancel(t) {
        return this.deactivate("cancel", t);
    }
    error(t) {
        const e = Pl(t);
        return new Promise((t => {
            var i, s;
            return t((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(null === (s = (i = this.cmp).deactivate) || void 0 === s ? void 0 : s.call(i, DialogCloseResult.create("error", e)), (() => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(this.controller.deactivate(this.controller, null, 4), (() => {
                this.dom.dispose();
                this.Bt(e);
            })))));
        }));
    }
    handleEvent(t) {
        if (this.settings.overlayDismiss && !this.dom.contentHost.contains(t.target)) this.cancel();
    }
    getOrCreateVm(t, e, i) {
        const s = e.component;
        if (null == s) return new EmptyComponent;
        if ("object" === typeof s) return s;
        const n = this.p;
        t.registerResolver(n.HTMLElement, t.registerResolver(n.Element, t.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementResolver", i))));
        return t.invoke(s);
    }
    getDefinition(t) {
        const e = Ct(t) ? t : null === t || void 0 === t ? void 0 : t.constructor;
        return si.isType(e) ? si.getDefinition(e) : null;
    }
}

class EmptyComponent {}

function Dl(t, e) {
    const i = new Error(e);
    i.wasCancelled = true;
    i.value = t;
    return i;
}

function Pl(t) {
    const e = new Error;
    e.wasCancelled = false;
    e.value = t;
    return e;
}

class DialogService {
    constructor(t, e, i) {
        this.ut = t;
        this.p = e;
        this.os = i;
        this.dlgs = [];
    }
    get controllers() {
        return this.dlgs.slice(0);
    }
    get top() {
        const t = this.dlgs;
        return t.length > 0 ? t[t.length - 1] : null;
    }
    static get inject() {
        return [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IContainer, Kt, Il ];
    }
    static register(t) {
        t.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(Sl, this), xe.beforeDeactivate(Sl, (t => (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(t.closeAll(), (t => {
            if (t.length > 0) throw new Error(`AUR0901:${t.length}`);
        })))));
    }
    open(t) {
        return $l(new Promise((e => {
            var i;
            const s = DialogSettings.from(this.os, t);
            const n = null !== (i = s.container) && void 0 !== i ? i : this.ut.createChild();
            e((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(s.load(), (t => {
                const e = n.invoke(DialogController);
                n.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.instance(Rl, e));
                n.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.callback(DialogController, (() => {
                    throw new Error("AUR0902");
                })));
                return (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(e.activate(t), (t => {
                    if (!t.wasCancelled) {
                        if (1 === this.dlgs.push(e)) this.p.window.addEventListener("keydown", this);
                        const t = () => this.remove(e);
                        e.closed.then(t, t);
                    }
                    return t;
                }));
            })));
        })));
    }
    closeAll() {
        return Promise.all(Array.from(this.dlgs).map((t => {
            if (t.settings.rejectOnCancel) return t.cancel().then((() => null));
            return t.cancel().then((e => "cancel" === e.status ? null : t));
        }))).then((t => t.filter((t => !!t))));
    }
    remove(t) {
        const e = this.dlgs;
        const i = e.indexOf(t);
        if (i > -1) this.dlgs.splice(i, 1);
        if (0 === e.length) this.p.window.removeEventListener("keydown", this);
    }
    handleEvent(t) {
        const e = t;
        const i = Ll(e);
        if (null == i) return;
        const s = this.top;
        if (null === s || 0 === s.settings.keyboard.length) return;
        const n = s.settings.keyboard;
        if ("Escape" === i && n.includes(i)) void s.cancel(); else if ("Enter" === i && n.includes(i)) void s.ok();
    }
}

class DialogSettings {
    static from(...t) {
        return Object.assign(new DialogSettings, ...t).cs().ls();
    }
    load() {
        const t = this;
        const e = this.component;
        const i = this.template;
        const s = (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.resolveAll)(null == e ? void 0 : (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(e(), (e => {
            t.component = e;
        })), Ct(i) ? (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.onResolve)(i(), (e => {
            t.template = e;
        })) : void 0);
        return s instanceof Promise ? s.then((() => t)) : t;
    }
    cs() {
        if (null == this.component && null == this.template) throw new Error("AUR0903");
        return this;
    }
    ls() {
        if (null == this.keyboard) this.keyboard = this.lock ? [] : [ "Enter", "Escape" ];
        if ("boolean" !== typeof this.overlayDismiss) this.overlayDismiss = !this.lock;
        return this;
    }
}

function Ol(t, e) {
    return this.then((i => i.dialog.closed.then(t, e)), e);
}

function $l(t) {
    t.whenClosed = Ol;
    return t;
}

function Ll(t) {
    if ("Escape" === (t.code || t.key) || 27 === t.keyCode) return "Escape";
    if ("Enter" === (t.code || t.key) || 13 === t.keyCode) return "Enter";
    return;
}

class DefaultDialogGlobalSettings {
    constructor() {
        this.lock = true;
        this.startingZIndex = 1e3;
        this.rejectOnCancel = false;
    }
    static register(t) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(Il, this).register(t);
    }
}

const ql = "position:absolute;width:100%;height:100%;top:0;left:0;";

class DefaultDialogDomRenderer {
    constructor(t) {
        this.p = t;
        this.wrapperCss = `${ql} display:flex;`;
        this.overlayCss = ql;
        this.hostCss = "position:relative;margin:auto;";
    }
    static register(t) {
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(El, this).register(t);
    }
    render(t) {
        const e = this.p.document;
        const i = (t, i) => {
            const s = e.createElement(t);
            s.style.cssText = i;
            return s;
        };
        const s = t.appendChild(i("au-dialog-container", this.wrapperCss));
        const n = s.appendChild(i("au-dialog-overlay", this.overlayCss));
        const r = s.appendChild(i("div", this.hostCss));
        return new DefaultDialogDom(s, n, r);
    }
}

DefaultDialogDomRenderer.inject = [ Kt ];

class DefaultDialogDom {
    constructor(t, e, i) {
        this.wrapper = t;
        this.overlay = e;
        this.contentHost = i;
    }
    dispose() {
        this.wrapper.remove();
    }
}

function Ml(t, e) {
    return {
        settingsProvider: t,
        register: i => i.register(...e, xe.beforeCreate((() => t(i.get(Il))))),
        customize(t, i) {
            return Ml(t, null !== i && void 0 !== i ? i : e);
        }
    };
}

const Ul = Ml((() => {
    throw new Error("AUR0904");
}), [ class NoopDialogGlobalSettings {
    static register(t) {
        t.register(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.Registration.singleton(Il, this));
    }
} ]);

const Fl = Ml(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.noop, [ DialogService, DefaultDialogGlobalSettings, DefaultDialogDomRenderer ]);

const Vl = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.DI.createInterface((t => t.singleton(WcCustomElementRegistry)));

class WcCustomElementRegistry {
    constructor(t, e, i) {
        this.ctn = t;
        this.p = e;
        this.r = i;
    }
    define(t, e, i) {
        if (!t.includes("-")) throw new Error('Invalid web-components custom element name. It must include a "-"');
        let s;
        if (null == e) throw new Error("Invalid custom element definition");
        switch (typeof e) {
          case "function":
            s = si.isType(e) ? si.getDefinition(e) : CustomElementDefinition.create(si.generateName(), e);
            break;

          default:
            s = CustomElementDefinition.getOrCreate(e);
            break;
        }
        if (s.containerless) throw new Error("Containerless custom element is not supported. Consider using buitl-in extends instead");
        const n = !(null === i || void 0 === i ? void 0 : i.extends) ? HTMLElement : this.p.document.createElement(i.extends).constructor;
        const r = this.ctn;
        const o = this.r;
        const l = s.bindables;
        const h = this.p;
        class CustomElementClass extends n {
            auInit() {
                if (this.auInited) return;
                this.auInited = true;
                const t = r.createChild();
                t.registerResolver(h.HTMLElement, t.registerResolver(h.Element, t.registerResolver(ns, new _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.InstanceProvider("ElementProvider", this))));
                const e = o.compile(s, t, {
                    projections: null
                });
                const i = t.invoke(e.Type);
                const n = this.auCtrl = Controller.$el(t, i, this, null, e);
                ss(this, e.key, n);
            }
            connectedCallback() {
                this.auInit();
                this.auCtrl.activate(this.auCtrl, null, 0);
            }
            disconnectedCallback() {
                this.auCtrl.deactivate(this.auCtrl, null, 0);
            }
            adoptedCallback() {
                this.auInit();
            }
            attributeChangedCallback(t, e, i) {
                this.auInit();
                this.auCtrl.viewModel[t] = i;
            }
        }
        CustomElementClass.observedAttributes = Object.keys(l);
        for (const t in l) Object.defineProperty(CustomElementClass.prototype, t, {
            configurable: true,
            enumerable: false,
            get() {
                return this["auCtrl"].viewModel[t];
            },
            set(e) {
                if (!this["auInited"]) this["auInit"]();
                this["auCtrl"].viewModel[t] = e;
            }
        });
        this.p.customElements.define(t, CustomElementClass, i);
        return CustomElementClass;
    }
}

WcCustomElementRegistry.inject = [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_2__.IContainer, Kt, Pi ];


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./node_modules/@aurelia/runtime/dist/esm/index.js":
/*!*********************************************************!*\
  !*** ./node_modules/@aurelia/runtime/dist/esm/index.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IPlatform": () => /* reexport safe */ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.IPlatform,
/* harmony export */   "Platform": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.Platform,
/* harmony export */   "Task": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.Task,
/* harmony export */   "TaskAbortError": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskAbortError,
/* harmony export */   "TaskQueue": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskQueue,
/* harmony export */   "TaskQueuePriority": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskQueuePriority,
/* harmony export */   "TaskStatus": () => /* reexport safe */ _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__.TaskStatus,
/* harmony export */   "Access": () => /* binding */ Ue,
/* harmony export */   "AccessKeyedExpression": () => /* binding */ AccessKeyedExpression,
/* harmony export */   "AccessMemberExpression": () => /* binding */ AccessMemberExpression,
/* harmony export */   "AccessScopeExpression": () => /* binding */ AccessScopeExpression,
/* harmony export */   "AccessThisExpression": () => /* binding */ AccessThisExpression,
/* harmony export */   "AccessorType": () => /* binding */ X,
/* harmony export */   "ArrayBindingPattern": () => /* binding */ ArrayBindingPattern,
/* harmony export */   "ArrayIndexObserver": () => /* binding */ ArrayIndexObserver,
/* harmony export */   "ArrayLiteralExpression": () => /* binding */ ArrayLiteralExpression,
/* harmony export */   "ArrayObserver": () => /* binding */ ArrayObserver,
/* harmony export */   "AssignExpression": () => /* binding */ AssignExpression,
/* harmony export */   "BinaryExpression": () => /* binding */ BinaryExpression,
/* harmony export */   "BindingBehavior": () => /* binding */ T,
/* harmony export */   "BindingBehaviorDefinition": () => /* binding */ BindingBehaviorDefinition,
/* harmony export */   "BindingBehaviorExpression": () => /* binding */ BindingBehaviorExpression,
/* harmony export */   "BindingBehaviorFactory": () => /* binding */ BindingBehaviorFactory,
/* harmony export */   "BindingBehaviorStrategy": () => /* binding */ $,
/* harmony export */   "BindingContext": () => /* binding */ BindingContext,
/* harmony export */   "BindingIdentifier": () => /* binding */ BindingIdentifier,
/* harmony export */   "BindingInterceptor": () => /* binding */ BindingInterceptor,
/* harmony export */   "BindingMediator": () => /* binding */ BindingMediator,
/* harmony export */   "BindingMode": () => /* binding */ z,
/* harmony export */   "BindingObserverRecord": () => /* binding */ BindingObserverRecord,
/* harmony export */   "CallFunctionExpression": () => /* binding */ CallFunctionExpression,
/* harmony export */   "CallMemberExpression": () => /* binding */ CallMemberExpression,
/* harmony export */   "CallScopeExpression": () => /* binding */ CallScopeExpression,
/* harmony export */   "Char": () => /* binding */ ye,
/* harmony export */   "CollectionKind": () => /* binding */ J,
/* harmony export */   "CollectionLengthObserver": () => /* binding */ CollectionLengthObserver,
/* harmony export */   "CollectionSizeObserver": () => /* binding */ CollectionSizeObserver,
/* harmony export */   "ComputedObserver": () => /* binding */ ComputedObserver,
/* harmony export */   "ConditionalExpression": () => /* binding */ ConditionalExpression,
/* harmony export */   "ConnectableSwitcher": () => /* binding */ vs,
/* harmony export */   "CustomExpression": () => /* binding */ CustomExpression,
/* harmony export */   "DelegationStrategy": () => /* binding */ Z,
/* harmony export */   "DestructuringAssignmentExpression": () => /* binding */ DestructuringAssignmentExpression,
/* harmony export */   "DestructuringAssignmentRestExpression": () => /* binding */ DestructuringAssignmentRestExpression,
/* harmony export */   "DestructuringAssignmentSingleExpression": () => /* binding */ DestructuringAssignmentSingleExpression,
/* harmony export */   "DirtyCheckProperty": () => /* binding */ DirtyCheckProperty,
/* harmony export */   "DirtyCheckSettings": () => /* binding */ ar,
/* harmony export */   "ExpressionKind": () => /* binding */ F,
/* harmony export */   "ExpressionType": () => /* binding */ Re,
/* harmony export */   "FlushQueue": () => /* binding */ FlushQueue,
/* harmony export */   "ForOfStatement": () => /* binding */ ForOfStatement,
/* harmony export */   "HtmlLiteralExpression": () => /* binding */ HtmlLiteralExpression,
/* harmony export */   "ICoercionConfiguration": () => /* binding */ _,
/* harmony export */   "IDirtyChecker": () => /* binding */ ur,
/* harmony export */   "IExpressionParser": () => /* binding */ Ae,
/* harmony export */   "INodeObserverLocator": () => /* binding */ pr,
/* harmony export */   "IObservation": () => /* binding */ Er,
/* harmony export */   "IObserverLocator": () => /* binding */ vr,
/* harmony export */   "ISignaler": () => /* binding */ B,
/* harmony export */   "Interpolation": () => /* binding */ Interpolation,
/* harmony export */   "LifecycleFlags": () => /* binding */ W,
/* harmony export */   "MapObserver": () => /* binding */ MapObserver,
/* harmony export */   "ObjectBindingPattern": () => /* binding */ ObjectBindingPattern,
/* harmony export */   "ObjectLiteralExpression": () => /* binding */ ObjectLiteralExpression,
/* harmony export */   "Observation": () => /* binding */ Observation,
/* harmony export */   "ObserverLocator": () => /* binding */ ObserverLocator,
/* harmony export */   "OverrideContext": () => /* binding */ OverrideContext,
/* harmony export */   "ParserState": () => /* binding */ ParserState,
/* harmony export */   "Precedence": () => /* binding */ xe,
/* harmony export */   "PrimitiveLiteralExpression": () => /* binding */ PrimitiveLiteralExpression,
/* harmony export */   "PrimitiveObserver": () => /* binding */ PrimitiveObserver,
/* harmony export */   "PropertyAccessor": () => /* binding */ PropertyAccessor,
/* harmony export */   "ProxyObservable": () => /* binding */ hr,
/* harmony export */   "Scope": () => /* binding */ Scope,
/* harmony export */   "SetObserver": () => /* binding */ SetObserver,
/* harmony export */   "SetterObserver": () => /* binding */ SetterObserver,
/* harmony export */   "SubscriberRecord": () => /* binding */ SubscriberRecord,
/* harmony export */   "TaggedTemplateExpression": () => /* binding */ TaggedTemplateExpression,
/* harmony export */   "TemplateExpression": () => /* binding */ TemplateExpression,
/* harmony export */   "UnaryExpression": () => /* binding */ UnaryExpression,
/* harmony export */   "ValueConverter": () => /* binding */ D,
/* harmony export */   "ValueConverterDefinition": () => /* binding */ ValueConverterDefinition,
/* harmony export */   "ValueConverterExpression": () => /* binding */ ValueConverterExpression,
/* harmony export */   "alias": () => /* binding */ O,
/* harmony export */   "applyMutationsToIndices": () => /* binding */ It,
/* harmony export */   "bindingBehavior": () => /* binding */ L,
/* harmony export */   "cloneIndexMap": () => /* binding */ et,
/* harmony export */   "connectable": () => /* binding */ Ee,
/* harmony export */   "copyIndexMap": () => /* binding */ Y,
/* harmony export */   "createIndexMap": () => /* binding */ tt,
/* harmony export */   "disableArrayObservation": () => /* binding */ Tt,
/* harmony export */   "disableMapObservation": () => /* binding */ ce,
/* harmony export */   "disableSetObservation": () => /* binding */ Gt,
/* harmony export */   "enableArrayObservation": () => /* binding */ Pt,
/* harmony export */   "enableMapObservation": () => /* binding */ he,
/* harmony export */   "enableSetObservation": () => /* binding */ Wt,
/* harmony export */   "getCollectionObserver": () => /* binding */ gr,
/* harmony export */   "isIndexMap": () => /* binding */ st,
/* harmony export */   "observable": () => /* binding */ mr,
/* harmony export */   "parse": () => /* binding */ je,
/* harmony export */   "parseExpression": () => /* binding */ Te,
/* harmony export */   "registerAliases": () => /* binding */ C,
/* harmony export */   "subscriberCollection": () => /* binding */ rt,
/* harmony export */   "synchronizeIndices": () => /* binding */ Mt,
/* harmony export */   "valueConverter": () => /* binding */ j,
/* harmony export */   "withFlushQueue": () => /* binding */ ct
/* harmony export */ });
/* harmony import */ var _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @aurelia/kernel */ "./node_modules/@aurelia/kernel/dist/esm/index.js");
/* harmony import */ var _aurelia_platform__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aurelia/platform */ "./node_modules/@aurelia/platform/dist/esm/index.js");






const d = Object.prototype.hasOwnProperty;

const v = Reflect.defineProperty;

const p = t => "function" === typeof t;

const g = t => "string" === typeof t;

function w(t, e, s) {
    v(t, e, {
        enumerable: false,
        configurable: true,
        writable: true,
        value: s
    });
    return s;
}

function b(t, e, s, r = false) {
    if (r || !d.call(t, e)) w(t, e, s);
}

const E = () => Object.create(null);

const A = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.getOwn;

const y = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.hasOwn;

const m = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Metadata.define;

const U = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Protocol.annotation.keyFor;

const x = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Protocol.resource.keyFor;

const S = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Protocol.resource.appendTo;

function O(...t) {
    return function(e) {
        const s = U("aliases");
        const r = A(s, e);
        if (void 0 === r) m(s, t, e); else r.push(...t);
    };
}

function C(t, e, r, i) {
    for (let n = 0, o = t.length; n < o; ++n) _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration.aliasTo(r, e.keyFrom(t[n])).register(i);
}

const k = Object.freeze({});

class BindingContext {
    constructor(t, e) {
        if (void 0 !== t) if (void 0 !== e) this[t] = e; else for (const e in t) if (Object.prototype.hasOwnProperty.call(t, e)) this[e] = t[e];
    }
    static create(t, e) {
        return new BindingContext(t, e);
    }
    static get(t, e, s, r) {
        var i, n;
        if (null == t) throw new Error(`AUR0203:${t}`);
        let o = t.overrideContext;
        let h = t;
        if (s > 0) {
            while (s > 0) {
                s--;
                h = h.parentScope;
                if (null == (null === h || void 0 === h ? void 0 : h.overrideContext)) return;
            }
            o = h.overrideContext;
            return e in o ? o : o.bindingContext;
        }
        while (!(null === h || void 0 === h ? void 0 : h.isBoundary) && null != o && !(e in o) && !(o.bindingContext && e in o.bindingContext)) {
            h = null !== (i = h.parentScope) && void 0 !== i ? i : null;
            o = null !== (n = null === h || void 0 === h ? void 0 : h.overrideContext) && void 0 !== n ? n : null;
        }
        if (o) return e in o ? o : o.bindingContext;
        if (16 & r) return k;
        return t.bindingContext || t.overrideContext;
    }
}

class Scope {
    constructor(t, e, s, r) {
        this.parentScope = t;
        this.bindingContext = e;
        this.overrideContext = s;
        this.isBoundary = r;
    }
    static create(t, e, s) {
        return new Scope(null, t, null == e ? OverrideContext.create(t) : e, null !== s && void 0 !== s ? s : false);
    }
    static fromOverride(t) {
        if (null == t) throw new Error(`AUR0204:${t}`);
        return new Scope(null, t.bindingContext, t, false);
    }
    static fromParent(t, e) {
        if (null == t) throw new Error(`AUR0205:${t}`);
        return new Scope(t, e, OverrideContext.create(e), false);
    }
}

class OverrideContext {
    constructor(t) {
        this.bindingContext = t;
    }
    static create(t) {
        return new OverrideContext(t);
    }
}

const B = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("ISignaler", (t => t.singleton(Signaler)));

class Signaler {
    constructor() {
        this.signals = E();
    }
    dispatchSignal(t, e) {
        const s = this.signals[t];
        if (void 0 === s) return;
        let r;
        for (r of s.keys()) r.handleChange(void 0, void 0, e);
    }
    addSignalListener(t, e) {
        const s = this.signals;
        const r = s[t];
        if (void 0 === r) s[t] = new Set([ e ]); else r.add(e);
    }
    removeSignalListener(t, e) {
        const s = this.signals[t];
        if (s) s.delete(e);
    }
}

var $;

(function(t) {
    t[t["singleton"] = 1] = "singleton";
    t[t["interceptor"] = 2] = "interceptor";
})($ || ($ = {}));

function L(t) {
    return function(e) {
        return T.define(t, e);
    };
}

class BindingBehaviorDefinition {
    constructor(t, e, s, r, i) {
        this.Type = t;
        this.name = e;
        this.aliases = s;
        this.key = r;
        this.strategy = i;
    }
    static create(t, e) {
        let s;
        let r;
        if (g(t)) {
            s = t;
            r = {
                name: s
            };
        } else {
            s = t.name;
            r = t;
        }
        const h = Object.getPrototypeOf(e) === BindingInterceptor;
        return new BindingBehaviorDefinition(e, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.firstDefined)(P(e, "name"), s), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.mergeArrays)(P(e, "aliases"), r.aliases, e.aliases), T.keyFrom(s), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.fromAnnotationOrDefinitionOrTypeOrDefault)("strategy", r, e, (() => h ? 2 : 1)));
    }
    register(t) {
        const {Type: e, key: r, aliases: i, strategy: n} = this;
        switch (n) {
          case 1:
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration.singleton(r, e).register(t);
            break;

          case 2:
            _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration.instance(r, new BindingBehaviorFactory(t, e)).register(t);
            break;
        }
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration.aliasTo(r, e).register(t);
        C(i, T, r, t);
    }
}

class BindingBehaviorFactory {
    constructor(t, e) {
        this.ctn = t;
        this.Type = e;
        this.deps = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.getDependencies(e);
    }
    construct(t, e) {
        const s = this.ctn;
        const r = this.deps;
        switch (r.length) {
          case 0:
            return new this.Type(t, e);

          case 1:
            return new this.Type(s.get(r[0]), t, e);

          case 2:
            return new this.Type(s.get(r[0]), s.get(r[1]), t, e);

          default:
            return new this.Type(...r.map((t => s.get(t))), t, e);
        }
    }
}

class BindingInterceptor {
    constructor(t, e) {
        this.binding = t;
        this.expr = e;
        this.interceptor = this;
        let s;
        while (t.interceptor !== this) {
            s = t.interceptor;
            t.interceptor = this;
            t = s;
        }
    }
    get oL() {
        return this.binding.oL;
    }
    get locator() {
        return this.binding.locator;
    }
    get $scope() {
        return this.binding.$scope;
    }
    get isBound() {
        return this.binding.isBound;
    }
    get obs() {
        return this.binding.obs;
    }
    get sourceExpression() {
        return this.binding.sourceExpression;
    }
    updateTarget(t, e) {
        this.binding.updateTarget(t, e);
    }
    updateSource(t, e) {
        this.binding.updateSource(t, e);
    }
    callSource(t) {
        return this.binding.callSource(t);
    }
    handleChange(t, e, s) {
        this.binding.handleChange(t, e, s);
    }
    handleCollectionChange(t, e) {
        this.binding.handleCollectionChange(t, e);
    }
    observe(t, e) {
        this.binding.observe(t, e);
    }
    observeCollection(t) {
        this.binding.observeCollection(t);
    }
    $bind(t, e) {
        this.binding.$bind(t, e);
    }
    $unbind(t) {
        this.binding.$unbind(t);
    }
}

const R = x("binding-behavior");

const P = (t, e) => A(U(e), t);

const T = Object.freeze({
    name: R,
    keyFrom(t) {
        return `${R}:${t}`;
    },
    isType(t) {
        return p(t) && y(R, t);
    },
    define(t, e) {
        const s = BindingBehaviorDefinition.create(t, e);
        m(R, s, s.Type);
        m(R, s, s);
        S(e, R);
        return s.Type;
    },
    getDefinition(t) {
        const e = A(R, t);
        if (void 0 === e) throw new Error(`AUR0151:${t.name}`);
        return e;
    },
    annotate(t, e, s) {
        m(U(e), s, t);
    },
    getAnnotation: P
});

function j(t) {
    return function(e) {
        return D.define(t, e);
    };
}

class ValueConverterDefinition {
    constructor(t, e, s, r) {
        this.Type = t;
        this.name = e;
        this.aliases = s;
        this.key = r;
    }
    static create(t, e) {
        let s;
        let r;
        if (g(t)) {
            s = t;
            r = {
                name: s
            };
        } else {
            s = t.name;
            r = t;
        }
        return new ValueConverterDefinition(e, (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.firstDefined)(M(e, "name"), s), (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.mergeArrays)(M(e, "aliases"), r.aliases, e.aliases), D.keyFrom(s));
    }
    register(t) {
        const {Type: e, key: r, aliases: i} = this;
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration.singleton(r, e).register(t);
        _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.Registration.aliasTo(r, e).register(t);
        C(i, D, r, t);
    }
}

const I = x("value-converter");

const M = (t, e) => A(U(e), t);

const D = Object.freeze({
    name: I,
    keyFrom: t => `${I}:${t}`,
    isType(t) {
        return p(t) && y(I, t);
    },
    define(t, e) {
        const s = ValueConverterDefinition.create(t, e);
        m(I, s, s.Type);
        m(I, s, s);
        S(e, I);
        return s.Type;
    },
    getDefinition(t) {
        const e = A(I, t);
        if (void 0 === e) throw new Error(`AUR0152:${t.name}`);
        return e;
    },
    annotate(t, e, s) {
        m(U(e), s, t);
    },
    getAnnotation: M
});

var F;

(function(t) {
    t[t["CallsFunction"] = 128] = "CallsFunction";
    t[t["HasAncestor"] = 256] = "HasAncestor";
    t[t["IsPrimary"] = 512] = "IsPrimary";
    t[t["IsLeftHandSide"] = 1024] = "IsLeftHandSide";
    t[t["HasBind"] = 2048] = "HasBind";
    t[t["HasUnbind"] = 4096] = "HasUnbind";
    t[t["IsAssignable"] = 8192] = "IsAssignable";
    t[t["IsLiteral"] = 16384] = "IsLiteral";
    t[t["IsResource"] = 32768] = "IsResource";
    t[t["IsForDeclaration"] = 65536] = "IsForDeclaration";
    t[t["Type"] = 31] = "Type";
    t[t["AccessThis"] = 1793] = "AccessThis";
    t[t["AccessScope"] = 10082] = "AccessScope";
    t[t["ArrayLiteral"] = 17955] = "ArrayLiteral";
    t[t["ObjectLiteral"] = 17956] = "ObjectLiteral";
    t[t["PrimitiveLiteral"] = 17925] = "PrimitiveLiteral";
    t[t["Template"] = 17958] = "Template";
    t[t["Unary"] = 39] = "Unary";
    t[t["CallScope"] = 1448] = "CallScope";
    t[t["CallMember"] = 1161] = "CallMember";
    t[t["CallFunction"] = 1162] = "CallFunction";
    t[t["AccessMember"] = 9323] = "AccessMember";
    t[t["AccessKeyed"] = 9324] = "AccessKeyed";
    t[t["TaggedTemplate"] = 1197] = "TaggedTemplate";
    t[t["Binary"] = 46] = "Binary";
    t[t["Conditional"] = 63] = "Conditional";
    t[t["Assign"] = 8208] = "Assign";
    t[t["ValueConverter"] = 36913] = "ValueConverter";
    t[t["BindingBehavior"] = 38962] = "BindingBehavior";
    t[t["HtmlLiteral"] = 51] = "HtmlLiteral";
    t[t["ArrayBindingPattern"] = 65556] = "ArrayBindingPattern";
    t[t["ObjectBindingPattern"] = 65557] = "ObjectBindingPattern";
    t[t["BindingIdentifier"] = 65558] = "BindingIdentifier";
    t[t["ForOfStatement"] = 6199] = "ForOfStatement";
    t[t["Interpolation"] = 24] = "Interpolation";
    t[t["ArrayDestructuring"] = 90137] = "ArrayDestructuring";
    t[t["ObjectDestructuring"] = 106521] = "ObjectDestructuring";
    t[t["DestructuringAssignmentLeaf"] = 139289] = "DestructuringAssignmentLeaf";
})(F || (F = {}));

class Unparser {
    constructor() {
        this.text = "";
    }
    static unparse(t) {
        const e = new Unparser;
        t.accept(e);
        return e.text;
    }
    visitAccessMember(t) {
        t.object.accept(this);
        this.text += `.${t.name}`;
    }
    visitAccessKeyed(t) {
        t.object.accept(this);
        this.text += "[";
        t.key.accept(this);
        this.text += "]";
    }
    visitAccessThis(t) {
        if (0 === t.ancestor) {
            this.text += "$this";
            return;
        }
        this.text += "$parent";
        let e = t.ancestor - 1;
        while (e--) this.text += ".$parent";
    }
    visitAccessScope(t) {
        let e = t.ancestor;
        while (e--) this.text += "$parent.";
        this.text += t.name;
    }
    visitArrayLiteral(t) {
        const e = t.elements;
        this.text += "[";
        for (let t = 0, s = e.length; t < s; ++t) {
            if (0 !== t) this.text += ",";
            e[t].accept(this);
        }
        this.text += "]";
    }
    visitObjectLiteral(t) {
        const e = t.keys;
        const s = t.values;
        this.text += "{";
        for (let t = 0, r = e.length; t < r; ++t) {
            if (0 !== t) this.text += ",";
            this.text += `'${e[t]}':`;
            s[t].accept(this);
        }
        this.text += "}";
    }
    visitPrimitiveLiteral(t) {
        this.text += "(";
        if (g(t.value)) {
            const e = t.value.replace(/'/g, "\\'");
            this.text += `'${e}'`;
        } else this.text += `${t.value}`;
        this.text += ")";
    }
    visitCallFunction(t) {
        this.text += "(";
        t.func.accept(this);
        this.writeArgs(t.args);
        this.text += ")";
    }
    visitCallMember(t) {
        this.text += "(";
        t.object.accept(this);
        this.text += `.${t.name}`;
        this.writeArgs(t.args);
        this.text += ")";
    }
    visitCallScope(t) {
        this.text += "(";
        let e = t.ancestor;
        while (e--) this.text += "$parent.";
        this.text += t.name;
        this.writeArgs(t.args);
        this.text += ")";
    }
    visitTemplate(t) {
        const {cooked: e, expressions: s} = t;
        const r = s.length;
        this.text += "`";
        this.text += e[0];
        for (let t = 0; t < r; t++) {
            s[t].accept(this);
            this.text += e[t + 1];
        }
        this.text += "`";
    }
    visitTaggedTemplate(t) {
        const {cooked: e, expressions: s} = t;
        const r = s.length;
        t.func.accept(this);
        this.text += "`";
        this.text += e[0];
        for (let t = 0; t < r; t++) {
            s[t].accept(this);
            this.text += e[t + 1];
        }
        this.text += "`";
    }
    visitUnary(t) {
        this.text += `(${t.operation}`;
        if (t.operation.charCodeAt(0) >= 97) this.text += " ";
        t.expression.accept(this);
        this.text += ")";
    }
    visitBinary(t) {
        this.text += "(";
        t.left.accept(this);
        if (105 === t.operation.charCodeAt(0)) this.text += ` ${t.operation} `; else this.text += t.operation;
        t.right.accept(this);
        this.text += ")";
    }
    visitConditional(t) {
        this.text += "(";
        t.condition.accept(this);
        this.text += "?";
        t.yes.accept(this);
        this.text += ":";
        t.no.accept(this);
        this.text += ")";
    }
    visitAssign(t) {
        this.text += "(";
        t.target.accept(this);
        this.text += "=";
        t.value.accept(this);
        this.text += ")";
    }
    visitValueConverter(t) {
        const e = t.args;
        t.expression.accept(this);
        this.text += `|${t.name}`;
        for (let t = 0, s = e.length; t < s; ++t) {
            this.text += ":";
            e[t].accept(this);
        }
    }
    visitBindingBehavior(t) {
        const e = t.args;
        t.expression.accept(this);
        this.text += `&${t.name}`;
        for (let t = 0, s = e.length; t < s; ++t) {
            this.text += ":";
            e[t].accept(this);
        }
    }
    visitArrayBindingPattern(t) {
        const e = t.elements;
        this.text += "[";
        for (let t = 0, s = e.length; t < s; ++t) {
            if (0 !== t) this.text += ",";
            e[t].accept(this);
        }
        this.text += "]";
    }
    visitObjectBindingPattern(t) {
        const e = t.keys;
        const s = t.values;
        this.text += "{";
        for (let t = 0, r = e.length; t < r; ++t) {
            if (0 !== t) this.text += ",";
            this.text += `'${e[t]}':`;
            s[t].accept(this);
        }
        this.text += "}";
    }
    visitBindingIdentifier(t) {
        this.text += t.name;
    }
    visitHtmlLiteral(t) {
        throw new Error("visitHtmlLiteral");
    }
    visitForOfStatement(t) {
        t.declaration.accept(this);
        this.text += " of ";
        t.iterable.accept(this);
    }
    visitInterpolation(t) {
        const {parts: e, expressions: s} = t;
        const r = s.length;
        this.text += "${";
        this.text += e[0];
        for (let t = 0; t < r; t++) {
            s[t].accept(this);
            this.text += e[t + 1];
        }
        this.text += "}";
    }
    visitDestructuringAssignmentExpression(t) {
        const e = t.$kind;
        const s = 106521 === e;
        this.text += s ? "{" : "[";
        const r = t.list;
        const i = r.length;
        let n;
        let o;
        for (n = 0; n < i; n++) {
            o = r[n];
            switch (o.$kind) {
              case 139289:
                o.accept(this);
                break;

              case 90137:
              case 106521:
                {
                    const t = o.source;
                    if (t) {
                        t.accept(this);
                        this.text += ":";
                    }
                    o.accept(this);
                    break;
                }
            }
        }
        this.text += s ? "}" : "]";
    }
    visitDestructuringAssignmentSingleExpression(t) {
        t.source.accept(this);
        this.text += ":";
        t.target.accept(this);
        const e = t.initializer;
        if (void 0 !== e) {
            this.text += "=";
            e.accept(this);
        }
    }
    visitDestructuringAssignmentRestExpression(t) {
        this.text += "...";
        t.accept(this);
    }
    writeArgs(t) {
        this.text += "(";
        for (let e = 0, s = t.length; e < s; ++e) {
            if (0 !== e) this.text += ",";
            t[e].accept(this);
        }
        this.text += ")";
    }
}

class CustomExpression {
    constructor(t) {
        this.value = t;
    }
    evaluate(t, e, s, r) {
        return this.value;
    }
}

class BindingBehaviorExpression {
    constructor(t, e, s) {
        this.expression = t;
        this.name = e;
        this.args = s;
        this.behaviorKey = T.keyFrom(e);
    }
    get $kind() {
        return 38962;
    }
    get hasBind() {
        return true;
    }
    get hasUnbind() {
        return true;
    }
    evaluate(t, e, s, r) {
        return this.expression.evaluate(t, e, s, r);
    }
    assign(t, e, s, r) {
        return this.expression.assign(t, e, s, r);
    }
    bind(t, e, s) {
        if (this.expression.hasBind) this.expression.bind(t, e, s);
        const r = s.locator.get(this.behaviorKey);
        if (null == r) throw new Error(`AUR0101:${this.name}`);
        if (!(r instanceof BindingBehaviorFactory)) if (void 0 === s[this.behaviorKey]) {
            s[this.behaviorKey] = r;
            r.bind.call(r, t, e, s, ...this.args.map((r => r.evaluate(t, e, s.locator, null))));
        } else throw new Error(`AUR0102:${this.name}`);
    }
    unbind(t, e, s) {
        const r = this.behaviorKey;
        const i = s;
        if (void 0 !== i[r]) {
            if (p(i[r].unbind)) i[r].unbind(t, e, s);
            i[r] = void 0;
        }
        if (this.expression.hasUnbind) this.expression.unbind(t, e, s);
    }
    accept(t) {
        return t.visitBindingBehavior(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class ValueConverterExpression {
    constructor(t, e, s) {
        this.expression = t;
        this.name = e;
        this.args = s;
        this.converterKey = D.keyFrom(e);
    }
    get $kind() {
        return 36913;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return true;
    }
    evaluate(t, e, s, r) {
        const i = s.get(this.converterKey);
        if (null == i) throw new Error(`AUR0103:${this.name}`);
        if (null !== r && "handleChange" in r) {
            const t = i.signals;
            if (null != t) {
                const e = s.get(B);
                for (let s = 0, i = t.length; s < i; ++s) e.addSignalListener(t[s], r);
            }
        }
        if ("toView" in i) return i.toView(this.expression.evaluate(t, e, s, r), ...this.args.map((i => i.evaluate(t, e, s, r))));
        return this.expression.evaluate(t, e, s, r);
    }
    assign(t, e, s, r) {
        const i = s.get(this.converterKey);
        if (null == i) throw new Error(`AUR0104:${this.name}`);
        if ("fromView" in i) r = i.fromView(r, ...this.args.map((r => r.evaluate(t, e, s, null))));
        return this.expression.assign(t, e, s, r);
    }
    unbind(t, e, s) {
        const r = s.locator.get(this.converterKey);
        if (void 0 === r.signals) return;
        const i = s.locator.get(B);
        for (let t = 0; t < r.signals.length; ++t) i.removeSignalListener(r.signals[t], s);
    }
    accept(t) {
        return t.visitValueConverter(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class AssignExpression {
    constructor(t, e) {
        this.target = t;
        this.value = e;
    }
    get $kind() {
        return 8208;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return this.target.assign(t, e, s, this.value.evaluate(t, e, s, r));
    }
    assign(t, e, s, r) {
        this.value.assign(t, e, s, r);
        return this.target.assign(t, e, s, r);
    }
    accept(t) {
        return t.visitAssign(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class ConditionalExpression {
    constructor(t, e, s) {
        this.condition = t;
        this.yes = e;
        this.no = s;
    }
    get $kind() {
        return 63;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return this.condition.evaluate(t, e, s, r) ? this.yes.evaluate(t, e, s, r) : this.no.evaluate(t, e, s, r);
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitConditional(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class AccessThisExpression {
    constructor(t = 0) {
        this.ancestor = t;
    }
    get $kind() {
        return 1793;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        var i;
        let n = e.overrideContext;
        let o = e;
        let h = this.ancestor;
        while (h-- && n) {
            o = o.parentScope;
            n = null !== (i = null === o || void 0 === o ? void 0 : o.overrideContext) && void 0 !== i ? i : null;
        }
        return h < 1 && n ? n.bindingContext : void 0;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitAccessThis(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

AccessThisExpression.$this = new AccessThisExpression(0);

AccessThisExpression.$parent = new AccessThisExpression(1);

class AccessScopeExpression {
    constructor(t, e = 0) {
        this.name = t;
        this.ancestor = e;
    }
    get $kind() {
        return 10082;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = BindingContext.get(e, this.name, this.ancestor, t);
        if (null !== r) r.observe(i, this.name);
        const n = i[this.name];
        if (null == n && "$host" === this.name) throw new Error("AUR0105");
        if (1 & t) return n;
        return null == n ? "" : n;
    }
    assign(t, e, s, r) {
        var i;
        if ("$host" === this.name) throw new Error("AUR0106");
        const n = BindingContext.get(e, this.name, this.ancestor, t);
        if (n instanceof Object) if (void 0 !== (null === (i = n.$observers) || void 0 === i ? void 0 : i[this.name])) {
            n.$observers[this.name].setValue(r, t);
            return r;
        } else return n[this.name] = r;
        return;
    }
    accept(t) {
        return t.visitAccessScope(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class AccessMemberExpression {
    constructor(t, e) {
        this.object = t;
        this.name = e;
    }
    get $kind() {
        return 9323;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = this.object.evaluate(t, e, s, (128 & t) > 0 ? null : r);
        if (1 & t) {
            if (null == i) return i;
            if (null !== r) r.observe(i, this.name);
            return i[this.name];
        }
        if (null !== r && i instanceof Object) r.observe(i, this.name);
        return i ? i[this.name] : "";
    }
    assign(t, e, s, r) {
        const i = this.object.evaluate(t, e, s, null);
        if (i instanceof Object) if (void 0 !== i.$observers && void 0 !== i.$observers[this.name]) i.$observers[this.name].setValue(r, t); else i[this.name] = r; else this.object.assign(t, e, s, {
            [this.name]: r
        });
        return r;
    }
    accept(t) {
        return t.visitAccessMember(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class AccessKeyedExpression {
    constructor(t, e) {
        this.object = t;
        this.key = e;
    }
    get $kind() {
        return 9324;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = this.object.evaluate(t, e, s, (128 & t) > 0 ? null : r);
        if (i instanceof Object) {
            const n = this.key.evaluate(t, e, s, (128 & t) > 0 ? null : r);
            if (null !== r) r.observe(i, n);
            return i[n];
        }
        return;
    }
    assign(t, e, s, r) {
        const i = this.object.evaluate(t, e, s, null);
        const n = this.key.evaluate(t, e, s, null);
        return i[n] = r;
    }
    accept(t) {
        return t.visitAccessKeyed(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class CallScopeExpression {
    constructor(t, e, s = 0) {
        this.name = t;
        this.args = e;
        this.ancestor = s;
    }
    get $kind() {
        return 1448;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = this.args.map((i => i.evaluate(t, e, s, r)));
        const n = BindingContext.get(e, this.name, this.ancestor, t);
        const o = N(t, n, this.name);
        if (o) return o.apply(n, i);
        return;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitCallScope(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class CallMemberExpression {
    constructor(t, e, s) {
        this.object = t;
        this.name = e;
        this.args = s;
    }
    get $kind() {
        return 1161;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = this.object.evaluate(t, e, s, (128 & t) > 0 ? null : r);
        const n = this.args.map((i => i.evaluate(t, e, s, r)));
        const o = N(t, i, this.name);
        if (o) return o.apply(i, n);
        return;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitCallMember(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class CallFunctionExpression {
    constructor(t, e) {
        this.func = t;
        this.args = e;
    }
    get $kind() {
        return 1162;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = this.func.evaluate(t, e, s, r);
        if (p(i)) return i(...this.args.map((i => i.evaluate(t, e, s, r))));
        if (!(8 & t) && null == i) return;
        throw new Error("AUR0107");
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitCallFunction(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class BinaryExpression {
    constructor(t, e, s) {
        this.operation = t;
        this.left = e;
        this.right = s;
    }
    get $kind() {
        return 46;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        switch (this.operation) {
          case "&&":
            return this.left.evaluate(t, e, s, r) && this.right.evaluate(t, e, s, r);

          case "||":
            return this.left.evaluate(t, e, s, r) || this.right.evaluate(t, e, s, r);

          case "==":
            return this.left.evaluate(t, e, s, r) == this.right.evaluate(t, e, s, r);

          case "===":
            return this.left.evaluate(t, e, s, r) === this.right.evaluate(t, e, s, r);

          case "!=":
            return this.left.evaluate(t, e, s, r) != this.right.evaluate(t, e, s, r);

          case "!==":
            return this.left.evaluate(t, e, s, r) !== this.right.evaluate(t, e, s, r);

          case "instanceof":
            {
                const i = this.right.evaluate(t, e, s, r);
                if (p(i)) return this.left.evaluate(t, e, s, r) instanceof i;
                return false;
            }

          case "in":
            {
                const i = this.right.evaluate(t, e, s, r);
                if (i instanceof Object) return this.left.evaluate(t, e, s, r) in i;
                return false;
            }

          case "+":
            {
                const i = this.left.evaluate(t, e, s, r);
                const n = this.right.evaluate(t, e, s, r);
                if ((1 & t) > 0) return i + n;
                if (!i || !n) {
                    if ((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isNumberOrBigInt)(i) || (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isNumberOrBigInt)(n)) return (i || 0) + (n || 0);
                    if ((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isStringOrDate)(i) || (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isStringOrDate)(n)) return (i || "") + (n || "");
                }
                return i + n;
            }

          case "-":
            return this.left.evaluate(t, e, s, r) - this.right.evaluate(t, e, s, r);

          case "*":
            return this.left.evaluate(t, e, s, r) * this.right.evaluate(t, e, s, r);

          case "/":
            return this.left.evaluate(t, e, s, r) / this.right.evaluate(t, e, s, r);

          case "%":
            return this.left.evaluate(t, e, s, r) % this.right.evaluate(t, e, s, r);

          case "<":
            return this.left.evaluate(t, e, s, r) < this.right.evaluate(t, e, s, r);

          case ">":
            return this.left.evaluate(t, e, s, r) > this.right.evaluate(t, e, s, r);

          case "<=":
            return this.left.evaluate(t, e, s, r) <= this.right.evaluate(t, e, s, r);

          case ">=":
            return this.left.evaluate(t, e, s, r) >= this.right.evaluate(t, e, s, r);

          default:
            throw new Error(`AUR0108:${this.operation}`);
        }
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitBinary(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class UnaryExpression {
    constructor(t, e) {
        this.operation = t;
        this.expression = e;
    }
    get $kind() {
        return 39;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        switch (this.operation) {
          case "void":
            return void this.expression.evaluate(t, e, s, r);

          case "typeof":
            return typeof this.expression.evaluate(1 | t, e, s, r);

          case "!":
            return !this.expression.evaluate(t, e, s, r);

          case "-":
            return -this.expression.evaluate(t, e, s, r);

          case "+":
            return +this.expression.evaluate(t, e, s, r);

          default:
            throw new Error(`AUR0109:${this.operation}`);
        }
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitUnary(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class PrimitiveLiteralExpression {
    constructor(t) {
        this.value = t;
    }
    get $kind() {
        return 17925;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return this.value;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitPrimitiveLiteral(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

PrimitiveLiteralExpression.$undefined = new PrimitiveLiteralExpression(void 0);

PrimitiveLiteralExpression.$null = new PrimitiveLiteralExpression(null);

PrimitiveLiteralExpression.$true = new PrimitiveLiteralExpression(true);

PrimitiveLiteralExpression.$false = new PrimitiveLiteralExpression(false);

PrimitiveLiteralExpression.$empty = new PrimitiveLiteralExpression("");

class HtmlLiteralExpression {
    constructor(t) {
        this.parts = t;
    }
    get $kind() {
        return 51;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        let i = "";
        for (let n = 0; n < this.parts.length; ++n) {
            const o = this.parts[n].evaluate(t, e, s, r);
            if (null == o) continue;
            i += o;
        }
        return i;
    }
    assign(t, e, s, r, i) {
        return;
    }
    accept(t) {
        return t.visitHtmlLiteral(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class ArrayLiteralExpression {
    constructor(t) {
        this.elements = t;
    }
    get $kind() {
        return 17955;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return this.elements.map((i => i.evaluate(t, e, s, r)));
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitArrayLiteral(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

ArrayLiteralExpression.$empty = new ArrayLiteralExpression(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyArray);

class ObjectLiteralExpression {
    constructor(t, e) {
        this.keys = t;
        this.values = e;
    }
    get $kind() {
        return 17956;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = {};
        for (let n = 0; n < this.keys.length; ++n) i[this.keys[n]] = this.values[n].evaluate(t, e, s, r);
        return i;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitObjectLiteral(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

ObjectLiteralExpression.$empty = new ObjectLiteralExpression(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyArray, _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyArray);

class TemplateExpression {
    constructor(t, e = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyArray) {
        this.cooked = t;
        this.expressions = e;
    }
    get $kind() {
        return 17958;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        let i = this.cooked[0];
        for (let n = 0; n < this.expressions.length; ++n) {
            i += String(this.expressions[n].evaluate(t, e, s, r));
            i += this.cooked[n + 1];
        }
        return i;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitTemplate(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

TemplateExpression.$empty = new TemplateExpression([ "" ]);

class TaggedTemplateExpression {
    constructor(t, e, s, r = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyArray) {
        this.cooked = t;
        this.func = s;
        this.expressions = r;
        t.raw = e;
    }
    get $kind() {
        return 1197;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        const i = this.expressions.map((i => i.evaluate(t, e, s, r)));
        const n = this.func.evaluate(t, e, s, r);
        if (!p(n)) throw new Error(`AUR0110`);
        return n(this.cooked, ...i);
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitTaggedTemplate(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class ArrayBindingPattern {
    constructor(t) {
        this.elements = t;
    }
    get $kind() {
        return 65556;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitArrayBindingPattern(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class ObjectBindingPattern {
    constructor(t, e) {
        this.keys = t;
        this.values = e;
    }
    get $kind() {
        return 65557;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitObjectBindingPattern(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class BindingIdentifier {
    constructor(t) {
        this.name = t;
    }
    get $kind() {
        return 65558;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return this.name;
    }
    accept(t) {
        return t.visitBindingIdentifier(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

const V = Object.prototype.toString;

class ForOfStatement {
    constructor(t, e) {
        this.declaration = t;
        this.iterable = e;
    }
    get $kind() {
        return 6199;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return this.iterable.evaluate(t, e, s, r);
    }
    assign(t, e, s, r) {
        return;
    }
    count(t, e) {
        switch (V.call(e)) {
          case "[object Array]":
            return e.length;

          case "[object Map]":
            return e.size;

          case "[object Set]":
            return e.size;

          case "[object Number]":
            return e;

          case "[object Null]":
            return 0;

          case "[object Undefined]":
            return 0;

          default:
            throw new Error(`Cannot count ${V.call(e)}`);
        }
    }
    iterate(t, e, s) {
        switch (V.call(e)) {
          case "[object Array]":
            return K(e, s);

          case "[object Map]":
            return q(e, s);

          case "[object Set]":
            return H(e, s);

          case "[object Number]":
            return Q(e, s);

          case "[object Null]":
            return;

          case "[object Undefined]":
            return;

          default:
            throw new Error(`Cannot iterate over ${V.call(e)}`);
        }
    }
    bind(t, e, s) {
        if (this.iterable.hasBind) this.iterable.bind(t, e, s);
    }
    unbind(t, e, s) {
        if (this.iterable.hasUnbind) this.iterable.unbind(t, e, s);
    }
    accept(t) {
        return t.visitForOfStatement(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class Interpolation {
    constructor(t, e = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.emptyArray) {
        this.parts = t;
        this.expressions = e;
        this.isMulti = e.length > 1;
        this.firstExpression = e[0];
    }
    get $kind() {
        return 24;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        if (this.isMulti) {
            let i = this.parts[0];
            for (let n = 0; n < this.expressions.length; ++n) {
                i += String(this.expressions[n].evaluate(t, e, s, r));
                i += this.parts[n + 1];
            }
            return i;
        } else return `${this.parts[0]}${this.firstExpression.evaluate(t, e, s, r)}${this.parts[1]}`;
    }
    assign(t, e, s, r) {
        return;
    }
    accept(t) {
        return t.visitInterpolation(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class DestructuringAssignmentExpression {
    constructor(t, e, s, r) {
        this.$kind = t;
        this.list = e;
        this.source = s;
        this.initializer = r;
    }
    get hasBind() {
        return false;
    }
    get hasUnbind() {
        return false;
    }
    evaluate(t, e, s, r) {
        return;
    }
    assign(t, e, s, r) {
        var i;
        const n = this.list;
        const o = n.length;
        let h;
        let c;
        for (h = 0; h < o; h++) {
            c = n[h];
            switch (c.$kind) {
              case 139289:
                c.assign(t, e, s, r);
                break;

              case 90137:
              case 106521:
                {
                    if ("object" !== typeof r || null === r) throw new Error("AUR0112");
                    let n = c.source.evaluate(t, Scope.create(r), s, null);
                    if (void 0 === n) n = null === (i = c.initializer) || void 0 === i ? void 0 : i.evaluate(t, e, s, null);
                    c.assign(t, e, s, n);
                    break;
                }
            }
        }
    }
    accept(t) {
        return t.visitDestructuringAssignmentExpression(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class DestructuringAssignmentSingleExpression {
    constructor(t, e, s) {
        this.target = t;
        this.source = e;
        this.initializer = s;
    }
    get $kind() {
        return 139289;
    }
    evaluate(t, e, s, r) {
        return;
    }
    assign(t, e, s, r) {
        var i;
        if (null == r) return;
        if ("object" !== typeof r) throw new Error("AUR0112");
        let n = this.source.evaluate(t, Scope.create(r), s, null);
        if (void 0 === n) n = null === (i = this.initializer) || void 0 === i ? void 0 : i.evaluate(t, e, s, null);
        this.target.assign(t, e, s, n);
    }
    accept(t) {
        return t.visitDestructuringAssignmentSingleExpression(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

class DestructuringAssignmentRestExpression {
    constructor(t, e) {
        this.target = t;
        this.indexOrProperties = e;
    }
    get $kind() {
        return 139289;
    }
    evaluate(t, e, s, r) {
        return;
    }
    assign(t, e, s, r) {
        if (null == r) return;
        if ("object" !== typeof r) throw new Error("AUR0112");
        const i = this.indexOrProperties;
        let n;
        if ((0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isArrayIndex)(i)) {
            if (!Array.isArray(r)) throw new Error("AUR0112");
            n = r.slice(i);
        } else n = Object.entries(r).reduce(((t, [e, s]) => {
            if (!i.includes(e)) t[e] = s;
            return t;
        }), {});
        this.target.assign(t, e, s, n);
    }
    accept(t) {
        return t.visitDestructuringAssignmentRestExpression(this);
    }
    toString() {
        return Unparser.unparse(this);
    }
}

function N(t, e, s) {
    const r = null == e ? null : e[s];
    if (p(r)) return r;
    if (!(8 & t) && null == r) return null;
    throw new Error(`AUR0111:${s}`);
}

function K(t, e) {
    for (let s = 0, r = t.length; s < r; ++s) e(t, s, t[s]);
}

function q(t, e) {
    const s = Array(t.size);
    let r = -1;
    for (const e of t.entries()) s[++r] = e;
    K(s, e);
}

function H(t, e) {
    const s = Array(t.size);
    let r = -1;
    for (const e of t.keys()) s[++r] = e;
    K(s, e);
}

function Q(t, e) {
    const s = Array(t);
    for (let e = 0; e < t; ++e) s[e] = e;
    K(s, e);
}

const _ = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("ICoercionConfiguration");

var z;

(function(t) {
    t[t["oneTime"] = 1] = "oneTime";
    t[t["toView"] = 2] = "toView";
    t[t["fromView"] = 4] = "fromView";
    t[t["twoWay"] = 6] = "twoWay";
    t[t["default"] = 8] = "default";
})(z || (z = {}));

var W;

(function(t) {
    t[t["none"] = 0] = "none";
    t[t["persistentBindingFlags"] = 961] = "persistentBindingFlags";
    t[t["allowParentScopeTraversal"] = 64] = "allowParentScopeTraversal";
    t[t["observeLeafPropertiesOnly"] = 128] = "observeLeafPropertiesOnly";
    t[t["targetObserverFlags"] = 769] = "targetObserverFlags";
    t[t["noFlush"] = 256] = "noFlush";
    t[t["persistentTargetObserverQueue"] = 512] = "persistentTargetObserverQueue";
    t[t["bindingStrategy"] = 1] = "bindingStrategy";
    t[t["isStrictBindingStrategy"] = 1] = "isStrictBindingStrategy";
    t[t["fromBind"] = 2] = "fromBind";
    t[t["fromUnbind"] = 4] = "fromUnbind";
    t[t["mustEvaluate"] = 8] = "mustEvaluate";
    t[t["isTraversingParentScope"] = 16] = "isTraversingParentScope";
    t[t["dispose"] = 32] = "dispose";
})(W || (W = {}));

var G;

(function(t) {
    t[t["None"] = 0] = "None";
    t[t["Subscriber0"] = 1] = "Subscriber0";
    t[t["Subscriber1"] = 2] = "Subscriber1";
    t[t["Subscriber2"] = 4] = "Subscriber2";
    t[t["SubscribersRest"] = 8] = "SubscribersRest";
    t[t["Any"] = 15] = "Any";
})(G || (G = {}));

var Z;

(function(t) {
    t[t["none"] = 0] = "none";
    t[t["capturing"] = 1] = "capturing";
    t[t["bubbling"] = 2] = "bubbling";
})(Z || (Z = {}));

var J;

(function(t) {
    t[t["indexed"] = 8] = "indexed";
    t[t["keyed"] = 4] = "keyed";
    t[t["array"] = 9] = "array";
    t[t["map"] = 6] = "map";
    t[t["set"] = 7] = "set";
})(J || (J = {}));

var X;

(function(t) {
    t[t["None"] = 0] = "None";
    t[t["Observer"] = 1] = "Observer";
    t[t["Node"] = 2] = "Node";
    t[t["Layout"] = 4] = "Layout";
    t[t["Primtive"] = 8] = "Primtive";
    t[t["Array"] = 18] = "Array";
    t[t["Set"] = 34] = "Set";
    t[t["Map"] = 66] = "Map";
})(X || (X = {}));

function Y(t, e) {
    const {length: s} = t;
    const r = Array(s);
    let i = 0;
    while (i < s) {
        r[i] = t[i];
        ++i;
    }
    if (void 0 !== e) r.deletedItems = e.slice(0); else if (void 0 !== t.deletedItems) r.deletedItems = t.deletedItems.slice(0); else r.deletedItems = [];
    r.isIndexMap = true;
    return r;
}

function tt(t = 0) {
    const e = Array(t);
    let s = 0;
    while (s < t) e[s] = s++;
    e.deletedItems = [];
    e.isIndexMap = true;
    return e;
}

function et(t) {
    const e = t.slice();
    e.deletedItems = t.deletedItems.slice();
    e.isIndexMap = true;
    return e;
}

function st(t) {
    return t instanceof Array && true === t.isIndexMap;
}

function rt(t) {
    return null == t ? it : it(t);
}

function it(t) {
    const e = t.prototype;
    v(e, "subs", {
        get: nt
    });
    b(e, "subscribe", ot);
    b(e, "unsubscribe", ht);
}

class SubscriberRecord {
    constructor() {
        this.sf = 0;
        this.count = 0;
    }
    add(t) {
        if (this.has(t)) return false;
        const e = this.sf;
        if (0 === (1 & e)) {
            this.s0 = t;
            this.sf |= 1;
        } else if (0 === (2 & e)) {
            this.s1 = t;
            this.sf |= 2;
        } else if (0 === (4 & e)) {
            this.s2 = t;
            this.sf |= 4;
        } else if (0 === (8 & e)) {
            this.sr = [ t ];
            this.sf |= 8;
        } else this.sr.push(t);
        ++this.count;
        return true;
    }
    has(t) {
        const e = this.sf;
        if ((1 & e) > 0 && this.s0 === t) return true;
        if ((2 & e) > 0 && this.s1 === t) return true;
        if ((4 & e) > 0 && this.s2 === t) return true;
        if ((8 & e) > 0) {
            const e = this.sr;
            const s = e.length;
            let r = 0;
            for (;r < s; ++r) if (e[r] === t) return true;
        }
        return false;
    }
    any() {
        return 0 !== this.sf;
    }
    remove(t) {
        const e = this.sf;
        if ((1 & e) > 0 && this.s0 === t) {
            this.s0 = void 0;
            this.sf = 1 ^ (1 | this.sf);
            --this.count;
            return true;
        } else if ((2 & e) > 0 && this.s1 === t) {
            this.s1 = void 0;
            this.sf = 2 ^ (2 | this.sf);
            --this.count;
            return true;
        } else if ((4 & e) > 0 && this.s2 === t) {
            this.s2 = void 0;
            this.sf = 4 ^ (4 | this.sf);
            --this.count;
            return true;
        } else if ((8 & e) > 0) {
            const e = this.sr;
            const s = e.length;
            let r = 0;
            for (;r < s; ++r) if (e[r] === t) {
                e.splice(r, 1);
                if (1 === s) this.sf = 8 ^ (8 | this.sf);
                --this.count;
                return true;
            }
        }
        return false;
    }
    notify(t, e, s) {
        const r = this.s0;
        const i = this.s1;
        const n = this.s2;
        let o = this.sr;
        if (void 0 !== o) o = o.slice();
        if (void 0 !== r) r.handleChange(t, e, s);
        if (void 0 !== i) i.handleChange(t, e, s);
        if (void 0 !== n) n.handleChange(t, e, s);
        if (void 0 !== o) {
            const r = o.length;
            let i;
            let n = 0;
            for (;n < r; ++n) {
                i = o[n];
                if (void 0 !== i) i.handleChange(t, e, s);
            }
        }
    }
    notifyCollection(t, e) {
        const s = this.s0;
        const r = this.s1;
        const i = this.s2;
        let n = this.sr;
        if (void 0 !== n) n = n.slice();
        if (void 0 !== s) s.handleCollectionChange(t, e);
        if (void 0 !== r) r.handleCollectionChange(t, e);
        if (void 0 !== i) i.handleCollectionChange(t, e);
        if (void 0 !== n) {
            const s = n.length;
            let r;
            let i = 0;
            for (;i < s; ++i) {
                r = n[i];
                if (void 0 !== r) r.handleCollectionChange(t, e);
            }
        }
    }
}

function nt() {
    return w(this, "subs", new SubscriberRecord);
}

function ot(t) {
    return this.subs.add(t);
}

function ht(t) {
    return this.subs.remove(t);
}

function ct(t) {
    return null == t ? ut : ut(t);
}

function ut(t) {
    const e = t.prototype;
    v(e, "queue", {
        get: at
    });
}

class FlushQueue {
    constructor() {
        this.t = false;
        this.i = new Set;
    }
    get count() {
        return this.i.size;
    }
    add(t) {
        this.i.add(t);
        if (this.t) return;
        this.t = true;
        try {
            this.i.forEach(lt);
        } finally {
            this.t = false;
        }
    }
    clear() {
        this.i.clear();
        this.t = false;
    }
}

FlushQueue.instance = new FlushQueue;

function at() {
    return FlushQueue.instance;
}

function lt(t, e, s) {
    s.delete(t);
    t.flush();
}

class CollectionLengthObserver {
    constructor(t) {
        this.owner = t;
        this.type = 18;
        this.f = 0;
        this.v = this.h = (this.o = t.collection).length;
    }
    getValue() {
        return this.o.length;
    }
    setValue(t, e) {
        const s = this.v;
        if (t !== s && (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isArrayIndex)(t)) {
            if (0 === (256 & e)) this.o.length = t;
            this.v = t;
            this.h = s;
            this.f = e;
            this.queue.add(this);
        }
    }
    handleCollectionChange(t, e) {
        const s = this.v;
        const r = this.o.length;
        if ((this.v = r) !== s) {
            this.h = s;
            this.f = e;
            this.queue.add(this);
        }
    }
    flush() {
        pt = this.h;
        this.h = this.v;
        this.subs.notify(this.v, pt, this.f);
    }
}

class CollectionSizeObserver {
    constructor(t) {
        this.owner = t;
        this.f = 0;
        this.v = this.h = (this.o = t.collection).size;
        this.type = this.o instanceof Map ? 66 : 34;
    }
    getValue() {
        return this.o.size;
    }
    setValue() {
        throw new Error("AUR02");
    }
    handleCollectionChange(t, e) {
        const s = this.v;
        const r = this.o.size;
        if ((this.v = r) !== s) {
            this.h = s;
            this.f = e;
            this.queue.add(this);
        }
    }
    flush() {
        pt = this.h;
        this.h = this.v;
        this.subs.notify(this.v, pt, this.f);
    }
}

function ft(t) {
    const e = t.prototype;
    b(e, "subscribe", dt, true);
    b(e, "unsubscribe", vt, true);
    ct(t);
    rt(t);
}

function dt(t) {
    if (this.subs.add(t) && 1 === this.subs.count) this.owner.subscribe(this);
}

function vt(t) {
    if (this.subs.remove(t) && 0 === this.subs.count) this.owner.subscribe(this);
}

ft(CollectionLengthObserver);

ft(CollectionSizeObserver);

let pt;

const gt = new WeakMap;

function wt(t, e) {
    if (t === e) return 0;
    t = null === t ? "null" : t.toString();
    e = null === e ? "null" : e.toString();
    return t < e ? -1 : 1;
}

function bt(t, e) {
    if (void 0 === t) if (void 0 === e) return 0; else return 1;
    if (void 0 === e) return -1;
    return 0;
}

function Et(t, e, s, r, i) {
    let n, o, h, c, u;
    let a, l;
    for (a = s + 1; a < r; a++) {
        n = t[a];
        o = e[a];
        for (l = a - 1; l >= s; l--) {
            h = t[l];
            c = e[l];
            u = i(h, n);
            if (u > 0) {
                t[l + 1] = h;
                e[l + 1] = c;
            } else break;
        }
        t[l + 1] = n;
        e[l + 1] = o;
    }
}

function At(t, e, s, r, i) {
    let n = 0, o = 0;
    let h, c, u;
    let a, l, f;
    let d, v, p;
    let g, w;
    let b, E, A, y;
    let m, U, x, S;
    while (true) {
        if (r - s <= 10) {
            Et(t, e, s, r, i);
            return;
        }
        n = s + (r - s >> 1);
        h = t[s];
        a = e[s];
        c = t[r - 1];
        l = e[r - 1];
        u = t[n];
        f = e[n];
        d = i(h, c);
        if (d > 0) {
            g = h;
            w = a;
            h = c;
            a = l;
            c = g;
            l = w;
        }
        v = i(h, u);
        if (v >= 0) {
            g = h;
            w = a;
            h = u;
            a = f;
            u = c;
            f = l;
            c = g;
            l = w;
        } else {
            p = i(c, u);
            if (p > 0) {
                g = c;
                w = l;
                c = u;
                l = f;
                u = g;
                f = w;
            }
        }
        t[s] = h;
        e[s] = a;
        t[r - 1] = u;
        e[r - 1] = f;
        b = c;
        E = l;
        A = s + 1;
        y = r - 1;
        t[n] = t[A];
        e[n] = e[A];
        t[A] = b;
        e[A] = E;
        t: for (o = A + 1; o < y; o++) {
            m = t[o];
            U = e[o];
            x = i(m, b);
            if (x < 0) {
                t[o] = t[A];
                e[o] = e[A];
                t[A] = m;
                e[A] = U;
                A++;
            } else if (x > 0) {
                do {
                    y--;
                    if (y == o) break t;
                    S = t[y];
                    x = i(S, b);
                } while (x > 0);
                t[o] = t[y];
                e[o] = e[y];
                t[y] = m;
                e[y] = U;
                if (x < 0) {
                    m = t[o];
                    U = e[o];
                    t[o] = t[A];
                    e[o] = e[A];
                    t[A] = m;
                    e[A] = U;
                    A++;
                }
            }
        }
        if (r - y < A - s) {
            At(t, e, y, r, i);
            r = A;
        } else {
            At(t, e, s, A, i);
            s = y;
        }
    }
}

const yt = Array.prototype;

const mt = yt.push;

const Ut = yt.unshift;

const xt = yt.pop;

const St = yt.shift;

const Ot = yt.splice;

const Ct = yt.reverse;

const kt = yt.sort;

const Bt = {
    push: mt,
    unshift: Ut,
    pop: xt,
    shift: St,
    splice: Ot,
    reverse: Ct,
    sort: kt
};

const $t = [ "push", "unshift", "pop", "shift", "splice", "reverse", "sort" ];

const Lt = {
    push: function(...t) {
        const e = gt.get(this);
        if (void 0 === e) return mt.apply(this, t);
        const s = this.length;
        const r = t.length;
        if (0 === r) return s;
        this.length = e.indexMap.length = s + r;
        let i = s;
        while (i < this.length) {
            this[i] = t[i - s];
            e.indexMap[i] = -2;
            i++;
        }
        e.notify();
        return this.length;
    },
    unshift: function(...t) {
        const e = gt.get(this);
        if (void 0 === e) return Ut.apply(this, t);
        const s = t.length;
        const r = new Array(s);
        let i = 0;
        while (i < s) r[i++] = -2;
        Ut.apply(e.indexMap, r);
        const n = Ut.apply(this, t);
        e.notify();
        return n;
    },
    pop: function() {
        const t = gt.get(this);
        if (void 0 === t) return xt.call(this);
        const e = t.indexMap;
        const s = xt.call(this);
        const r = e.length - 1;
        if (e[r] > -1) e.deletedItems.push(e[r]);
        xt.call(e);
        t.notify();
        return s;
    },
    shift: function() {
        const t = gt.get(this);
        if (void 0 === t) return St.call(this);
        const e = t.indexMap;
        const s = St.call(this);
        if (e[0] > -1) e.deletedItems.push(e[0]);
        St.call(e);
        t.notify();
        return s;
    },
    splice: function(...t) {
        const e = t[0];
        const s = t[1];
        const r = gt.get(this);
        if (void 0 === r) return Ot.apply(this, t);
        const i = this.length;
        const n = 0 | e;
        const o = n < 0 ? Math.max(i + n, 0) : Math.min(n, i);
        const h = r.indexMap;
        const c = t.length;
        const u = 0 === c ? 0 : 1 === c ? i - o : s;
        if (u > 0) {
            let t = o;
            const e = t + u;
            while (t < e) {
                if (h[t] > -1) h.deletedItems.push(h[t]);
                t++;
            }
        }
        if (c > 2) {
            const t = c - 2;
            const r = new Array(t);
            let i = 0;
            while (i < t) r[i++] = -2;
            Ot.call(h, e, s, ...r);
        } else Ot.apply(h, t);
        const a = Ot.apply(this, t);
        r.notify();
        return a;
    },
    reverse: function() {
        const t = gt.get(this);
        if (void 0 === t) {
            Ct.call(this);
            return this;
        }
        const e = this.length;
        const s = e / 2 | 0;
        let r = 0;
        while (r !== s) {
            const s = e - r - 1;
            const i = this[r];
            const n = t.indexMap[r];
            const o = this[s];
            const h = t.indexMap[s];
            this[r] = o;
            t.indexMap[r] = h;
            this[s] = i;
            t.indexMap[s] = n;
            r++;
        }
        t.notify();
        return this;
    },
    sort: function(t) {
        const e = gt.get(this);
        if (void 0 === e) {
            kt.call(this, t);
            return this;
        }
        const s = this.length;
        if (s < 2) return this;
        At(this, e.indexMap, 0, s, bt);
        let r = 0;
        while (r < s) {
            if (void 0 === this[r]) break;
            r++;
        }
        if (void 0 === t || !p(t)) t = wt;
        At(this, e.indexMap, 0, r, t);
        e.notify();
        return this;
    }
};

for (const t of $t) v(Lt[t], "observing", {
    value: true,
    writable: false,
    configurable: false,
    enumerable: false
});

let Rt = false;

function Pt() {
    for (const t of $t) if (true !== yt[t].observing) w(yt, t, Lt[t]);
}

function Tt() {
    for (const t of $t) if (true === yt[t].observing) w(yt, t, Bt[t]);
}

class ArrayObserver {
    constructor(t) {
        this.type = 18;
        if (!Rt) {
            Rt = true;
            Pt();
        }
        this.indexObservers = {};
        this.collection = t;
        this.indexMap = tt(t.length);
        this.lenObs = void 0;
        gt.set(t, this);
    }
    notify() {
        const t = this.indexMap;
        const e = this.collection.length;
        this.indexMap = tt(e);
        this.subs.notifyCollection(t, 0);
    }
    getLengthObserver() {
        var t;
        return null !== (t = this.lenObs) && void 0 !== t ? t : this.lenObs = new CollectionLengthObserver(this);
    }
    getIndexObserver(t) {
        var e;
        var s;
        return null !== (e = (s = this.indexObservers)[t]) && void 0 !== e ? e : s[t] = new ArrayIndexObserver(this, t);
    }
}

class ArrayIndexObserver {
    constructor(t, e) {
        this.owner = t;
        this.index = e;
        this.doNotCache = true;
        this.value = this.getValue();
    }
    getValue() {
        return this.owner.collection[this.index];
    }
    setValue(t, e) {
        if (t === this.getValue()) return;
        const s = this.owner;
        const r = this.index;
        const i = s.indexMap;
        if (i[r] > -1) i.deletedItems.push(i[r]);
        i[r] = -2;
        s.collection[r] = t;
        s.notify();
    }
    handleCollectionChange(t, e) {
        const s = this.index;
        const r = t[s] === s;
        if (r) return;
        const i = this.value;
        const n = this.value = this.getValue();
        if (i !== n) this.subs.notify(n, i, e);
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) this.owner.subscribe(this);
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) this.owner.unsubscribe(this);
    }
}

rt(ArrayObserver);

rt(ArrayIndexObserver);

function jt(t) {
    let e = gt.get(t);
    if (void 0 === e) e = new ArrayObserver(t);
    return e;
}

function It(t) {
    let e = 0;
    let s = 0;
    const r = t.length;
    for (let i = 0; i < r; ++i) {
        while (t.deletedItems[s] <= i - e) {
            ++s;
            --e;
        }
        if (-2 === t[i]) ++e; else t[i] += e;
    }
}

function Mt(t, e) {
    const s = t.slice();
    const r = e.length;
    let i = 0;
    let n = 0;
    while (i < r) {
        n = e[i];
        if (-2 !== n) t[i] = s[n];
        ++i;
    }
}

const Dt = new WeakMap;

const Ft = Set.prototype;

const Vt = Ft.add;

const Nt = Ft.clear;

const Kt = Ft.delete;

const qt = {
    add: Vt,
    clear: Nt,
    delete: Kt
};

const Ht = [ "add", "clear", "delete" ];

const Qt = {
    add: function(t) {
        const e = Dt.get(this);
        if (void 0 === e) {
            Vt.call(this, t);
            return this;
        }
        const s = this.size;
        Vt.call(this, t);
        const r = this.size;
        if (r === s) return this;
        e.indexMap[s] = -2;
        e.notify();
        return this;
    },
    clear: function() {
        const t = Dt.get(this);
        if (void 0 === t) return Nt.call(this);
        const e = this.size;
        if (e > 0) {
            const e = t.indexMap;
            let s = 0;
            for (const t of this.keys()) {
                if (e[s] > -1) e.deletedItems.push(e[s]);
                s++;
            }
            Nt.call(this);
            e.length = 0;
            t.notify();
        }
        return;
    },
    delete: function(t) {
        const e = Dt.get(this);
        if (void 0 === e) return Kt.call(this, t);
        const s = this.size;
        if (0 === s) return false;
        let r = 0;
        const i = e.indexMap;
        for (const s of this.keys()) {
            if (s === t) {
                if (i[r] > -1) i.deletedItems.push(i[r]);
                i.splice(r, 1);
                const s = Kt.call(this, t);
                if (true === s) e.notify();
                return s;
            }
            r++;
        }
        return false;
    }
};

const _t = {
    writable: true,
    enumerable: false,
    configurable: true
};

for (const t of Ht) v(Qt[t], "observing", {
    value: true,
    writable: false,
    configurable: false,
    enumerable: false
});

let zt = false;

function Wt() {
    for (const t of Ht) if (true !== Ft[t].observing) v(Ft, t, {
        ..._t,
        value: Qt[t]
    });
}

function Gt() {
    for (const t of Ht) if (true === Ft[t].observing) v(Ft, t, {
        ..._t,
        value: qt[t]
    });
}

class SetObserver {
    constructor(t) {
        this.type = 34;
        if (!zt) {
            zt = true;
            Wt();
        }
        this.collection = t;
        this.indexMap = tt(t.size);
        this.lenObs = void 0;
        Dt.set(t, this);
    }
    notify() {
        const t = this.indexMap;
        const e = this.collection.size;
        this.indexMap = tt(e);
        this.subs.notifyCollection(t, 0);
    }
    getLengthObserver() {
        var t;
        return null !== (t = this.lenObs) && void 0 !== t ? t : this.lenObs = new CollectionSizeObserver(this);
    }
}

rt(SetObserver);

function Zt(t) {
    let e = Dt.get(t);
    if (void 0 === e) e = new SetObserver(t);
    return e;
}

const Jt = new WeakMap;

const Xt = Map.prototype;

const Yt = Xt.set;

const te = Xt.clear;

const ee = Xt.delete;

const se = {
    set: Yt,
    clear: te,
    delete: ee
};

const re = [ "set", "clear", "delete" ];

const ie = {
    set: function(t, e) {
        const s = Jt.get(this);
        if (void 0 === s) {
            Yt.call(this, t, e);
            return this;
        }
        const r = this.get(t);
        const i = this.size;
        Yt.call(this, t, e);
        const n = this.size;
        if (n === i) {
            let e = 0;
            for (const i of this.entries()) {
                if (i[0] === t) {
                    if (i[1] !== r) {
                        s.indexMap.deletedItems.push(s.indexMap[e]);
                        s.indexMap[e] = -2;
                        s.notify();
                    }
                    return this;
                }
                e++;
            }
            return this;
        }
        s.indexMap[i] = -2;
        s.notify();
        return this;
    },
    clear: function() {
        const t = Jt.get(this);
        if (void 0 === t) return te.call(this);
        const e = this.size;
        if (e > 0) {
            const e = t.indexMap;
            let s = 0;
            for (const t of this.keys()) {
                if (e[s] > -1) e.deletedItems.push(e[s]);
                s++;
            }
            te.call(this);
            e.length = 0;
            t.notify();
        }
        return;
    },
    delete: function(t) {
        const e = Jt.get(this);
        if (void 0 === e) return ee.call(this, t);
        const s = this.size;
        if (0 === s) return false;
        let r = 0;
        const i = e.indexMap;
        for (const s of this.keys()) {
            if (s === t) {
                if (i[r] > -1) i.deletedItems.push(i[r]);
                i.splice(r, 1);
                const s = ee.call(this, t);
                if (true === s) e.notify();
                return s;
            }
            ++r;
        }
        return false;
    }
};

const ne = {
    writable: true,
    enumerable: false,
    configurable: true
};

for (const t of re) v(ie[t], "observing", {
    value: true,
    writable: false,
    configurable: false,
    enumerable: false
});

let oe = false;

function he() {
    for (const t of re) if (true !== Xt[t].observing) v(Xt, t, {
        ...ne,
        value: ie[t]
    });
}

function ce() {
    for (const t of re) if (true === Xt[t].observing) v(Xt, t, {
        ...ne,
        value: se[t]
    });
}

class MapObserver {
    constructor(t) {
        this.type = 66;
        if (!oe) {
            oe = true;
            he();
        }
        this.collection = t;
        this.indexMap = tt(t.size);
        this.lenObs = void 0;
        Jt.set(t, this);
    }
    notify() {
        const t = this.indexMap;
        const e = this.collection.size;
        this.indexMap = tt(e);
        this.subs.notifyCollection(t, 0);
    }
    getLengthObserver() {
        var t;
        return null !== (t = this.lenObs) && void 0 !== t ? t : this.lenObs = new CollectionSizeObserver(this);
    }
}

rt(MapObserver);

function ue(t) {
    let e = Jt.get(t);
    if (void 0 === e) e = new MapObserver(t);
    return e;
}

function ae(t, e) {
    const s = this.oL.getObserver(t, e);
    this.obs.add(s);
}

function le() {
    return w(this, "obs", new BindingObserverRecord(this));
}

function fe(t) {
    let e;
    if (t instanceof Array) e = jt(t); else if (t instanceof Set) e = Zt(t); else if (t instanceof Map) e = ue(t); else throw new Error("AUR0210");
    this.obs.add(e);
}

function de(t) {
    this.obs.add(t);
}

function ve() {
    throw new Error(`AUR2011:handleChange`);
}

function pe() {
    throw new Error("AUR2012:handleCollectionChange");
}

class BindingObserverRecord {
    constructor(t) {
        this.version = 0;
        this.count = 0;
        this.o = new Map;
        this.b = t;
    }
    handleChange(t, e, s) {
        return this.b.interceptor.handleChange(t, e, s);
    }
    handleCollectionChange(t, e) {
        this.b.interceptor.handleCollectionChange(t, e);
    }
    add(t) {
        if (!this.o.has(t)) {
            t.subscribe(this);
            ++this.count;
        }
        this.o.set(t, this.version);
    }
    clear() {
        this.o.forEach(we, this);
        this.count = this.o.size;
    }
    clearAll() {
        this.o.forEach(ge, this);
        this.o.clear();
        this.count = 0;
    }
}

function ge(t, e) {
    e.unsubscribe(this);
}

function we(t, e) {
    if (this.version !== t) {
        e.unsubscribe(this);
        this.o.delete(e);
    }
}

function be(t) {
    const e = t.prototype;
    b(e, "observe", ae, true);
    b(e, "observeCollection", fe, true);
    b(e, "subscribeTo", de, true);
    v(e, "obs", {
        get: le
    });
    b(e, "handleChange", ve);
    b(e, "handleCollectionChange", pe);
    return t;
}

function Ee(t) {
    return null == t ? be : be(t);
}

class BindingMediator {
    constructor(t, e, s, r) {
        this.key = t;
        this.binding = e;
        this.oL = s;
        this.locator = r;
        this.interceptor = this;
    }
    $bind() {
        throw new Error("AUR0213:$bind");
    }
    $unbind() {
        throw new Error("AUR0214:$unbind");
    }
    handleChange(t, e, s) {
        this.binding[this.key](t, e, s);
    }
}

be(BindingMediator);

const Ae = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("IExpressionParser", (t => t.singleton(ExpressionParser)));

class ExpressionParser {
    constructor() {
        this.u = E();
        this.A = E();
        this.U = E();
    }
    parse(t, e) {
        let s;
        switch (e) {
          case 16:
            return new CustomExpression(t);

          case 1:
            s = this.U[t];
            if (void 0 === s) s = this.U[t] = this.$parse(t, e);
            return s;

          case 2:
            s = this.A[t];
            if (void 0 === s) s = this.A[t] = this.$parse(t, e);
            return s;

          default:
            if (0 === t.length) {
                if ((e & (4 | 8)) > 0) return PrimitiveLiteralExpression.$empty;
                throw new Error("AUR0169");
            }
            s = this.u[t];
            if (void 0 === s) s = this.u[t] = this.$parse(t, e);
            return s;
        }
    }
    $parse(t, e) {
        Pe.ip = t;
        Pe.length = t.length;
        Pe.index = 0;
        Pe.O = t.charCodeAt(0);
        return je(Pe, 0, 61, void 0 === e ? 8 : e);
    }
}

var ye;

(function(t) {
    t[t["Null"] = 0] = "Null";
    t[t["Backspace"] = 8] = "Backspace";
    t[t["Tab"] = 9] = "Tab";
    t[t["LineFeed"] = 10] = "LineFeed";
    t[t["VerticalTab"] = 11] = "VerticalTab";
    t[t["FormFeed"] = 12] = "FormFeed";
    t[t["CarriageReturn"] = 13] = "CarriageReturn";
    t[t["Space"] = 32] = "Space";
    t[t["Exclamation"] = 33] = "Exclamation";
    t[t["DoubleQuote"] = 34] = "DoubleQuote";
    t[t["Dollar"] = 36] = "Dollar";
    t[t["Percent"] = 37] = "Percent";
    t[t["Ampersand"] = 38] = "Ampersand";
    t[t["SingleQuote"] = 39] = "SingleQuote";
    t[t["OpenParen"] = 40] = "OpenParen";
    t[t["CloseParen"] = 41] = "CloseParen";
    t[t["Asterisk"] = 42] = "Asterisk";
    t[t["Plus"] = 43] = "Plus";
    t[t["Comma"] = 44] = "Comma";
    t[t["Minus"] = 45] = "Minus";
    t[t["Dot"] = 46] = "Dot";
    t[t["Slash"] = 47] = "Slash";
    t[t["Semicolon"] = 59] = "Semicolon";
    t[t["Backtick"] = 96] = "Backtick";
    t[t["OpenBracket"] = 91] = "OpenBracket";
    t[t["Backslash"] = 92] = "Backslash";
    t[t["CloseBracket"] = 93] = "CloseBracket";
    t[t["Caret"] = 94] = "Caret";
    t[t["Underscore"] = 95] = "Underscore";
    t[t["OpenBrace"] = 123] = "OpenBrace";
    t[t["Bar"] = 124] = "Bar";
    t[t["CloseBrace"] = 125] = "CloseBrace";
    t[t["Colon"] = 58] = "Colon";
    t[t["LessThan"] = 60] = "LessThan";
    t[t["Equals"] = 61] = "Equals";
    t[t["GreaterThan"] = 62] = "GreaterThan";
    t[t["Question"] = 63] = "Question";
    t[t["Zero"] = 48] = "Zero";
    t[t["One"] = 49] = "One";
    t[t["Two"] = 50] = "Two";
    t[t["Three"] = 51] = "Three";
    t[t["Four"] = 52] = "Four";
    t[t["Five"] = 53] = "Five";
    t[t["Six"] = 54] = "Six";
    t[t["Seven"] = 55] = "Seven";
    t[t["Eight"] = 56] = "Eight";
    t[t["Nine"] = 57] = "Nine";
    t[t["UpperA"] = 65] = "UpperA";
    t[t["UpperB"] = 66] = "UpperB";
    t[t["UpperC"] = 67] = "UpperC";
    t[t["UpperD"] = 68] = "UpperD";
    t[t["UpperE"] = 69] = "UpperE";
    t[t["UpperF"] = 70] = "UpperF";
    t[t["UpperG"] = 71] = "UpperG";
    t[t["UpperH"] = 72] = "UpperH";
    t[t["UpperI"] = 73] = "UpperI";
    t[t["UpperJ"] = 74] = "UpperJ";
    t[t["UpperK"] = 75] = "UpperK";
    t[t["UpperL"] = 76] = "UpperL";
    t[t["UpperM"] = 77] = "UpperM";
    t[t["UpperN"] = 78] = "UpperN";
    t[t["UpperO"] = 79] = "UpperO";
    t[t["UpperP"] = 80] = "UpperP";
    t[t["UpperQ"] = 81] = "UpperQ";
    t[t["UpperR"] = 82] = "UpperR";
    t[t["UpperS"] = 83] = "UpperS";
    t[t["UpperT"] = 84] = "UpperT";
    t[t["UpperU"] = 85] = "UpperU";
    t[t["UpperV"] = 86] = "UpperV";
    t[t["UpperW"] = 87] = "UpperW";
    t[t["UpperX"] = 88] = "UpperX";
    t[t["UpperY"] = 89] = "UpperY";
    t[t["UpperZ"] = 90] = "UpperZ";
    t[t["LowerA"] = 97] = "LowerA";
    t[t["LowerB"] = 98] = "LowerB";
    t[t["LowerC"] = 99] = "LowerC";
    t[t["LowerD"] = 100] = "LowerD";
    t[t["LowerE"] = 101] = "LowerE";
    t[t["LowerF"] = 102] = "LowerF";
    t[t["LowerG"] = 103] = "LowerG";
    t[t["LowerH"] = 104] = "LowerH";
    t[t["LowerI"] = 105] = "LowerI";
    t[t["LowerJ"] = 106] = "LowerJ";
    t[t["LowerK"] = 107] = "LowerK";
    t[t["LowerL"] = 108] = "LowerL";
    t[t["LowerM"] = 109] = "LowerM";
    t[t["LowerN"] = 110] = "LowerN";
    t[t["LowerO"] = 111] = "LowerO";
    t[t["LowerP"] = 112] = "LowerP";
    t[t["LowerQ"] = 113] = "LowerQ";
    t[t["LowerR"] = 114] = "LowerR";
    t[t["LowerS"] = 115] = "LowerS";
    t[t["LowerT"] = 116] = "LowerT";
    t[t["LowerU"] = 117] = "LowerU";
    t[t["LowerV"] = 118] = "LowerV";
    t[t["LowerW"] = 119] = "LowerW";
    t[t["LowerX"] = 120] = "LowerX";
    t[t["LowerY"] = 121] = "LowerY";
    t[t["LowerZ"] = 122] = "LowerZ";
})(ye || (ye = {}));

function me(t) {
    switch (t) {
      case 98:
        return 8;

      case 116:
        return 9;

      case 110:
        return 10;

      case 118:
        return 11;

      case 102:
        return 12;

      case 114:
        return 13;

      case 34:
        return 34;

      case 39:
        return 39;

      case 92:
        return 92;

      default:
        return t;
    }
}

var Ue;

(function(t) {
    t[t["Reset"] = 0] = "Reset";
    t[t["Ancestor"] = 511] = "Ancestor";
    t[t["This"] = 512] = "This";
    t[t["Scope"] = 1024] = "Scope";
    t[t["Member"] = 2048] = "Member";
    t[t["Keyed"] = 4096] = "Keyed";
})(Ue || (Ue = {}));

var xe;

(function(t) {
    t[t["Variadic"] = 61] = "Variadic";
    t[t["Assign"] = 62] = "Assign";
    t[t["Conditional"] = 63] = "Conditional";
    t[t["LogicalOR"] = 64] = "LogicalOR";
    t[t["LogicalAND"] = 128] = "LogicalAND";
    t[t["Equality"] = 192] = "Equality";
    t[t["Relational"] = 256] = "Relational";
    t[t["Additive"] = 320] = "Additive";
    t[t["Multiplicative"] = 384] = "Multiplicative";
    t[t["Binary"] = 448] = "Binary";
    t[t["LeftHandSide"] = 449] = "LeftHandSide";
    t[t["Primary"] = 450] = "Primary";
    t[t["Unary"] = 451] = "Unary";
})(xe || (xe = {}));

var Se;

(function(t) {
    t[t["EOF"] = 1572864] = "EOF";
    t[t["ExpressionTerminal"] = 1048576] = "ExpressionTerminal";
    t[t["AccessScopeTerminal"] = 524288] = "AccessScopeTerminal";
    t[t["ClosingToken"] = 262144] = "ClosingToken";
    t[t["OpeningToken"] = 131072] = "OpeningToken";
    t[t["BinaryOp"] = 65536] = "BinaryOp";
    t[t["UnaryOp"] = 32768] = "UnaryOp";
    t[t["LeftHandSide"] = 16384] = "LeftHandSide";
    t[t["StringOrNumericLiteral"] = 12288] = "StringOrNumericLiteral";
    t[t["NumericLiteral"] = 8192] = "NumericLiteral";
    t[t["StringLiteral"] = 4096] = "StringLiteral";
    t[t["IdentifierName"] = 3072] = "IdentifierName";
    t[t["Keyword"] = 2048] = "Keyword";
    t[t["Identifier"] = 1024] = "Identifier";
    t[t["Contextual"] = 512] = "Contextual";
    t[t["Precedence"] = 448] = "Precedence";
    t[t["Type"] = 63] = "Type";
    t[t["FalseKeyword"] = 2048] = "FalseKeyword";
    t[t["TrueKeyword"] = 2049] = "TrueKeyword";
    t[t["NullKeyword"] = 2050] = "NullKeyword";
    t[t["UndefinedKeyword"] = 2051] = "UndefinedKeyword";
    t[t["ThisScope"] = 3076] = "ThisScope";
    t[t["ParentScope"] = 3078] = "ParentScope";
    t[t["OpenParen"] = 671751] = "OpenParen";
    t[t["OpenBrace"] = 131080] = "OpenBrace";
    t[t["Dot"] = 16393] = "Dot";
    t[t["CloseBrace"] = 1835018] = "CloseBrace";
    t[t["CloseParen"] = 1835019] = "CloseParen";
    t[t["Comma"] = 1572876] = "Comma";
    t[t["OpenBracket"] = 671757] = "OpenBracket";
    t[t["CloseBracket"] = 1835022] = "CloseBracket";
    t[t["Colon"] = 1572879] = "Colon";
    t[t["Question"] = 1572880] = "Question";
    t[t["Ampersand"] = 1572883] = "Ampersand";
    t[t["Bar"] = 1572884] = "Bar";
    t[t["BarBar"] = 1638549] = "BarBar";
    t[t["AmpersandAmpersand"] = 1638614] = "AmpersandAmpersand";
    t[t["EqualsEquals"] = 1638679] = "EqualsEquals";
    t[t["ExclamationEquals"] = 1638680] = "ExclamationEquals";
    t[t["EqualsEqualsEquals"] = 1638681] = "EqualsEqualsEquals";
    t[t["ExclamationEqualsEquals"] = 1638682] = "ExclamationEqualsEquals";
    t[t["LessThan"] = 1638747] = "LessThan";
    t[t["GreaterThan"] = 1638748] = "GreaterThan";
    t[t["LessThanEquals"] = 1638749] = "LessThanEquals";
    t[t["GreaterThanEquals"] = 1638750] = "GreaterThanEquals";
    t[t["InKeyword"] = 1640799] = "InKeyword";
    t[t["InstanceOfKeyword"] = 1640800] = "InstanceOfKeyword";
    t[t["Plus"] = 623009] = "Plus";
    t[t["Minus"] = 623010] = "Minus";
    t[t["TypeofKeyword"] = 34851] = "TypeofKeyword";
    t[t["VoidKeyword"] = 34852] = "VoidKeyword";
    t[t["Asterisk"] = 1638885] = "Asterisk";
    t[t["Percent"] = 1638886] = "Percent";
    t[t["Slash"] = 1638887] = "Slash";
    t[t["Equals"] = 1048616] = "Equals";
    t[t["Exclamation"] = 32809] = "Exclamation";
    t[t["TemplateTail"] = 540714] = "TemplateTail";
    t[t["TemplateContinuation"] = 540715] = "TemplateContinuation";
    t[t["OfKeyword"] = 1051180] = "OfKeyword";
})(Se || (Se = {}));

const Oe = PrimitiveLiteralExpression.$false;

const Ce = PrimitiveLiteralExpression.$true;

const ke = PrimitiveLiteralExpression.$null;

const Be = PrimitiveLiteralExpression.$undefined;

const $e = AccessThisExpression.$this;

const Le = AccessThisExpression.$parent;

var Re;

(function(t) {
    t[t["None"] = 0] = "None";
    t[t["Interpolation"] = 1] = "Interpolation";
    t[t["IsIterator"] = 2] = "IsIterator";
    t[t["IsFunction"] = 4] = "IsFunction";
    t[t["IsProperty"] = 8] = "IsProperty";
    t[t["IsCustom"] = 16] = "IsCustom";
})(Re || (Re = {}));

class ParserState {
    constructor(t) {
        this.ip = t;
        this.index = 0;
        this.C = 0;
        this.B = 0;
        this.$ = 1572864;
        this.L = "";
        this.R = true;
        this.length = t.length;
        this.O = t.charCodeAt(0);
    }
    get P() {
        return this.ip.slice(this.C, this.index);
    }
}

const Pe = new ParserState("");

function Te(t, e) {
    Pe.ip = t;
    Pe.length = t.length;
    Pe.index = 0;
    Pe.O = t.charCodeAt(0);
    return je(Pe, 0, 61, void 0 === e ? 8 : e);
}

function je(t, e, s, r) {
    if (16 === r) return new CustomExpression(t.ip);
    if (0 === t.index) {
        if (1 & r) return Ve(t);
        Ke(t);
        if (1048576 & t.$) throw new Error(`AUR0151:${t.ip}`);
    }
    t.R = 448 > s;
    let i;
    if (32768 & t.$) {
        const s = Je[63 & t.$];
        Ke(t);
        i = new UnaryExpression(s, je(t, e, 449, r));
        t.R = false;
    } else {
        t: switch (t.$) {
          case 3078:
            t.R = false;
            do {
                Ke(t);
                e++;
                if (Ge(t, 16393)) {
                    if (16393 === t.$) throw new Error(`AUR0152:${t.ip}`); else if (1572864 === t.$) throw new Error(`AUR0153:${t.ip}`);
                } else if (524288 & t.$) {
                    const t = 511 & e;
                    i = 0 === t ? $e : 1 === t ? Le : new AccessThisExpression(t);
                    e = 512;
                    break t;
                } else throw new Error(`AUR0154:${t.ip}`);
            } while (3078 === t.$);

          case 1024:
            if (2 & r) i = new BindingIdentifier(t.L); else {
                i = new AccessScopeExpression(t.L, 511 & e);
                e = 1024;
            }
            t.R = true;
            Ke(t);
            break;

          case 3076:
            t.R = false;
            Ke(t);
            i = $e;
            e = 512;
            break;

          case 671751:
            Ke(t);
            i = je(t, 0, 62, r);
            Ze(t, 1835019);
            e = 0;
            break;

          case 671757:
            i = t.ip.search(/\s+of\s+/) > t.index ? Ie(t) : Me(t, e, r);
            e = 0;
            break;

          case 131080:
            i = Fe(t, r);
            e = 0;
            break;

          case 540714:
            i = new TemplateExpression([ t.L ]);
            t.R = false;
            Ke(t);
            e = 0;
            break;

          case 540715:
            i = Ne(t, e, r, i, false);
            e = 0;
            break;

          case 4096:
          case 8192:
            i = new PrimitiveLiteralExpression(t.L);
            t.R = false;
            Ke(t);
            e = 0;
            break;

          case 2050:
          case 2051:
          case 2049:
          case 2048:
            i = Je[63 & t.$];
            t.R = false;
            Ke(t);
            e = 0;
            break;

          default:
            if (t.index >= t.length) throw new Error(`AUR0155:${t.ip}`); else throw new Error(`AUR0156:${t.ip}`);
        }
        if (2 & r) return De(t, i);
        if (449 < s) return i;
        let n = t.L;
        while ((16384 & t.$) > 0) {
            const s = [];
            let o;
            switch (t.$) {
              case 16393:
                t.R = true;
                Ke(t);
                if (0 === (3072 & t.$)) throw new Error(`AUR0153:${t.ip}`);
                n = t.L;
                Ke(t);
                e = (e & (512 | 1024)) << 1 | 2048 & e | (4096 & e) >> 1;
                if (671751 === t.$) {
                    if (0 === e) e = 2048;
                    continue;
                }
                if (1024 & e) i = new AccessScopeExpression(n, i.ancestor); else i = new AccessMemberExpression(i, n);
                continue;

              case 671757:
                t.R = true;
                Ke(t);
                e = 4096;
                i = new AccessKeyedExpression(i, je(t, 0, 62, r));
                Ze(t, 1835022);
                break;

              case 671751:
                t.R = false;
                Ke(t);
                while (1835019 !== t.$) {
                    s.push(je(t, 0, 62, r));
                    if (!Ge(t, 1572876)) break;
                }
                Ze(t, 1835019);
                if (1024 & e) i = new CallScopeExpression(n, s, i.ancestor); else if (2048 & e) i = new CallMemberExpression(i, n, s); else i = new CallFunctionExpression(i, s);
                e = 0;
                break;

              case 540714:
                t.R = false;
                o = [ t.L ];
                i = new TaggedTemplateExpression(o, o, i);
                Ke(t);
                break;

              case 540715:
                i = Ne(t, e, r, i, true);
            }
        }
    }
    if (448 < s) return i;
    while ((65536 & t.$) > 0) {
        const n = t.$;
        if ((448 & n) <= s) break;
        Ke(t);
        i = new BinaryExpression(Je[63 & n], i, je(t, e, 448 & n, r));
        t.R = false;
    }
    if (63 < s) return i;
    if (Ge(t, 1572880)) {
        const s = je(t, e, 62, r);
        Ze(t, 1572879);
        i = new ConditionalExpression(i, s, je(t, e, 62, r));
        t.R = false;
    }
    if (62 < s) return i;
    if (Ge(t, 1048616)) {
        if (!t.R) throw new Error(`AUR0158:${t.ip}`);
        i = new AssignExpression(i, je(t, e, 62, r));
    }
    if (61 < s) return i;
    while (Ge(t, 1572884)) {
        if (1572864 === t.$) throw new Error(`AUR0159:${t.ip}`);
        const s = t.L;
        Ke(t);
        const n = new Array;
        while (Ge(t, 1572879)) n.push(je(t, e, 62, r));
        i = new ValueConverterExpression(i, s, n);
    }
    while (Ge(t, 1572883)) {
        if (1572864 === t.$) throw new Error(`AUR0160:${t.ip}`);
        const s = t.L;
        Ke(t);
        const n = new Array;
        while (Ge(t, 1572879)) n.push(je(t, e, 62, r));
        i = new BindingBehaviorExpression(i, s, n);
    }
    if (1572864 !== t.$) {
        if (1 & r) return i;
        if ("of" === t.P) throw new Error(`AUR0161:${t.ip}`);
        throw new Error(`AUR0162:${t.ip}`);
    }
    return i;
}

function Ie(t) {
    const e = [];
    const s = new DestructuringAssignmentExpression(90137, e, void 0, void 0);
    let r = "";
    let i = true;
    let n = 0;
    while (i) {
        Ke(t);
        switch (t.$) {
          case 1835022:
            i = false;
            o();
            break;

          case 1572876:
            o();
            break;

          case 1024:
            r = t.P;
            break;

          default:
            throw new Error(`AUR0170:${t.ip}`);
        }
    }
    Ze(t, 1835022);
    return s;
    function o() {
        if ("" !== r) {
            e.push(new DestructuringAssignmentSingleExpression(new AccessMemberExpression($e, r), new AccessKeyedExpression($e, new PrimitiveLiteralExpression(n++)), void 0));
            r = "";
        } else n++;
    }
}

function Me(t, e, s) {
    Ke(t);
    const r = new Array;
    while (1835022 !== t.$) if (Ge(t, 1572876)) {
        r.push(Be);
        if (1835022 === t.$) break;
    } else {
        r.push(je(t, e, 62, ~2 & s));
        if (Ge(t, 1572876)) {
            if (1835022 === t.$) break;
        } else break;
    }
    Ze(t, 1835022);
    if (2 & s) return new ArrayBindingPattern(r); else {
        t.R = false;
        return new ArrayLiteralExpression(r);
    }
}

function De(t, e) {
    if (0 === (65536 & e.$kind)) throw new Error(`AUR0163:${t.ip}`);
    if (1051180 !== t.$) throw new Error(`AUR0163:${t.ip}`);
    Ke(t);
    const s = e;
    const r = je(t, 0, 61, 0);
    return new ForOfStatement(s, r);
}

function Fe(t, e) {
    const s = new Array;
    const r = new Array;
    Ke(t);
    while (1835018 !== t.$) {
        s.push(t.L);
        if (12288 & t.$) {
            Ke(t);
            Ze(t, 1572879);
            r.push(je(t, 0, 62, ~2 & e));
        } else if (3072 & t.$) {
            const {O: s, $: i, index: n} = t;
            Ke(t);
            if (Ge(t, 1572879)) r.push(je(t, 0, 62, ~2 & e)); else {
                t.O = s;
                t.$ = i;
                t.index = n;
                r.push(je(t, 0, 450, ~2 & e));
            }
        } else throw new Error(`AUR0164:${t.ip}`);
        if (1835018 !== t.$) Ze(t, 1572876);
    }
    Ze(t, 1835018);
    if (2 & e) return new ObjectBindingPattern(s, r); else {
        t.R = false;
        return new ObjectLiteralExpression(s, r);
    }
}

function Ve(t) {
    const e = [];
    const s = [];
    const r = t.length;
    let i = "";
    while (t.index < r) {
        switch (t.O) {
          case 36:
            if (123 === t.ip.charCodeAt(t.index + 1)) {
                e.push(i);
                i = "";
                t.index += 2;
                t.O = t.ip.charCodeAt(t.index);
                Ke(t);
                const r = je(t, 0, 61, 1);
                s.push(r);
                continue;
            } else i += "$";
            break;

          case 92:
            i += String.fromCharCode(me(qe(t)));
            break;

          default:
            i += String.fromCharCode(t.O);
        }
        qe(t);
    }
    if (s.length) {
        e.push(i);
        return new Interpolation(e, s);
    }
    return null;
}

function Ne(t, e, s, r, i) {
    const n = [ t.L ];
    Ze(t, 540715);
    const o = [ je(t, e, 62, s) ];
    while (540714 !== (t.$ = We(t))) {
        n.push(t.L);
        Ze(t, 540715);
        o.push(je(t, e, 62, s));
    }
    n.push(t.L);
    t.R = false;
    if (i) {
        Ke(t);
        return new TaggedTemplateExpression(n, n, r, o);
    } else {
        Ke(t);
        return new TemplateExpression(n, o);
    }
}

function Ke(t) {
    while (t.index < t.length) {
        t.C = t.index;
        if (null != (t.$ = ns[t.O](t))) return;
    }
    t.$ = 1572864;
}

function qe(t) {
    return t.O = t.ip.charCodeAt(++t.index);
}

function He(t) {
    while (is[qe(t)]) ;
    const e = Xe[t.L = t.P];
    return void 0 === e ? 1024 : e;
}

function Qe(t, e) {
    let s = t.O;
    if (false === e) {
        do {
            s = qe(t);
        } while (s <= 57 && s >= 48);
        if (46 !== s) {
            t.L = parseInt(t.P, 10);
            return 8192;
        }
        s = qe(t);
        if (t.index >= t.length) {
            t.L = parseInt(t.P.slice(0, -1), 10);
            return 8192;
        }
    }
    if (s <= 57 && s >= 48) do {
        s = qe(t);
    } while (s <= 57 && s >= 48); else t.O = t.ip.charCodeAt(--t.index);
    t.L = parseFloat(t.P);
    return 8192;
}

function _e(t) {
    const e = t.O;
    qe(t);
    let s = 0;
    const r = new Array;
    let i = t.index;
    while (t.O !== e) if (92 === t.O) {
        r.push(t.ip.slice(i, t.index));
        qe(t);
        s = me(t.O);
        qe(t);
        r.push(String.fromCharCode(s));
        i = t.index;
    } else if (t.index >= t.length) throw new Error(`AUR0165:${t.ip}`); else qe(t);
    const n = t.ip.slice(i, t.index);
    qe(t);
    r.push(n);
    const o = r.join("");
    t.L = o;
    return 4096;
}

function ze(t) {
    let e = true;
    let s = "";
    while (96 !== qe(t)) if (36 === t.O) if (t.index + 1 < t.length && 123 === t.ip.charCodeAt(t.index + 1)) {
        t.index++;
        e = false;
        break;
    } else s += "$"; else if (92 === t.O) s += String.fromCharCode(me(qe(t))); else {
        if (t.index >= t.length) throw new Error(`AUR0166:${t.ip}`);
        s += String.fromCharCode(t.O);
    }
    qe(t);
    t.L = s;
    if (e) return 540714;
    return 540715;
}

function We(t) {
    if (t.index >= t.length) throw new Error(`AUR0166:${t.ip}`);
    t.index--;
    return ze(t);
}

function Ge(t, e) {
    if (t.$ === e) {
        Ke(t);
        return true;
    }
    return false;
}

function Ze(t, e) {
    if (t.$ === e) Ke(t); else throw new Error(`AUR0167:${t.ip}<${e}`);
}

const Je = [ Oe, Ce, ke, Be, "$this", null, "$parent", "(", "{", ".", "}", ")", ",", "[", "]", ":", "?", "'", '"', "&", "|", "||", "&&", "==", "!=", "===", "!==", "<", ">", "<=", ">=", "in", "instanceof", "+", "-", "typeof", "void", "*", "%", "/", "=", "!", 540714, 540715, "of" ];

const Xe = E();

Xe.true = 2049;

Xe.null = 2050;

Xe.false = 2048;

Xe.undefined = 2051;

Xe.$this = 3076;

Xe.$parent = 3078;

Xe.in = 1640799;

Xe.instanceof = 1640800;

Xe.typeof = 34851;

Xe.void = 34852;

Xe.of = 1051180;

const Ye = {
    AsciiIdPart: [ 36, 0, 48, 58, 65, 91, 95, 0, 97, 123 ],
    IdStart: [ 36, 0, 65, 91, 95, 0, 97, 123, 170, 0, 186, 0, 192, 215, 216, 247, 248, 697, 736, 741, 7424, 7462, 7468, 7517, 7522, 7526, 7531, 7544, 7545, 7615, 7680, 7936, 8305, 0, 8319, 0, 8336, 8349, 8490, 8492, 8498, 0, 8526, 0, 8544, 8585, 11360, 11392, 42786, 42888, 42891, 42927, 42928, 42936, 42999, 43008, 43824, 43867, 43868, 43877, 64256, 64263, 65313, 65339, 65345, 65371 ],
    Digit: [ 48, 58 ],
    Skip: [ 0, 33, 127, 161 ]
};

function ts(t, e, s, r) {
    const i = s.length;
    for (let n = 0; n < i; n += 2) {
        const i = s[n];
        let o = s[n + 1];
        o = o > 0 ? o : i + 1;
        if (t) t.fill(r, i, o);
        if (e) for (let t = i; t < o; t++) e.add(t);
    }
}

function es(t) {
    return e => {
        qe(e);
        return t;
    };
}

const ss = t => {
    throw new Error(`AUR0168:${t.ip}`);
};

ss.notMapped = true;

const rs = new Set;

ts(null, rs, Ye.AsciiIdPart, true);

const is = new Uint8Array(65535);

ts(is, null, Ye.IdStart, 1);

ts(is, null, Ye.Digit, 1);

const ns = new Array(65535);

ns.fill(ss, 0, 65535);

ts(ns, null, Ye.Skip, (t => {
    qe(t);
    return null;
}));

ts(ns, null, Ye.IdStart, He);

ts(ns, null, Ye.Digit, (t => Qe(t, false)));

ns[34] = ns[39] = t => _e(t);

ns[96] = t => ze(t);

ns[33] = t => {
    if (61 !== qe(t)) return 32809;
    if (61 !== qe(t)) return 1638680;
    qe(t);
    return 1638682;
};

ns[61] = t => {
    if (61 !== qe(t)) return 1048616;
    if (61 !== qe(t)) return 1638679;
    qe(t);
    return 1638681;
};

ns[38] = t => {
    if (38 !== qe(t)) return 1572883;
    qe(t);
    return 1638614;
};

ns[124] = t => {
    if (124 !== qe(t)) return 1572884;
    qe(t);
    return 1638549;
};

ns[46] = t => {
    if (qe(t) <= 57 && t.O >= 48) return Qe(t, true);
    return 16393;
};

ns[60] = t => {
    if (61 !== qe(t)) return 1638747;
    qe(t);
    return 1638749;
};

ns[62] = t => {
    if (61 !== qe(t)) return 1638748;
    qe(t);
    return 1638750;
};

ns[37] = es(1638886);

ns[40] = es(671751);

ns[41] = es(1835019);

ns[42] = es(1638885);

ns[43] = es(623009);

ns[44] = es(1572876);

ns[45] = es(623010);

ns[47] = es(1638887);

ns[58] = es(1572879);

ns[63] = es(1572880);

ns[91] = es(671757);

ns[93] = es(1835022);

ns[123] = es(131080);

ns[125] = es(1835018);

let os = null;

const hs = [];

let cs = false;

function us() {
    cs = false;
}

function as() {
    cs = true;
}

function ls() {
    return os;
}

function fs(t) {
    if (null == t) throw new Error("AUR0206");
    if (null == os) {
        os = t;
        hs[0] = os;
        cs = true;
        return;
    }
    if (os === t) throw new Error("AUR0207");
    hs.push(os);
    os = t;
    cs = true;
}

function ds(t) {
    if (null == t) throw new Error("AUR0208");
    if (os !== t) throw new Error("AUR0209");
    hs.pop();
    os = hs.length > 0 ? hs[hs.length - 1] : null;
    cs = null != os;
}

const vs = Object.freeze({
    get current() {
        return os;
    },
    get connecting() {
        return cs;
    },
    enter: fs,
    exit: ds,
    pause: us,
    resume: as
});

const ps = Reflect.get;

const gs = Object.prototype.toString;

const ws = new WeakMap;

function bs(t) {
    switch (gs.call(t)) {
      case "[object Object]":
      case "[object Array]":
      case "[object Map]":
      case "[object Set]":
        return true;

      default:
        return false;
    }
}

const Es = "__raw__";

function As(t) {
    return bs(t) ? ys(t) : t;
}

function ys(t) {
    var e;
    return null !== (e = ws.get(t)) && void 0 !== e ? e : Ss(t);
}

function ms(t) {
    var e;
    return null !== (e = t[Es]) && void 0 !== e ? e : t;
}

function Us(t) {
    return bs(t) && t[Es] || t;
}

function xs(t) {
    return "constructor" === t || "__proto__" === t || "$observers" === t || t === Symbol.toPrimitive || t === Symbol.toStringTag;
}

function Ss(t) {
    const e = t instanceof Array ? Cs : t instanceof Map || t instanceof Set ? Zs : Os;
    const s = new Proxy(t, e);
    ws.set(t, s);
    return s;
}

const Os = {
    get(t, e, s) {
        if (e === Es) return t;
        const r = ls();
        if (!cs || xs(e) || null == r) return ps(t, e, s);
        r.observe(t, e);
        return As(ps(t, e, s));
    }
};

const Cs = {
    get(t, e, s) {
        if (e === Es) return t;
        const r = ls();
        if (!cs || xs(e) || null == r) return ps(t, e, s);
        switch (e) {
          case "length":
            r.observe(t, "length");
            return t.length;

          case "map":
            return ks;

          case "includes":
            return Ls;

          case "indexOf":
            return Rs;

          case "lastIndexOf":
            return Ps;

          case "every":
            return Bs;

          case "filter":
            return $s;

          case "find":
            return js;

          case "findIndex":
            return Ts;

          case "flat":
            return Is;

          case "flatMap":
            return Ms;

          case "join":
            return Ds;

          case "push":
            return Vs;

          case "pop":
            return Fs;

          case "reduce":
            return Ws;

          case "reduceRight":
            return Gs;

          case "reverse":
            return Hs;

          case "shift":
            return Ns;

          case "unshift":
            return Ks;

          case "slice":
            return zs;

          case "splice":
            return qs;

          case "some":
            return Qs;

          case "sort":
            return _s;

          case "keys":
            return ir;

          case "values":
          case Symbol.iterator:
            return nr;

          case "entries":
            return or;
        }
        r.observe(t, e);
        return As(ps(t, e, s));
    },
    ownKeys(t) {
        var e;
        null === (e = ls()) || void 0 === e ? void 0 : e.observe(t, "length");
        return Reflect.ownKeys(t);
    }
};

function ks(t, e) {
    var s;
    const r = ms(this);
    const i = r.map(((s, r) => Us(t.call(e, As(s), r, this))));
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return As(i);
}

function Bs(t, e) {
    var s;
    const r = ms(this);
    const i = r.every(((s, r) => t.call(e, As(s), r, this)));
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return i;
}

function $s(t, e) {
    var s;
    const r = ms(this);
    const i = r.filter(((s, r) => Us(t.call(e, As(s), r, this))));
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return As(i);
}

function Ls(t) {
    var e;
    const s = ms(this);
    const r = s.includes(Us(t));
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return r;
}

function Rs(t) {
    var e;
    const s = ms(this);
    const r = s.indexOf(Us(t));
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return r;
}

function Ps(t) {
    var e;
    const s = ms(this);
    const r = s.lastIndexOf(Us(t));
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return r;
}

function Ts(t, e) {
    var s;
    const r = ms(this);
    const i = r.findIndex(((s, r) => Us(t.call(e, As(s), r, this))));
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return i;
}

function js(t, e) {
    var s;
    const r = ms(this);
    const i = r.find(((e, s) => t(As(e), s, this)), e);
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return As(i);
}

function Is() {
    var t;
    const e = ms(this);
    null === (t = ls()) || void 0 === t ? void 0 : t.observeCollection(e);
    return As(e.flat());
}

function Ms(t, e) {
    var s;
    const r = ms(this);
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return ys(r.flatMap(((s, r) => As(t.call(e, As(s), r, this)))));
}

function Ds(t) {
    var e;
    const s = ms(this);
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return s.join(t);
}

function Fs() {
    return As(ms(this).pop());
}

function Vs(...t) {
    return ms(this).push(...t);
}

function Ns() {
    return As(ms(this).shift());
}

function Ks(...t) {
    return ms(this).unshift(...t);
}

function qs(...t) {
    return As(ms(this).splice(...t));
}

function Hs(...t) {
    var e;
    const s = ms(this);
    const r = s.reverse();
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return As(r);
}

function Qs(t, e) {
    var s;
    const r = ms(this);
    const i = r.some(((s, r) => Us(t.call(e, As(s), r, this))));
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return i;
}

function _s(t) {
    var e;
    const s = ms(this);
    const r = s.sort(t);
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return As(r);
}

function zs(t, e) {
    var s;
    const r = ms(this);
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return ys(r.slice(t, e));
}

function Ws(t, e) {
    var s;
    const r = ms(this);
    const i = r.reduce(((e, s, r) => t(e, As(s), r, this)), e);
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return As(i);
}

function Gs(t, e) {
    var s;
    const r = ms(this);
    const i = r.reduceRight(((e, s, r) => t(e, As(s), r, this)), e);
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return As(i);
}

const Zs = {
    get(t, e, s) {
        if (e === Es) return t;
        const r = ls();
        if (!cs || xs(e) || null == r) return ps(t, e, s);
        switch (e) {
          case "size":
            r.observe(t, "size");
            return t.size;

          case "clear":
            return sr;

          case "delete":
            return rr;

          case "forEach":
            return Js;

          case "add":
            if (t instanceof Set) return er;
            break;

          case "get":
            if (t instanceof Map) return Ys;
            break;

          case "set":
            if (t instanceof Map) return tr;
            break;

          case "has":
            return Xs;

          case "keys":
            return ir;

          case "values":
            return nr;

          case "entries":
            return or;

          case Symbol.iterator:
            return t instanceof Map ? or : nr;
        }
        return As(ps(t, e, s));
    }
};

function Js(t, e) {
    var s;
    const r = ms(this);
    null === (s = ls()) || void 0 === s ? void 0 : s.observeCollection(r);
    return r.forEach(((s, r) => {
        t.call(e, As(s), As(r), this);
    }));
}

function Xs(t) {
    var e;
    const s = ms(this);
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return s.has(Us(t));
}

function Ys(t) {
    var e;
    const s = ms(this);
    null === (e = ls()) || void 0 === e ? void 0 : e.observeCollection(s);
    return As(s.get(Us(t)));
}

function tr(t, e) {
    return As(ms(this).set(Us(t), Us(e)));
}

function er(t) {
    return As(ms(this).add(Us(t)));
}

function sr() {
    return As(ms(this).clear());
}

function rr(t) {
    return As(ms(this).delete(Us(t)));
}

function ir() {
    var t;
    const e = ms(this);
    null === (t = ls()) || void 0 === t ? void 0 : t.observeCollection(e);
    const s = e.keys();
    return {
        next() {
            const t = s.next();
            const e = t.value;
            const r = t.done;
            return r ? {
                value: void 0,
                done: r
            } : {
                value: As(e),
                done: r
            };
        },
        [Symbol.iterator]() {
            return this;
        }
    };
}

function nr() {
    var t;
    const e = ms(this);
    null === (t = ls()) || void 0 === t ? void 0 : t.observeCollection(e);
    const s = e.values();
    return {
        next() {
            const t = s.next();
            const e = t.value;
            const r = t.done;
            return r ? {
                value: void 0,
                done: r
            } : {
                value: As(e),
                done: r
            };
        },
        [Symbol.iterator]() {
            return this;
        }
    };
}

function or() {
    var t;
    const e = ms(this);
    null === (t = ls()) || void 0 === t ? void 0 : t.observeCollection(e);
    const s = e.entries();
    return {
        next() {
            const t = s.next();
            const e = t.value;
            const r = t.done;
            return r ? {
                value: void 0,
                done: r
            } : {
                value: [ As(e[0]), As(e[1]) ],
                done: r
            };
        },
        [Symbol.iterator]() {
            return this;
        }
    };
}

const hr = Object.freeze({
    getProxy: ys,
    getRaw: ms,
    wrap: As,
    unwrap: Us,
    rawKey: Es
});

class ComputedObserver {
    constructor(t, e, s, r, i) {
        this.interceptor = this;
        this.type = 1;
        this.v = void 0;
        this.ov = void 0;
        this.ir = false;
        this.D = false;
        this.o = t;
        this.get = e;
        this.set = s;
        this.up = r;
        this.oL = i;
    }
    static create(t, e, s, r, i) {
        const n = s.get;
        const o = s.set;
        const h = new ComputedObserver(t, n, o, i, r);
        const c = () => h.getValue();
        c.getObserver = () => h;
        v(t, e, {
            enumerable: s.enumerable,
            configurable: true,
            get: c,
            set: t => {
                h.setValue(t, 0);
            }
        });
        return h;
    }
    getValue() {
        if (0 === this.subs.count) return this.get.call(this.o, this);
        if (this.D) {
            this.compute();
            this.D = false;
        }
        return this.v;
    }
    setValue(t, e) {
        if (p(this.set)) {
            if (t !== this.v) {
                this.ir = true;
                this.set.call(this.o, t);
                this.ir = false;
                this.run();
            }
        } else throw new Error("AUR0221");
    }
    handleChange() {
        this.D = true;
        if (this.subs.count > 0) this.run();
    }
    handleCollectionChange() {
        this.D = true;
        if (this.subs.count > 0) this.run();
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) {
            this.compute();
            this.D = false;
        }
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) {
            this.D = true;
            this.obs.clearAll();
        }
    }
    flush() {
        cr = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, cr, 0);
    }
    run() {
        if (this.ir) return;
        const t = this.v;
        const e = this.compute();
        this.D = false;
        if (!Object.is(e, t)) {
            this.ov = t;
            this.queue.add(this);
        }
    }
    compute() {
        this.ir = true;
        this.obs.version++;
        try {
            fs(this);
            return this.v = Us(this.get.call(this.up ? As(this.o) : this.o, this));
        } finally {
            this.obs.clear();
            this.ir = false;
            ds(this);
        }
    }
}

Ee(ComputedObserver);

rt(ComputedObserver);

ct(ComputedObserver);

let cr;

const ur = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("IDirtyChecker", (t => t.singleton(DirtyChecker)));

const ar = {
    timeoutsPerCheck: 25,
    disabled: false,
    throw: false,
    resetToDefault() {
        this.timeoutsPerCheck = 6;
        this.disabled = false;
        this.throw = false;
    }
};

const lr = {
    persistent: true
};

class DirtyChecker {
    constructor(t) {
        this.p = t;
        this.tracked = [];
        this.T = null;
        this.j = 0;
        this.check = () => {
            if (ar.disabled) return;
            if (++this.j < ar.timeoutsPerCheck) return;
            this.j = 0;
            const t = this.tracked;
            const e = t.length;
            let s;
            let r = 0;
            for (;r < e; ++r) {
                s = t[r];
                if (s.isDirty()) this.queue.add(s);
            }
        };
    }
    createProperty(t, e) {
        if (ar.throw) throw new Error(`AUR0222:${e}`);
        return new DirtyCheckProperty(this, t, e);
    }
    addProperty(t) {
        this.tracked.push(t);
        if (1 === this.tracked.length) this.T = this.p.taskQueue.queueTask(this.check, lr);
    }
    removeProperty(t) {
        this.tracked.splice(this.tracked.indexOf(t), 1);
        if (0 === this.tracked.length) {
            this.T.cancel();
            this.T = null;
        }
    }
}

DirtyChecker.inject = [ _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.IPlatform ];

ct(DirtyChecker);

class DirtyCheckProperty {
    constructor(t, e, s) {
        this.obj = e;
        this.key = s;
        this.type = 0;
        this.ov = void 0;
        this.I = t;
    }
    getValue() {
        return this.obj[this.key];
    }
    setValue(t, e) {
        throw new Error(`Trying to set value for property ${this.key} in dirty checker`);
    }
    isDirty() {
        return this.ov !== this.obj[this.key];
    }
    flush() {
        const t = this.ov;
        const e = this.getValue();
        this.ov = e;
        this.subs.notify(e, t, 0);
    }
    subscribe(t) {
        if (this.subs.add(t) && 1 === this.subs.count) {
            this.ov = this.obj[this.key];
            this.I.addProperty(this);
        }
    }
    unsubscribe(t) {
        if (this.subs.remove(t) && 0 === this.subs.count) this.I.removeProperty(this);
    }
}

rt(DirtyCheckProperty);

class PrimitiveObserver {
    constructor(t, e) {
        this.type = 0;
        this.o = t;
        this.k = e;
    }
    get doNotCache() {
        return true;
    }
    getValue() {
        return this.o[this.k];
    }
    setValue() {}
    subscribe() {}
    unsubscribe() {}
}

class PropertyAccessor {
    constructor() {
        this.type = 0;
    }
    getValue(t, e) {
        return t[e];
    }
    setValue(t, e, s, r) {
        s[r] = t;
    }
}

let fr;

class SetterObserver {
    constructor(t, e) {
        this.type = 1;
        this.v = void 0;
        this.ov = void 0;
        this.iO = false;
        this.f = 0;
        this.o = t;
        this.k = e;
    }
    getValue() {
        return this.v;
    }
    setValue(t, e) {
        if (this.iO) {
            if (Object.is(t, this.v)) return;
            this.ov = this.v;
            this.v = t;
            this.f = e;
            this.queue.add(this);
        } else this.o[this.k] = t;
    }
    subscribe(t) {
        if (false === this.iO) this.start();
        this.subs.add(t);
    }
    flush() {
        fr = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, fr, this.f);
    }
    start() {
        if (false === this.iO) {
            this.iO = true;
            this.v = this.o[this.k];
            v(this.o, this.k, {
                enumerable: true,
                configurable: true,
                get: () => this.getValue(),
                set: t => {
                    this.setValue(t, 0);
                }
            });
        }
        return this;
    }
    stop() {
        if (this.iO) {
            v(this.o, this.k, {
                enumerable: true,
                configurable: true,
                writable: true,
                value: this.v
            });
            this.iO = false;
        }
        return this;
    }
}

class SetterNotifier {
    constructor(t, e, s, r) {
        this.type = 1;
        this.v = void 0;
        this.ov = void 0;
        this.f = 0;
        this.o = t;
        this.S = s;
        this.hs = p(s);
        const i = t[e];
        this.cb = p(i) ? i : void 0;
        this.v = r;
    }
    getValue() {
        return this.v;
    }
    setValue(t, e) {
        var s;
        if (this.hs) t = this.S(t, null);
        if (!Object.is(t, this.v)) {
            this.ov = this.v;
            this.v = t;
            this.f = e;
            null === (s = this.cb) || void 0 === s ? void 0 : s.call(this.o, this.v, this.ov, e);
            this.queue.add(this);
        }
    }
    flush() {
        fr = this.ov;
        this.ov = this.v;
        this.subs.notify(this.v, fr, this.f);
    }
}

rt(SetterObserver);

rt(SetterNotifier);

ct(SetterObserver);

ct(SetterNotifier);

const dr = new PropertyAccessor;

const vr = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("IObserverLocator", (t => t.singleton(ObserverLocator)));

const pr = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("INodeObserverLocator", (t => t.cachedCallback((t => {
    t.getAll(_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.ILogger).forEach((t => {
        t.error("Using default INodeObserverLocator implementation. Will not be able to observe nodes (HTML etc...).");
    }));
    return new DefaultNodeObserverLocator;
}))));

class DefaultNodeObserverLocator {
    handles() {
        return false;
    }
    getObserver() {
        return dr;
    }
    getAccessor() {
        return dr;
    }
}

class ObserverLocator {
    constructor(t, e) {
        this.I = t;
        this.M = e;
        this.F = [];
    }
    addAdapter(t) {
        this.F.push(t);
    }
    getObserver(t, e) {
        var s, r;
        return null !== (r = null === (s = t.$observers) || void 0 === s ? void 0 : s[e]) && void 0 !== r ? r : this.V(t, e, this.createObserver(t, e));
    }
    getAccessor(t, e) {
        var s;
        const r = null === (s = t.$observers) || void 0 === s ? void 0 : s[e];
        if (void 0 !== r) return r;
        if (this.M.handles(t, e, this)) return this.M.getAccessor(t, e, this);
        return dr;
    }
    getArrayObserver(t) {
        return jt(t);
    }
    getMapObserver(t) {
        return ue(t);
    }
    getSetObserver(t) {
        return Zt(t);
    }
    createObserver(t, e) {
        var s, r, i, n;
        if (!(t instanceof Object)) return new PrimitiveObserver(t, e);
        if (this.M.handles(t, e, this)) return this.M.getObserver(t, e, this);
        switch (e) {
          case "length":
            if (t instanceof Array) return jt(t).getLengthObserver();
            break;

          case "size":
            if (t instanceof Map) return ue(t).getLengthObserver(); else if (t instanceof Set) return Zt(t).getLengthObserver();
            break;

          default:
            if (t instanceof Array && (0,_aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.isArrayIndex)(e)) return jt(t).getIndexObserver(Number(e));
            break;
        }
        let o = br(t, e);
        if (void 0 === o) {
            let s = wr(t);
            while (null !== s) {
                o = br(s, e);
                if (void 0 === o) s = wr(s); else break;
            }
        }
        if (void 0 !== o && !d.call(o, "value")) {
            let h = this.N(t, e, o);
            if (null == h) h = null === (n = null !== (r = null === (s = o.get) || void 0 === s ? void 0 : s.getObserver) && void 0 !== r ? r : null === (i = o.set) || void 0 === i ? void 0 : i.getObserver) || void 0 === n ? void 0 : n(t, this);
            return null == h ? o.configurable ? ComputedObserver.create(t, e, o, this, true) : this.I.createProperty(t, e) : h;
        }
        return new SetterObserver(t, e);
    }
    N(t, e, s) {
        if (this.F.length > 0) for (const r of this.F) {
            const i = r.getObserver(t, e, s, this);
            if (null != i) return i;
        }
        return null;
    }
    V(t, e, s) {
        if (true === s.doNotCache) return s;
        if (void 0 === t.$observers) {
            v(t, "$observers", {
                value: {
                    [e]: s
                }
            });
            return s;
        }
        return t.$observers[e] = s;
    }
}

ObserverLocator.inject = [ ur, pr ];

function gr(t) {
    let e;
    if (t instanceof Array) e = jt(t); else if (t instanceof Map) e = ue(t); else if (t instanceof Set) e = Zt(t);
    return e;
}

const wr = Object.getPrototypeOf;

const br = Object.getOwnPropertyDescriptor;

const Er = _aurelia_kernel__WEBPACK_IMPORTED_MODULE_0__.DI.createInterface("IObservation", (t => t.singleton(Observation)));

class Observation {
    constructor(t) {
        this.oL = t;
    }
    static get inject() {
        return [ vr ];
    }
    run(t) {
        const e = new Effect(this.oL, t);
        e.run();
        return e;
    }
}

class Effect {
    constructor(t, e) {
        this.oL = t;
        this.fn = e;
        this.interceptor = this;
        this.maxRunCount = 10;
        this.queued = false;
        this.running = false;
        this.runCount = 0;
        this.stopped = false;
    }
    handleChange() {
        this.queued = true;
        this.run();
    }
    handleCollectionChange() {
        this.queued = true;
        this.run();
    }
    run() {
        if (this.stopped) throw new Error("AUR0225");
        if (this.running) return;
        ++this.runCount;
        this.running = true;
        this.queued = false;
        ++this.obs.version;
        try {
            fs(this);
            this.fn(this);
        } finally {
            this.obs.clear();
            this.running = false;
            ds(this);
        }
        if (this.queued) {
            if (this.runCount > this.maxRunCount) {
                this.runCount = 0;
                throw new Error(`AUR0226`);
            }
            this.run();
        } else this.runCount = 0;
    }
    stop() {
        this.stopped = true;
        this.obs.clearAll();
    }
}

Ee(Effect);

function Ar(t) {
    if (void 0 === t.$observers) v(t, "$observers", {
        value: {}
    });
    return t.$observers;
}

const yr = {};

function mr(t, e, s) {
    if (null == e) return (e, s, i) => r(e, s, i, t);
    return r(t, e, s);
    function r(t, e, s, r) {
        var i;
        const n = void 0 === e;
        r = "object" !== typeof r ? {
            name: r
        } : r || {};
        if (n) e = r.name;
        if (null == e || "" === e) throw new Error("AUR0224");
        const o = r.callback || `${String(e)}Changed`;
        let h = yr;
        if (s) {
            delete s.value;
            delete s.writable;
            h = null === (i = s.initializer) || void 0 === i ? void 0 : i.call(s);
            delete s.initializer;
        } else s = {
            configurable: true
        };
        if (!("enumerable" in s)) s.enumerable = true;
        const c = r.set;
        s.get = function t() {
            var s;
            const r = Ur(this, e, o, h, c);
            null === (s = ls()) || void 0 === s ? void 0 : s.subscribeTo(r);
            return r.getValue();
        };
        s.set = function t(s) {
            Ur(this, e, o, h, c).setValue(s, 0);
        };
        s.get.getObserver = function t(s) {
            return Ur(s, e, o, h, c);
        };
        if (n) v(t.prototype, e, s); else return s;
    }
}

function Ur(t, e, s, r, i) {
    const n = Ar(t);
    let o = n[e];
    if (null == o) {
        o = new SetterNotifier(t, s, i, r === yr ? void 0 : r);
        n[e] = o;
    }
    return o;
}


//# sourceMappingURL=index.js.map


/***/ }),

/***/ "./src/contentscript/contentscript.ts":
/*!********************************************!*\
  !*** ./src/contentscript/contentscript.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "installScript": () => /* binding */ installScript,
/* harmony export */   "getAureliaInstance": () => /* binding */ getAureliaInstance,
/* harmony export */   "getCustomElementInfo": () => /* binding */ getCustomElementInfo,
/* harmony export */   "install": () => /* binding */ install
/* harmony export */ });
/* harmony import */ var aurelia__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! aurelia */ "./node_modules/@aurelia/runtime-html/dist/esm/index.js");
/* harmony import */ var _shared_env__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../shared/env */ "./src/shared/env.ts");


function installScript(fn) {
    const source = ';(' + fn.toString() + ')(window, )';
    if (_shared_env__WEBPACK_IMPORTED_MODULE_0__.isFirefox) {
        // eslint-disable-next-line no-eval
        window.eval(source); // in Firefox, this evaluates on the content window
    }
    else {
        const script = document.createElement('script');
        script.textContent = source;
        document.documentElement.appendChild(script);
        script.parentNode.removeChild(script);
    }
}
function getAureliaInstance(win) {
    const all = document.querySelectorAll('*');
    for (let i = 0; i < all.length; i++) {
        const aurelia = all[i].$aurelia;
        if (aurelia) {
            return aurelia;
        }
    }
}
function getCustomElementInfo(element) {
    return aurelia__WEBPACK_IMPORTED_MODULE_1__.CustomElement.for(element);
}
function install(win) {
    let nextDebugId = 0;
    let debugValueLookup = {};
    const hooks = {
        Aurelia: undefined,
        currentElement: undefined,
        currentAttributes: [],
        getAllInfo: (root) => {
            root = root ?? document.body;
            return [hooks.getCustomElementInfo(root, false), ...Array.from(root.children).flatMap(y => hooks.getAllInfo(y))].filter(x => x);
        },
        updateValues: (info, property) => {
            if (!hooks.currentElement && !hooks.currentAttributes.length)
                return;
            const currentInfo = hooks.currentElement?.definition.key === info.key ? hooks.currentElement : hooks.currentAttributes.find(y => y.definition.key === info.key);
            info.bindables.forEach(x => currentInfo.viewModel[x.name] = x.value);
            info.properties.forEach(x => {
                // HMM: Not sure if we need the .value check
                const isObject = x.value === 'Object' && x.type === 'object';
                if (isObject) {
                    let targetProp = currentInfo.viewModel[x.name][property.name];
                    if (!targetProp)
                        return;
                    currentInfo.viewModel[x.name][property.name] = property.value;
                    return;
                }
                ;
                currentInfo.viewModel[x.name] = x.value;
            });
            return undefined;
        },
        getCustomElementInfo: (element, traverse = true) => {
            let customElement;
            let customAttributes;
            try {
                while (!customElement && element !== document.body) {
                    const au = element['$au'];
                    if (au) {
                        customElement = element['$au']['au:resource:custom-element'];
                        const customAttributeKeys = Object.getOwnPropertyNames(au).filter(y => y.includes('custom-attribute'));
                        customAttributes = customAttributeKeys.map(x => au[x]);
                    }
                    element = element.parentElement;
                    if (!traverse)
                        break;
                }
            }
            catch (e) {
            }
            if (!customElement && !customAttributes)
                return;
            hooks.currentElement = customElement;
            hooks.currentAttributes = customAttributes;
            const customElementInfo = extractControllerInfo(customElement);
            const customAttributesInfo = customAttributes && customAttributes.map(extractControllerInfo).filter(x => x);
            return {
                customElementInfo,
                customAttributesInfo
            };
        },
        getExpandedDebugValueForId(id) {
            let value = debugValueLookup[id].expandableValue;
            if (Array.isArray(value)) {
                let newValue = {};
                value.forEach((value, index) => {
                    newValue[index] = value;
                });
                value = newValue;
            }
            else if (isMap(value)) {
                let mapToArr = [];
                value = value.forEach((value, key) => {
                    mapToArr.push([value, key]);
                });
                value = mapToArr;
            }
            else if (isSet(value)) {
                value = Array.from(value);
            }
            return convertObjectToDebugInfo(value);
            // https://stackoverflow.com/questions/29924932/how-to-reliably-check-an-object-is-an-ecmascript-6-map-set
            function isMap(o) {
                try {
                    Map.prototype.has.call(o); // throws if o is not an object or has no [[MapData]]
                    return true;
                }
                catch (e) {
                    return false;
                }
            }
            function isSet(o) {
                try {
                    Set.prototype.has.call(o); // throws if o is not an object or has no [[SetData]]
                    return true;
                }
                catch (e) {
                    return false;
                }
            }
        }
    };
    window.addEventListener('au-started', (customEvent) => {
        hooks.Aurelia = customEvent.detail;
    }, { once: true });
    Object.defineProperty(win, '__AURELIA_DEVTOOLS_GLOBAL_HOOK__', {
        get() {
            return hooks;
        }
    });
    function extractControllerInfo(customElement) {
        if (!customElement)
            return;
        const bindableKeys = Object.keys(customElement.definition.bindables);
        const returnVal = {
            bindables: bindableKeys.map(y => {
                return setValueOnDebugInfo({
                    name: y
                }, customElement.viewModel[y], customElement.viewModel);
                // return {
                //   bindable: customElement.definition.bindables[y],
                //   type: typeof (customElement.viewModel[y]),
                //   name: y, value: customElement.viewModel[y]
                // }
            }),
            properties: Object.keys(customElement.viewModel).filter(x => !bindableKeys.some(y => y === x)).
                filter(x => !x.startsWith('$')).map(y => {
                return setValueOnDebugInfo({
                    name: y
                }, customElement.viewModel[y], customElement.viewModel);
                // return {
                //   type: typeof (customElement.viewModel[y]),
                //   name: y,
                //   value: getValueFor(customElement.viewModel[y])
                // }
            }),
            name: customElement.definition.name,
            aliases: customElement.definition.aliases,
            key: customElement.definition.key
        };
        return returnVal;
    }
    function getValueFor(value) {
        if (value instanceof Node) {
            return value.constructor.name;
        }
        else if (Array.isArray(value)) {
            return `Array[${value.length}]`;
        }
        else if (typeof (value) === 'object') {
            if (value.constructor) {
                return value.constructor.name;
            }
            else {
                return 'Object';
            }
        }
        else {
            return value;
        }
    }
    function setValueOnDebugInfo(debugInfo, value, instance) {
        try {
            let expandableValue;
            if (value instanceof Node) {
                debugInfo.canExpand = true;
                debugInfo.type = 'node';
                debugInfo.value = value.constructor.name;
                expandableValue = value;
            }
            else if (Array.isArray(value)) {
                debugInfo.canExpand = true;
                debugInfo.type = 'array';
                debugInfo.value = `Array[${value.length}]`;
                expandableValue = value;
            }
            else {
                debugInfo.type = typeof value;
                debugInfo.value = value;
            }
            if (value === null) {
                debugInfo.type = 'null';
                debugInfo.value = 'null';
            }
            else if (value === undefined) {
                debugInfo.type = 'undefined';
                debugInfo.value = 'undefined';
            }
            else if (debugInfo.type === 'object') {
                debugInfo.canExpand = true;
                expandableValue = value;
                if (value.constructor) {
                    debugInfo.value = value.constructor.name;
                }
                else {
                    debugInfo.value = 'Object';
                }
            }
            if (debugInfo.type === 'string' || debugInfo.type === 'number' || debugInfo.type === 'boolean') {
                debugInfo.canEdit = true;
            }
            debugInfo.debugId = debugInfo.debugId || getNextDebugId();
            debugValueLookup[debugInfo.debugId] = Object.assign({
                instance: instance,
                expandableValue: expandableValue
            }, debugInfo);
            return debugInfo;
        }
        catch (e) {
            return createErrorObject(e);
        }
    }
    function createControllerDebugInfo(controller) {
        try {
            let controllerDebugInfo = {
                name: controller.behavior.elementName || controller.behavior.attributeName
            };
            let viewModel = controller.viewModel;
            let bindableKeys = {};
            controllerDebugInfo.bindables = controller.behavior.properties.map(x => {
                bindableKeys[x.name] = true;
                return setValueOnDebugInfo({
                    name: x.name,
                    attribute: x.attribute,
                }, viewModel[x.name], viewModel);
            });
            controllerDebugInfo.properties = getDebugPropertyKeys(viewModel)
                .filter(x => !(x in bindableKeys))
                .map(x => {
                return setValueOnDebugInfo({
                    name: x
                }, viewModel[x], viewModel);
            });
            return controllerDebugInfo;
        }
        catch (e) {
            return createErrorObject(e);
        }
    }
    function convertObjectToDebugInfo(obj, blackList) {
        blackList = blackList || {};
        return {
            properties: getDebugPropertyKeys(obj)
                .filter(x => !(x in blackList))
                .map(x => {
                return setValueOnDebugInfo({
                    name: x
                }, obj[x], obj);
            })
        };
    }
    function getDebugInfoForNode(selectedNode) {
        try {
            var debugInfo = {};
            nextDebugId = 0;
            if (selectedNode.au) {
                var au = selectedNode.au;
                if (au.controller) {
                    debugInfo.customElement = createControllerDebugInfo(au.controller);
                }
                var tagName = selectedNode.tagName ? selectedNode.tagName.toLowerCase() : null;
                var customAttributeNames = getDebugPropertyKeys(au)
                    .filter(function (key) {
                    return key !== 'controller' && key !== tagName;
                });
                if (customAttributeNames.length) {
                    debugInfo.customAttributes = customAttributeNames.map(x => createControllerDebugInfo(au[x]));
                }
            }
            let owningView = findOwningViewOfNode(selectedNode);
            if (owningView) {
                if (owningView.bindingContext) {
                    debugInfo.bindingContext = convertObjectToDebugInfo(owningView.bindingContext);
                }
                if (owningView.overrideContext) {
                    debugInfo.overrideContext = convertObjectToDebugInfo(owningView.overrideContext, { bindingContext: true, parentOverrideContext: true });
                }
            }
            return debugInfo;
        }
        catch (e) {
            return createErrorObject(e);
        }
    }
    function findOwningViewOfNode(node) {
        function moveUp(n) {
            let current = n.parentNode;
            if (current) {
                return findComposingView(current) || findSiblingRepeaterView(current) || findImmediateControllerOwningView(current) || moveUp(current);
            }
            return null;
        }
        return attachedOwner(node) || findSiblingRepeaterView(node) || findImmediateControllerOwningView(node) || moveUp(node);
    }
    function updateValueForId(id, value) {
        let debugInfo = debugValueLookup[id];
        debugInfo.instance[debugInfo.name] = value;
        setValueOnDebugInfo(debugInfo, value, debugInfo.instance);
    }
    function getNextDebugId() {
        return ++nextDebugId;
    }
    function createErrorObject(e) {
        return [{
                // bindingContext: {
                // properties: [
                // {
                name: 'Debugger Error',
                value: e.message,
                type: 'string',
                canEdit: false
                // }
                // ]
                // }
            }];
    }
    function attachedOwner(node) {
        let ownerView = node.auOwnerView;
        if (ownerView && ownerView.viewFactory) {
            return ownerView;
        }
        return null;
    }
    function nodeIsImmediateChildOfView(view, node) {
        let currentChild = view.firstChild;
        let lastChild = view.lastChild;
        let nextChild;
        while (currentChild) {
            nextChild = currentChild.nextSibling;
            if (currentChild === node) {
                return true;
            }
            if (currentChild === lastChild) {
                break;
            }
            currentChild = nextChild;
        }
        return false;
    }
    function findSiblingRepeaterView(node) {
        if (!node) {
            return null;
        }
        let current = node.nextSibling;
        while (current) {
            if (current.nodeType === 8 && current.viewSlot && current.data === 'anchor') {
                let children = current.viewSlot.children;
                for (let i = 0, ii = children.length; i < ii; ++i) {
                    let view = children[i];
                    if (nodeIsImmediateChildOfView(view, node)) {
                        return view;
                    }
                }
            }
            current = current.nextSibling;
        }
        return null;
    }
    function findImmediateControllerOwningView(node) {
        let parent = node.parentNode;
        if (parent && parent.au && parent.au.controller
            && parent.au.controller.view && nodeIsImmediateChildOfView(parent.au.controller.view, node)) {
            return parent.au.controller.view;
        }
        return null;
    }
    function findComposingView(node) {
        if (!node) {
            return null;
        }
        if (node.aurelia) {
            return node.aurelia.root.view;
        }
        else if (attachedOwner(node)) {
            return attachedOwner(node);
        }
        else if (node.au) {
            var au = node.au;
            if (au.controller) { //custom element
                var controller = au.controller;
                var tagName = node.tagName ? node.tagName.toLowerCase() : null;
                if (tagName === 'router-view') {
                    return controller.viewModel.view;
                }
                else if (tagName === 'compose') {
                    return controller.viewModel.currentController.view;
                }
                else if (controller['with']) {
                    return controller['with'].viewModel.view;
                }
            }
        }
        return null;
    }
    function getDebugPropertyKeys(obj) {
        let props = [];
        const keys = [...Object.keys(obj), ...Object.getOwnPropertyNames(obj)];
        const uniqueKeys = keys.filter((value, i, arr) => arr.indexOf(value) === i);
        for (const key of uniqueKeys) {
            if (key && !key.startsWith('_') && typeof obj[key] !== 'function') {
                props.push(key);
            }
        }
        return props;
    }
}
Object.defineProperty(window, '__AURELIA_DEVTOOLS_HOOK__', {
    get() {
        return {
            getCustomElementInfo: (element) => {
            }
        };
    }
});
// inject the hook
if (document instanceof HTMLDocument) {
    installScript(install);
}


/***/ }),

/***/ "./src/shared/env.ts":
/*!***************************!*\
  !*** ./src/shared/env.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "isBrowser": () => /* binding */ isBrowser,
/* harmony export */   "target": () => /* binding */ target,
/* harmony export */   "isChrome": () => /* binding */ isChrome,
/* harmony export */   "isFirefox": () => /* binding */ isFirefox,
/* harmony export */   "isWindows": () => /* binding */ isWindows,
/* harmony export */   "isMac": () => /* binding */ isMac,
/* harmony export */   "isLinux": () => /* binding */ isLinux
/* harmony export */ });
const isBrowser = typeof navigator !== 'undefined';
const target = isBrowser ? window : typeof __webpack_require__.g !== 'undefined' ? __webpack_require__.g : {};
const isChrome = typeof chrome !== 'undefined' && !!chrome.devtools;
const isFirefox = isBrowser && navigator.userAgent.includes('Firefox');
const isWindows = isBrowser && navigator.platform.startsWith('Win');
const isMac = isBrowser && navigator.platform === 'MacIntel';
const isLinux = isBrowser && navigator.platform.startsWith('Linux');


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		if(__webpack_module_cache__[moduleId]) {
/******/ 			return __webpack_module_cache__[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop)
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	// module exports must be returned from runtime so entry inlining is disabled
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__("./src/contentscript/contentscript.ts");
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9bbmFtZV0vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEva2VybmVsL2Rpc3QvZXNtL2luZGV4LmpzIiwid2VicGFjazovL1tuYW1lXS8uL25vZGVfbW9kdWxlcy9AYXVyZWxpYS9tZXRhZGF0YS9kaXN0L2VzbS9pbmRleC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcGxhdGZvcm0tYnJvd3Nlci9kaXN0L2VzbS9pbmRleC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcGxhdGZvcm0vZGlzdC9lc20vaW5kZXguanMiLCJ3ZWJwYWNrOi8vW25hbWVdLy4vbm9kZV9tb2R1bGVzL0BhdXJlbGlhL3J1bnRpbWUtaHRtbC9kaXN0L2VzbS9pbmRleC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9ub2RlX21vZHVsZXMvQGF1cmVsaWEvcnVudGltZS9kaXN0L2VzbS9pbmRleC5qcyIsIndlYnBhY2s6Ly9bbmFtZV0vLi9zcmMvY29udGVudHNjcmlwdC9jb250ZW50c2NyaXB0LnRzIiwid2VicGFjazovL1tuYW1lXS8uL3NyYy9zaGFyZWQvZW52LnRzIiwid2VicGFjazovL1tuYW1lXS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9bbmFtZV0vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL1tuYW1lXS93ZWJwYWNrL3J1bnRpbWUvZ2xvYmFsIiwid2VicGFjazovL1tuYW1lXS93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL1tuYW1lXS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL1tuYW1lXS93ZWJwYWNrL3N0YXJ0dXAiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTZGOztBQUVjOztBQUVFOztBQUU3Rzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE1BQU07QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLGNBQWM7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLE1BQU07QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsZ0JBQWdCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQSxXQUFXLFVBQVU7QUFDckI7QUFDQTtBQUNBLFVBQVUsTUFBTTtBQUNoQjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtB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Q0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQSx3Q0FBd0M7QUFDeEMsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQkFBZ0I7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwyREFBMkQsZ0JBQWdCO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELGlCQUFpQjtBQUM1RTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsdUNBQXVDLGNBQWM7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkVBQTZFO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLDhHQUE4RztBQUM5RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RCxjQUFjO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxNQUFNO0FBQ3BCO0FBQ0EsaUJBQWlCLDJEQUFDO0FBQ2xCLHdDQUF3QztBQUN4QztBQUNBLHdEQUF3RDtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWEsbURBQW1EO0FBQ2hFO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixNQUFNO0FBQzVCO0FBQ0EseUJBQXlCLDJEQUFDO0FBQzFCLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVFQUF1RSxFQUFFO0FBQ3pFO0FBQ0E7QUFDQSxTQUFTLHFFQUFxRTtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLG1DQUFtQyxFQUFFO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhEQUE4RDtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxFQUFFO0FBQ2hELHVEQUF1RCxPQUFPO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQSwrQkFBK0IsT0FBTztBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMscURBQXFELGVBQWUsR0FBRztBQUNoRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVEQUF1RCxPQUFPO0FBQzlEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxnQ0FBZ0MsT0FBTztBQUN2Qzs7QUFFQTs7QUFFQSwyQkFBMkI7O0FBRTNCOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnSEFBZ0gsZ0NBQWdDLFFBQVE7QUFDeEo7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdCQUFnQjs7QUFFakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQkFBZ0I7O0FBRWpCOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxlQUFlLDJEQUFLO0FBQ3BCO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSx1QkFBdUIsRUFBRTtBQUN6QixLQUFLO0FBQ0w7QUFDQSx1QkFBdUIsRUFBRTtBQUN6QixLQUFLO0FBQ0w7QUFDQSx1QkFBdUIsRUFBRTtBQUN6QixLQUFLO0FBQ0w7QUFDQSx1QkFBdUIsRUFBRTtBQUN6QixLQUFLO0FBQ0w7QUFDQSx1QkFBdUIsRUFBRTtBQUN6QixLQUFLO0FBQ0w7QUFDQSx1QkFBdUIsRUFBRTtBQUN6QixLQUFLO0FBQ0w7QUFDQSx1QkFBdUIsRUFBRTtBQUN6QixLQUFLO0FBQ0w7QUFDQSx1QkFBdUIsRUFBRTtBQUN6QjtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpRUFBaUU7QUFDaEYsc0NBQXNDLFNBQVMsSUFBSSxTQUFTLElBQUksRUFBRTtBQUNsRSxrQkFBa0IsU0FBUyxJQUFJLFNBQVMsR0FBRyxTQUFTLElBQUksRUFBRTtBQUMxRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsT0FBTztBQUM1QztBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0EsWUFBWSxpREFBaUQsS0FBSztBQUNsRTtBQUNBO0FBQ0E7QUFDQSw2RUFBNkU7QUFDN0U7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELGdFQUFnRSx3Q0FBd0MsVUFBVTtBQUNySztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFFQUFxRSxFQUFFO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSxFQUFFO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsbUVBQVc7QUFDbkI7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxnQkFBZ0Isb0VBQWdCOztBQUVoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsb0VBQWdCO0FBQ3hCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVELFdBQVcsc0RBQUM7O0FBRVosV0FBVywrREFBaUI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsbUVBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsV0FBVywrREFBaUI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrQ0FBa0MsRUFBRSxtQ0FBbUMsaUNBQWlDLEVBQUUsSUFBSTtBQUM5Rzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsbUVBQW1FO0FBQ25FO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsT0FBTztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsMkNBQTJDLE9BQU87QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsc0VBQUM7O0FBRUQsZ0VBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU8sc0NBQXNDLEdBQUcseURBQUM7O0FBRWpEOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkRBQUM7O0FBRUQsT0FBTyxXQUFXLEdBQUcseURBQUM7O0FBRXRCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsTUFBTTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRDtBQUNsRDtBQUNBLGtCQUFrQixNQUFNO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLE1BQU07QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLE1BQU07QUFDcEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnRUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkRBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixnRUFBUTtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBLDZEQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkRBQUM7O0FBRUQsT0FBTyxzQ0FBc0MsR0FBRyx5REFBQzs7QUFFakQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEU7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDZEQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw2REFBQzs7QUFFRCw2REFBQzs7QUFFRCxXQUFXLCtEQUFpQjs7QUFFNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsbUVBQVc7QUFDbkI7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRDtBQUNuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0E7O0FBRUEsV0FBVywrREFBaUI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMENBQTBDLHlCQUF5QjtBQUNuRTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0E7QUFDQSwwREFBMEQ7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHNCQUFzQjtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFdBQVcsK0RBQWlCOztBQUU1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFdBQVcsK0RBQWlCOztBQUU1QixXQUFXLCtEQUFpQjs7QUFFNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdCQUFnQjs7QUFFakIsV0FBVywrREFBaUI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxXQUFXLCtEQUFpQjs7QUFFNUIsV0FBVywrREFBaUI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxZQUFZLG1FQUFXO0FBQ3ZCO0FBQ0Esa0JBQWtCLGdFQUFZO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IseURBQXlELEVBQUU7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsOEdBQThHO0FBQzlHO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxFQUFFLEdBQUcsVUFBVTtBQUNyRTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLDZEQUFDO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELE1BQU0sR0FBRyxVQUFVO0FBQ3pFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxNQUFNLEdBQUcsVUFBVTtBQUN6RTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYywrREFBQyxFQUFFLDhEQUFDOztBQUVsQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWMsK0RBQUMsRUFBRSw4REFBQzs7QUFFbEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYywrREFBQzs7QUFFZjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvRUFBb0UsZ0VBQVE7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjLE1BQU07QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWMsK0RBQUMsRUFBRSw4REFBQzs7QUFFbEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGNBQWMsK0RBQUMsRUFBRSw4REFBQzs7QUFFbEI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxnRUFBUTtBQUM5RDtBQUNBO0FBQ0E7O0FBRUEsY0FBYywrREFBQyxFQUFFLDhEQUFDOztBQUVsQjs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBLHdCQUF3Qix1RUFBQztBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsb0VBQUM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsTUFBTTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYywrREFBQyxFQUFFLDhEQUFDOztBQUVsQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsY0FBYywrREFBQzs7QUFFZjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELGdFQUFRO0FBQ2hFO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLCtEQUFDLEVBQUUsOERBQUM7O0FBRWxCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkRBQTJELGdFQUFRO0FBQ25FO0FBQ0E7QUFDQTs7QUFFQSxjQUFjLCtEQUFDLEVBQUUsOERBQUM7O0FBRWxCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2S0FBNkssdURBQUM7QUFDOUs7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztB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RUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxXQUFXLCtEQUFpQjs7QUFFNUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLFFBQVEsc0RBQVE7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1FQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtFQUErRSx1REFBQyxxREFBcUQsdURBQUM7QUFDdEk7QUFDQSw0Q0FBNEMsdURBQUM7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsTUFBTTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUVBQXVFLEVBQUU7QUFDekU7QUFDQTtBQUNBLCtDQUErQztBQUMvQztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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Q0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxpRUFBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsaUVBQUM7O0FBRUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQ7QUFDekQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsdUNBQXVDO0FBQzVFO0FBQ0EsNkVBQTZFO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDO0FBQzdDO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQztBQUMzQztBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLG1CQUFtQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxzRUFBQzs7QUFFRCxnRUFBQzs7QUFFRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlFQUF5RTtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHNFQUFDOztBQUVELGdFQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDBEQUFDO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsTUFBTTtBQUN4QjtBQUNBO0FBQ0EsZUFBZSx1REFBQztBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx1REFBQztBQUNoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsTUFBTTtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QUFDQTtBQUNBLGtCQUFrQix1REFBQztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFVBQVUsa0VBQVU7QUFDcEIsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIscUVBQXFFO0FBQ2xHLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpQ0FBaUMsT0FBTztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0RBQXNEO0FBQ3REO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtB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O0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdLQUF3SztBQUN4SztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseURBQXlELHFCQUFxQjtBQUM5RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw4REFBWTtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQSxXQUFXLCtEQUFpQjtBQUM1QjtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxnRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBLGdFQUFFOztBQUVGOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztB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Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsT0FBTztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxVQUFVO0FBQzVEO0FBQ0E7QUFDQTtBQUNBLFNBQVMsaUNBQWlDLFVBQVU7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrREFBa0QsVUFBVTtBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QyxPQUFPO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELFVBQVU7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJJQUEySSx1QkFBdUI7QUFDbEs7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsaUVBQUMsT0FBTyxpRUFBQztBQUNqQyx3QkFBd0IsK0RBQUMsT0FBTywrREFBQztBQUNqQztBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsdUNBQXVDLGVBQWU7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsdUNBQXVDLGVBQWU7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHVCQUF1QjtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDJEQUEyRCx1REFBQzs7QUFFNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw2REFBNkQsdURBQUMsRUFBRSx1REFBQzs7QUFFakU7QUFDQSx1QkFBdUIsdURBQUM7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw2QkFBNkI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsNkJBQTZCLHVEQUFDO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFF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OztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE1BQU07QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE1BQU07QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE1BQU07QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLE1BQU07QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qiw2REFBQztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUI7QUFDQTtBQUNBLHVCQUF1QixRQUFRO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQixPQUFPO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsT0FBTztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QjtBQUM3QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxzQ0FBc0Msc0NBQXNDLHNDQUFzQztBQUNsSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsV0FBVywrREFBaUI7O0FBRTVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQkFBZ0I7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0JBQWdCOztBQUVqQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQkFBZ0I7O0FBRWpCOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0JBQWdCOztBQUVqQjs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsZ0JBQWdCOztBQUVqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELEtBQUs7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtFQUFrRSxLQUFLLEdBQUcsc0RBQXNELEtBQUs7QUFDckksaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGlDQUFpQyxLQUFLO0FBQ3ZELGFBQWE7O0FBRWI7QUFDQSxzREFBc0Q7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGdFQUFnRSxLQUFLLEdBQUcsaUNBQWlDLEtBQUs7QUFDOUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1FQUFtRSxLQUFLO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFO0FBQzNFOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEUsMERBQTBEO0FBQ3RJO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLEtBQUs7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3REFBd0QsS0FBSztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxLQUFLO0FBQzdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsS0FBSztBQUMxRCxtQ0FBbUMsS0FBSztBQUN4QztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLHVDQUF1QyxLQUFLO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxpREFBaUQ7QUFDakQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0REFBNEQsS0FBSztBQUNqRSxvREFBb0QsS0FBSztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULG1CQUFtQixxQkFBcUI7QUFDeEM7QUFDQSw2REFBNkQ7QUFDN0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsaUNBQWlDLEtBQUs7QUFDL0M7QUFDQTtBQUNBO0FBQ0EscURBQXFEO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssNEJBQTRCO0FBQ2pDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssMERBQTBELEtBQUssR0FBRztBQUN2RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssZUFBZSwwREFBMEQ7QUFDOUUsNERBQTRELEtBQUs7QUFDakU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3REFBd0QsS0FBSztBQUM3RDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx5QkFBeUIsaUNBQWlDLEtBQUssR0FBRyxFQUFFO0FBQ3BFOztBQUVBLDhEQUE4RCxVQUFVOztBQUV4RTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1CQUFtQixPQUFPO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLE9BQU87QUFDckM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSwrQkFBK0IsS0FBSztBQUNwQzs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBLFdBQVcsK0RBQWlCOztBQUU1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixNQUFNO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxFQUFFO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsd0JBQXdCLHNEQUFDOztBQUV6Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0REFBNEQsU0FBUztBQUNyRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUEsV0FBVywrREFBaUI7O0FBRTVCLFdBQVcsK0RBQWlCO0FBQzVCLGFBQWEsb0RBQUM7QUFDZDtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1FQUFtRTtBQUNuRTs7QUFFQTtBQUNBLHNDQUFzQyw2REFBQztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRDQUE0QztBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLHNDQUFzQyxzQ0FBc0M7QUFDNUU7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxXQUFXLCtEQUFpQjs7QUFFNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsbUNBQW1DLFVBQVU7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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QUFvRDtBQUMxSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsUUFBUTtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQzNiTztBQUNBLDJDQUEyQyxxQkFBTSxtQkFBbUIscUJBQU07QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7OztVQ05QO1VBQ0E7O1VBRUE7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBOztVQUVBO1VBQ0E7O1VBRUE7VUFDQTtVQUNBOzs7OztXQ3JCQTtXQUNBO1dBQ0E7V0FDQTtXQUNBLHdDQUF3Qyx5Q0FBeUM7V0FDakY7V0FDQTtXQUNBLEU7Ozs7O1dDUEE7V0FDQTtXQUNBO1dBQ0E7V0FDQSxFQUFFO1dBQ0Y7V0FDQTtXQUNBLENBQUMsSTs7Ozs7V0NQRCxzRjs7Ozs7V0NBQTtXQUNBO1dBQ0E7V0FDQSxzREFBc0Qsa0JBQWtCO1dBQ3hFO1dBQ0EsK0NBQStDLGNBQWM7V0FDN0QsRTs7OztVQ05BO1VBQ0E7VUFDQTtVQUNBIiwiZmlsZSI6ImJ1aWxkL2NvbnRlbnRzY3JpcHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNZXRhZGF0YSBhcyB0LCBhcHBseU1ldGFkYXRhUG9seWZpbGwgYXMgZSwgaXNPYmplY3QgYXMgbiB9IGZyb20gXCJAYXVyZWxpYS9tZXRhZGF0YVwiO1xuXG5leHBvcnQgeyBNZXRhZGF0YSwgYXBwbHlNZXRhZGF0YVBvbHlmaWxsLCBpc051bGxPclVuZGVmaW5lZCwgaXNPYmplY3QsIG1ldGFkYXRhIH0gZnJvbSBcIkBhdXJlbGlhL21ldGFkYXRhXCI7XG5cbmV4cG9ydCB7IFBsYXRmb3JtLCBUYXNrLCBUYXNrQWJvcnRFcnJvciwgVGFza1F1ZXVlLCBUYXNrUXVldWVQcmlvcml0eSwgVGFza1N0YXR1cyB9IGZyb20gXCJAYXVyZWxpYS9wbGF0Zm9ybVwiO1xuXG5jb25zdCByID0ge307XG5cbmZ1bmN0aW9uIGkodCkge1xuICAgIHN3aXRjaCAodHlwZW9mIHQpIHtcbiAgICAgIGNhc2UgXCJudW1iZXJcIjpcbiAgICAgICAgcmV0dXJuIHQgPj0gMCAmJiAoMCB8IHQpID09PSB0O1xuXG4gICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSByW3RdO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gZSkgcmV0dXJuIGU7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5sZW5ndGg7XG4gICAgICAgICAgICBpZiAoMCA9PT0gbikgcmV0dXJuIHJbdF0gPSBmYWxzZTtcbiAgICAgICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgICAgIGZvciAoO3MgPCBuOyArK3MpIHtcbiAgICAgICAgICAgICAgICBpID0gdC5jaGFyQ29kZUF0KHMpO1xuICAgICAgICAgICAgICAgIGlmICgwID09PSBzICYmIDQ4ID09PSBpICYmIG4gPiAxIHx8IGkgPCA0OCB8fCBpID4gNTcpIHJldHVybiByW3RdID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gclt0XSA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcyh0KSB7XG4gICAgc3dpdGNoICh0eXBlb2YgdCkge1xuICAgICAgY2FzZSBcIm51bWJlclwiOlxuICAgICAgY2FzZSBcImJpZ2ludFwiOlxuICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbyh0KSB7XG4gICAgc3dpdGNoICh0eXBlb2YgdCkge1xuICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICByZXR1cm4gdHJ1ZTtcblxuICAgICAgY2FzZSBcIm9iamVjdFwiOlxuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIERhdGU7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG59XG5cbmNvbnN0IHUgPSBmdW5jdGlvbigpIHtcbiAgICBsZXQgdDtcbiAgICAoZnVuY3Rpb24odCkge1xuICAgICAgICB0W3RbXCJub25lXCJdID0gMF0gPSBcIm5vbmVcIjtcbiAgICAgICAgdFt0W1wiZGlnaXRcIl0gPSAxXSA9IFwiZGlnaXRcIjtcbiAgICAgICAgdFt0W1widXBwZXJcIl0gPSAyXSA9IFwidXBwZXJcIjtcbiAgICAgICAgdFt0W1wibG93ZXJcIl0gPSAzXSA9IFwibG93ZXJcIjtcbiAgICB9KSh0IHx8ICh0ID0ge30pKTtcbiAgICBjb25zdCBlID0gT2JqZWN0LmFzc2lnbihPYmplY3QuY3JlYXRlKG51bGwpLCB7XG4gICAgICAgIDA6IHRydWUsXG4gICAgICAgIDE6IHRydWUsXG4gICAgICAgIDI6IHRydWUsXG4gICAgICAgIDM6IHRydWUsXG4gICAgICAgIDQ6IHRydWUsXG4gICAgICAgIDU6IHRydWUsXG4gICAgICAgIDY6IHRydWUsXG4gICAgICAgIDc6IHRydWUsXG4gICAgICAgIDg6IHRydWUsXG4gICAgICAgIDk6IHRydWVcbiAgICB9KTtcbiAgICBmdW5jdGlvbiBuKHQpIHtcbiAgICAgICAgaWYgKFwiXCIgPT09IHQpIHJldHVybiAwO1xuICAgICAgICBpZiAodCAhPT0gdC50b1VwcGVyQ2FzZSgpKSByZXR1cm4gMztcbiAgICAgICAgaWYgKHQgIT09IHQudG9Mb3dlckNhc2UoKSkgcmV0dXJuIDI7XG4gICAgICAgIGlmICh0cnVlID09PSBlW3RdKSByZXR1cm4gMTtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IHIgPSB0Lmxlbmd0aDtcbiAgICAgICAgaWYgKDAgPT09IHIpIHJldHVybiB0O1xuICAgICAgICBsZXQgaSA9IGZhbHNlO1xuICAgICAgICBsZXQgcyA9IFwiXCI7XG4gICAgICAgIGxldCBvO1xuICAgICAgICBsZXQgdSA9IFwiXCI7XG4gICAgICAgIGxldCBsID0gMDtcbiAgICAgICAgbGV0IGMgPSB0LmNoYXJBdCgwKTtcbiAgICAgICAgbGV0IGYgPSBuKGMpO1xuICAgICAgICBsZXQgYSA9IDA7XG4gICAgICAgIGZvciAoO2EgPCByOyArK2EpIHtcbiAgICAgICAgICAgIG8gPSBsO1xuICAgICAgICAgICAgdSA9IGM7XG4gICAgICAgICAgICBsID0gZjtcbiAgICAgICAgICAgIGMgPSB0LmNoYXJBdChhICsgMSk7XG4gICAgICAgICAgICBmID0gbihjKTtcbiAgICAgICAgICAgIGlmICgwID09PSBsKSB7XG4gICAgICAgICAgICAgICAgaWYgKHMubGVuZ3RoID4gMCkgaSA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICghaSAmJiBzLmxlbmd0aCA+IDAgJiYgMiA9PT0gbCkgaSA9IDMgPT09IG8gfHwgMyA9PT0gZjtcbiAgICAgICAgICAgICAgICBzICs9IGUodSwgaSk7XG4gICAgICAgICAgICAgICAgaSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzO1xuICAgIH07XG59KCk7XG5cbmNvbnN0IGwgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zdCB0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICBmdW5jdGlvbiBlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGUgPyB0LnRvVXBwZXJDYXNlKCkgOiB0LnRvTG93ZXJDYXNlKCk7XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbihuKSB7XG4gICAgICAgIGxldCByID0gdFtuXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gcikgciA9IHRbbl0gPSB1KG4sIGUpO1xuICAgICAgICByZXR1cm4gcjtcbiAgICB9O1xufSgpO1xuXG5jb25zdCBjID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgbGV0IG4gPSB0W2VdO1xuICAgICAgICBpZiAodm9pZCAwID09PSBuKSB7XG4gICAgICAgICAgICBuID0gbChlKTtcbiAgICAgICAgICAgIGlmIChuLmxlbmd0aCA+IDApIG4gPSBuWzBdLnRvVXBwZXJDYXNlKCkgKyBuLnNsaWNlKDEpO1xuICAgICAgICAgICAgdFtlXSA9IG47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfTtcbn0oKTtcblxuY29uc3QgZiA9IGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGZ1bmN0aW9uIGUodCwgZSkge1xuICAgICAgICByZXR1cm4gZSA/IGAtJHt0LnRvTG93ZXJDYXNlKCl9YCA6IHQudG9Mb3dlckNhc2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG4pIHtcbiAgICAgICAgbGV0IHIgPSB0W25dO1xuICAgICAgICBpZiAodm9pZCAwID09PSByKSByID0gdFtuXSA9IHUobiwgZSk7XG4gICAgICAgIHJldHVybiByO1xuICAgIH07XG59KCk7XG5cbmZ1bmN0aW9uIGEodCkge1xuICAgIGNvbnN0IHtsZW5ndGg6IGV9ID0gdDtcbiAgICBjb25zdCBuID0gQXJyYXkoZSk7XG4gICAgbGV0IHIgPSAwO1xuICAgIGZvciAoO3IgPCBlOyArK3IpIG5bcl0gPSB0W3JdO1xuICAgIHJldHVybiBuO1xufVxuXG5jb25zdCBoID0ge307XG5cbmZ1bmN0aW9uIGQodCkge1xuICAgIGlmICh2b2lkIDAgPT09IGhbdF0pIGhbdF0gPSAwO1xuICAgIHJldHVybiArK2hbdF07XG59XG5cbmZ1bmN0aW9uIHYodCkge1xuICAgIGhbdF0gPSAwO1xufVxuXG5mdW5jdGlvbiB3KHQsIGUpIHtcbiAgICByZXR1cm4gdCAtIGU7XG59XG5cbmZ1bmN0aW9uIGcodCwgZSwgbikge1xuICAgIGlmICh2b2lkIDAgPT09IHQgfHwgbnVsbCA9PT0gdCB8fCB0ID09PSBPdCkgaWYgKHZvaWQgMCA9PT0gZSB8fCBudWxsID09PSBlIHx8IGUgPT09IE90KSByZXR1cm4gT3Q7IGVsc2UgcmV0dXJuIG4gPyBlLnNsaWNlKDApIDogZTsgZWxzZSBpZiAodm9pZCAwID09PSBlIHx8IG51bGwgPT09IGUgfHwgZSA9PT0gT3QpIHJldHVybiBuID8gdC5zbGljZSgwKSA6IHQ7XG4gICAgY29uc3QgciA9IHt9O1xuICAgIGNvbnN0IGkgPSBuID8gdC5zbGljZSgwKSA6IHQ7XG4gICAgbGV0IHMgPSB0Lmxlbmd0aDtcbiAgICBsZXQgbyA9IGUubGVuZ3RoO1xuICAgIHdoaWxlIChzLS0gPiAwKSByW3Rbc11dID0gdHJ1ZTtcbiAgICBsZXQgdTtcbiAgICB3aGlsZSAoby0tID4gMCkge1xuICAgICAgICB1ID0gZVtvXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gclt1XSkge1xuICAgICAgICAgICAgaS5wdXNoKHUpO1xuICAgICAgICAgICAgclt1XSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGk7XG59XG5cbmZ1bmN0aW9uIG0odCwgZSwgbikge1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogbi5lbnVtZXJhYmxlLFxuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbi52YWx1ZS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBlLCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHQsXG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IG4uZW51bWVyYWJsZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgfVxuICAgIH07XG59XG5cbmZ1bmN0aW9uIHAoLi4udCkge1xuICAgIGNvbnN0IGUgPSBbXTtcbiAgICBsZXQgbiA9IDA7XG4gICAgY29uc3QgciA9IHQubGVuZ3RoO1xuICAgIGxldCBpID0gMDtcbiAgICBsZXQgcztcbiAgICBsZXQgbyA9IDA7XG4gICAgZm9yICg7byA8IHI7ICsrbykge1xuICAgICAgICBzID0gdFtvXTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gcykge1xuICAgICAgICAgICAgaSA9IHMubGVuZ3RoO1xuICAgICAgICAgICAgbGV0IHQgPSAwO1xuICAgICAgICAgICAgZm9yICg7dCA8IGk7ICsrdCkgZVtuKytdID0gc1t0XTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24geSguLi50KSB7XG4gICAgY29uc3QgZSA9IHt9O1xuICAgIGNvbnN0IG4gPSB0Lmxlbmd0aDtcbiAgICBsZXQgcjtcbiAgICBsZXQgaTtcbiAgICBsZXQgcyA9IDA7XG4gICAgZm9yICg7biA+IHM7ICsrcykge1xuICAgICAgICByID0gdFtzXTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gcikgZm9yIChpIGluIHIpIGVbaV0gPSByW2ldO1xuICAgIH1cbiAgICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gUiguLi50KSB7XG4gICAgY29uc3QgZSA9IHQubGVuZ3RoO1xuICAgIGxldCBuO1xuICAgIGxldCByID0gMDtcbiAgICBmb3IgKDtlID4gcjsgKytyKSB7XG4gICAgICAgIG4gPSB0W3JdO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBuKSByZXR1cm4gbjtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBObyBkZWZhdWx0IHZhbHVlIGZvdW5kYCk7XG59XG5cbmNvbnN0IGIgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zdCB0ID0gRnVuY3Rpb24ucHJvdG90eXBlO1xuICAgIGNvbnN0IGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG4gICAgY29uc3QgbiA9IG5ldyBXZWFrTWFwO1xuICAgIGxldCByID0gdDtcbiAgICBsZXQgaSA9IDA7XG4gICAgbGV0IHM7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKG8pIHtcbiAgICAgICAgcyA9IG4uZ2V0KG8pO1xuICAgICAgICBpZiAodm9pZCAwID09PSBzKSB7XG4gICAgICAgICAgICBuLnNldChvLCBzID0gWyByID0gbyBdKTtcbiAgICAgICAgICAgIGkgPSAwO1xuICAgICAgICAgICAgd2hpbGUgKChyID0gZShyKSkgIT09IHQpIHNbKytpXSA9IHI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfTtcbn0oKTtcblxuZnVuY3Rpb24gQyguLi50KSB7XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShudWxsKSwgLi4udCk7XG59XG5cbmNvbnN0ICQgPSBmdW5jdGlvbigpIHtcbiAgICBjb25zdCB0ID0gbmV3IFdlYWtNYXA7XG4gICAgbGV0IGUgPSBmYWxzZTtcbiAgICBsZXQgbiA9IFwiXCI7XG4gICAgbGV0IHIgPSAwO1xuICAgIHJldHVybiBmdW5jdGlvbihpKSB7XG4gICAgICAgIGUgPSB0LmdldChpKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkge1xuICAgICAgICAgICAgbiA9IGkudG9TdHJpbmcoKTtcbiAgICAgICAgICAgIHIgPSBuLmxlbmd0aDtcbiAgICAgICAgICAgIGUgPSByID49IDI5ICYmIHIgPD0gMTAwICYmIDEyNSA9PT0gbi5jaGFyQ29kZUF0KHIgLSAxKSAmJiBuLmNoYXJDb2RlQXQociAtIDIpIDw9IDMyICYmIDkzID09PSBuLmNoYXJDb2RlQXQociAtIDMpICYmIDEwMSA9PT0gbi5jaGFyQ29kZUF0KHIgLSA0KSAmJiAxMDAgPT09IG4uY2hhckNvZGVBdChyIC0gNSkgJiYgMTExID09PSBuLmNoYXJDb2RlQXQociAtIDYpICYmIDk5ID09PSBuLmNoYXJDb2RlQXQociAtIDcpICYmIDMyID09PSBuLmNoYXJDb2RlQXQociAtIDgpICYmIDEwMSA9PT0gbi5jaGFyQ29kZUF0KHIgLSA5KSAmJiAxMTggPT09IG4uY2hhckNvZGVBdChyIC0gMTApICYmIDEwNSA9PT0gbi5jaGFyQ29kZUF0KHIgLSAxMSkgJiYgMTE2ID09PSBuLmNoYXJDb2RlQXQociAtIDEyKSAmJiA5NyA9PT0gbi5jaGFyQ29kZUF0KHIgLSAxMykgJiYgMTEwID09PSBuLmNoYXJDb2RlQXQociAtIDE0KSAmJiA4OCA9PT0gbi5jaGFyQ29kZUF0KHIgLSAxNSk7XG4gICAgICAgICAgICB0LnNldChpLCBlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICB9O1xufSgpO1xuXG5mdW5jdGlvbiBFKHQsIGUpIHtcbiAgICBpZiAodCBpbnN0YW5jZW9mIFByb21pc2UpIHJldHVybiB0LnRoZW4oZSk7XG4gICAgcmV0dXJuIGUodCk7XG59XG5cbmZ1bmN0aW9uIEEoLi4udCkge1xuICAgIGxldCBlO1xuICAgIGxldCBuO1xuICAgIGxldCByO1xuICAgIGxldCBpID0gMDtcbiAgICBsZXQgcyA9IHQubGVuZ3RoO1xuICAgIGZvciAoO2kgPCBzOyArK2kpIHtcbiAgICAgICAgZSA9IHRbaV07XG4gICAgICAgIGlmICgoZSA9IHRbaV0pIGluc3RhbmNlb2YgUHJvbWlzZSkgaWYgKHZvaWQgMCA9PT0gbikgbiA9IGU7IGVsc2UgaWYgKHZvaWQgMCA9PT0gcikgciA9IFsgbiwgZSBdOyBlbHNlIHIucHVzaChlKTtcbiAgICB9XG4gICAgaWYgKHZvaWQgMCA9PT0gcikgcmV0dXJuIG47XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHIpO1xufVxuXG5jb25zdCBqID0gdC5nZXRPd247XG5cbmNvbnN0IE8gPSB0Lmhhc093bjtcblxuY29uc3QgayA9IHQuZGVmaW5lO1xuXG5jb25zdCBJID0gdCA9PiBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiB0O1xuXG5jb25zdCBNID0gdCA9PiBcInN0cmluZ1wiID09PSB0eXBlb2YgdDtcblxuY29uc3QgVCA9IFwiYXU6YW5ub3RhdGlvblwiO1xuXG5jb25zdCBGID0gKHQsIGUpID0+IHtcbiAgICBpZiAodm9pZCAwID09PSBlKSByZXR1cm4gYCR7VH06JHt0fWA7XG4gICAgcmV0dXJuIGAke1R9OiR7dH06JHtlfWA7XG59O1xuXG5jb25zdCBVID0gKHQsIGUpID0+IHtcbiAgICBjb25zdCBuID0gaihULCB0KTtcbiAgICBpZiAodm9pZCAwID09PSBuKSBrKFQsIFsgZSBdLCB0KTsgZWxzZSBuLnB1c2goZSk7XG59O1xuXG5jb25zdCBMID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgbmFtZTogXCJhdTphbm5vdGF0aW9uXCIsXG4gICAgYXBwZW5kVG86IFUsXG4gICAgc2V0KHQsIGUsIG4pIHtcbiAgICAgICAgayhGKGUpLCBuLCB0KTtcbiAgICB9LFxuICAgIGdldDogKHQsIGUpID0+IGooRihlKSwgdCksXG4gICAgZ2V0S2V5cyh0KSB7XG4gICAgICAgIGxldCBlID0gaihULCB0KTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgayhULCBlID0gW10sIHQpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9LFxuICAgIGlzS2V5OiB0ID0+IHQuc3RhcnRzV2l0aChUKSxcbiAgICBrZXlGb3I6IEZcbn0pO1xuXG5jb25zdCBQID0gXCJhdTpyZXNvdXJjZVwiO1xuXG5jb25zdCBEID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgbmFtZTogUCxcbiAgICBhcHBlbmRUbyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBqKFAsIHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBuKSBrKFAsIFsgZSBdLCB0KTsgZWxzZSBuLnB1c2goZSk7XG4gICAgfSxcbiAgICBoYXM6IHQgPT4gTyhQLCB0KSxcbiAgICBnZXRBbGwodCkge1xuICAgICAgICBjb25zdCBlID0gaihQLCB0KTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgcmV0dXJuIE90OyBlbHNlIHJldHVybiBlLm1hcCgoZSA9PiBqKGUsIHQpKSk7XG4gICAgfSxcbiAgICBnZXRLZXlzKHQpIHtcbiAgICAgICAgbGV0IGUgPSBqKFAsIHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSBrKFAsIGUgPSBbXSwgdCk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH0sXG4gICAgaXNLZXk6IHQgPT4gdC5zdGFydHNXaXRoKFApLFxuICAgIGtleUZvcih0LCBlKSB7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHJldHVybiBgJHtQfToke3R9YDtcbiAgICAgICAgcmV0dXJuIGAke1B9OiR7dH06JHtlfWA7XG4gICAgfVxufSk7XG5cbmNvbnN0IFMgPSB7XG4gICAgYW5ub3RhdGlvbjogTCxcbiAgICByZXNvdXJjZTogRFxufTtcblxuY29uc3QgTiA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbmZ1bmN0aW9uIFcodCwgZSwgbiwgcikge1xuICAgIGxldCBpID0gaihGKHQpLCBuKTtcbiAgICBpZiAodm9pZCAwID09PSBpKSB7XG4gICAgICAgIGkgPSBlW3RdO1xuICAgICAgICBpZiAodm9pZCAwID09PSBpKSB7XG4gICAgICAgICAgICBpID0gblt0XTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGkgfHwgIU4uY2FsbChuLCB0KSkgcmV0dXJuIHIoKTtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICByZXR1cm4gaTtcbn1cblxuZnVuY3Rpb24gQih0LCBlLCBuKSB7XG4gICAgbGV0IHIgPSBqKEYodCksIGUpO1xuICAgIGlmICh2b2lkIDAgPT09IHIpIHtcbiAgICAgICAgciA9IGVbdF07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHIgfHwgIU4uY2FsbChlLCB0KSkgcmV0dXJuIG4oKTtcbiAgICAgICAgcmV0dXJuIHI7XG4gICAgfVxuICAgIHJldHVybiByO1xufVxuXG5mdW5jdGlvbiBRKHQsIGUsIG4pIHtcbiAgICBjb25zdCByID0gZVt0XTtcbiAgICBpZiAodm9pZCAwID09PSByKSByZXR1cm4gbigpO1xuICAgIHJldHVybiByO1xufVxuXG5lKFJlZmxlY3QsIGZhbHNlLCBmYWxzZSk7XG5cbmNsYXNzIFJlc29sdmVyQnVpbGRlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHQ7XG4gICAgICAgIHRoaXMua2V5ID0gZTtcbiAgICB9XG4gICAgaW5zdGFuY2UodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclJlc29sdmVyKDAsIHQpO1xuICAgIH1cbiAgICBzaW5nbGV0b24odCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclJlc29sdmVyKDEsIHQpO1xuICAgIH1cbiAgICB0cmFuc2llbnQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclJlc29sdmVyKDIsIHQpO1xuICAgIH1cbiAgICBjYWxsYmFjayh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZ2lzdGVyUmVzb2x2ZXIoMywgdCk7XG4gICAgfVxuICAgIGNhY2hlZENhbGxiYWNrKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJSZXNvbHZlcigzLCBDdCh0KSk7XG4gICAgfVxuICAgIGFsaWFzVG8odCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclJlc29sdmVyKDUsIHQpO1xuICAgIH1cbiAgICByZWdpc3RlclJlc29sdmVyKHQsIGUpIHtcbiAgICAgICAgY29uc3Qge2NvbnRhaW5lcjogbiwga2V5OiByfSA9IHRoaXM7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gdGhpcy5rZXkgPSB2b2lkIDA7XG4gICAgICAgIHJldHVybiBuLnJlZ2lzdGVyUmVzb2x2ZXIociwgbmV3IFJlc29sdmVyKHIsIHQsIGUpKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHgodCkge1xuICAgIGNvbnN0IGUgPSB0LnNsaWNlKCk7XG4gICAgY29uc3QgbiA9IE9iamVjdC5rZXlzKHQpO1xuICAgIGNvbnN0IHIgPSBuLmxlbmd0aDtcbiAgICBsZXQgcztcbiAgICBmb3IgKGxldCBvID0gMDsgbyA8IHI7ICsrbykge1xuICAgICAgICBzID0gbltvXTtcbiAgICAgICAgaWYgKCFpKHMpKSBlW3NdID0gdFtzXTtcbiAgICB9XG4gICAgcmV0dXJuIGU7XG59XG5cbmNvbnN0IHogPSB7XG4gICAgbm9uZSh0KSB7XG4gICAgICAgIHRocm93IEVycm9yKGBBVVIwMDAyOiR7dC50b1N0cmluZygpfWApO1xuICAgIH0sXG4gICAgc2luZ2xldG9uKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlcih0LCAxLCB0KTtcbiAgICB9LFxuICAgIHRyYW5zaWVudCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZXIodCwgMiwgdCk7XG4gICAgfVxufTtcblxuY2xhc3MgQ29udGFpbmVyQ29uZmlndXJhdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmluaGVyaXRQYXJlbnRSZXNvdXJjZXMgPSB0O1xuICAgICAgICB0aGlzLmRlZmF1bHRSZXNvbHZlciA9IGU7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tKHQpIHtcbiAgICAgICAgdmFyIGUsIG47XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHQgfHwgdCA9PT0gQ29udGFpbmVyQ29uZmlndXJhdGlvbi5ERUZBVUxUKSByZXR1cm4gQ29udGFpbmVyQ29uZmlndXJhdGlvbi5ERUZBVUxUO1xuICAgICAgICByZXR1cm4gbmV3IENvbnRhaW5lckNvbmZpZ3VyYXRpb24obnVsbCAhPT0gKGUgPSB0LmluaGVyaXRQYXJlbnRSZXNvdXJjZXMpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiBmYWxzZSwgbnVsbCAhPT0gKG4gPSB0LmRlZmF1bHRSZXNvbHZlcikgJiYgdm9pZCAwICE9PSBuID8gbiA6IHouc2luZ2xldG9uKTtcbiAgICB9XG59XG5cbkNvbnRhaW5lckNvbmZpZ3VyYXRpb24uREVGQVVMVCA9IENvbnRhaW5lckNvbmZpZ3VyYXRpb24uZnJvbSh7fSk7XG5cbmNvbnN0IEcgPSB7XG4gICAgY3JlYXRlQ29udGFpbmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb250YWluZXIobnVsbCwgQ29udGFpbmVyQ29uZmlndXJhdGlvbi5mcm9tKHQpKTtcbiAgICB9LFxuICAgIGdldERlc2lnblBhcmFtdHlwZXModCkge1xuICAgICAgICByZXR1cm4gaihcImRlc2lnbjpwYXJhbXR5cGVzXCIsIHQpO1xuICAgIH0sXG4gICAgZ2V0QW5ub3RhdGlvblBhcmFtdHlwZXModCkge1xuICAgICAgICBjb25zdCBlID0gRihcImRpOnBhcmFtdHlwZXNcIik7XG4gICAgICAgIHJldHVybiBqKGUsIHQpO1xuICAgIH0sXG4gICAgZ2V0T3JDcmVhdGVBbm5vdGF0aW9uUGFyYW1UeXBlczogXyxcbiAgICBnZXREZXBlbmRlbmNpZXM6IEssXG4gICAgY3JlYXRlSW50ZXJmYWNlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEkodCkgPyB0IDogZTtcbiAgICAgICAgY29uc3QgciA9IE0odCkgPyB0IDogdm9pZCAwO1xuICAgICAgICBjb25zdCBpID0gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gdCB8fCB2b2lkIDAgIT09IG5ldy50YXJnZXQpIHRocm93IG5ldyBFcnJvcihgQVVSMDAwMToke2kuZnJpZW5kbHlOYW1lfWApO1xuICAgICAgICAgICAgY29uc3QgciA9IF8odCk7XG4gICAgICAgICAgICByW25dID0gaTtcbiAgICAgICAgfTtcbiAgICAgICAgaS4kaXNJbnRlcmZhY2UgPSB0cnVlO1xuICAgICAgICBpLmZyaWVuZGx5TmFtZSA9IG51bGwgPT0gciA/IFwiKGFub255bW91cylcIiA6IHI7XG4gICAgICAgIGlmIChudWxsICE9IG4pIGkucmVnaXN0ZXIgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbihuZXcgUmVzb2x2ZXJCdWlsZGVyKHQsIG51bGwgIT09IGUgJiYgdm9pZCAwICE9PSBlID8gZSA6IGkpKTtcbiAgICAgICAgfTtcbiAgICAgICAgaS50b1N0cmluZyA9IGZ1bmN0aW9uIHQoKSB7XG4gICAgICAgICAgICByZXR1cm4gYEludGVyZmFjZVN5bWJvbDwke2kuZnJpZW5kbHlOYW1lfT5gO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gaTtcbiAgICB9LFxuICAgIGluamVjdCguLi50KSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbihlLCBuLCByKSB7XG4gICAgICAgICAgICBpZiAoXCJudW1iZXJcIiA9PT0gdHlwZW9mIHIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gXyhlKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdFswXTtcbiAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBpKSBuW3JdID0gaTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBfKGUuY29uc3RydWN0b3IpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0WzBdO1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGkpIHJbbl0gPSBpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHIudmFsdWU7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IF8oZSk7XG4gICAgICAgICAgICAgICAgbGV0IGk7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0Lmxlbmd0aDsgKytlKSB7XG4gICAgICAgICAgICAgICAgICAgIGkgPSB0W2VdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBpKSBuW2VdID0gaTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBfKGUpO1xuICAgICAgICAgICAgICAgIGxldCByO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdC5sZW5ndGg7ICsrZSkge1xuICAgICAgICAgICAgICAgICAgICByID0gdFtlXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gcikgbltlXSA9IHI7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0sXG4gICAgdHJhbnNpZW50KHQpIHtcbiAgICAgICAgdC5yZWdpc3RlciA9IGZ1bmN0aW9uIGUobikge1xuICAgICAgICAgICAgY29uc3QgciA9ICR0LnRyYW5zaWVudCh0LCB0KTtcbiAgICAgICAgICAgIHJldHVybiByLnJlZ2lzdGVyKG4sIHQpO1xuICAgICAgICB9O1xuICAgICAgICB0LnJlZ2lzdGVySW5SZXF1ZXN0b3IgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfSxcbiAgICBzaW5nbGV0b24odCwgZSA9IFopIHtcbiAgICAgICAgdC5yZWdpc3RlciA9IGZ1bmN0aW9uIGUobikge1xuICAgICAgICAgICAgY29uc3QgciA9ICR0LnNpbmdsZXRvbih0LCB0KTtcbiAgICAgICAgICAgIHJldHVybiByLnJlZ2lzdGVyKG4sIHQpO1xuICAgICAgICB9O1xuICAgICAgICB0LnJlZ2lzdGVySW5SZXF1ZXN0b3IgPSBlLnNjb3BlZDtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxufTtcblxuZnVuY3Rpb24gSyh0KSB7XG4gICAgY29uc3QgZSA9IEYoXCJkaTpkZXBlbmRlbmNpZXNcIik7XG4gICAgbGV0IG4gPSBqKGUsIHQpO1xuICAgIGlmICh2b2lkIDAgPT09IG4pIHtcbiAgICAgICAgY29uc3QgciA9IHQuaW5qZWN0O1xuICAgICAgICBpZiAodm9pZCAwID09PSByKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gRy5nZXREZXNpZ25QYXJhbXR5cGVzKHQpO1xuICAgICAgICAgICAgY29uc3QgciA9IEcuZ2V0QW5ub3RhdGlvblBhcmFtdHlwZXModCk7XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSBlKSBpZiAodm9pZCAwID09PSByKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0KTtcbiAgICAgICAgICAgICAgICBpZiAoSShlKSAmJiBlICE9PSBGdW5jdGlvbi5wcm90b3R5cGUpIG4gPSB4KEsoZSkpOyBlbHNlIG4gPSBbXTtcbiAgICAgICAgICAgIH0gZWxzZSBuID0geChyKTsgZWxzZSBpZiAodm9pZCAwID09PSByKSBuID0geChlKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgbiA9IHgoZSk7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSByLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBsZXQgcztcbiAgICAgICAgICAgICAgICBsZXQgbyA9IDA7XG4gICAgICAgICAgICAgICAgZm9yICg7byA8IHQ7ICsrbykge1xuICAgICAgICAgICAgICAgICAgICBzID0gcltvXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gcykgbltvXSA9IHM7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IHUgPSBPYmplY3Qua2V5cyhyKTtcbiAgICAgICAgICAgICAgICBsZXQgbDtcbiAgICAgICAgICAgICAgICBvID0gMDtcbiAgICAgICAgICAgICAgICB0ID0gdS5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZm9yIChvID0gMDsgbyA8IHQ7ICsrbykge1xuICAgICAgICAgICAgICAgICAgICBsID0gdVtvXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpKGwpKSBuW2xdID0gcltsXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBuID0geChyKTtcbiAgICAgICAgayhlLCBuLCB0KTtcbiAgICAgICAgVSh0LCBlKTtcbiAgICB9XG4gICAgcmV0dXJuIG47XG59XG5cbmZ1bmN0aW9uIF8odCkge1xuICAgIGNvbnN0IGUgPSBGKFwiZGk6cGFyYW10eXBlc1wiKTtcbiAgICBsZXQgbiA9IGooZSwgdCk7XG4gICAgaWYgKHZvaWQgMCA9PT0gbikge1xuICAgICAgICBrKGUsIG4gPSBbXSwgdCk7XG4gICAgICAgIFUodCwgZSk7XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG5jb25zdCBIID0gRy5jcmVhdGVJbnRlcmZhY2UoXCJJQ29udGFpbmVyXCIpO1xuXG5jb25zdCBWID0gSDtcblxuZnVuY3Rpb24gcSh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGZ1bmN0aW9uKHQsIGUsIHIpIHtcbiAgICAgICAgICAgIEcuaW5qZWN0KG4pKHQsIGUsIHIpO1xuICAgICAgICB9O1xuICAgICAgICBuLiRpc1Jlc29sdmVyID0gdHJ1ZTtcbiAgICAgICAgbi5yZXNvbHZlID0gZnVuY3Rpb24obiwgcikge1xuICAgICAgICAgICAgcmV0dXJuIHQoZSwgbiwgcik7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBuO1xuICAgIH07XG59XG5cbmNvbnN0IEogPSBHLmluamVjdDtcblxuZnVuY3Rpb24gWCh0KSB7XG4gICAgcmV0dXJuIEcudHJhbnNpZW50KHQpO1xufVxuXG5mdW5jdGlvbiBZKHQpIHtcbiAgICByZXR1cm4gbnVsbCA9PSB0ID8gWCA6IFgodCk7XG59XG5cbmNvbnN0IFogPSB7XG4gICAgc2NvcGVkOiBmYWxzZVxufTtcblxuZnVuY3Rpb24gdHQodCkge1xuICAgIGlmIChJKHQpKSByZXR1cm4gRy5zaW5nbGV0b24odCk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIEcuc2luZ2xldG9uKGUsIHQpO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIGV0KHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZSwgbikge1xuICAgICAgICBuID0gISFuO1xuICAgICAgICBjb25zdCByID0gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgRy5pbmplY3QocikodCwgZSwgbik7XG4gICAgICAgIH07XG4gICAgICAgIHIuJGlzUmVzb2x2ZXIgPSB0cnVlO1xuICAgICAgICByLnJlc29sdmUgPSBmdW5jdGlvbihyLCBpKSB7XG4gICAgICAgICAgICByZXR1cm4gdChlLCByLCBpLCBuKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHI7XG4gICAgfTtcbn1cblxuY29uc3QgbnQgPSBldCgoKHQsIGUsIG4sIHIpID0+IG4uZ2V0QWxsKHQsIHIpKSk7XG5cbmNvbnN0IHJ0ID0gcSgoKHQsIGUsIG4pID0+ICgpID0+IG4uZ2V0KHQpKSk7XG5cbmNvbnN0IGl0ID0gcSgoKHQsIGUsIG4pID0+IHtcbiAgICBpZiAobi5oYXModCwgdHJ1ZSkpIHJldHVybiBuLmdldCh0KTsgZWxzZSByZXR1cm47XG59KSk7XG5cbmZ1bmN0aW9uIHN0KHQsIGUsIG4pIHtcbiAgICBHLmluamVjdChzdCkodCwgZSwgbik7XG59XG5cbnN0LiRpc1Jlc29sdmVyID0gdHJ1ZTtcblxuc3QucmVzb2x2ZSA9ICgpID0+IHt9O1xuXG5jb25zdCBvdCA9IHEoKCh0LCBlLCBuKSA9PiAoLi4ucikgPT4gZS5nZXRGYWN0b3J5KHQpLmNvbnN0cnVjdChuLCByKSkpO1xuXG5jb25zdCB1dCA9IHEoKCh0LCBlLCBuKSA9PiB7XG4gICAgY29uc3QgciA9IGN0KHQsIGUsIG4pO1xuICAgIGNvbnN0IGkgPSBuZXcgSW5zdGFuY2VQcm92aWRlcihTdHJpbmcodCksIHIpO1xuICAgIG4ucmVnaXN0ZXJSZXNvbHZlcih0LCBpLCB0cnVlKTtcbiAgICByZXR1cm4gcjtcbn0pKTtcblxuY29uc3QgbHQgPSBxKCgodCwgZSwgbikgPT4gY3QodCwgZSwgbikpKTtcblxuZnVuY3Rpb24gY3QodCwgZSwgbikge1xuICAgIHJldHVybiBlLmdldEZhY3RvcnkodCkuY29uc3RydWN0KG4pO1xufVxuXG52YXIgZnQ7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wiaW5zdGFuY2VcIl0gPSAwXSA9IFwiaW5zdGFuY2VcIjtcbiAgICB0W3RbXCJzaW5nbGV0b25cIl0gPSAxXSA9IFwic2luZ2xldG9uXCI7XG4gICAgdFt0W1widHJhbnNpZW50XCJdID0gMl0gPSBcInRyYW5zaWVudFwiO1xuICAgIHRbdFtcImNhbGxiYWNrXCJdID0gM10gPSBcImNhbGxiYWNrXCI7XG4gICAgdFt0W1wiYXJyYXlcIl0gPSA0XSA9IFwiYXJyYXlcIjtcbiAgICB0W3RbXCJhbGlhc1wiXSA9IDVdID0gXCJhbGlhc1wiO1xufSkoZnQgfHwgKGZ0ID0ge30pKTtcblxuY2xhc3MgUmVzb2x2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0O1xuICAgICAgICB0aGlzLnN0cmF0ZWd5ID0gZTtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IG47XG4gICAgICAgIHRoaXMucmVzb2x2aW5nID0gZmFsc2U7XG4gICAgfVxuICAgIGdldCAkaXNSZXNvbHZlcigpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJlZ2lzdGVyKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQucmVnaXN0ZXJSZXNvbHZlcihlIHx8IHRoaXMua2V5LCB0aGlzKTtcbiAgICB9XG4gICAgcmVzb2x2ZSh0LCBlKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5zdHJhdGVneSkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlO1xuXG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgaWYgKHRoaXMucmVzb2x2aW5nKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAwMDM6JHt0aGlzLnN0YXRlLm5hbWV9YCk7XG4gICAgICAgICAgICB0aGlzLnJlc29sdmluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gdC5nZXRGYWN0b3J5KHRoaXMuc3RhdGUpLmNvbnN0cnVjdChlKTtcbiAgICAgICAgICAgIHRoaXMuc3RyYXRlZ3kgPSAwO1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0YXRlO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LmdldEZhY3RvcnkodGhpcy5zdGF0ZSk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IG4pIHRocm93IG5ldyBFcnJvcihgQVVSMDAwNDoke1N0cmluZyh0aGlzLmtleSl9YCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4uY29uc3RydWN0KGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUodCwgZSwgdGhpcyk7XG5cbiAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZVswXS5yZXNvbHZlKHQsIGUpO1xuXG4gICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgcmV0dXJuIGUuZ2V0KHRoaXMuc3RhdGUpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDAwNToke3RoaXMuc3RyYXRlZ3l9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0RmFjdG9yeSh0KSB7XG4gICAgICAgIHZhciBlLCBuLCByO1xuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RyYXRlZ3kpIHtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIHQuZ2V0RmFjdG9yeSh0aGlzLnN0YXRlKTtcblxuICAgICAgICAgIGNhc2UgNTpcbiAgICAgICAgICAgIHJldHVybiBudWxsICE9PSAociA9IG51bGwgPT09IChuID0gbnVsbCA9PT0gKGUgPSB0LmdldFJlc29sdmVyKHRoaXMuc3RhdGUpKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmdldEZhY3RvcnkpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uY2FsbChlLCB0KSkgJiYgdm9pZCAwICE9PSByID8gciA6IG51bGw7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGF0KHQpIHtcbiAgICByZXR1cm4gdGhpcy5nZXQodCk7XG59XG5cbmZ1bmN0aW9uIGh0KHQsIGUpIHtcbiAgICByZXR1cm4gZSh0KTtcbn1cblxuY2xhc3MgRmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLlR5cGUgPSB0O1xuICAgICAgICB0aGlzLmRlcGVuZGVuY2llcyA9IGU7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtZXJzID0gbnVsbDtcbiAgICB9XG4gICAgY29uc3RydWN0KHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIG4gPSBuZXcgdGhpcy5UeXBlKC4uLnRoaXMuZGVwZW5kZW5jaWVzLm1hcChhdCwgdCkpOyBlbHNlIG4gPSBuZXcgdGhpcy5UeXBlKC4uLnRoaXMuZGVwZW5kZW5jaWVzLm1hcChhdCwgdCksIC4uLmUpO1xuICAgICAgICBpZiAobnVsbCA9PSB0aGlzLnRyYW5zZm9ybWVycykgcmV0dXJuIG47XG4gICAgICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybWVycy5yZWR1Y2UoaHQsIG4pO1xuICAgIH1cbiAgICByZWdpc3RlclRyYW5zZm9ybWVyKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIChudWxsICE9PSAoZSA9IHRoaXMudHJhbnNmb3JtZXJzKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogdGhpcy50cmFuc2Zvcm1lcnMgPSBbXSkucHVzaCh0KTtcbiAgICB9XG59XG5cbmNvbnN0IGR0ID0ge1xuICAgICRpc1Jlc29sdmVyOiB0cnVlLFxuICAgIHJlc29sdmUodCwgZSkge1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiB2dCh0KSB7XG4gICAgcmV0dXJuIEkodC5yZWdpc3Rlcik7XG59XG5cbmZ1bmN0aW9uIHd0KHQpIHtcbiAgICByZXR1cm4gdnQodCkgJiYgXCJib29sZWFuXCIgPT09IHR5cGVvZiB0LnJlZ2lzdGVySW5SZXF1ZXN0b3I7XG59XG5cbmZ1bmN0aW9uIGd0KHQpIHtcbiAgICByZXR1cm4gd3QodCkgJiYgdC5yZWdpc3RlckluUmVxdWVzdG9yO1xufVxuXG5mdW5jdGlvbiBtdCh0KSB7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gdC5wcm90b3R5cGU7XG59XG5cbmZ1bmN0aW9uIHB0KHQpIHtcbiAgICByZXR1cm4gTSh0KSAmJiB0LmluZGV4T2YoXCI6XCIpID4gMDtcbn1cblxuY29uc3QgeXQgPSBuZXcgU2V0KFsgXCJBcnJheVwiLCBcIkFycmF5QnVmZmVyXCIsIFwiQm9vbGVhblwiLCBcIkRhdGFWaWV3XCIsIFwiRGF0ZVwiLCBcIkVycm9yXCIsIFwiRXZhbEVycm9yXCIsIFwiRmxvYXQzMkFycmF5XCIsIFwiRmxvYXQ2NEFycmF5XCIsIFwiRnVuY3Rpb25cIiwgXCJJbnQ4QXJyYXlcIiwgXCJJbnQxNkFycmF5XCIsIFwiSW50MzJBcnJheVwiLCBcIk1hcFwiLCBcIk51bWJlclwiLCBcIk9iamVjdFwiLCBcIlByb21pc2VcIiwgXCJSYW5nZUVycm9yXCIsIFwiUmVmZXJlbmNlRXJyb3JcIiwgXCJSZWdFeHBcIiwgXCJTZXRcIiwgXCJTaGFyZWRBcnJheUJ1ZmZlclwiLCBcIlN0cmluZ1wiLCBcIlN5bnRheEVycm9yXCIsIFwiVHlwZUVycm9yXCIsIFwiVWludDhBcnJheVwiLCBcIlVpbnQ4Q2xhbXBlZEFycmF5XCIsIFwiVWludDE2QXJyYXlcIiwgXCJVaW50MzJBcnJheVwiLCBcIlVSSUVycm9yXCIsIFwiV2Vha01hcFwiLCBcIldlYWtTZXRcIiBdKTtcblxubGV0IFJ0ID0gMDtcblxuY2xhc3MgQ29udGFpbmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucGFyZW50ID0gdDtcbiAgICAgICAgdGhpcy5jb25maWcgPSBlO1xuICAgICAgICB0aGlzLmlkID0gKytSdDtcbiAgICAgICAgdGhpcy50ID0gMDtcbiAgICAgICAgdGhpcy5pID0gbmV3IE1hcDtcbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHtcbiAgICAgICAgICAgIHRoaXMucm9vdCA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLnUgPSBuZXcgTWFwO1xuICAgICAgICAgICAgdGhpcy5oID0gbmV3IE1hcDtcbiAgICAgICAgICAgIHRoaXMucmVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucm9vdCA9IHQucm9vdDtcbiAgICAgICAgICAgIHRoaXMudSA9IG5ldyBNYXA7XG4gICAgICAgICAgICB0aGlzLmggPSB0Lmg7XG4gICAgICAgICAgICBpZiAoZS5pbmhlcml0UGFyZW50UmVzb3VyY2VzKSB0aGlzLnJlcyA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmNyZWF0ZShudWxsKSwgdC5yZXMsIHRoaXMucm9vdC5yZXMpOyBlbHNlIHRoaXMucmVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnUuc2V0KEgsIGR0KTtcbiAgICB9XG4gICAgZ2V0IGRlcHRoKCkge1xuICAgICAgICByZXR1cm4gbnVsbCA9PT0gdGhpcy5wYXJlbnQgPyAwIDogdGhpcy5wYXJlbnQuZGVwdGggKyAxO1xuICAgIH1cbiAgICByZWdpc3RlciguLi50KSB7XG4gICAgICAgIGlmICgxMDAgPT09ICsrdGhpcy50KSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAwMDY6JHt0Lm1hcChTdHJpbmcpfWApO1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBsZXQgcztcbiAgICAgICAgbGV0IG87XG4gICAgICAgIGxldCB1ID0gMDtcbiAgICAgICAgbGV0IGwgPSB0Lmxlbmd0aDtcbiAgICAgICAgZm9yICg7dSA8IGw7ICsrdSkge1xuICAgICAgICAgICAgZSA9IHRbdV07XG4gICAgICAgICAgICBpZiAoIW4oZSkpIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKHZ0KGUpKSBlLnJlZ2lzdGVyKHRoaXMpOyBlbHNlIGlmIChTLnJlc291cmNlLmhhcyhlKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBTLnJlc291cmNlLmdldEFsbChlKTtcbiAgICAgICAgICAgICAgICBpZiAoMSA9PT0gdC5sZW5ndGgpIHRbMF0ucmVnaXN0ZXIodGhpcyk7IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzID0gMDtcbiAgICAgICAgICAgICAgICAgICAgbyA9IHQubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSAobyA+IHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRbc10ucmVnaXN0ZXIodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICArK3M7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG10KGUpKSAkdC5zaW5nbGV0b24oZSwgZSkucmVnaXN0ZXIodGhpcyk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIHIgPSBPYmplY3Qua2V5cyhlKTtcbiAgICAgICAgICAgICAgICBzID0gMDtcbiAgICAgICAgICAgICAgICBvID0gci5sZW5ndGg7XG4gICAgICAgICAgICAgICAgZm9yICg7cyA8IG87ICsrcykge1xuICAgICAgICAgICAgICAgICAgICBpID0gZVtyW3NdXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFuKGkpKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZ0KGkpKSBpLnJlZ2lzdGVyKHRoaXMpOyBlbHNlIHRoaXMucmVnaXN0ZXIoaSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC0tdGhpcy50O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgcmVnaXN0ZXJSZXNvbHZlcih0LCBlLCBuID0gZmFsc2UpIHtcbiAgICAgICAgRXQodCk7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLnU7XG4gICAgICAgIGNvbnN0IGkgPSByLmdldCh0KTtcbiAgICAgICAgaWYgKG51bGwgPT0gaSkge1xuICAgICAgICAgICAgci5zZXQodCwgZSk7XG4gICAgICAgICAgICBpZiAocHQodCkpIHtcbiAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSB0aGlzLnJlc1t0XSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMDA3OiR7dH1gKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJlc1t0XSA9IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoaSBpbnN0YW5jZW9mIFJlc29sdmVyICYmIDQgPT09IGkuc3RyYXRlZ3kpIGkuc3RhdGUucHVzaChlKTsgZWxzZSByLnNldCh0LCBuZXcgUmVzb2x2ZXIodCwgNCwgWyBpLCBlIF0pKTtcbiAgICAgICAgaWYgKG4pIHRoaXMuaS5zZXQodCwgZSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICByZWdpc3RlclRyYW5zZm9ybWVyKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuZ2V0UmVzb2x2ZXIodCk7XG4gICAgICAgIGlmIChudWxsID09IG4pIHJldHVybiBmYWxzZTtcbiAgICAgICAgaWYgKG4uZ2V0RmFjdG9yeSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IG4uZ2V0RmFjdG9yeSh0aGlzKTtcbiAgICAgICAgICAgIGlmIChudWxsID09IHQpIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHQucmVnaXN0ZXJUcmFuc2Zvcm1lcihlKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0UmVzb2x2ZXIodCwgZSA9IHRydWUpIHtcbiAgICAgICAgRXQodCk7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHQucmVzb2x2ZSkgcmV0dXJuIHQ7XG4gICAgICAgIGxldCBuID0gdGhpcztcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIHdoaWxlIChudWxsICE9IG4pIHtcbiAgICAgICAgICAgIHIgPSBuLnUuZ2V0KHQpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gcikge1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09IG4ucGFyZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBndCh0KSA/IHRoaXMgOiBuO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZSA/IHRoaXMuUih0LCByKSA6IG51bGw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG4gPSBuLnBhcmVudDtcbiAgICAgICAgICAgIH0gZWxzZSByZXR1cm4gcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaGFzKHQsIGUgPSBmYWxzZSkge1xuICAgICAgICByZXR1cm4gdGhpcy51Lmhhcyh0KSA/IHRydWUgOiBlICYmIG51bGwgIT0gdGhpcy5wYXJlbnQgPyB0aGlzLnBhcmVudC5oYXModCwgdHJ1ZSkgOiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0KHQpIHtcbiAgICAgICAgRXQodCk7XG4gICAgICAgIGlmICh0LiRpc1Jlc29sdmVyKSByZXR1cm4gdC5yZXNvbHZlKHRoaXMsIHRoaXMpO1xuICAgICAgICBsZXQgZSA9IHRoaXM7XG4gICAgICAgIGxldCBuO1xuICAgICAgICB3aGlsZSAobnVsbCAhPSBlKSB7XG4gICAgICAgICAgICBuID0gZS51LmdldCh0KTtcbiAgICAgICAgICAgIGlmIChudWxsID09IG4pIHtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBlLnBhcmVudCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByID0gZ3QodCkgPyB0aGlzIDogZTtcbiAgICAgICAgICAgICAgICAgICAgbiA9IHRoaXMuUih0LCByKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4ucmVzb2x2ZShlLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZSA9IGUucGFyZW50O1xuICAgICAgICAgICAgfSBlbHNlIHJldHVybiBuLnJlc29sdmUoZSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBVVIwMDA4OiR7dH1gKTtcbiAgICB9XG4gICAgZ2V0QWxsKHQsIGUgPSBmYWxzZSkge1xuICAgICAgICBFdCh0KTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXM7XG4gICAgICAgIGxldCByID0gbjtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICBsZXQgZSA9IE90O1xuICAgICAgICAgICAgd2hpbGUgKG51bGwgIT0gcikge1xuICAgICAgICAgICAgICAgIGkgPSByLnUuZ2V0KHQpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9IGkpIGUgPSBlLmNvbmNhdChBdChpLCByLCBuKSk7XG4gICAgICAgICAgICAgICAgciA9IHIucGFyZW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH0gZWxzZSB3aGlsZSAobnVsbCAhPSByKSB7XG4gICAgICAgICAgICBpID0gci51LmdldCh0KTtcbiAgICAgICAgICAgIGlmIChudWxsID09IGkpIHtcbiAgICAgICAgICAgICAgICByID0gci5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gcikgcmV0dXJuIE90O1xuICAgICAgICAgICAgfSBlbHNlIHJldHVybiBBdChpLCByLCBuKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gT3Q7XG4gICAgfVxuICAgIGludm9rZSh0LCBlKSB7XG4gICAgICAgIGlmICgkKHQpKSB0aHJvdyBqdCh0KTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgcmV0dXJuIG5ldyB0KC4uLksodCkubWFwKGF0LCB0aGlzKSk7IGVsc2UgcmV0dXJuIG5ldyB0KC4uLksodCkubWFwKGF0LCB0aGlzKSwgLi4uZSk7XG4gICAgfVxuICAgIGdldEZhY3RvcnkodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMuaC5nZXQodCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHtcbiAgICAgICAgICAgIGlmICgkKHQpKSB0aHJvdyBqdCh0KTtcbiAgICAgICAgICAgIHRoaXMuaC5zZXQodCwgZSA9IG5ldyBGYWN0b3J5KHQsIEsodCkpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgcmVnaXN0ZXJGYWN0b3J5KHQsIGUpIHtcbiAgICAgICAgdGhpcy5oLnNldCh0LCBlKTtcbiAgICB9XG4gICAgY3JlYXRlQ2hpbGQodCkge1xuICAgICAgICBpZiAodm9pZCAwID09PSB0ICYmIHRoaXMuY29uZmlnLmluaGVyaXRQYXJlbnRSZXNvdXJjZXMpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZyA9PT0gQ29udGFpbmVyQ29uZmlndXJhdGlvbi5ERUZBVUxUKSByZXR1cm4gbmV3IENvbnRhaW5lcih0aGlzLCB0aGlzLmNvbmZpZyk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbnRhaW5lcih0aGlzLCBDb250YWluZXJDb25maWd1cmF0aW9uLmZyb20oe1xuICAgICAgICAgICAgICAgIC4uLnRoaXMuY29uZmlnLFxuICAgICAgICAgICAgICAgIGluaGVyaXRQYXJlbnRSZXNvdXJjZXM6IGZhbHNlXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBDb250YWluZXIodGhpcywgQ29udGFpbmVyQ29uZmlndXJhdGlvbi5mcm9tKG51bGwgIT09IHQgJiYgdm9pZCAwICE9PSB0ID8gdCA6IHRoaXMuY29uZmlnKSk7XG4gICAgfVxuICAgIGRpc3Bvc2VSZXNvbHZlcnMoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnU7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmk7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgZm9yIChbciwgbl0gb2YgZS5lbnRyaWVzKCkpIHtcbiAgICAgICAgICAgIG4uZGlzcG9zZSgpO1xuICAgICAgICAgICAgdC5kZWxldGUocik7XG4gICAgICAgIH1cbiAgICAgICAgZS5jbGVhcigpO1xuICAgIH1cbiAgICBmaW5kKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHQua2V5RnJvbShlKTtcbiAgICAgICAgbGV0IHIgPSB0aGlzLnJlc1tuXTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gcikge1xuICAgICAgICAgICAgciA9IHRoaXMucm9vdC5yZXNbbl07XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSByKSByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobnVsbCA9PT0gcikgcmV0dXJuIG51bGw7XG4gICAgICAgIGlmIChJKHIuZ2V0RmFjdG9yeSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSByLmdldEZhY3RvcnkodGhpcyk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUpIHJldHVybiBudWxsO1xuICAgICAgICAgICAgY29uc3QgbiA9IGoodC5uYW1lLCBlLlR5cGUpO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY3JlYXRlKHQsIGUpIHtcbiAgICAgICAgdmFyIG4sIHI7XG4gICAgICAgIGNvbnN0IGkgPSB0LmtleUZyb20oZSk7XG4gICAgICAgIGxldCBzID0gdGhpcy5yZXNbaV07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHMpIHtcbiAgICAgICAgICAgIHMgPSB0aGlzLnJvb3QucmVzW2ldO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gcykgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICByZXR1cm4gbnVsbCAhPT0gKG4gPSBzLnJlc29sdmUodGhpcy5yb290LCB0aGlzKSkgJiYgdm9pZCAwICE9PSBuID8gbiA6IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGwgIT09IChyID0gcy5yZXNvbHZlKHRoaXMsIHRoaXMpKSAmJiB2b2lkIDAgIT09IHIgPyByIDogbnVsbDtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaS5zaXplID4gMCkgdGhpcy5kaXNwb3NlUmVzb2x2ZXJzKCk7XG4gICAgICAgIHRoaXMudS5jbGVhcigpO1xuICAgIH1cbiAgICBSKHQsIGUpIHtcbiAgICAgICAgaWYgKCFJKHQpKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAwMDk6JHt0fWApO1xuICAgICAgICBpZiAoeXQuaGFzKHQubmFtZSkpIHRocm93IG5ldyBFcnJvcihgQVVSMDAxMDoke3QubmFtZX1gKTtcbiAgICAgICAgaWYgKHZ0KHQpKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5yZWdpc3RlcihlLCB0KTtcbiAgICAgICAgICAgIGlmICghKG4gaW5zdGFuY2VvZiBPYmplY3QpIHx8IG51bGwgPT0gbi5yZXNvbHZlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IGUudS5nZXQodCk7XG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPSBuKSByZXR1cm4gbjtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFVUjAwMTFgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9IGVsc2UgaWYgKFMucmVzb3VyY2UuaGFzKHQpKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gUy5yZXNvdXJjZS5nZXRBbGwodCk7XG4gICAgICAgICAgICBpZiAoMSA9PT0gbi5sZW5ndGgpIG5bMF0ucmVnaXN0ZXIoZSk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuLmxlbmd0aDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IHQ7ICsrcikgbltyXS5yZWdpc3RlcihlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHIgPSBlLnUuZ2V0KHQpO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPSByKSByZXR1cm4gcjtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDAxMWApO1xuICAgICAgICB9IGVsc2UgaWYgKHQuJGlzSW50ZXJmYWNlKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAwMTI6JHt0LmZyaWVuZGx5TmFtZX1gKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5jb25maWcuZGVmYXVsdFJlc29sdmVyKHQsIGUpO1xuICAgICAgICAgICAgZS51LnNldCh0LCBuKTtcbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jbGFzcyBQYXJhbWV0ZXJpemVkUmVnaXN0cnkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0O1xuICAgICAgICB0aGlzLnBhcmFtcyA9IGU7XG4gICAgfVxuICAgIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgaWYgKHQuaGFzKHRoaXMua2V5LCB0cnVlKSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuZ2V0KHRoaXMua2V5KTtcbiAgICAgICAgICAgIGUucmVnaXN0ZXIodCwgLi4udGhpcy5wYXJhbXMpO1xuICAgICAgICB9IGVsc2UgdC5yZWdpc3RlciguLi50aGlzLnBhcmFtcy5maWx0ZXIoKHQgPT4gXCJvYmplY3RcIiA9PT0gdHlwZW9mIHQpKSk7XG4gICAgfVxufVxuXG5jb25zdCBidCA9IG5ldyBXZWFrTWFwO1xuXG5mdW5jdGlvbiBDdCh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUsIG4sIHIpIHtcbiAgICAgICAgbGV0IGkgPSBidC5nZXQoZSk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGkpIGJ0LnNldChlLCBpID0gbmV3IFdlYWtNYXApO1xuICAgICAgICBpZiAoaS5oYXMocikpIHJldHVybiBpLmdldChyKTtcbiAgICAgICAgY29uc3QgcyA9IHQoZSwgbiwgcik7XG4gICAgICAgIGkuc2V0KHIsIHMpO1xuICAgICAgICByZXR1cm4gcztcbiAgICB9O1xufVxuXG5jb25zdCAkdCA9IHtcbiAgICBpbnN0YW5jZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgUmVzb2x2ZXIodCwgMCwgZSk7XG4gICAgfSxcbiAgICBzaW5nbGV0b24odCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IFJlc29sdmVyKHQsIDEsIGUpO1xuICAgIH0sXG4gICAgdHJhbnNpZW50KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlcih0LCAyLCBlKTtcbiAgICB9LFxuICAgIGNhbGxiYWNrKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlcih0LCAzLCBlKTtcbiAgICB9LFxuICAgIGNhY2hlZENhbGxiYWNrKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlcih0LCAzLCBDdChlKSk7XG4gICAgfSxcbiAgICBhbGlhc1RvKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZXNvbHZlcihlLCA1LCB0KTtcbiAgICB9LFxuICAgIGRlZmVyKHQsIC4uLmUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQYXJhbWV0ZXJpemVkUmVnaXN0cnkodCwgZSk7XG4gICAgfVxufTtcblxuY2xhc3MgSW5zdGFuY2VQcm92aWRlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLkMgPSBudWxsO1xuICAgICAgICB0aGlzLiQgPSB0O1xuICAgICAgICBpZiAodm9pZCAwICE9PSBlKSB0aGlzLkMgPSBlO1xuICAgIH1cbiAgICBnZXQgZnJpZW5kbHlOYW1lKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kO1xuICAgIH1cbiAgICBwcmVwYXJlKHQpIHtcbiAgICAgICAgdGhpcy5DID0gdDtcbiAgICB9XG4gICAgZ2V0ICRpc1Jlc29sdmVyKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmVzb2x2ZSgpIHtcbiAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5DKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAwMTM6JHt0aGlzLiR9YCk7XG4gICAgICAgIHJldHVybiB0aGlzLkM7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMuQyA9IG51bGw7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBFdCh0KSB7XG4gICAgaWYgKG51bGwgPT09IHQgfHwgdm9pZCAwID09PSB0KSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAwMTRgKTtcbn1cblxuZnVuY3Rpb24gQXQodCwgZSwgbikge1xuICAgIGlmICh0IGluc3RhbmNlb2YgUmVzb2x2ZXIgJiYgNCA9PT0gdC5zdHJhdGVneSkge1xuICAgICAgICBjb25zdCByID0gdC5zdGF0ZTtcbiAgICAgICAgbGV0IGkgPSByLmxlbmd0aDtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBBcnJheShpKTtcbiAgICAgICAgd2hpbGUgKGktLSkgc1tpXSA9IHJbaV0ucmVzb2x2ZShlLCBuKTtcbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfVxuICAgIHJldHVybiBbIHQucmVzb2x2ZShlLCBuKSBdO1xufVxuXG5mdW5jdGlvbiBqdCh0KSB7XG4gICAgcmV0dXJuIG5ldyBFcnJvcihgQVVSMDAxNToke3QubmFtZX1gKTtcbn1cblxuY29uc3QgT3QgPSBPYmplY3QuZnJlZXplKFtdKTtcblxuY29uc3Qga3QgPSBPYmplY3QuZnJlZXplKHt9KTtcblxuZnVuY3Rpb24gSXQoKSB7fVxuXG5jb25zdCBNdCA9IEcuY3JlYXRlSW50ZXJmYWNlKFwiSVBsYXRmb3JtXCIpO1xuXG4vKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi8gZnVuY3Rpb24gVHQodCwgZSwgbiwgcikge1xuICAgIHZhciBpID0gYXJndW1lbnRzLmxlbmd0aCwgcyA9IGkgPCAzID8gZSA6IG51bGwgPT09IHIgPyByID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCBuKSA6IHIsIG87XG4gICAgaWYgKFwib2JqZWN0XCIgPT09IHR5cGVvZiBSZWZsZWN0ICYmIFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpIHMgPSBSZWZsZWN0LmRlY29yYXRlKHQsIGUsIG4sIHIpOyBlbHNlIGZvciAodmFyIHUgPSB0Lmxlbmd0aCAtIDE7IHUgPj0gMDsgdS0tKSBpZiAobyA9IHRbdV0pIHMgPSAoaSA8IDMgPyBvKHMpIDogaSA+IDMgPyBvKGUsIG4sIHMpIDogbyhlLCBuKSkgfHwgcztcbiAgICByZXR1cm4gaSA+IDMgJiYgcyAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgbiwgcyksIHM7XG59XG5cbmZ1bmN0aW9uIEZ0KHQsIGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24obiwgcikge1xuICAgICAgICBlKG4sIHIsIHQpO1xuICAgIH07XG59XG5cbnZhciBVdDtcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJ0cmFjZVwiXSA9IDBdID0gXCJ0cmFjZVwiO1xuICAgIHRbdFtcImRlYnVnXCJdID0gMV0gPSBcImRlYnVnXCI7XG4gICAgdFt0W1wiaW5mb1wiXSA9IDJdID0gXCJpbmZvXCI7XG4gICAgdFt0W1wid2FyblwiXSA9IDNdID0gXCJ3YXJuXCI7XG4gICAgdFt0W1wiZXJyb3JcIl0gPSA0XSA9IFwiZXJyb3JcIjtcbiAgICB0W3RbXCJmYXRhbFwiXSA9IDVdID0gXCJmYXRhbFwiO1xuICAgIHRbdFtcIm5vbmVcIl0gPSA2XSA9IFwibm9uZVwiO1xufSkoVXQgfHwgKFV0ID0ge30pKTtcblxudmFyIEx0O1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIm5vQ29sb3JzXCJdID0gMF0gPSBcIm5vQ29sb3JzXCI7XG4gICAgdFt0W1wiY29sb3JzXCJdID0gMV0gPSBcImNvbG9yc1wiO1xufSkoTHQgfHwgKEx0ID0ge30pKTtcblxuY29uc3QgUHQgPSBHLmNyZWF0ZUludGVyZmFjZShcIklMb2dDb25maWdcIiwgKHQgPT4gdC5pbnN0YW5jZShuZXcgTG9nQ29uZmlnKDAsIDMpKSkpO1xuXG5jb25zdCBEdCA9IEcuY3JlYXRlSW50ZXJmYWNlKFwiSVNpbmtcIik7XG5cbmNvbnN0IFN0ID0gRy5jcmVhdGVJbnRlcmZhY2UoXCJJTG9nRXZlbnRGYWN0b3J5XCIsICh0ID0+IHQuc2luZ2xldG9uKF90KSkpO1xuXG5jb25zdCBOdCA9IEcuY3JlYXRlSW50ZXJmYWNlKFwiSUxvZ2dlclwiLCAodCA9PiB0LnNpbmdsZXRvbihWdCkpKTtcblxuY29uc3QgV3QgPSBHLmNyZWF0ZUludGVyZmFjZShcIklMb2dTY29wZVwiKTtcblxuY29uc3QgQnQgPSBPYmplY3QuZnJlZXplKHtcbiAgICBrZXk6IEYoXCJsb2dnZXItc2luay1oYW5kbGVzXCIpLFxuICAgIGRlZmluZSh0LCBlKSB7XG4gICAgICAgIGsodGhpcy5rZXksIGUuaGFuZGxlcywgdC5wcm90b3R5cGUpO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9LFxuICAgIGdldEhhbmRsZXMoZSkge1xuICAgICAgICByZXR1cm4gdC5nZXQodGhpcy5rZXksIGUpO1xuICAgIH1cbn0pO1xuXG5mdW5jdGlvbiBRdCh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIEJ0LmRlZmluZShlLCB0KTtcbiAgICB9O1xufVxuXG5jb25zdCB4dCA9IEMoe1xuICAgIHJlZCh0KSB7XG4gICAgICAgIHJldHVybiBgXHUwMDFiWzMxbSR7dH1cdTAwMWJbMzltYDtcbiAgICB9LFxuICAgIGdyZWVuKHQpIHtcbiAgICAgICAgcmV0dXJuIGBcdTAwMWJbMzJtJHt0fVx1MDAxYlszOW1gO1xuICAgIH0sXG4gICAgeWVsbG93KHQpIHtcbiAgICAgICAgcmV0dXJuIGBcdTAwMWJbMzNtJHt0fVx1MDAxYlszOW1gO1xuICAgIH0sXG4gICAgYmx1ZSh0KSB7XG4gICAgICAgIHJldHVybiBgXHUwMDFiWzM0bSR7dH1cdTAwMWJbMzltYDtcbiAgICB9LFxuICAgIG1hZ2VudGEodCkge1xuICAgICAgICByZXR1cm4gYFx1MDAxYlszNW0ke3R9XHUwMDFiWzM5bWA7XG4gICAgfSxcbiAgICBjeWFuKHQpIHtcbiAgICAgICAgcmV0dXJuIGBcdTAwMWJbMzZtJHt0fVx1MDAxYlszOW1gO1xuICAgIH0sXG4gICAgd2hpdGUodCkge1xuICAgICAgICByZXR1cm4gYFx1MDAxYlszN20ke3R9XHUwMDFiWzM5bWA7XG4gICAgfSxcbiAgICBncmV5KHQpIHtcbiAgICAgICAgcmV0dXJuIGBcdTAwMWJbOTBtJHt0fVx1MDAxYlszOW1gO1xuICAgIH1cbn0pO1xuXG5jbGFzcyBMb2dDb25maWcge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5jb2xvck9wdGlvbnMgPSB0O1xuICAgICAgICB0aGlzLmxldmVsID0gZTtcbiAgICB9XG59XG5cbmNvbnN0IHp0ID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3QgdCA9IFsgQyh7XG4gICAgICAgIFRSQzogXCJUUkNcIixcbiAgICAgICAgREJHOiBcIkRCR1wiLFxuICAgICAgICBJTkY6IFwiSU5GXCIsXG4gICAgICAgIFdSTjogXCJXUk5cIixcbiAgICAgICAgRVJSOiBcIkVSUlwiLFxuICAgICAgICBGVEw6IFwiRlRMXCIsXG4gICAgICAgIFFRUTogXCI/Pz9cIlxuICAgIH0pLCBDKHtcbiAgICAgICAgVFJDOiB4dC5ncmV5KFwiVFJDXCIpLFxuICAgICAgICBEQkc6IHh0LmdyZXkoXCJEQkdcIiksXG4gICAgICAgIElORjogeHQud2hpdGUoXCJJTkZcIiksXG4gICAgICAgIFdSTjogeHQueWVsbG93KFwiV1JOXCIpLFxuICAgICAgICBFUlI6IHh0LnJlZChcIkVSUlwiKSxcbiAgICAgICAgRlRMOiB4dC5yZWQoXCJGVExcIiksXG4gICAgICAgIFFRUTogeHQuZ3JleShcIj8/P1wiKVxuICAgIH0pIF07XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUsIG4pIHtcbiAgICAgICAgaWYgKGUgPD0gMCkgcmV0dXJuIHRbbl0uVFJDO1xuICAgICAgICBpZiAoZSA8PSAxKSByZXR1cm4gdFtuXS5EQkc7XG4gICAgICAgIGlmIChlIDw9IDIpIHJldHVybiB0W25dLklORjtcbiAgICAgICAgaWYgKGUgPD0gMykgcmV0dXJuIHRbbl0uV1JOO1xuICAgICAgICBpZiAoZSA8PSA0KSByZXR1cm4gdFtuXS5FUlI7XG4gICAgICAgIGlmIChlIDw9IDUpIHJldHVybiB0W25dLkZUTDtcbiAgICAgICAgcmV0dXJuIHRbbl0uUVFRO1xuICAgIH07XG59KCk7XG5cbmZ1bmN0aW9uIEd0KHQsIGUpIHtcbiAgICBpZiAoMCA9PT0gZSkgcmV0dXJuIHQuam9pbihcIi5cIik7XG4gICAgcmV0dXJuIHQubWFwKHh0LmN5YW4pLmpvaW4oXCIuXCIpO1xufVxuXG5mdW5jdGlvbiBLdCh0LCBlKSB7XG4gICAgaWYgKDAgPT09IGUpIHJldHVybiBuZXcgRGF0ZSh0KS50b0lTT1N0cmluZygpO1xuICAgIHJldHVybiB4dC5ncmV5KG5ldyBEYXRlKHQpLnRvSVNPU3RyaW5nKCkpO1xufVxuXG5jbGFzcyBEZWZhdWx0TG9nRXZlbnQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHIsIGksIHMpIHtcbiAgICAgICAgdGhpcy5zZXZlcml0eSA9IHQ7XG4gICAgICAgIHRoaXMubWVzc2FnZSA9IGU7XG4gICAgICAgIHRoaXMub3B0aW9uYWxQYXJhbXMgPSBuO1xuICAgICAgICB0aGlzLnNjb3BlID0gcjtcbiAgICAgICAgdGhpcy5jb2xvck9wdGlvbnMgPSBpO1xuICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IHM7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICBjb25zdCB7c2V2ZXJpdHk6IHQsIG1lc3NhZ2U6IGUsIHNjb3BlOiBuLCBjb2xvck9wdGlvbnM6IHIsIHRpbWVzdGFtcDogaX0gPSB0aGlzO1xuICAgICAgICBpZiAoMCA9PT0gbi5sZW5ndGgpIHJldHVybiBgJHtLdChpLCByKX0gWyR7enQodCwgcil9XSAke2V9YDtcbiAgICAgICAgcmV0dXJuIGAke0t0KGksIHIpfSBbJHt6dCh0LCByKX0gJHtHdChuLCByKX1dICR7ZX1gO1xuICAgIH1cbn1cblxubGV0IF90ID0gY2xhc3MgRGVmYXVsdExvZ0V2ZW50RmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHQ7XG4gICAgfVxuICAgIGNyZWF0ZUxvZ0V2ZW50KHQsIGUsIG4sIHIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEZWZhdWx0TG9nRXZlbnQoZSwgbiwgciwgdC5zY29wZSwgdGhpcy5jb25maWcuY29sb3JPcHRpb25zLCBEYXRlLm5vdygpKTtcbiAgICB9XG59O1xuXG5fdCA9IFR0KFsgRnQoMCwgUHQpIF0sIF90KTtcblxubGV0IEh0ID0gY2xhc3MgQ29uc29sZVNpbmsge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuY29uc29sZTtcbiAgICAgICAgdGhpcy5oYW5kbGVFdmVudCA9IGZ1bmN0aW9uIHQobikge1xuICAgICAgICAgICAgY29uc3QgciA9IG4ub3B0aW9uYWxQYXJhbXM7XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSByIHx8IDAgPT09IHIubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG4udG9TdHJpbmcoKTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG4uc2V2ZXJpdHkpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZGVidWcodCk7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuaW5mbyh0KTtcblxuICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS53YXJuKHQpO1xuXG4gICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmVycm9yKHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSBuLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgICAgIHdoaWxlICh0LmluY2x1ZGVzKFwiJXNcIikpIHQgPSB0LnJlcGxhY2UoXCIlc1wiLCBTdHJpbmcocltpKytdKSk7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChuLnNldmVyaXR5KSB7XG4gICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmRlYnVnKHQsIC4uLnIuc2xpY2UoaSkpO1xuXG4gICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmluZm8odCwgLi4uci5zbGljZShpKSk7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUud2Fybih0LCAuLi5yLnNsaWNlKGkpKTtcblxuICAgICAgICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5lcnJvcih0LCAuLi5yLnNsaWNlKGkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIHN0YXRpYyByZWdpc3Rlcih0KSB7XG4gICAgICAgICR0LnNpbmdsZXRvbihEdCwgQ29uc29sZVNpbmspLnJlZ2lzdGVyKHQpO1xuICAgIH1cbn07XG5cbkh0ID0gVHQoWyBGdCgwLCBNdCkgXSwgSHQpO1xuXG5sZXQgVnQgPSBjbGFzcyBEZWZhdWx0TG9nZ2VyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCByID0gW10sIGkgPSBudWxsKSB7XG4gICAgICAgIHZhciBzLCBvLCB1LCBsLCBjLCBmO1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHQ7XG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IGU7XG4gICAgICAgIHRoaXMuc2NvcGUgPSByO1xuICAgICAgICB0aGlzLnNjb3BlZExvZ2dlcnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgICBsZXQgYTtcbiAgICAgICAgbGV0IGg7XG4gICAgICAgIGxldCBkO1xuICAgICAgICBsZXQgdjtcbiAgICAgICAgbGV0IHc7XG4gICAgICAgIGxldCBnO1xuICAgICAgICBpZiAobnVsbCA9PT0gaSkge1xuICAgICAgICAgICAgdGhpcy5yb290ID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMucGFyZW50ID0gdGhpcztcbiAgICAgICAgICAgIGEgPSB0aGlzLnRyYWNlU2lua3MgPSBbXTtcbiAgICAgICAgICAgIGggPSB0aGlzLmRlYnVnU2lua3MgPSBbXTtcbiAgICAgICAgICAgIGQgPSB0aGlzLmluZm9TaW5rcyA9IFtdO1xuICAgICAgICAgICAgdiA9IHRoaXMud2FyblNpbmtzID0gW107XG4gICAgICAgICAgICB3ID0gdGhpcy5lcnJvclNpbmtzID0gW107XG4gICAgICAgICAgICBnID0gdGhpcy5mYXRhbFNpbmtzID0gW107XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBCdC5nZXRIYW5kbGVzKHQpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSAocyA9IG51bGwgPT09IGUgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5pbmNsdWRlcygwKSkgJiYgdm9pZCAwICE9PSBzID8gcyA6IHRydWUpIGEucHVzaCh0KTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gKG8gPSBudWxsID09PSBlIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuaW5jbHVkZXMoMSkpICYmIHZvaWQgMCAhPT0gbyA/IG8gOiB0cnVlKSBoLnB1c2godCk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09ICh1ID0gbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmluY2x1ZGVzKDIpKSAmJiB2b2lkIDAgIT09IHUgPyB1IDogdHJ1ZSkgZC5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSAobCA9IG51bGwgPT09IGUgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5pbmNsdWRlcygzKSkgJiYgdm9pZCAwICE9PSBsID8gbCA6IHRydWUpIHYucHVzaCh0KTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gKGMgPSBudWxsID09PSBlIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuaW5jbHVkZXMoNCkpICYmIHZvaWQgMCAhPT0gYyA/IGMgOiB0cnVlKSB3LnB1c2godCk7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IChmID0gbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmluY2x1ZGVzKDUpKSAmJiB2b2lkIDAgIT09IGYgPyBmIDogdHJ1ZSkgZy5wdXNoKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yb290ID0gaS5yb290O1xuICAgICAgICAgICAgdGhpcy5wYXJlbnQgPSBpO1xuICAgICAgICAgICAgYSA9IHRoaXMudHJhY2VTaW5rcyA9IGkudHJhY2VTaW5rcztcbiAgICAgICAgICAgIGggPSB0aGlzLmRlYnVnU2lua3MgPSBpLmRlYnVnU2lua3M7XG4gICAgICAgICAgICBkID0gdGhpcy5pbmZvU2lua3MgPSBpLmluZm9TaW5rcztcbiAgICAgICAgICAgIHYgPSB0aGlzLndhcm5TaW5rcyA9IGkud2FyblNpbmtzO1xuICAgICAgICAgICAgdyA9IHRoaXMuZXJyb3JTaW5rcyA9IGkuZXJyb3JTaW5rcztcbiAgICAgICAgICAgIGcgPSB0aGlzLmZhdGFsU2lua3MgPSBpLmZhdGFsU2lua3M7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdHJhY2UodCwgLi4uZSkge1xuICAgICAgICBpZiAodGhpcy5jb25maWcubGV2ZWwgPD0gMCkgdGhpcy5lbWl0KHRoaXMudHJhY2VTaW5rcywgMCwgdCwgZSk7XG4gICAgfVxuICAgIGRlYnVnKHQsIC4uLmUpIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmxldmVsIDw9IDEpIHRoaXMuZW1pdCh0aGlzLmRlYnVnU2lua3MsIDEsIHQsIGUpO1xuICAgIH1cbiAgICBpbmZvKHQsIC4uLmUpIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmxldmVsIDw9IDIpIHRoaXMuZW1pdCh0aGlzLmluZm9TaW5rcywgMiwgdCwgZSk7XG4gICAgfVxuICAgIHdhcm4odCwgLi4uZSkge1xuICAgICAgICBpZiAodGhpcy5jb25maWcubGV2ZWwgPD0gMykgdGhpcy5lbWl0KHRoaXMud2FyblNpbmtzLCAzLCB0LCBlKTtcbiAgICB9XG4gICAgZXJyb3IodCwgLi4uZSkge1xuICAgICAgICBpZiAodGhpcy5jb25maWcubGV2ZWwgPD0gNCkgdGhpcy5lbWl0KHRoaXMuZXJyb3JTaW5rcywgNCwgdCwgZSk7XG4gICAgfVxuICAgIGZhdGFsKHQsIC4uLmUpIHtcbiAgICAgICAgaWYgKHRoaXMuY29uZmlnLmxldmVsIDw9IDUpIHRoaXMuZW1pdCh0aGlzLmZhdGFsU2lua3MsIDUsIHQsIGUpO1xuICAgIH1cbiAgICBzY29wZVRvKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc2NvcGVkTG9nZ2VycztcbiAgICAgICAgbGV0IG4gPSBlW3RdO1xuICAgICAgICBpZiAodm9pZCAwID09PSBuKSBuID0gZVt0XSA9IG5ldyBEZWZhdWx0TG9nZ2VyKHRoaXMuY29uZmlnLCB0aGlzLmZhY3RvcnksIHZvaWQgMCwgdGhpcy5zY29wZS5jb25jYXQodCksIHRoaXMpO1xuICAgICAgICByZXR1cm4gbjtcbiAgICB9XG4gICAgZW1pdCh0LCBlLCBuLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSBJKG4pID8gbigpIDogbjtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuZmFjdG9yeS5jcmVhdGVMb2dFdmVudCh0aGlzLCBlLCBpLCByKTtcbiAgICAgICAgZm9yIChsZXQgZSA9IDAsIG4gPSB0Lmxlbmd0aDsgZSA8IG47ICsrZSkgdFtlXS5oYW5kbGVFdmVudChzKTtcbiAgICB9XG59O1xuXG5UdChbIG0gXSwgVnQucHJvdG90eXBlLCBcInRyYWNlXCIsIG51bGwpO1xuXG5UdChbIG0gXSwgVnQucHJvdG90eXBlLCBcImRlYnVnXCIsIG51bGwpO1xuXG5UdChbIG0gXSwgVnQucHJvdG90eXBlLCBcImluZm9cIiwgbnVsbCk7XG5cblR0KFsgbSBdLCBWdC5wcm90b3R5cGUsIFwid2FyblwiLCBudWxsKTtcblxuVHQoWyBtIF0sIFZ0LnByb3RvdHlwZSwgXCJlcnJvclwiLCBudWxsKTtcblxuVHQoWyBtIF0sIFZ0LnByb3RvdHlwZSwgXCJmYXRhbFwiLCBudWxsKTtcblxuVnQgPSBUdChbIEZ0KDAsIFB0KSwgRnQoMSwgU3QpLCBGdCgyLCBudChEdCkpLCBGdCgzLCBpdChXdCkpLCBGdCg0LCBzdCkgXSwgVnQpO1xuXG5jb25zdCBxdCA9IEMoe1xuICAgIGNyZWF0ZSh7bGV2ZWw6IHQgPSAzLCBjb2xvck9wdGlvbnM6IGUgPSAwLCBzaW5rczogbiA9IFtdfSA9IHt9KSB7XG4gICAgICAgIHJldHVybiBDKHtcbiAgICAgICAgICAgIHJlZ2lzdGVyKHIpIHtcbiAgICAgICAgICAgICAgICByLnJlZ2lzdGVyKCR0Lmluc3RhbmNlKFB0LCBuZXcgTG9nQ29uZmlnKGUsIHQpKSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIG4pIGlmIChJKHQpKSByLnJlZ2lzdGVyKCR0LnNpbmdsZXRvbihEdCwgdCkpOyBlbHNlIHIucmVnaXN0ZXIodCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn0pO1xuXG5jb25zdCBKdCA9IEcuY3JlYXRlSW50ZXJmYWNlKCh0ID0+IHQuc2luZ2xldG9uKE1vZHVsZUxvYWRlcikpKTtcblxuZnVuY3Rpb24gWHQodCkge1xuICAgIHJldHVybiB0O1xufVxuXG5jbGFzcyBNb2R1bGVUcmFuc2Zvcm1lciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLiR0cmFuc2Zvcm0gPSB0O1xuICAgICAgICB0aGlzLkEgPSBuZXcgTWFwO1xuICAgICAgICB0aGlzLmogPSBuZXcgTWFwO1xuICAgIH1cbiAgICB0cmFuc2Zvcm0odCkge1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFByb21pc2UpIHJldHVybiB0aGlzLk8odCk7IGVsc2UgaWYgKFwib2JqZWN0XCIgPT09IHR5cGVvZiB0ICYmIG51bGwgIT09IHQpIHJldHVybiB0aGlzLkkodCk7IGVsc2UgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGlucHV0OiAke1N0cmluZyh0KX0uIEV4cGVjdGVkIFByb21pc2Ugb3IgT2JqZWN0LmApO1xuICAgIH1cbiAgICBPKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuQS5oYXModCkpIHJldHVybiB0aGlzLkEuZ2V0KHQpO1xuICAgICAgICBjb25zdCBlID0gdC50aGVuKCh0ID0+IHRoaXMuSSh0KSkpO1xuICAgICAgICB0aGlzLkEuc2V0KHQsIGUpO1xuICAgICAgICB2b2lkIGUudGhlbigoZSA9PiB7XG4gICAgICAgICAgICB0aGlzLkEuc2V0KHQsIGUpO1xuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICBJKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuai5oYXModCkpIHJldHVybiB0aGlzLmouZ2V0KHQpO1xuICAgICAgICBjb25zdCBlID0gdGhpcy4kdHJhbnNmb3JtKHRoaXMuTSh0KSk7XG4gICAgICAgIHRoaXMuai5zZXQodCwgZSk7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgUHJvbWlzZSkgdm9pZCBlLnRoZW4oKGUgPT4ge1xuICAgICAgICAgICAgdGhpcy5qLnNldCh0LCBlKTtcbiAgICAgICAgfSkpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgTSh0KSB7XG4gICAgICAgIGxldCBlO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgbyBpbiB0KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGVvZiAoZSA9IHRbb10pKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJvYmplY3RcIjpcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gZSkgY29udGludWU7XG4gICAgICAgICAgICAgICAgbiA9IEkoZS5yZWdpc3Rlcik7XG4gICAgICAgICAgICAgICAgciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGkgPSBPdDtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgICAgICBuID0gSShlLnJlZ2lzdGVyKTtcbiAgICAgICAgICAgICAgICByID0gdm9pZCAwICE9PSBlLnByb3RvdHlwZTtcbiAgICAgICAgICAgICAgICBpID0gUy5yZXNvdXJjZS5nZXRBbGwoZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHMucHVzaChuZXcgTW9kdWxlSXRlbShvLCBlLCBuLCByLCBpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBBbmFseXplZE1vZHVsZSh0LCBzKTtcbiAgICB9XG59XG5cbmNsYXNzIE1vZHVsZUxvYWRlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMudHJhbnNmb3JtZXJzID0gbmV3IE1hcDtcbiAgICB9XG4gICAgbG9hZCh0LCBlID0gWHQpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMudHJhbnNmb3JtZXJzO1xuICAgICAgICBsZXQgciA9IG4uZ2V0KGUpO1xuICAgICAgICBpZiAodm9pZCAwID09PSByKSBuLnNldChlLCByID0gbmV3IE1vZHVsZVRyYW5zZm9ybWVyKGUpKTtcbiAgICAgICAgcmV0dXJuIHIudHJhbnNmb3JtKHQpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLnRyYW5zZm9ybWVycy5jbGVhcigpO1xuICAgIH1cbn1cblxuY2xhc3MgQW5hbHl6ZWRNb2R1bGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5yYXcgPSB0O1xuICAgICAgICB0aGlzLml0ZW1zID0gZTtcbiAgICB9XG59XG5cbmNsYXNzIE1vZHVsZUl0ZW0ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHIsIGkpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0O1xuICAgICAgICB0aGlzLnZhbHVlID0gZTtcbiAgICAgICAgdGhpcy5pc1JlZ2lzdHJ5ID0gbjtcbiAgICAgICAgdGhpcy5pc0NvbnN0cnVjdGFibGUgPSByO1xuICAgICAgICB0aGlzLmRlZmluaXRpb25zID0gaTtcbiAgICB9XG59XG5cbmNsYXNzIEhhbmRsZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5tZXNzYWdlVHlwZSA9IHQ7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBlO1xuICAgIH1cbiAgICBoYW5kbGUodCkge1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIHRoaXMubWVzc2FnZVR5cGUpIHRoaXMuY2FsbGJhY2suY2FsbChudWxsLCB0KTtcbiAgICB9XG59XG5cbmNvbnN0IFl0ID0gRy5jcmVhdGVJbnRlcmZhY2UoXCJJRXZlbnRBZ2dyZWdhdG9yXCIsICh0ID0+IHQuc2luZ2xldG9uKEV2ZW50QWdncmVnYXRvcikpKTtcblxuY2xhc3MgRXZlbnRBZ2dyZWdhdG9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5ldmVudExvb2t1cCA9IHt9O1xuICAgICAgICB0aGlzLm1lc3NhZ2VIYW5kbGVycyA9IFtdO1xuICAgIH1cbiAgICBwdWJsaXNoKHQsIGUpIHtcbiAgICAgICAgaWYgKCF0KSB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgY2hhbm5lbCBuYW1lIG9yIGluc3RhbmNlOiAke3R9LmApO1xuICAgICAgICBpZiAoTSh0KSkge1xuICAgICAgICAgICAgbGV0IG4gPSB0aGlzLmV2ZW50TG9va3VwW3RdO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikge1xuICAgICAgICAgICAgICAgIG4gPSBuLnNsaWNlKCk7XG4gICAgICAgICAgICAgICAgbGV0IHIgPSBuLmxlbmd0aDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoci0tID4gMCkgbltyXShlLCB0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLm1lc3NhZ2VIYW5kbGVycy5zbGljZSgpO1xuICAgICAgICAgICAgbGV0IG4gPSBlLmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlIChuLS0gPiAwKSBlW25dLmhhbmRsZSh0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdWJzY3JpYmUodCwgZSkge1xuICAgICAgICBpZiAoIXQpIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBjaGFubmVsIG5hbWUgb3IgdHlwZTogJHt0fS5gKTtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGxldCByO1xuICAgICAgICBpZiAoTSh0KSkge1xuICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gdGhpcy5ldmVudExvb2t1cFt0XSkgdGhpcy5ldmVudExvb2t1cFt0XSA9IFtdO1xuICAgICAgICAgICAgbiA9IGU7XG4gICAgICAgICAgICByID0gdGhpcy5ldmVudExvb2t1cFt0XTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG4gPSBuZXcgSGFuZGxlcih0LCBlKTtcbiAgICAgICAgICAgIHIgPSB0aGlzLm1lc3NhZ2VIYW5kbGVycztcbiAgICAgICAgfVxuICAgICAgICByLnB1c2gobik7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkaXNwb3NlKCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSByLmluZGV4T2Yobik7XG4gICAgICAgICAgICAgICAgaWYgKC0xICE9PSB0KSByLnNwbGljZSh0LCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3Vic2NyaWJlT25jZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnN1YnNjcmliZSh0LCAoZnVuY3Rpb24odCwgcikge1xuICAgICAgICAgICAgbi5kaXNwb3NlKCk7XG4gICAgICAgICAgICBlKHQsIHIpO1xuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgQW5hbHl6ZWRNb2R1bGUsIEx0IGFzIENvbG9yT3B0aW9ucywgSHQgYXMgQ29uc29sZVNpbmssIENvbnRhaW5lckNvbmZpZ3VyYXRpb24sIEcgYXMgREksIERlZmF1bHRMb2dFdmVudCwgX3QgYXMgRGVmYXVsdExvZ0V2ZW50RmFjdG9yeSwgVnQgYXMgRGVmYXVsdExvZ2dlciwgeiBhcyBEZWZhdWx0UmVzb2x2ZXIsIEV2ZW50QWdncmVnYXRvciwgSCBhcyBJQ29udGFpbmVyLCBZdCBhcyBJRXZlbnRBZ2dyZWdhdG9yLCBQdCBhcyBJTG9nQ29uZmlnLCBTdCBhcyBJTG9nRXZlbnRGYWN0b3J5LCBOdCBhcyBJTG9nZ2VyLCBKdCBhcyBJTW9kdWxlTG9hZGVyLCBNdCBhcyBJUGxhdGZvcm0sIFYgYXMgSVNlcnZpY2VMb2NhdG9yLCBEdCBhcyBJU2luaywgSW5zdGFuY2VQcm92aWRlciwgTG9nQ29uZmlnLCBVdCBhcyBMb2dMZXZlbCwgcXQgYXMgTG9nZ2VyQ29uZmlndXJhdGlvbiwgTW9kdWxlSXRlbSwgUyBhcyBQcm90b2NvbCwgJHQgYXMgUmVnaXN0cmF0aW9uLCBudCBhcyBhbGwsIG0gYXMgYm91bmQsIGwgYXMgY2FtZWxDYXNlLCB3IGFzIGNvbXBhcmVOdW1iZXIsIE90IGFzIGVtcHR5QXJyYXksIGt0IGFzIGVtcHR5T2JqZWN0LCBvdCBhcyBmYWN0b3J5LCBSIGFzIGZpcnN0RGVmaW5lZCwgeHQgYXMgZm9ybWF0LCBXIGFzIGZyb21Bbm5vdGF0aW9uT3JEZWZpbml0aW9uT3JUeXBlT3JEZWZhdWx0LCBCIGFzIGZyb21Bbm5vdGF0aW9uT3JUeXBlT3JEZWZhdWx0LCBRIGFzIGZyb21EZWZpbml0aW9uT3JEZWZhdWx0LCBiIGFzIGdldFByb3RvdHlwZUNoYWluLCBzdCBhcyBpZ25vcmUsIEogYXMgaW5qZWN0LCBpIGFzIGlzQXJyYXlJbmRleCwgJCBhcyBpc05hdGl2ZUZ1bmN0aW9uLCBzIGFzIGlzTnVtYmVyT3JCaWdJbnQsIG8gYXMgaXNTdHJpbmdPckRhdGUsIGYgYXMga2ViYWJDYXNlLCBydCBhcyBsYXp5LCBwIGFzIG1lcmdlQXJyYXlzLCBnIGFzIG1lcmdlRGlzdGluY3QsIHkgYXMgbWVyZ2VPYmplY3RzLCB1dCBhcyBuZXdJbnN0YW5jZUZvclNjb3BlLCBsdCBhcyBuZXdJbnN0YW5jZU9mLCBkIGFzIG5leHRJZCwgSXQgYXMgbm9vcCwgRSBhcyBvblJlc29sdmUsIGl0IGFzIG9wdGlvbmFsLCBjIGFzIHBhc2NhbENhc2UsIHYgYXMgcmVzZXRJZCwgQSBhcyByZXNvbHZlQWxsLCB0dCBhcyBzaW5nbGV0b24sIFF0IGFzIHNpbmssIGEgYXMgdG9BcnJheSwgWSBhcyB0cmFuc2llbnQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwiZnVuY3Rpb24gdCh0KSB7XG4gICAgcmV0dXJuIFwib2JqZWN0XCIgPT09IHR5cGVvZiB0ICYmIG51bGwgIT09IHQgfHwgXCJmdW5jdGlvblwiID09PSB0eXBlb2YgdDtcbn1cblxuZnVuY3Rpb24gZSh0KSB7XG4gICAgcmV0dXJuIG51bGwgPT09IHQgfHwgdm9pZCAwID09PSB0O1xufVxuXG5jb25zdCBuID0gbmV3IFdlYWtNYXA7XG5cbmZ1bmN0aW9uIHIodCwgZSwgbiwgciwgYSkge1xuICAgIHJldHVybiBuZXcgVHlwZUVycm9yKGAke3R9KCR7ZS5tYXAoU3RyaW5nKS5qb2luKFwiLFwiKX0pIC0gRXhwZWN0ZWQgJyR7bn0nIHRvIGJlIG9mIHR5cGUgJHthfSwgYnV0IGdvdDogJHtPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocil9ICgke1N0cmluZyhyKX0pYCk7XG59XG5cbmZ1bmN0aW9uIGEodCkge1xuICAgIHN3aXRjaCAodHlwZW9mIHQpIHtcbiAgICAgIGNhc2UgXCJ1bmRlZmluZWRcIjpcbiAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgIGNhc2UgXCJzeW1ib2xcIjpcbiAgICAgICAgcmV0dXJuIHQ7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBgJHt0fWA7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBvKHQpIHtcbiAgICBzd2l0Y2ggKHR5cGVvZiB0KSB7XG4gICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICBjYXNlIFwic3ltYm9sXCI6XG4gICAgICAgIHJldHVybiB0O1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gYCR7dH1gO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gaSh0KSB7XG4gICAgc3dpdGNoICh0eXBlb2YgdCkge1xuICAgICAgY2FzZSBcInVuZGVmaW5lZFwiOlxuICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgY2FzZSBcInN5bWJvbFwiOlxuICAgICAgICByZXR1cm4gdDtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCBtZXRhZGF0YSBwcm9wZXJ0eUtleTogJHt0fS5gKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHUodCwgZSwgcikge1xuICAgIGxldCBhID0gbi5nZXQodCk7XG4gICAgaWYgKHZvaWQgMCA9PT0gYSkge1xuICAgICAgICBpZiAoIXIpIHJldHVybjtcbiAgICAgICAgYSA9IG5ldyBNYXA7XG4gICAgICAgIG4uc2V0KHQsIGEpO1xuICAgIH1cbiAgICBsZXQgbyA9IGEuZ2V0KGUpO1xuICAgIGlmICh2b2lkIDAgPT09IG8pIHtcbiAgICAgICAgaWYgKCFyKSByZXR1cm47XG4gICAgICAgIG8gPSBuZXcgTWFwO1xuICAgICAgICBhLnNldChlLCBvKTtcbiAgICB9XG4gICAgcmV0dXJuIG87XG59XG5cbmZ1bmN0aW9uIGModCwgZSwgbikge1xuICAgIGNvbnN0IHIgPSB1KGUsIG4sIGZhbHNlKTtcbiAgICBpZiAodm9pZCAwID09PSByKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHIuaGFzKHQpO1xufVxuXG5mdW5jdGlvbiBmKHQsIGUsIG4pIHtcbiAgICBpZiAoYyh0LCBlLCBuKSkgcmV0dXJuIHRydWU7XG4gICAgY29uc3QgciA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihlKTtcbiAgICBpZiAobnVsbCAhPT0gcikgcmV0dXJuIGYodCwgciwgbik7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBzKHQsIGUsIG4pIHtcbiAgICBjb25zdCByID0gdShlLCBuLCBmYWxzZSk7XG4gICAgaWYgKHZvaWQgMCA9PT0gcikgcmV0dXJuO1xuICAgIHJldHVybiByLmdldCh0KTtcbn1cblxuZnVuY3Rpb24gbCh0LCBlLCBuKSB7XG4gICAgaWYgKGModCwgZSwgbikpIHJldHVybiBzKHQsIGUsIG4pO1xuICAgIGNvbnN0IHIgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7XG4gICAgaWYgKG51bGwgIT09IHIpIHJldHVybiBsKHQsIHIsIG4pO1xuICAgIHJldHVybjtcbn1cblxuZnVuY3Rpb24gZCh0LCBlLCBuLCByKSB7XG4gICAgY29uc3QgYSA9IHUobiwgciwgdHJ1ZSk7XG4gICAgYS5zZXQodCwgZSk7XG59XG5cbmZ1bmN0aW9uIHcodCwgZSkge1xuICAgIGNvbnN0IG4gPSBbXTtcbiAgICBjb25zdCByID0gdSh0LCBlLCBmYWxzZSk7XG4gICAgaWYgKHZvaWQgMCA9PT0gcikgcmV0dXJuIG47XG4gICAgY29uc3QgYSA9IHIua2V5cygpO1xuICAgIGxldCBvID0gMDtcbiAgICBmb3IgKGNvbnN0IHQgb2YgYSkge1xuICAgICAgICBuW29dID0gdDtcbiAgICAgICAgKytvO1xuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuZnVuY3Rpb24geSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IHcodCwgZSk7XG4gICAgY29uc3QgciA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0KTtcbiAgICBpZiAobnVsbCA9PT0gcikgcmV0dXJuIG47XG4gICAgY29uc3QgYSA9IHkociwgZSk7XG4gICAgY29uc3QgbyA9IG4ubGVuZ3RoO1xuICAgIGlmICgwID09PSBvKSByZXR1cm4gYTtcbiAgICBjb25zdCBpID0gYS5sZW5ndGg7XG4gICAgaWYgKDAgPT09IGkpIHJldHVybiBuO1xuICAgIGNvbnN0IHUgPSBuZXcgU2V0O1xuICAgIGNvbnN0IGMgPSBbXTtcbiAgICBsZXQgZiA9IDA7XG4gICAgbGV0IHM7XG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCBvOyArK3QpIHtcbiAgICAgICAgcyA9IG5bdF07XG4gICAgICAgIGlmICghdS5oYXMocykpIHtcbiAgICAgICAgICAgIHUuYWRkKHMpO1xuICAgICAgICAgICAgY1tmXSA9IHM7XG4gICAgICAgICAgICArK2Y7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCBpOyArK3QpIHtcbiAgICAgICAgcyA9IGFbdF07XG4gICAgICAgIGlmICghdS5oYXMocykpIHtcbiAgICAgICAgICAgIHUuYWRkKHMpO1xuICAgICAgICAgICAgY1tmXSA9IHM7XG4gICAgICAgICAgICArK2Y7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGM7XG59XG5cbmZ1bmN0aW9uIGgodCwgZSwgbikge1xuICAgIGNvbnN0IHIgPSB1KHQsIG4sIGZhbHNlKTtcbiAgICBpZiAodm9pZCAwID09PSByKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHIuZGVsZXRlKGUpO1xufVxuXG5mdW5jdGlvbiBnKGUsIG4pIHtcbiAgICBmdW5jdGlvbiBhKGEsIG8pIHtcbiAgICAgICAgaWYgKCF0KGEpKSB0aHJvdyByKFwiQG1ldGFkYXRhXCIsIFsgZSwgbiwgYSwgbyBdLCBcInRhcmdldFwiLCBhLCBcIk9iamVjdCBvciBGdW5jdGlvblwiKTtcbiAgICAgICAgZChlLCBuLCBhLCBpKG8pKTtcbiAgICB9XG4gICAgcmV0dXJuIGE7XG59XG5cbmZ1bmN0aW9uIHAobiwgYSwgaSwgdSkge1xuICAgIGlmICh2b2lkIDAgIT09IGkpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG4pKSB0aHJvdyByKFwiTWV0YWRhdGEuZGVjb3JhdGVcIiwgWyBuLCBhLCBpLCB1IF0sIFwiZGVjb3JhdG9yc1wiLCBuLCBcIkFycmF5XCIpO1xuICAgICAgICBpZiAoIXQoYSkpIHRocm93IHIoXCJNZXRhZGF0YS5kZWNvcmF0ZVwiLCBbIG4sIGEsIGksIHUgXSwgXCJ0YXJnZXRcIiwgYSwgXCJPYmplY3Qgb3IgRnVuY3Rpb25cIik7XG4gICAgICAgIGlmICghdCh1KSAmJiAhZSh1KSkgdGhyb3cgcihcIk1ldGFkYXRhLmRlY29yYXRlXCIsIFsgbiwgYSwgaSwgdSBdLCBcImF0dHJpYnV0ZXNcIiwgdSwgXCJPYmplY3QsIEZ1bmN0aW9uLCBudWxsLCBvciB1bmRlZmluZWRcIik7XG4gICAgICAgIGlmIChudWxsID09PSB1KSB1ID0gdm9pZCAwO1xuICAgICAgICBpID0gbyhpKTtcbiAgICAgICAgcmV0dXJuIGIobiwgYSwgaSwgdSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG4pKSB0aHJvdyByKFwiTWV0YWRhdGEuZGVjb3JhdGVcIiwgWyBuLCBhLCBpLCB1IF0sIFwiZGVjb3JhdG9yc1wiLCBuLCBcIkFycmF5XCIpO1xuICAgICAgICBpZiAoXCJmdW5jdGlvblwiICE9PSB0eXBlb2YgYSkgdGhyb3cgcihcIk1ldGFkYXRhLmRlY29yYXRlXCIsIFsgbiwgYSwgaSwgdSBdLCBcInRhcmdldFwiLCBhLCBcIkZ1bmN0aW9uXCIpO1xuICAgICAgICByZXR1cm4gTShuLCBhKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIE0odCwgbikge1xuICAgIGZvciAobGV0IGEgPSB0Lmxlbmd0aCAtIDE7IGEgPj0gMDsgLS1hKSB7XG4gICAgICAgIGNvbnN0IG8gPSB0W2FdO1xuICAgICAgICBjb25zdCBpID0gbyhuKTtcbiAgICAgICAgaWYgKCFlKGkpKSB7XG4gICAgICAgICAgICBpZiAoXCJmdW5jdGlvblwiICE9PSB0eXBlb2YgaSkgdGhyb3cgcihcIkRlY29yYXRlQ29uc3RydWN0b3JcIiwgWyB0LCBuIF0sIFwiZGVjb3JhdGVkXCIsIGksIFwiRnVuY3Rpb24sIG51bGwsIG9yIHVuZGVmaW5lZFwiKTtcbiAgICAgICAgICAgIG4gPSBpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG5mdW5jdGlvbiBiKG4sIGEsIG8sIGkpIHtcbiAgICBmb3IgKGxldCB1ID0gbi5sZW5ndGggLSAxOyB1ID49IDA7IC0tdSkge1xuICAgICAgICBjb25zdCBjID0gblt1XTtcbiAgICAgICAgY29uc3QgZiA9IGMoYSwgbywgaSk7XG4gICAgICAgIGlmICghZShmKSkge1xuICAgICAgICAgICAgaWYgKCF0KGYpKSB0aHJvdyByKFwiRGVjb3JhdGVQcm9wZXJ0eVwiLCBbIG4sIGEsIG8sIGkgXSwgXCJkZWNvcmF0ZWRcIiwgZiwgXCJPYmplY3QsIEZ1bmN0aW9uLCBudWxsLCBvciB1bmRlZmluZWRcIik7XG4gICAgICAgICAgICBpID0gZjtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gaTtcbn1cblxuZnVuY3Rpb24gTyhlLCBuLCBvLCBpKSB7XG4gICAgaWYgKCF0KG8pKSB0aHJvdyByKFwiTWV0YWRhdGEuZGVmaW5lXCIsIFsgZSwgbiwgbywgaSBdLCBcInRhcmdldFwiLCBvLCBcIk9iamVjdCBvciBGdW5jdGlvblwiKTtcbiAgICByZXR1cm4gZChlLCBuLCBvLCBhKGkpKTtcbn1cblxuZnVuY3Rpb24gbShlLCBuLCBvKSB7XG4gICAgaWYgKCF0KG4pKSB0aHJvdyByKFwiTWV0YWRhdGEuaGFzXCIsIFsgZSwgbiwgbyBdLCBcInRhcmdldFwiLCBuLCBcIk9iamVjdCBvciBGdW5jdGlvblwiKTtcbiAgICByZXR1cm4gZihlLCBuLCBhKG8pKTtcbn1cblxuZnVuY3Rpb24gaihlLCBuLCBvKSB7XG4gICAgaWYgKCF0KG4pKSB0aHJvdyByKFwiTWV0YWRhdGEuaGFzT3duXCIsIFsgZSwgbiwgbyBdLCBcInRhcmdldFwiLCBuLCBcIk9iamVjdCBvciBGdW5jdGlvblwiKTtcbiAgICByZXR1cm4gYyhlLCBuLCBhKG8pKTtcbn1cblxuZnVuY3Rpb24gdihlLCBuLCBvKSB7XG4gICAgaWYgKCF0KG4pKSB0aHJvdyByKFwiTWV0YWRhdGEuZ2V0XCIsIFsgZSwgbiwgbyBdLCBcInRhcmdldFwiLCBuLCBcIk9iamVjdCBvciBGdW5jdGlvblwiKTtcbiAgICByZXR1cm4gbChlLCBuLCBhKG8pKTtcbn1cblxuZnVuY3Rpb24gJChlLCBuLCBvKSB7XG4gICAgaWYgKCF0KG4pKSB0aHJvdyByKFwiTWV0YWRhdGEuZ2V0T3duXCIsIFsgZSwgbiwgbyBdLCBcInRhcmdldFwiLCBuLCBcIk9iamVjdCBvciBGdW5jdGlvblwiKTtcbiAgICByZXR1cm4gcyhlLCBuLCBhKG8pKTtcbn1cblxuZnVuY3Rpb24gRihlLCBuKSB7XG4gICAgaWYgKCF0KGUpKSB0aHJvdyByKFwiTWV0YWRhdGEuZ2V0S2V5c1wiLCBbIGUsIG4gXSwgXCJ0YXJnZXRcIiwgZSwgXCJPYmplY3Qgb3IgRnVuY3Rpb25cIik7XG4gICAgcmV0dXJuIHkoZSwgYShuKSk7XG59XG5cbmZ1bmN0aW9uIEsoZSwgbikge1xuICAgIGlmICghdChlKSkgdGhyb3cgcihcIk1ldGFkYXRhLmdldE93bktleXNcIiwgWyBlLCBuIF0sIFwidGFyZ2V0XCIsIGUsIFwiT2JqZWN0IG9yIEZ1bmN0aW9uXCIpO1xuICAgIHJldHVybiB3KGUsIGEobikpO1xufVxuXG5mdW5jdGlvbiBFKGUsIG4sIG8pIHtcbiAgICBpZiAoIXQobikpIHRocm93IHIoXCJNZXRhZGF0YS5kZWxldGVcIiwgWyBlLCBuLCBvIF0sIFwidGFyZ2V0XCIsIG4sIFwiT2JqZWN0IG9yIEZ1bmN0aW9uXCIpO1xuICAgIHJldHVybiBoKG4sIGUsIGEobykpO1xufVxuXG5jb25zdCBBID0ge1xuICAgIGRlZmluZTogTyxcbiAgICBoYXM6IG0sXG4gICAgaGFzT3duOiBqLFxuICAgIGdldDogdixcbiAgICBnZXRPd246ICQsXG4gICAgZ2V0S2V5czogRixcbiAgICBnZXRPd25LZXlzOiBLLFxuICAgIGRlbGV0ZTogRVxufTtcblxuZnVuY3Rpb24gayh0LCBlLCBuLCByLCBhKSB7XG4gICAgaWYgKCFSZWZsZWN0LmRlZmluZVByb3BlcnR5KHQsIGUsIHtcbiAgICAgICAgd3JpdGFibGU6IHIsXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICBjb25maWd1cmFibGU6IGEsXG4gICAgICAgIHZhbHVlOiBuXG4gICAgfSkpIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGFwcGx5IG1ldGFkYXRhIHBvbHlmaWxsOiBjb3VsZCBub3QgYWRkIHByb3BlcnR5ICcke2V9JyB0byB0aGUgZ2xvYmFsIFJlZmxlY3Qgb2JqZWN0YCk7XG59XG5cbmNvbnN0IFIgPSBcIltbJGF1XV1cIjtcblxuZnVuY3Rpb24gQyh0KSB7XG4gICAgcmV0dXJuIFIgaW4gdDtcbn1cblxuZnVuY3Rpb24gSSh0LCBlLCByKSB7XG4gICAgayh0LCBSLCBuLCBlLCByKTtcbiAgICBrKHQsIFwibWV0YWRhdGFcIiwgZywgZSwgcik7XG4gICAgayh0LCBcImRlY29yYXRlXCIsIHAsIGUsIHIpO1xuICAgIGsodCwgXCJkZWZpbmVNZXRhZGF0YVwiLCBPLCBlLCByKTtcbiAgICBrKHQsIFwiaGFzTWV0YWRhdGFcIiwgbSwgZSwgcik7XG4gICAgayh0LCBcImhhc093bk1ldGFkYXRhXCIsIGosIGUsIHIpO1xuICAgIGsodCwgXCJnZXRNZXRhZGF0YVwiLCB2LCBlLCByKTtcbiAgICBrKHQsIFwiZ2V0T3duTWV0YWRhdGFcIiwgJCwgZSwgcik7XG4gICAgayh0LCBcImdldE1ldGFkYXRhS2V5c1wiLCBGLCBlLCByKTtcbiAgICBrKHQsIFwiZ2V0T3duTWV0YWRhdGFLZXlzXCIsIEssIGUsIHIpO1xuICAgIGsodCwgXCJkZWxldGVNZXRhZGF0YVwiLCBFLCBlLCByKTtcbn1cblxuZnVuY3Rpb24gUyh0LCBlID0gdHJ1ZSwgciA9IGZhbHNlLCBhID0gdHJ1ZSwgbyA9IHRydWUpIHtcbiAgICBpZiAoQyh0KSkge1xuICAgICAgICBpZiAodFtSXSA9PT0gbikgcmV0dXJuO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbmZsaWN0aW5nIEBhdXJlbGlhL21ldGFkYXRhIG1vZHVsZSBpbXBvcnQgZGV0ZWN0ZWQuIFBsZWFzZSBtYWtlIHN1cmUgeW91IGhhdmUgdGhlIHNhbWUgdmVyc2lvbiBvZiBhbGwgQXVyZWxpYSBwYWNrYWdlcyBpbiB5b3VyIGRlcGVuZGVuY3kgdHJlZS5gKTtcbiAgICB9XG4gICAgY29uc3QgaSA9IFsgXCJtZXRhZGF0YVwiLCBcImRlY29yYXRlXCIsIFwiZGVmaW5lTWV0YWRhdGFcIiwgXCJoYXNNZXRhZGF0YVwiLCBcImhhc093bk1ldGFkYXRhXCIsIFwiZ2V0TWV0YWRhdGFcIiwgXCJnZXRPd25NZXRhZGF0YVwiLCBcImdldE1ldGFkYXRhS2V5c1wiLCBcImdldE93bk1ldGFkYXRhS2V5c1wiLCBcImRlbGV0ZU1ldGFkYXRhXCIgXS5maWx0ZXIoKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHQgaW4gUmVmbGVjdDtcbiAgICB9KSk7XG4gICAgaWYgKGkubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGkubWFwKChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IGAke1JlZmxlY3RbdF0udG9TdHJpbmcoKS5zbGljZSgwLCAxMDApfS4uLmA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3R9OlxcbiR7ZX1gO1xuICAgICAgICAgICAgfSkpLmpvaW4oXCJcXG5cXG5cIik7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENvbmZsaWN0aW5nIHJlZmxlY3QubWV0YWRhdGEgcG9seWZpbGwgZm91bmQuIElmIHlvdSBoYXZlICdyZWZsZWN0LW1ldGFkYXRhJyBvciBhbnkgb3RoZXIgcmVmbGVjdCBwb2x5ZmlsbCBpbXBvcnRlZCwgcGxlYXNlIHJlbW92ZSBpdCwgaWYgbm90IChvciBpZiB5b3UgbXVzdCB1c2UgYSBzcGVjaWZpYyBwb2x5ZmlsbCkgcGxlYXNlIGZpbGUgYW4gaXNzdWUgYXQgaHR0cHM6Ly9naXRodWIuY29tL2F1cmVsaWEvYXVyZWxpYS9pc3N1ZXMgc28gdGhhdCB3ZSBjYW4gbG9vayBpbnRvIGNvbXBhdGliaWxpdHkgb3B0aW9ucyBmb3IgdGhpcyBzY2VuYXJpby4gSW1wbGVtZW50YXRpb24gc3VtbWFyeTpcXG5cXG4ke3R9YCk7XG4gICAgICAgIH0gZWxzZSBpZiAocikgSSh0LCBhLCBvKTtcbiAgICB9IGVsc2UgSSh0LCBhLCBvKTtcbn1cblxuZXhwb3J0IHsgQSBhcyBNZXRhZGF0YSwgUyBhcyBhcHBseU1ldGFkYXRhUG9seWZpbGwsIGUgYXMgaXNOdWxsT3JVbmRlZmluZWQsIHQgYXMgaXNPYmplY3QsIGcgYXMgbWV0YWRhdGEgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwiaW1wb3J0IHsgUGxhdGZvcm0gYXMgdCwgVGFza1F1ZXVlIGFzIGkgfSBmcm9tIFwiQGF1cmVsaWEvcGxhdGZvcm1cIjtcblxuY29uc3QgcyA9IG5ldyBNYXA7XG5cbmZ1bmN0aW9uIGUodCkge1xuICAgIHJldHVybiBmdW5jdGlvbiBpKCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBQTEFURk9STSBkaWQgbm90IHJlY2VpdmUgYSB2YWxpZCByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBmdW5jdGlvbiAnJHt0fScuYCk7XG4gICAgfTtcbn1cblxuY2xhc3MgQnJvd3NlclBsYXRmb3JtIGV4dGVuZHMgdCB7XG4gICAgY29uc3RydWN0b3IodCwgcyA9IHt9KSB7XG4gICAgICAgIHN1cGVyKHQsIHMpO1xuICAgICAgICB0aGlzLnQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pID0gLTE7XG4gICAgICAgIHRoaXMuaCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnUgPSAtMTtcbiAgICAgICAgKFwiTm9kZSxFbGVtZW50LEhUTUxFbGVtZW50LEN1c3RvbUV2ZW50LENTU1N0eWxlU2hlZXQsU2hhZG93Um9vdCxNdXRhdGlvbk9ic2VydmVyLFwiICsgXCJ3aW5kb3csZG9jdW1lbnQsbG9jYXRpb24saGlzdG9yeSxuYXZpZ2F0b3IsY3VzdG9tRWxlbWVudHNcIikuc3BsaXQoXCIsXCIpLmZvckVhY2goKGkgPT4ge1xuICAgICAgICAgICAgdGhpc1tpXSA9IGkgaW4gcyA/IHNbaV0gOiB0W2ldO1xuICAgICAgICB9KSk7XG4gICAgICAgIFwiZmV0Y2gscmVxdWVzdEFuaW1hdGlvbkZyYW1lLGNhbmNlbEFuaW1hdGlvbkZyYW1lXCIuc3BsaXQoXCIsXCIpLmZvckVhY2goKGkgPT4ge1xuICAgICAgICAgICAgdmFyIGgsIHI7XG4gICAgICAgICAgICB0aGlzW2ldID0gaSBpbiBzID8gc1tpXSA6IG51bGwgIT09IChyID0gbnVsbCA9PT0gKGggPSB0W2ldKSB8fCB2b2lkIDAgPT09IGggPyB2b2lkIDAgOiBoLmJpbmQodCkpICYmIHZvaWQgMCAhPT0gciA/IHIgOiBlKGkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXMuZmx1c2hEb21SZWFkID0gdGhpcy5mbHVzaERvbVJlYWQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5mbHVzaERvbVdyaXRlID0gdGhpcy5mbHVzaERvbVdyaXRlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZG9tUmVhZFF1ZXVlID0gbmV3IGkodGhpcywgdGhpcy5yZXF1ZXN0RG9tUmVhZC5iaW5kKHRoaXMpLCB0aGlzLmNhbmNlbERvbVJlYWQuYmluZCh0aGlzKSk7XG4gICAgICAgIHRoaXMuZG9tV3JpdGVRdWV1ZSA9IG5ldyBpKHRoaXMsIHRoaXMucmVxdWVzdERvbVdyaXRlLmJpbmQodGhpcyksIHRoaXMuY2FuY2VsRG9tV3JpdGUuYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRPckNyZWF0ZSh0LCBpID0ge30pIHtcbiAgICAgICAgbGV0IGUgPSBzLmdldCh0KTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgcy5zZXQodCwgZSA9IG5ldyBCcm93c2VyUGxhdGZvcm0odCwgaSkpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgc3RhdGljIHNldCh0LCBpKSB7XG4gICAgICAgIHMuc2V0KHQsIGkpO1xuICAgIH1cbiAgICByZXF1ZXN0RG9tUmVhZCgpIHtcbiAgICAgICAgdGhpcy50ID0gdHJ1ZTtcbiAgICAgICAgaWYgKC0xID09PSB0aGlzLnUpIHRoaXMudSA9IHRoaXMucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuZmx1c2hEb21Xcml0ZSk7XG4gICAgfVxuICAgIGNhbmNlbERvbVJlYWQoKSB7XG4gICAgICAgIHRoaXMudCA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5pID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuY2xlYXJUaW1lb3V0KHRoaXMuaSk7XG4gICAgICAgICAgICB0aGlzLmkgPSAtMTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmFsc2UgPT09IHRoaXMuaCAmJiB0aGlzLnUgPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnUpO1xuICAgICAgICAgICAgdGhpcy51ID0gLTE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmx1c2hEb21SZWFkKCkge1xuICAgICAgICB0aGlzLmkgPSAtMTtcbiAgICAgICAgaWYgKHRydWUgPT09IHRoaXMudCkge1xuICAgICAgICAgICAgdGhpcy50ID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLmRvbVJlYWRRdWV1ZS5mbHVzaCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlcXVlc3REb21Xcml0ZSgpIHtcbiAgICAgICAgdGhpcy5oID0gdHJ1ZTtcbiAgICAgICAgaWYgKC0xID09PSB0aGlzLnUpIHRoaXMudSA9IHRoaXMucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuZmx1c2hEb21Xcml0ZSk7XG4gICAgfVxuICAgIGNhbmNlbERvbVdyaXRlKCkge1xuICAgICAgICB0aGlzLmggPSBmYWxzZTtcbiAgICAgICAgaWYgKHRoaXMudSA+IC0xICYmIChmYWxzZSA9PT0gdGhpcy50IHx8IHRoaXMuaSA+IC0xKSkge1xuICAgICAgICAgICAgdGhpcy5jYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnUpO1xuICAgICAgICAgICAgdGhpcy51ID0gLTE7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmx1c2hEb21Xcml0ZSgpIHtcbiAgICAgICAgdGhpcy51ID0gLTE7XG4gICAgICAgIGlmICh0cnVlID09PSB0aGlzLmgpIHtcbiAgICAgICAgICAgIHRoaXMuaCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5kb21Xcml0ZVF1ZXVlLmZsdXNoKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRydWUgPT09IHRoaXMudCAmJiAtMSA9PT0gdGhpcy5pKSB0aGlzLmkgPSB0aGlzLnNldFRpbWVvdXQodGhpcy5mbHVzaERvbVJlYWQsIDApO1xuICAgIH1cbn1cblxuZXhwb3J0IHsgQnJvd3NlclBsYXRmb3JtIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiIsImNvbnN0IHQgPSBuZXcgTWFwO1xuXG5mdW5jdGlvbiBzKHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gcygpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgUExBVEZPUk0gZGlkIG5vdCByZWNlaXZlIGEgdmFsaWQgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgZnVuY3Rpb24gJyR7dH0nLmApO1xuICAgIH07XG59XG5cbmNsYXNzIFBsYXRmb3JtIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBpID0ge30pIHtcbiAgICAgICAgdmFyIGUsIGgsIHIsIG4sIG8sIGEsIGwsIGMsIHUsIGYsIGQsIHYsIHc7XG4gICAgICAgIHRoaXMubWFjcm9UYXNrUmVxdWVzdGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubWFjcm9UYXNrSGFuZGxlID0gLTE7XG4gICAgICAgIHRoaXMuZ2xvYmFsVGhpcyA9IHQ7XG4gICAgICAgIHRoaXMuZGVjb2RlVVJJID0gXCJkZWNvZGVVUklcIiBpbiBpID8gaS5kZWNvZGVVUkkgOiB0LmRlY29kZVVSSTtcbiAgICAgICAgdGhpcy5kZWNvZGVVUklDb21wb25lbnQgPSBcImRlY29kZVVSSUNvbXBvbmVudFwiIGluIGkgPyBpLmRlY29kZVVSSUNvbXBvbmVudCA6IHQuZGVjb2RlVVJJQ29tcG9uZW50O1xuICAgICAgICB0aGlzLmVuY29kZVVSSSA9IFwiZW5jb2RlVVJJXCIgaW4gaSA/IGkuZW5jb2RlVVJJIDogdC5lbmNvZGVVUkk7XG4gICAgICAgIHRoaXMuZW5jb2RlVVJJQ29tcG9uZW50ID0gXCJlbmNvZGVVUklDb21wb25lbnRcIiBpbiBpID8gaS5lbmNvZGVVUklDb21wb25lbnQgOiB0LmVuY29kZVVSSUNvbXBvbmVudDtcbiAgICAgICAgdGhpcy5EYXRlID0gXCJEYXRlXCIgaW4gaSA/IGkuRGF0ZSA6IHQuRGF0ZTtcbiAgICAgICAgdGhpcy5SZWZsZWN0ID0gXCJSZWZsZWN0XCIgaW4gaSA/IGkuUmVmbGVjdCA6IHQuUmVmbGVjdDtcbiAgICAgICAgdGhpcy5jbGVhckludGVydmFsID0gXCJjbGVhckludGVydmFsXCIgaW4gaSA/IGkuY2xlYXJJbnRlcnZhbCA6IG51bGwgIT09IChoID0gbnVsbCA9PT0gKGUgPSB0LmNsZWFySW50ZXJ2YWwpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuYmluZCh0KSkgJiYgdm9pZCAwICE9PSBoID8gaCA6IHMoXCJjbGVhckludGVydmFsXCIpO1xuICAgICAgICB0aGlzLmNsZWFyVGltZW91dCA9IFwiY2xlYXJUaW1lb3V0XCIgaW4gaSA/IGkuY2xlYXJUaW1lb3V0IDogbnVsbCAhPT0gKG4gPSBudWxsID09PSAociA9IHQuY2xlYXJUaW1lb3V0KSB8fCB2b2lkIDAgPT09IHIgPyB2b2lkIDAgOiByLmJpbmQodCkpICYmIHZvaWQgMCAhPT0gbiA/IG4gOiBzKFwiY2xlYXJUaW1lb3V0XCIpO1xuICAgICAgICB0aGlzLnF1ZXVlTWljcm90YXNrID0gXCJxdWV1ZU1pY3JvdGFza1wiIGluIGkgPyBpLnF1ZXVlTWljcm90YXNrIDogbnVsbCAhPT0gKGEgPSBudWxsID09PSAobyA9IHQucXVldWVNaWNyb3Rhc2spIHx8IHZvaWQgMCA9PT0gbyA/IHZvaWQgMCA6IG8uYmluZCh0KSkgJiYgdm9pZCAwICE9PSBhID8gYSA6IHMoXCJxdWV1ZU1pY3JvdGFza1wiKTtcbiAgICAgICAgdGhpcy5zZXRJbnRlcnZhbCA9IFwic2V0SW50ZXJ2YWxcIiBpbiBpID8gaS5zZXRJbnRlcnZhbCA6IG51bGwgIT09IChjID0gbnVsbCA9PT0gKGwgPSB0LnNldEludGVydmFsKSB8fCB2b2lkIDAgPT09IGwgPyB2b2lkIDAgOiBsLmJpbmQodCkpICYmIHZvaWQgMCAhPT0gYyA/IGMgOiBzKFwic2V0SW50ZXJ2YWxcIik7XG4gICAgICAgIHRoaXMuc2V0VGltZW91dCA9IFwic2V0VGltZW91dFwiIGluIGkgPyBpLnNldFRpbWVvdXQgOiBudWxsICE9PSAoZiA9IG51bGwgPT09ICh1ID0gdC5zZXRUaW1lb3V0KSB8fCB2b2lkIDAgPT09IHUgPyB2b2lkIDAgOiB1LmJpbmQodCkpICYmIHZvaWQgMCAhPT0gZiA/IGYgOiBzKFwic2V0VGltZW91dFwiKTtcbiAgICAgICAgdGhpcy5jb25zb2xlID0gXCJjb25zb2xlXCIgaW4gaSA/IGkuY29uc29sZSA6IHQuY29uc29sZTtcbiAgICAgICAgdGhpcy5wZXJmb3JtYW5jZU5vdyA9IFwicGVyZm9ybWFuY2VOb3dcIiBpbiBpID8gaS5wZXJmb3JtYW5jZU5vdyA6IG51bGwgIT09ICh3ID0gbnVsbCA9PT0gKHYgPSBudWxsID09PSAoZCA9IHQucGVyZm9ybWFuY2UpIHx8IHZvaWQgMCA9PT0gZCA/IHZvaWQgMCA6IGQubm93KSB8fCB2b2lkIDAgPT09IHYgPyB2b2lkIDAgOiB2LmJpbmQodC5wZXJmb3JtYW5jZSkpICYmIHZvaWQgMCAhPT0gdyA/IHcgOiBzKFwicGVyZm9ybWFuY2Uubm93XCIpO1xuICAgICAgICB0aGlzLmZsdXNoTWFjcm9UYXNrID0gdGhpcy5mbHVzaE1hY3JvVGFzay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLnRhc2tRdWV1ZSA9IG5ldyBUYXNrUXVldWUodGhpcywgdGhpcy5yZXF1ZXN0TWFjcm9UYXNrLmJpbmQodGhpcyksIHRoaXMuY2FuY2VsTWFjcm9UYXNrLmJpbmQodGhpcykpO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0T3JDcmVhdGUocywgaSA9IHt9KSB7XG4gICAgICAgIGxldCBlID0gdC5nZXQocyk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHQuc2V0KHMsIGUgPSBuZXcgUGxhdGZvcm0ocywgaSkpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgc3RhdGljIHNldChzLCBpKSB7XG4gICAgICAgIHQuc2V0KHMsIGkpO1xuICAgIH1cbiAgICByZXF1ZXN0TWFjcm9UYXNrKCkge1xuICAgICAgICB0aGlzLm1hY3JvVGFza1JlcXVlc3RlZCA9IHRydWU7XG4gICAgICAgIGlmICgtMSA9PT0gdGhpcy5tYWNyb1Rhc2tIYW5kbGUpIHRoaXMubWFjcm9UYXNrSGFuZGxlID0gdGhpcy5zZXRUaW1lb3V0KHRoaXMuZmx1c2hNYWNyb1Rhc2ssIDApO1xuICAgIH1cbiAgICBjYW5jZWxNYWNyb1Rhc2soKSB7XG4gICAgICAgIHRoaXMubWFjcm9UYXNrUmVxdWVzdGVkID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLm1hY3JvVGFza0hhbmRsZSA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLmNsZWFyVGltZW91dCh0aGlzLm1hY3JvVGFza0hhbmRsZSk7XG4gICAgICAgICAgICB0aGlzLm1hY3JvVGFza0hhbmRsZSA9IC0xO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZsdXNoTWFjcm9UYXNrKCkge1xuICAgICAgICB0aGlzLm1hY3JvVGFza0hhbmRsZSA9IC0xO1xuICAgICAgICBpZiAodHJ1ZSA9PT0gdGhpcy5tYWNyb1Rhc2tSZXF1ZXN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMubWFjcm9UYXNrUmVxdWVzdGVkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnRhc2tRdWV1ZS5mbHVzaCgpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBpKHQpIHtcbiAgICByZXR1cm4gdC5wZXJzaXN0ZW50O1xufVxuXG5jbGFzcyBUYXNrUXVldWUge1xuICAgIGNvbnN0cnVjdG9yKHQsIHMsIGkpIHtcbiAgICAgICAgdGhpcy5wbGF0Zm9ybSA9IHQ7XG4gICAgICAgIHRoaXMuJHJlcXVlc3QgPSBzO1xuICAgICAgICB0aGlzLiRjYW5jZWwgPSBpO1xuICAgICAgICB0aGlzLnQgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuaSA9IDA7XG4gICAgICAgIHRoaXMucHJvY2Vzc2luZyA9IFtdO1xuICAgICAgICB0aGlzLnBlbmRpbmcgPSBbXTtcbiAgICAgICAgdGhpcy5kZWxheWVkID0gW107XG4gICAgICAgIHRoaXMuZmx1c2hSZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5oID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnRhc2tQb29sID0gW107XG4gICAgICAgIHRoaXMudSA9IDA7XG4gICAgICAgIHRoaXMuVCA9IDA7XG4gICAgICAgIHRoaXMuJCA9IDA7XG4gICAgICAgIHRoaXMuSSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5mbHVzaFJlcXVlc3RlZCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmx1c2hSZXF1ZXN0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMuVCA9IHRoaXMucGxhdGZvcm0ucGVyZm9ybWFuY2VOb3coKTtcbiAgICAgICAgICAgICAgICB0aGlzLiRyZXF1ZXN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuTSA9IG5ldyBUcmFjZXIodC5jb25zb2xlKTtcbiAgICB9XG4gICAgZ2V0IGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAwID09PSB0aGlzLmkgJiYgMCA9PT0gdGhpcy5wcm9jZXNzaW5nLmxlbmd0aCAmJiAwID09PSB0aGlzLnBlbmRpbmcubGVuZ3RoICYmIDAgPT09IHRoaXMuZGVsYXllZC5sZW5ndGg7XG4gICAgfVxuICAgIGdldCBQKCkge1xuICAgICAgICByZXR1cm4gMCA9PT0gdGhpcy5pICYmIHRoaXMucHJvY2Vzc2luZy5ldmVyeShpKSAmJiB0aGlzLnBlbmRpbmcuZXZlcnkoaSkgJiYgdGhpcy5kZWxheWVkLmV2ZXJ5KGkpO1xuICAgIH1cbiAgICBmbHVzaCh0ID0gdGhpcy5wbGF0Zm9ybS5wZXJmb3JtYW5jZU5vdygpKSB7XG4gICAgICAgIHRoaXMuZmx1c2hSZXF1ZXN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy4kID0gdDtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdGhpcy50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wZW5kaW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NpbmcucHVzaCguLi50aGlzLnBlbmRpbmcpO1xuICAgICAgICAgICAgICAgIHRoaXMucGVuZGluZy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuZGVsYXllZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IHMgPSAtMTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoKytzIDwgdGhpcy5kZWxheWVkLmxlbmd0aCAmJiB0aGlzLmRlbGF5ZWRbc10ucXVldWVUaW1lIDw9IHQpIDtcbiAgICAgICAgICAgICAgICB0aGlzLnByb2Nlc3NpbmcucHVzaCguLi50aGlzLmRlbGF5ZWQuc3BsaWNlKDAsIHMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBzO1xuICAgICAgICAgICAgd2hpbGUgKHRoaXMucHJvY2Vzc2luZy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgKHMgPSB0aGlzLnByb2Nlc3Npbmcuc2hpZnQoKSkucnVuKCk7XG4gICAgICAgICAgICAgICAgaWYgKDEgPT09IHMuc3RhdHVzKSBpZiAodHJ1ZSA9PT0gcy5zdXNwZW5kKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudCA9IHM7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuSSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfSBlbHNlICsrdGhpcy5pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMucGVuZGluZy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzaW5nLnB1c2goLi4udGhpcy5wZW5kaW5nKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBlbmRpbmcubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmRlbGF5ZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGxldCBzID0gLTE7XG4gICAgICAgICAgICAgICAgd2hpbGUgKCsrcyA8IHRoaXMuZGVsYXllZC5sZW5ndGggJiYgdGhpcy5kZWxheWVkW3NdLnF1ZXVlVGltZSA8PSB0KSA7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9jZXNzaW5nLnB1c2goLi4udGhpcy5kZWxheWVkLnNwbGljZSgwLCBzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodGhpcy5wcm9jZXNzaW5nLmxlbmd0aCA+IDAgfHwgdGhpcy5kZWxheWVkLmxlbmd0aCA+IDAgfHwgdGhpcy5pID4gMCkgdGhpcy5JKCk7XG4gICAgICAgICAgICBpZiAodm9pZCAwICE9PSB0aGlzLmggJiYgdGhpcy5QKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuaDtcbiAgICAgICAgICAgICAgICB0aGlzLmggPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdC5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB0aGlzLkkoKTtcbiAgICB9XG4gICAgY2FuY2VsKCkge1xuICAgICAgICBpZiAodGhpcy5mbHVzaFJlcXVlc3RlZCkge1xuICAgICAgICAgICAgdGhpcy4kY2FuY2VsKCk7XG4gICAgICAgICAgICB0aGlzLmZsdXNoUmVxdWVzdGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgeWllbGQoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRW1wdHkpIDsgZWxzZSB7XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSB0aGlzLmgpIHRoaXMuaCA9IHUoKTtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZVRhc2sodCwgcykge1xuICAgICAgICBjb25zdCB7ZGVsYXk6IGksIHByZWVtcHQ6IGUsIHBlcnNpc3RlbnQ6IGgsIHJldXNhYmxlOiByLCBzdXNwZW5kOiBufSA9IHtcbiAgICAgICAgICAgIC4uLm8sXG4gICAgICAgICAgICAuLi5zXG4gICAgICAgIH07XG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICBpZiAoaSA+IDApIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBhcmd1bWVudHM6IHByZWVtcHQgY2Fubm90IGJlIGNvbWJpbmVkIHdpdGggYSBncmVhdGVyLXRoYW4temVybyBkZWxheWApO1xuICAgICAgICAgICAgaWYgKGgpIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBhcmd1bWVudHM6IHByZWVtcHQgY2Fubm90IGJlIGNvbWJpbmVkIHdpdGggcGVyc2lzdGVudGApO1xuICAgICAgICB9XG4gICAgICAgIGlmICgwID09PSB0aGlzLnByb2Nlc3NpbmcubGVuZ3RoKSB0aGlzLkkoKTtcbiAgICAgICAgY29uc3QgYSA9IHRoaXMucGxhdGZvcm0ucGVyZm9ybWFuY2VOb3coKTtcbiAgICAgICAgbGV0IGw7XG4gICAgICAgIGlmIChyKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy50YXNrUG9vbDtcbiAgICAgICAgICAgIGNvbnN0IG8gPSB0aGlzLnUgLSAxO1xuICAgICAgICAgICAgaWYgKG8gPj0gMCkge1xuICAgICAgICAgICAgICAgIGwgPSBzW29dO1xuICAgICAgICAgICAgICAgIHNbb10gPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgdGhpcy51ID0gbztcbiAgICAgICAgICAgICAgICBsLnJldXNlKGEsIGksIGUsIGgsIG4sIHQpO1xuICAgICAgICAgICAgfSBlbHNlIGwgPSBuZXcgVGFzayh0aGlzLk0sIHRoaXMsIGEsIGEgKyBpLCBlLCBoLCBuLCByLCB0KTtcbiAgICAgICAgfSBlbHNlIGwgPSBuZXcgVGFzayh0aGlzLk0sIHRoaXMsIGEsIGEgKyBpLCBlLCBoLCBuLCByLCB0KTtcbiAgICAgICAgaWYgKGUpIHRoaXMucHJvY2Vzc2luZ1t0aGlzLnByb2Nlc3NpbmcubGVuZ3RoXSA9IGw7IGVsc2UgaWYgKDAgPT09IGkpIHRoaXMucGVuZGluZ1t0aGlzLnBlbmRpbmcubGVuZ3RoXSA9IGw7IGVsc2UgdGhpcy5kZWxheWVkW3RoaXMuZGVsYXllZC5sZW5ndGhdID0gbDtcbiAgICAgICAgcmV0dXJuIGw7XG4gICAgfVxuICAgIHJlbW92ZSh0KSB7XG4gICAgICAgIGxldCBzID0gdGhpcy5wcm9jZXNzaW5nLmluZGV4T2YodCk7XG4gICAgICAgIGlmIChzID4gLTEpIHtcbiAgICAgICAgICAgIHRoaXMucHJvY2Vzc2luZy5zcGxpY2UocywgMSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcyA9IHRoaXMucGVuZGluZy5pbmRleE9mKHQpO1xuICAgICAgICBpZiAocyA+IC0xKSB7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmcuc3BsaWNlKHMsIDEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHMgPSB0aGlzLmRlbGF5ZWQuaW5kZXhPZih0KTtcbiAgICAgICAgaWYgKHMgPiAtMSkge1xuICAgICAgICAgICAgdGhpcy5kZWxheWVkLnNwbGljZShzLCAxKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRhc2sgIyR7dC5pZH0gY291bGQgbm90IGJlIGZvdW5kYCk7XG4gICAgfVxuICAgIHJldHVyblRvUG9vbCh0KSB7XG4gICAgICAgIHRoaXMudGFza1Bvb2xbdGhpcy51KytdID0gdDtcbiAgICB9XG4gICAgcmVzZXRQZXJzaXN0ZW50VGFzayh0KSB7XG4gICAgICAgIHQucmVzZXQodGhpcy5wbGF0Zm9ybS5wZXJmb3JtYW5jZU5vdygpKTtcbiAgICAgICAgaWYgKHQuY3JlYXRlZFRpbWUgPT09IHQucXVldWVUaW1lKSB0aGlzLnBlbmRpbmdbdGhpcy5wZW5kaW5nLmxlbmd0aF0gPSB0OyBlbHNlIHRoaXMuZGVsYXllZFt0aGlzLmRlbGF5ZWQubGVuZ3RoXSA9IHQ7XG4gICAgfVxuICAgIGNvbXBsZXRlQXN5bmNUYXNrKHQpIHtcbiAgICAgICAgdmFyIHM7XG4gICAgICAgIGlmICh0cnVlID09PSB0LnN1c3BlbmQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnQgIT09IHQpIHRocm93IG5ldyBFcnJvcihgQXN5bmMgdGFzayBjb21wbGV0aW9uIG1pc21hdGNoOiBzdXNwZW5kZXJUYXNrPSR7bnVsbCA9PT0gKHMgPSB0aGlzLnQpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuaWR9LCB0YXNrPSR7dC5pZH1gKTtcbiAgICAgICAgICAgIHRoaXMudCA9IHZvaWQgMDtcbiAgICAgICAgfSBlbHNlIC0tdGhpcy5pO1xuICAgICAgICBpZiAodm9pZCAwICE9PSB0aGlzLmggJiYgdGhpcy5QKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5oO1xuICAgICAgICAgICAgdGhpcy5oID0gdm9pZCAwO1xuICAgICAgICAgICAgdC5yZXNvbHZlKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNFbXB0eSkgdGhpcy5jYW5jZWwoKTtcbiAgICB9XG59XG5cbmNsYXNzIFRhc2tBYm9ydEVycm9yIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoXCJUYXNrIHdhcyBjYW5jZWxlZC5cIik7XG4gICAgICAgIHRoaXMudGFzayA9IHQ7XG4gICAgfVxufVxuXG5sZXQgZSA9IDA7XG5cbnZhciBoO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcInBlbmRpbmdcIl0gPSAwXSA9IFwicGVuZGluZ1wiO1xuICAgIHRbdFtcInJ1bm5pbmdcIl0gPSAxXSA9IFwicnVubmluZ1wiO1xuICAgIHRbdFtcImNvbXBsZXRlZFwiXSA9IDJdID0gXCJjb21wbGV0ZWRcIjtcbiAgICB0W3RbXCJjYW5jZWxlZFwiXSA9IDNdID0gXCJjYW5jZWxlZFwiO1xufSkoaCB8fCAoaCA9IHt9KSk7XG5cbmNsYXNzIFRhc2sge1xuICAgIGNvbnN0cnVjdG9yKHQsIHMsIGksIGgsIHIsIG4sIG8sIGEsIGwpIHtcbiAgICAgICAgdGhpcy50YXNrUXVldWUgPSBzO1xuICAgICAgICB0aGlzLmNyZWF0ZWRUaW1lID0gaTtcbiAgICAgICAgdGhpcy5xdWV1ZVRpbWUgPSBoO1xuICAgICAgICB0aGlzLnByZWVtcHQgPSByO1xuICAgICAgICB0aGlzLnBlcnNpc3RlbnQgPSBuO1xuICAgICAgICB0aGlzLnN1c3BlbmQgPSBvO1xuICAgICAgICB0aGlzLnJldXNhYmxlID0gYTtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGw7XG4gICAgICAgIHRoaXMuaWQgPSArK2U7XG4gICAgICAgIHRoaXMuUiA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5BID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnEgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuQyA9IDA7XG4gICAgICAgIHRoaXMuTSA9IHQ7XG4gICAgfVxuICAgIGdldCByZXN1bHQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnE7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHQpIHN3aXRjaCAodGhpcy5DKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnEgPSB1KCk7XG4gICAgICAgICAgICAgICAgdGhpcy5SID0gdC5yZXNvbHZlO1xuICAgICAgICAgICAgICAgIHRoaXMuQSA9IHQucmVqZWN0O1xuICAgICAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVHJ5aW5nIHRvIGF3YWl0IHRhc2sgZnJvbSB3aXRoaW4gdGFzayB3aWxsIGNhdXNlIGEgZGVhZGxvY2suXCIpO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucSA9IFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucSA9IFByb21pc2UucmVqZWN0KG5ldyBUYXNrQWJvcnRFcnJvcih0aGlzKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIGdldCBzdGF0dXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkM7XG4gICAgfVxuICAgIHJ1bih0ID0gdGhpcy50YXNrUXVldWUucGxhdGZvcm0ucGVyZm9ybWFuY2VOb3coKSkge1xuICAgICAgICBpZiAoMCAhPT0gdGhpcy5DKSB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBydW4gdGFzayBpbiAke3RoaXMuQ30gc3RhdGVgKTtcbiAgICAgICAgY29uc3Qge3BlcnNpc3RlbnQ6IHMsIHJldXNhYmxlOiBpLCB0YXNrUXVldWU6IGUsIGNhbGxiYWNrOiBoLCBSOiByLCBBOiBuLCBjcmVhdGVkVGltZTogb30gPSB0aGlzO1xuICAgICAgICBsZXQgYTtcbiAgICAgICAgdGhpcy5DID0gMTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGEgPSBoKHQgLSBvKTtcbiAgICAgICAgICAgIGlmIChhIGluc3RhbmNlb2YgUHJvbWlzZSkgYS50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5wZXJzaXN0ZW50KSBlW1wicmVzZXRQZXJzaXN0ZW50VGFza1wiXSh0aGlzKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzKSB0aGlzLkMgPSAzOyBlbHNlIHRoaXMuQyA9IDI7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlW1wiY29tcGxldGVBc3luY1Rhc2tcIl0odGhpcyk7XG4gICAgICAgICAgICAgICAgaWYgKGZhbHNlICYmIHRoaXMuTS5lbmFibGVkKSA7XG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gcikgcih0KTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGVyc2lzdGVudCAmJiBpKSBlW1wicmV0dXJuVG9Qb29sXCJdKHRoaXMpO1xuICAgICAgICAgICAgfSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGVyc2lzdGVudCkgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICAgICAgZVtcImNvbXBsZXRlQXN5bmNUYXNrXCJdKHRoaXMpO1xuICAgICAgICAgICAgICAgIGlmIChmYWxzZSAmJiB0aGlzLk0uZW5hYmxlZCkgO1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IG4pIG4odCk7IGVsc2UgdGhyb3cgdDtcbiAgICAgICAgICAgIH0pKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGVyc2lzdGVudCkgZVtcInJlc2V0UGVyc2lzdGVudFRhc2tcIl0odGhpcyk7IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAocykgdGhpcy5DID0gMzsgZWxzZSB0aGlzLkMgPSAyO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZhbHNlICYmIHRoaXMuTS5lbmFibGVkKSA7XG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gcikgcihhKTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGVyc2lzdGVudCAmJiBpKSBlW1wicmV0dXJuVG9Qb29sXCJdKHRoaXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMucGVyc2lzdGVudCkgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICBpZiAodm9pZCAwICE9PSBuKSBuKHQpOyBlbHNlIHRocm93IHQ7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2FuY2VsKCkge1xuICAgICAgICBpZiAoMCA9PT0gdGhpcy5DKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy50YXNrUXVldWU7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5yZXVzYWJsZTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLkE7XG4gICAgICAgICAgICB0LnJlbW92ZSh0aGlzKTtcbiAgICAgICAgICAgIGlmICh0LmlzRW1wdHkpIHQuY2FuY2VsKCk7XG4gICAgICAgICAgICB0aGlzLkMgPSAzO1xuICAgICAgICAgICAgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgICAgICBpZiAocykgdFtcInJldHVyblRvUG9vbFwiXSh0aGlzKTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGkpIGkobmV3IFRhc2tBYm9ydEVycm9yKHRoaXMpKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKDEgPT09IHRoaXMuQyAmJiB0aGlzLnBlcnNpc3RlbnQpIHtcbiAgICAgICAgICAgIHRoaXMucGVyc2lzdGVudCA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICByZXNldCh0KSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnF1ZXVlVGltZSAtIHRoaXMuY3JlYXRlZFRpbWU7XG4gICAgICAgIHRoaXMuY3JlYXRlZFRpbWUgPSB0O1xuICAgICAgICB0aGlzLnF1ZXVlVGltZSA9IHQgKyBzO1xuICAgICAgICB0aGlzLkMgPSAwO1xuICAgICAgICB0aGlzLlIgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuQSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5xID0gdm9pZCAwO1xuICAgIH1cbiAgICByZXVzZSh0LCBzLCBpLCBlLCBoLCByKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlZFRpbWUgPSB0O1xuICAgICAgICB0aGlzLnF1ZXVlVGltZSA9IHQgKyBzO1xuICAgICAgICB0aGlzLnByZWVtcHQgPSBpO1xuICAgICAgICB0aGlzLnBlcnNpc3RlbnQgPSBlO1xuICAgICAgICB0aGlzLnN1c3BlbmQgPSBoO1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gcjtcbiAgICAgICAgdGhpcy5DID0gMDtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5SID0gdm9pZCAwO1xuICAgICAgICB0aGlzLkEgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMucSA9IHZvaWQgMDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHIodCkge1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgY2FzZSAwOlxuICAgICAgICByZXR1cm4gXCJwZW5kaW5nXCI7XG5cbiAgICAgIGNhc2UgMTpcbiAgICAgICAgcmV0dXJuIFwicnVubmluZ1wiO1xuXG4gICAgICBjYXNlIDM6XG4gICAgICAgIHJldHVybiBcImNhbmNlbGVkXCI7XG5cbiAgICAgIGNhc2UgMjpcbiAgICAgICAgcmV0dXJuIFwiY29tcGxldGVkXCI7XG4gICAgfVxufVxuXG5jbGFzcyBUcmFjZXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5jb25zb2xlID0gdDtcbiAgICAgICAgdGhpcy5lbmFibGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZGVwdGggPSAwO1xuICAgIH1cbiAgICBlbnRlcih0LCBzKSB7XG4gICAgICAgIHRoaXMubG9nKGAke1wiICBcIi5yZXBlYXQodGhpcy5kZXB0aCsrKX0+IGAsIHQsIHMpO1xuICAgIH1cbiAgICBsZWF2ZSh0LCBzKSB7XG4gICAgICAgIHRoaXMubG9nKGAke1wiICBcIi5yZXBlYXQoLS10aGlzLmRlcHRoKX08IGAsIHQsIHMpO1xuICAgIH1cbiAgICB0cmFjZSh0LCBzKSB7XG4gICAgICAgIHRoaXMubG9nKGAke1wiICBcIi5yZXBlYXQodGhpcy5kZXB0aCl9LSBgLCB0LCBzKTtcbiAgICB9XG4gICAgbG9nKHQsIHMsIGkpIHtcbiAgICAgICAgaWYgKHMgaW5zdGFuY2VvZiBUYXNrUXVldWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBzW1wicHJvY2Vzc2luZ1wiXS5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBoID0gc1tcInBlbmRpbmdcIl0ubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgciA9IHNbXCJkZWxheWVkXCJdLmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBzW1wiZmx1c2hSZXF1ZXN0ZWRcIl07XG4gICAgICAgICAgICBjb25zdCBvID0gISFzLnQ7XG4gICAgICAgICAgICBjb25zdCBhID0gYHByb2Nlc3Npbmc9JHtlfSBwZW5kaW5nPSR7aH0gZGVsYXllZD0ke3J9IGZsdXNoUmVxPSR7bn0gc3VzVGFzaz0ke299YDtcbiAgICAgICAgICAgIHRoaXMuY29uc29sZS5sb2coYCR7dH1bUS4ke2l9XSAke2F9YCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBlID0gc1tcImlkXCJdO1xuICAgICAgICAgICAgY29uc3QgaCA9IE1hdGgucm91bmQoMTAgKiBzW1wiY3JlYXRlZFRpbWVcIl0pIC8gMTA7XG4gICAgICAgICAgICBjb25zdCBuID0gTWF0aC5yb3VuZCgxMCAqIHNbXCJxdWV1ZVRpbWVcIl0pIC8gMTA7XG4gICAgICAgICAgICBjb25zdCBvID0gc1tcInByZWVtcHRcIl07XG4gICAgICAgICAgICBjb25zdCBhID0gc1tcInJldXNhYmxlXCJdO1xuICAgICAgICAgICAgY29uc3QgbCA9IHNbXCJwZXJzaXN0ZW50XCJdO1xuICAgICAgICAgICAgY29uc3QgYyA9IHNbXCJzdXNwZW5kXCJdO1xuICAgICAgICAgICAgY29uc3QgdSA9IHIoc1tcIkNcIl0pO1xuICAgICAgICAgICAgY29uc3QgZiA9IGBpZD0ke2V9IGNyZWF0ZWQ9JHtofSBxdWV1ZT0ke259IHByZWVtcHQ9JHtvfSBwZXJzaXN0ZW50PSR7bH0gcmV1c2FibGU9JHthfSBzdGF0dXM9JHt1fSBzdXNwZW5kPSR7Y31gO1xuICAgICAgICAgICAgdGhpcy5jb25zb2xlLmxvZyhgJHt0fVtULiR7aX1dICR7Zn1gKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxudmFyIG47XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wicmVuZGVyXCJdID0gMF0gPSBcInJlbmRlclwiO1xuICAgIHRbdFtcIm1hY3JvVGFza1wiXSA9IDFdID0gXCJtYWNyb1Rhc2tcIjtcbiAgICB0W3RbXCJwb3N0UmVuZGVyXCJdID0gMl0gPSBcInBvc3RSZW5kZXJcIjtcbn0pKG4gfHwgKG4gPSB7fSkpO1xuXG5jb25zdCBvID0ge1xuICAgIGRlbGF5OiAwLFxuICAgIHByZWVtcHQ6IGZhbHNlLFxuICAgIHBlcnNpc3RlbnQ6IGZhbHNlLFxuICAgIHJldXNhYmxlOiB0cnVlLFxuICAgIHN1c3BlbmQ6IGZhbHNlXG59O1xuXG5sZXQgYTtcblxubGV0IGw7XG5cbmZ1bmN0aW9uIGModCwgcykge1xuICAgIGEgPSB0O1xuICAgIGwgPSBzO1xufVxuXG5mdW5jdGlvbiB1KCkge1xuICAgIGNvbnN0IHQgPSBuZXcgUHJvbWlzZShjKTtcbiAgICB0LnJlc29sdmUgPSBhO1xuICAgIHQucmVqZWN0ID0gbDtcbiAgICByZXR1cm4gdDtcbn1cblxuZXhwb3J0IHsgUGxhdGZvcm0sIFRhc2ssIFRhc2tBYm9ydEVycm9yLCBUYXNrUXVldWUsIG4gYXMgVGFza1F1ZXVlUHJpb3JpdHksIGggYXMgVGFza1N0YXR1cyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iLCJleHBvcnQgeyBQbGF0Zm9ybSwgVGFzaywgVGFza0Fib3J0RXJyb3IsIFRhc2tRdWV1ZSwgVGFza1F1ZXVlUHJpb3JpdHksIFRhc2tTdGF0dXMgfSBmcm9tIFwiQGF1cmVsaWEvcGxhdGZvcm1cIjtcblxuaW1wb3J0IHsgQnJvd3NlclBsYXRmb3JtIGFzIHQgfSBmcm9tIFwiQGF1cmVsaWEvcGxhdGZvcm0tYnJvd3NlclwiO1xuXG5leHBvcnQgeyBCcm93c2VyUGxhdGZvcm0gfSBmcm9tIFwiQGF1cmVsaWEvcGxhdGZvcm0tYnJvd3NlclwiO1xuXG5pbXBvcnQgeyBNZXRhZGF0YSBhcyBlLCBQcm90b2NvbCBhcyBpLCBnZXRQcm90b3R5cGVDaGFpbiBhcyBzLCBmaXJzdERlZmluZWQgYXMgbiwga2ViYWJDYXNlIGFzIHIsIG5vb3AgYXMgbywgREkgYXMgbCwgZW1wdHlBcnJheSBhcyBoLCBhbGwgYXMgYSwgUmVnaXN0cmF0aW9uIGFzIGMsIElQbGF0Zm9ybSBhcyB1LCBtZXJnZUFycmF5cyBhcyBmLCBmcm9tRGVmaW5pdGlvbk9yRGVmYXVsdCBhcyBkLCBwYXNjYWxDYXNlIGFzIG0sIGZyb21Bbm5vdGF0aW9uT3JUeXBlT3JEZWZhdWx0IGFzIHYsIGZyb21Bbm5vdGF0aW9uT3JEZWZpbml0aW9uT3JUeXBlT3JEZWZhdWx0IGFzIHAsIElDb250YWluZXIgYXMgZywgbmV4dElkIGFzIHcsIG9wdGlvbmFsIGFzIGIsIEluc3RhbmNlUHJvdmlkZXIgYXMgeCwgaXNPYmplY3QgYXMgeSwgSUxvZ2dlciBhcyBrLCBvblJlc29sdmUgYXMgQywgcmVzb2x2ZUFsbCBhcyBBLCBjYW1lbENhc2UgYXMgUywgdG9BcnJheSBhcyBSLCBlbXB0eU9iamVjdCBhcyBFLCBJU2VydmljZUxvY2F0b3IgYXMgQiwgY29tcGFyZU51bWJlciBhcyBJLCB0cmFuc2llbnQgYXMgVCB9IGZyb20gXCJAYXVyZWxpYS9rZXJuZWxcIjtcblxuaW1wb3J0IHsgQmluZGluZ01vZGUgYXMgRCwgc3Vic2NyaWJlckNvbGxlY3Rpb24gYXMgUCwgd2l0aEZsdXNoUXVldWUgYXMgTywgY29ubmVjdGFibGUgYXMgJCwgcmVnaXN0ZXJBbGlhc2VzIGFzIEwsIENvbm5lY3RhYmxlU3dpdGNoZXIgYXMgcSwgUHJveHlPYnNlcnZhYmxlIGFzIE0sIFNjb3BlIGFzIFUsIElDb2VyY2lvbkNvbmZpZ3VyYXRpb24gYXMgRiwgSU9ic2VydmVyTG9jYXRvciBhcyBWLCBJRXhwcmVzc2lvblBhcnNlciBhcyBfLCBBY2Nlc3NTY29wZUV4cHJlc3Npb24gYXMgaiwgRGVsZWdhdGlvblN0cmF0ZWd5IGFzIE4sIEJpbmRpbmdCZWhhdmlvckV4cHJlc3Npb24gYXMgVywgQmluZGluZ0JlaGF2aW9yRmFjdG9yeSBhcyBILCBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbiBhcyB6LCBiaW5kaW5nQmVoYXZpb3IgYXMgRywgQmluZGluZ0ludGVyY2VwdG9yIGFzIFgsIElTaWduYWxlciBhcyBLLCBQcm9wZXJ0eUFjY2Vzc29yIGFzIFksIElOb2RlT2JzZXJ2ZXJMb2NhdG9yIGFzIFEsIFNldHRlck9ic2VydmVyIGFzIFosIElEaXJ0eUNoZWNrZXIgYXMgSiwgYWxpYXMgYXMgdHQsIGFwcGx5TXV0YXRpb25zVG9JbmRpY2VzIGFzIGV0LCBnZXRDb2xsZWN0aW9uT2JzZXJ2ZXIgYXMgaXQsIEJpbmRpbmdDb250ZXh0IGFzIHN0LCBzeW5jaHJvbml6ZUluZGljZXMgYXMgbnQsIHZhbHVlQ29udmVydGVyIGFzIHJ0IH0gZnJvbSBcIkBhdXJlbGlhL3J1bnRpbWVcIjtcblxuZXhwb3J0IHsgQWNjZXNzLCBBY2Nlc3NLZXllZEV4cHJlc3Npb24sIEFjY2Vzc01lbWJlckV4cHJlc3Npb24sIEFjY2Vzc1Njb3BlRXhwcmVzc2lvbiwgQWNjZXNzVGhpc0V4cHJlc3Npb24sIEFjY2Vzc29yVHlwZSwgQXJyYXlCaW5kaW5nUGF0dGVybiwgQXJyYXlJbmRleE9ic2VydmVyLCBBcnJheUxpdGVyYWxFeHByZXNzaW9uLCBBcnJheU9ic2VydmVyLCBBc3NpZ25FeHByZXNzaW9uLCBCaW5hcnlFeHByZXNzaW9uLCBCaW5kaW5nQmVoYXZpb3IsIEJpbmRpbmdCZWhhdmlvckRlZmluaXRpb24sIEJpbmRpbmdCZWhhdmlvckV4cHJlc3Npb24sIEJpbmRpbmdCZWhhdmlvckZhY3RvcnksIEJpbmRpbmdCZWhhdmlvclN0cmF0ZWd5LCBCaW5kaW5nQ29udGV4dCwgQmluZGluZ0lkZW50aWZpZXIsIEJpbmRpbmdJbnRlcmNlcHRvciwgQmluZGluZ01lZGlhdG9yLCBCaW5kaW5nTW9kZSwgQ2FsbEZ1bmN0aW9uRXhwcmVzc2lvbiwgQ2FsbE1lbWJlckV4cHJlc3Npb24sIENhbGxTY29wZUV4cHJlc3Npb24sIENoYXIsIENvbGxlY3Rpb25LaW5kLCBDb2xsZWN0aW9uTGVuZ3RoT2JzZXJ2ZXIsIENvbGxlY3Rpb25TaXplT2JzZXJ2ZXIsIENvbXB1dGVkT2JzZXJ2ZXIsIENvbmRpdGlvbmFsRXhwcmVzc2lvbiwgQ3VzdG9tRXhwcmVzc2lvbiwgRGVsZWdhdGlvblN0cmF0ZWd5LCBEaXJ0eUNoZWNrUHJvcGVydHksIERpcnR5Q2hlY2tTZXR0aW5ncywgRXhwcmVzc2lvbktpbmQsIEV4cHJlc3Npb25UeXBlLCBGb3JPZlN0YXRlbWVudCwgSHRtbExpdGVyYWxFeHByZXNzaW9uLCBJRGlydHlDaGVja2VyLCBJRXhwcmVzc2lvblBhcnNlciwgSU5vZGVPYnNlcnZlckxvY2F0b3IsIElPYnNlcnZlckxvY2F0b3IsIElTaWduYWxlciwgSW50ZXJwb2xhdGlvbiwgTGlmZWN5Y2xlRmxhZ3MsIE1hcE9ic2VydmVyLCBPYmplY3RCaW5kaW5nUGF0dGVybiwgT2JqZWN0TGl0ZXJhbEV4cHJlc3Npb24sIE9ic2VydmVyTG9jYXRvciwgT3ZlcnJpZGVDb250ZXh0LCBQcmVjZWRlbmNlLCBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbiwgUHJpbWl0aXZlT2JzZXJ2ZXIsIFByb3BlcnR5QWNjZXNzb3IsIFNjb3BlLCBTZXRPYnNlcnZlciwgU2V0dGVyT2JzZXJ2ZXIsIFRhZ2dlZFRlbXBsYXRlRXhwcmVzc2lvbiwgVGVtcGxhdGVFeHByZXNzaW9uLCBVbmFyeUV4cHJlc3Npb24sIFZhbHVlQ29udmVydGVyLCBWYWx1ZUNvbnZlcnRlckRlZmluaXRpb24sIFZhbHVlQ29udmVydGVyRXhwcmVzc2lvbiwgYWxpYXMsIGFwcGx5TXV0YXRpb25zVG9JbmRpY2VzLCBiaW5kaW5nQmVoYXZpb3IsIGNsb25lSW5kZXhNYXAsIGNvbm5lY3RhYmxlLCBjb3B5SW5kZXhNYXAsIGNyZWF0ZUluZGV4TWFwLCBkaXNhYmxlQXJyYXlPYnNlcnZhdGlvbiwgZGlzYWJsZU1hcE9ic2VydmF0aW9uLCBkaXNhYmxlU2V0T2JzZXJ2YXRpb24sIGVuYWJsZUFycmF5T2JzZXJ2YXRpb24sIGVuYWJsZU1hcE9ic2VydmF0aW9uLCBlbmFibGVTZXRPYnNlcnZhdGlvbiwgZ2V0Q29sbGVjdGlvbk9ic2VydmVyLCBpc0luZGV4TWFwLCBvYnNlcnZhYmxlLCBwYXJzZUV4cHJlc3Npb24sIHJlZ2lzdGVyQWxpYXNlcywgc3Vic2NyaWJlckNvbGxlY3Rpb24sIHN5bmNocm9uaXplSW5kaWNlcywgdmFsdWVDb252ZXJ0ZXIgfSBmcm9tIFwiQGF1cmVsaWEvcnVudGltZVwiO1xuXG4vKiEgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxuXG5QZXJtaXNzaW9uIHRvIHVzZSwgY29weSwgbW9kaWZ5LCBhbmQvb3IgZGlzdHJpYnV0ZSB0aGlzIHNvZnR3YXJlIGZvciBhbnlcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cblxuVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiBBTkQgVEhFIEFVVEhPUiBESVNDTEFJTVMgQUxMIFdBUlJBTlRJRVMgV0lUSFxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXG5JTkRJUkVDVCwgT1IgQ09OU0VRVUVOVElBTCBEQU1BR0VTIE9SIEFOWSBEQU1BR0VTIFdIQVRTT0VWRVIgUkVTVUxUSU5HIEZST01cbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXG5QRVJGT1JNQU5DRSBPRiBUSElTIFNPRlRXQVJFLlxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi8gZnVuY3Rpb24gb3QodCwgZSwgaSwgcykge1xuICAgIHZhciBuID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IG4gPCAzID8gZSA6IG51bGwgPT09IHMgPyBzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCBpKSA6IHMsIG87XG4gICAgaWYgKFwib2JqZWN0XCIgPT09IHR5cGVvZiBSZWZsZWN0ICYmIFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpIHIgPSBSZWZsZWN0LmRlY29yYXRlKHQsIGUsIGksIHMpOyBlbHNlIGZvciAodmFyIGwgPSB0Lmxlbmd0aCAtIDE7IGwgPj0gMDsgbC0tKSBpZiAobyA9IHRbbF0pIHIgPSAobiA8IDMgPyBvKHIpIDogbiA+IDMgPyBvKGUsIGksIHIpIDogbyhlLCBpKSkgfHwgcjtcbiAgICByZXR1cm4gbiA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgaSwgciksIHI7XG59XG5cbmZ1bmN0aW9uIGx0KHQsIGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaSwgcykge1xuICAgICAgICBlKGksIHMsIHQpO1xuICAgIH07XG59XG5cbmNvbnN0IGh0ID0gZS5nZXRPd247XG5cbmNvbnN0IGF0ID0gZS5oYXNPd247XG5cbmNvbnN0IGN0ID0gZS5kZWZpbmU7XG5cbmNvbnN0IHthbm5vdGF0aW9uOiB1dCwgcmVzb3VyY2U6IGZ0fSA9IGk7XG5cbmNvbnN0IGR0ID0gdXQua2V5Rm9yO1xuXG5jb25zdCBtdCA9IGZ0LmtleUZvcjtcblxuY29uc3QgdnQgPSBmdC5hcHBlbmRUbztcblxuY29uc3QgcHQgPSB1dC5hcHBlbmRUbztcblxuY29uc3QgZ3QgPSB1dC5nZXRLZXlzO1xuXG5jb25zdCB3dCA9ICgpID0+IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbmNvbnN0IGJ0ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuY29uc3QgeHQgPSB3dCgpO1xuXG5jb25zdCB5dCA9ICh0LCBlLCBpKSA9PiB7XG4gICAgaWYgKHRydWUgPT09IHh0W2VdKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoIUF0KGUpKSByZXR1cm4gZmFsc2U7XG4gICAgY29uc3QgcyA9IGUuc2xpY2UoMCwgNSk7XG4gICAgcmV0dXJuIHh0W2VdID0gXCJhcmlhLVwiID09PSBzIHx8IFwiZGF0YS1cIiA9PT0gcyB8fCBpLmlzU3RhbmRhcmRTdmdBdHRyaWJ1dGUodCwgZSk7XG59O1xuXG5jb25zdCBrdCA9IHQgPT4gdCBpbnN0YW5jZW9mIFByb21pc2U7XG5cbmNvbnN0IEN0ID0gdCA9PiBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiB0O1xuXG5jb25zdCBBdCA9IHQgPT4gXCJzdHJpbmdcIiA9PT0gdHlwZW9mIHQ7XG5cbmZ1bmN0aW9uIFN0KHQsIGUpIHtcbiAgICBsZXQgaTtcbiAgICBmdW5jdGlvbiBzKHQsIGUpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSBpLnByb3BlcnR5ID0gZTtcbiAgICAgICAgY3QoRXQsIEJpbmRhYmxlRGVmaW5pdGlvbi5jcmVhdGUoZSwgdCwgaSksIHQuY29uc3RydWN0b3IsIGUpO1xuICAgICAgICBwdCh0LmNvbnN0cnVjdG9yLCBCdC5rZXlGcm9tKGUpKTtcbiAgICB9XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGkgPSB7fTtcbiAgICAgICAgcyh0LCBlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAoQXQodCkpIHtcbiAgICAgICAgaSA9IHt9O1xuICAgICAgICByZXR1cm4gcztcbiAgICB9XG4gICAgaSA9IHZvaWQgMCA9PT0gdCA/IHt9IDogdDtcbiAgICByZXR1cm4gcztcbn1cblxuZnVuY3Rpb24gUnQodCkge1xuICAgIHJldHVybiB0LnN0YXJ0c1dpdGgoRXQpO1xufVxuXG5jb25zdCBFdCA9IGR0KFwiYmluZGFibGVcIik7XG5cbmNvbnN0IEJ0ID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgbmFtZTogRXQsXG4gICAga2V5RnJvbTogdCA9PiBgJHtFdH06JHt0fWAsXG4gICAgZnJvbSh0LCAuLi5lKSB7XG4gICAgICAgIGNvbnN0IGkgPSB7fTtcbiAgICAgICAgY29uc3QgcyA9IEFycmF5LmlzQXJyYXk7XG4gICAgICAgIGZ1bmN0aW9uIG4oZSkge1xuICAgICAgICAgICAgaVtlXSA9IEJpbmRhYmxlRGVmaW5pdGlvbi5jcmVhdGUoZSwgdCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gcihlLCBzKSB7XG4gICAgICAgICAgICBpW2VdID0gcyBpbnN0YW5jZW9mIEJpbmRhYmxlRGVmaW5pdGlvbiA/IHMgOiBCaW5kYWJsZURlZmluaXRpb24uY3JlYXRlKGUsIHQsIHMpO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIG8odCkge1xuICAgICAgICAgICAgaWYgKHModCkpIHQuZm9yRWFjaChuKTsgZWxzZSBpZiAodCBpbnN0YW5jZW9mIEJpbmRhYmxlRGVmaW5pdGlvbikgaVt0LnByb3BlcnR5XSA9IHQ7IGVsc2UgaWYgKHZvaWQgMCAhPT0gdCkgT2JqZWN0LmtleXModCkuZm9yRWFjaCgoZSA9PiByKGUsIHRbZV0pKSk7XG4gICAgICAgIH1cbiAgICAgICAgZS5mb3JFYWNoKG8pO1xuICAgICAgICByZXR1cm4gaTtcbiAgICB9LFxuICAgIGZvcih0KSB7XG4gICAgICAgIGxldCBlO1xuICAgICAgICBjb25zdCBpID0ge1xuICAgICAgICAgICAgYWRkKHMpIHtcbiAgICAgICAgICAgICAgICBsZXQgbjtcbiAgICAgICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgICAgICAgICBpZiAoQXQocykpIHtcbiAgICAgICAgICAgICAgICAgICAgbiA9IHM7XG4gICAgICAgICAgICAgICAgICAgIHIgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0eTogblxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG4gPSBzLnByb3BlcnR5O1xuICAgICAgICAgICAgICAgICAgICByID0gcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZSA9IEJpbmRhYmxlRGVmaW5pdGlvbi5jcmVhdGUobiwgdCwgcik7XG4gICAgICAgICAgICAgICAgaWYgKCFhdChFdCwgdCwgbikpIHB0KHQsIEJ0LmtleUZyb20obikpO1xuICAgICAgICAgICAgICAgIGN0KEV0LCBlLCB0LCBuKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBtb2RlKHQpIHtcbiAgICAgICAgICAgICAgICBlLm1vZGUgPSB0O1xuICAgICAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGNhbGxiYWNrKHQpIHtcbiAgICAgICAgICAgICAgICBlLmNhbGxiYWNrID0gdDtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhdHRyaWJ1dGUodCkge1xuICAgICAgICAgICAgICAgIGUuYXR0cmlidXRlID0gdDtcbiAgICAgICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBwcmltYXJ5KCkge1xuICAgICAgICAgICAgICAgIGUucHJpbWFyeSA9IHRydWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0KHQpIHtcbiAgICAgICAgICAgICAgICBlLnNldCA9IHQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBpO1xuICAgIH0sXG4gICAgZ2V0QWxsKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEV0Lmxlbmd0aCArIDE7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgY29uc3QgbiA9IHModCk7XG4gICAgICAgIGxldCByID0gbi5sZW5ndGg7XG4gICAgICAgIGxldCBvID0gMDtcbiAgICAgICAgbGV0IGw7XG4gICAgICAgIGxldCBoO1xuICAgICAgICBsZXQgYTtcbiAgICAgICAgbGV0IGM7XG4gICAgICAgIHdoaWxlICgtLXIgPj0gMCkge1xuICAgICAgICAgICAgYSA9IG5bcl07XG4gICAgICAgICAgICBsID0gZ3QoYSkuZmlsdGVyKFJ0KTtcbiAgICAgICAgICAgIGggPSBsLmxlbmd0aDtcbiAgICAgICAgICAgIGZvciAoYyA9IDA7IGMgPCBoOyArK2MpIGlbbysrXSA9IGh0KEV0LCBhLCBsW2NdLnNsaWNlKGUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG59KTtcblxuY2xhc3MgQmluZGFibGVEZWZpbml0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCByKSB7XG4gICAgICAgIHRoaXMuYXR0cmlidXRlID0gdDtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGU7XG4gICAgICAgIHRoaXMubW9kZSA9IGk7XG4gICAgICAgIHRoaXMucHJpbWFyeSA9IHM7XG4gICAgICAgIHRoaXMucHJvcGVydHkgPSBuO1xuICAgICAgICB0aGlzLnNldCA9IHI7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUodCwgZSwgaSA9IHt9KSB7XG4gICAgICAgIHJldHVybiBuZXcgQmluZGFibGVEZWZpbml0aW9uKG4oaS5hdHRyaWJ1dGUsIHIodCkpLCBuKGkuY2FsbGJhY2ssIGAke3R9Q2hhbmdlZGApLCBuKGkubW9kZSwgRC50b1ZpZXcpLCBuKGkucHJpbWFyeSwgZmFsc2UpLCBuKGkucHJvcGVydHksIHQpLCBuKGkuc2V0LCBEdCh0LCBlLCBpKSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gSXQodCwgZSwgaSkge1xuICAgIFR0LmRlZmluZSh0LCBlKTtcbn1cblxuY29uc3QgVHQgPSB7XG4gICAga2V5OiBkdChcImNvZXJjZXJcIiksXG4gICAgZGVmaW5lKHQsIGUpIHtcbiAgICAgICAgY3QoVHQua2V5LCB0W2VdLmJpbmQodCksIHQpO1xuICAgIH0sXG4gICAgZm9yKHQpIHtcbiAgICAgICAgcmV0dXJuIGh0KFR0LmtleSwgdCk7XG4gICAgfVxufTtcblxuZnVuY3Rpb24gRHQodCwgZSwgaSA9IHt9KSB7XG4gICAgdmFyIHMsIG4sIHI7XG4gICAgY29uc3QgbCA9IG51bGwgIT09IChuID0gbnVsbCAhPT0gKHMgPSBpLnR5cGUpICYmIHZvaWQgMCAhPT0gcyA/IHMgOiBSZWZsZWN0LmdldE1ldGFkYXRhKFwiZGVzaWduOnR5cGVcIiwgZSwgdCkpICYmIHZvaWQgMCAhPT0gbiA/IG4gOiBudWxsO1xuICAgIGlmIChudWxsID09IGwpIHJldHVybiBvO1xuICAgIGxldCBoO1xuICAgIHN3aXRjaCAobCkge1xuICAgICAgY2FzZSBOdW1iZXI6XG4gICAgICBjYXNlIEJvb2xlYW46XG4gICAgICBjYXNlIFN0cmluZzpcbiAgICAgIGNhc2UgQmlnSW50OlxuICAgICAgICBoID0gbDtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBsLmNvZXJjZTtcbiAgICAgICAgICAgIGggPSBcImZ1bmN0aW9uXCIgPT09IHR5cGVvZiB0ID8gdC5iaW5kKGwpIDogbnVsbCAhPT0gKHIgPSBUdC5mb3IobCkpICYmIHZvaWQgMCAhPT0gciA/IHIgOiBvO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGggPT09IG8gPyBoIDogUHQoaCwgaS5udWxsYWJsZSk7XG59XG5cbmZ1bmN0aW9uIFB0KHQsIGUpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaSwgcykge1xuICAgICAgICB2YXIgbjtcbiAgICAgICAgaWYgKCEobnVsbCA9PT0gcyB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmVuYWJsZUNvZXJjaW9uKSkgcmV0dXJuIGk7XG4gICAgICAgIHJldHVybiAobnVsbCAhPT0gZSAmJiB2b2lkIDAgIT09IGUgPyBlIDogKG51bGwgIT09IChuID0gbnVsbCA9PT0gcyB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmNvZXJjZU51bGxpc2gpICYmIHZvaWQgMCAhPT0gbiA/IG4gOiBmYWxzZSkgPyBmYWxzZSA6IHRydWUpICYmIG51bGwgPT0gaSA/IGkgOiB0KGksIHMpO1xuICAgIH07XG59XG5cbmNsYXNzIEJpbmRhYmxlT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4sIHIpIHtcbiAgICAgICAgdGhpcy5zZXQgPSBzO1xuICAgICAgICB0aGlzLiRjb250cm9sbGVyID0gbjtcbiAgICAgICAgdGhpcy50ID0gcjtcbiAgICAgICAgdGhpcy52ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm92ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmYgPSAwO1xuICAgICAgICBjb25zdCBsID0gdFtpXTtcbiAgICAgICAgY29uc3QgaCA9IHQucHJvcGVydHlDaGFuZ2VkO1xuICAgICAgICBjb25zdCBhID0gdGhpcy5pID0gQ3QobCk7XG4gICAgICAgIGNvbnN0IGMgPSB0aGlzLnUgPSBDdChoKTtcbiAgICAgICAgY29uc3QgdSA9IHRoaXMuaHMgPSBzICE9PSBvO1xuICAgICAgICBsZXQgZjtcbiAgICAgICAgdGhpcy5vID0gdDtcbiAgICAgICAgdGhpcy5rID0gZTtcbiAgICAgICAgdGhpcy5jYiA9IGEgPyBsIDogbztcbiAgICAgICAgdGhpcy5DID0gYyA/IGggOiBvO1xuICAgICAgICBpZiAodm9pZCAwID09PSB0aGlzLmNiICYmICFjICYmICF1KSB0aGlzLmlPID0gZmFsc2U7IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pTyA9IHRydWU7XG4gICAgICAgICAgICBmID0gdFtlXTtcbiAgICAgICAgICAgIHRoaXMudiA9IHUgJiYgdm9pZCAwICE9PSBmID8gcyhmLCB0aGlzLnQpIDogZjtcbiAgICAgICAgICAgIHRoaXMuQSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnY7XG4gICAgfVxuICAgIHNldFZhbHVlKHQsIGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaHMpIHQgPSB0aGlzLnNldCh0LCB0aGlzLnQpO1xuICAgICAgICBjb25zdCBpID0gdGhpcy52O1xuICAgICAgICBpZiAodGhpcy5pTykge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5pcyh0LCBpKSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy52ID0gdDtcbiAgICAgICAgICAgIHRoaXMub3YgPSBpO1xuICAgICAgICAgICAgdGhpcy5mID0gZTtcbiAgICAgICAgICAgIGlmIChudWxsID09IHRoaXMuJGNvbnRyb2xsZXIgfHwgdGhpcy4kY29udHJvbGxlci5pc0JvdW5kKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaSkgdGhpcy5jYi5jYWxsKHRoaXMubywgdCwgaSwgZSk7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudSkgdGhpcy5DLmNhbGwodGhpcy5vLCB0aGlzLmssIHQsIGksIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5xdWV1ZS5hZGQodGhpcyk7XG4gICAgICAgIH0gZWxzZSB0aGlzLm9bdGhpcy5rXSA9IHQ7XG4gICAgfVxuICAgIHN1YnNjcmliZSh0KSB7XG4gICAgICAgIGlmIChmYWxzZSA9PT0gIXRoaXMuaU8pIHtcbiAgICAgICAgICAgIHRoaXMuaU8gPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy52ID0gdGhpcy5ocyA/IHRoaXMuc2V0KHRoaXMub1t0aGlzLmtdLCB0aGlzLnQpIDogdGhpcy5vW3RoaXMua107XG4gICAgICAgICAgICB0aGlzLkEoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnN1YnMuYWRkKHQpO1xuICAgIH1cbiAgICBmbHVzaCgpIHtcbiAgICAgICAgT3QgPSB0aGlzLm92O1xuICAgICAgICB0aGlzLm92ID0gdGhpcy52O1xuICAgICAgICB0aGlzLnN1YnMubm90aWZ5KHRoaXMudiwgT3QsIHRoaXMuZik7XG4gICAgfVxuICAgIEEoKSB7XG4gICAgICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGhpcy5vLCB0aGlzLmssIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6ICgpID0+IHRoaXMudixcbiAgICAgICAgICAgIHNldDogdCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRWYWx1ZSh0LCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5QKEJpbmRhYmxlT2JzZXJ2ZXIpO1xuXG5PKEJpbmRhYmxlT2JzZXJ2ZXIpO1xuXG5sZXQgT3Q7XG5cbmNsYXNzIENoYXJTcGVjIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzKSB7XG4gICAgICAgIHRoaXMuY2hhcnMgPSB0O1xuICAgICAgICB0aGlzLnJlcGVhdCA9IGU7XG4gICAgICAgIHRoaXMuaXNTeW1ib2wgPSBpO1xuICAgICAgICB0aGlzLmlzSW52ZXJ0ZWQgPSBzO1xuICAgICAgICBpZiAocykgc3dpdGNoICh0Lmxlbmd0aCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHRoaXMuaGFzID0gdGhpcy5SO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICB0aGlzLmhhcyA9IHRoaXMuQjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRoaXMuaGFzID0gdGhpcy5JO1xuICAgICAgICB9IGVsc2Ugc3dpdGNoICh0Lmxlbmd0aCkge1xuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHRoaXMuaGFzID0gdGhpcy5UO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICB0aGlzLmhhcyA9IHRoaXMuUDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRoaXMuaGFzID0gdGhpcy5PO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVxdWFscyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYXJzID09PSB0LmNoYXJzICYmIHRoaXMucmVwZWF0ID09PSB0LnJlcGVhdCAmJiB0aGlzLmlzU3ltYm9sID09PSB0LmlzU3ltYm9sICYmIHRoaXMuaXNJbnZlcnRlZCA9PT0gdC5pc0ludmVydGVkO1xuICAgIH1cbiAgICBPKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhcnMuaW5jbHVkZXModCk7XG4gICAgfVxuICAgIFAodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFycyA9PT0gdDtcbiAgICB9XG4gICAgVCh0KSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgSSh0KSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5jaGFycy5pbmNsdWRlcyh0KTtcbiAgICB9XG4gICAgQih0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNoYXJzICE9PSB0O1xuICAgIH1cbiAgICBSKHQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuXG5jbGFzcyBJbnRlcnByZXRhdGlvbiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucGFydHMgPSBoO1xuICAgICAgICB0aGlzLiQgPSBcIlwiO1xuICAgICAgICB0aGlzLkwgPSB7fTtcbiAgICAgICAgdGhpcy5xID0ge307XG4gICAgfVxuICAgIGdldCBwYXR0ZXJuKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy4kO1xuICAgICAgICBpZiAoXCJcIiA9PT0gdCkgcmV0dXJuIG51bGw7IGVsc2UgcmV0dXJuIHQ7XG4gICAgfVxuICAgIHNldCBwYXR0ZXJuKHQpIHtcbiAgICAgICAgaWYgKG51bGwgPT0gdCkge1xuICAgICAgICAgICAgdGhpcy4kID0gXCJcIjtcbiAgICAgICAgICAgIHRoaXMucGFydHMgPSBoO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy4kID0gdDtcbiAgICAgICAgICAgIHRoaXMucGFydHMgPSB0aGlzLnFbdF07XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXBwZW5kKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuTDtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gaVt0XSkgaVt0XSA9IGU7IGVsc2UgaVt0XSArPSBlO1xuICAgIH1cbiAgICBuZXh0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuTDtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IGVbdF0pIHtcbiAgICAgICAgICAgIGkgPSB0aGlzLnE7XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSBpW3RdKSBpW3RdID0gWyBlW3RdIF07IGVsc2UgaVt0XS5wdXNoKGVbdF0pO1xuICAgICAgICAgICAgZVt0XSA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY2xhc3MgU3RhdGUkMSB7XG4gICAgY29uc3RydWN0b3IodCwgLi4uZSkge1xuICAgICAgICB0aGlzLmNoYXJTcGVjID0gdDtcbiAgICAgICAgdGhpcy5uZXh0U3RhdGVzID0gW107XG4gICAgICAgIHRoaXMudHlwZXMgPSBudWxsO1xuICAgICAgICB0aGlzLmlzRW5kcG9pbnQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wYXR0ZXJucyA9IGU7XG4gICAgfVxuICAgIGdldCBwYXR0ZXJuKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0VuZHBvaW50ID8gdGhpcy5wYXR0ZXJuc1swXSA6IG51bGw7XG4gICAgfVxuICAgIGZpbmRDaGlsZCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLm5leHRTdGF0ZXM7XG4gICAgICAgIGNvbnN0IGkgPSBlLmxlbmd0aDtcbiAgICAgICAgbGV0IHMgPSBudWxsO1xuICAgICAgICBsZXQgbiA9IDA7XG4gICAgICAgIGZvciAoO24gPCBpOyArK24pIHtcbiAgICAgICAgICAgIHMgPSBlW25dO1xuICAgICAgICAgICAgaWYgKHQuZXF1YWxzKHMuY2hhclNwZWMpKSByZXR1cm4gcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgYXBwZW5kKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMucGF0dGVybnM7XG4gICAgICAgIGlmICghaS5pbmNsdWRlcyhlKSkgaS5wdXNoKGUpO1xuICAgICAgICBsZXQgcyA9IHRoaXMuZmluZENoaWxkKHQpO1xuICAgICAgICBpZiAobnVsbCA9PSBzKSB7XG4gICAgICAgICAgICBzID0gbmV3IFN0YXRlJDEodCwgZSk7XG4gICAgICAgICAgICB0aGlzLm5leHRTdGF0ZXMucHVzaChzKTtcbiAgICAgICAgICAgIGlmICh0LnJlcGVhdCkgcy5uZXh0U3RhdGVzLnB1c2gocyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfVxuICAgIGZpbmRNYXRjaGVzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5uZXh0U3RhdGVzO1xuICAgICAgICBjb25zdCBuID0gcy5sZW5ndGg7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgbGV0IG8gPSBudWxsO1xuICAgICAgICBsZXQgbCA9IDA7XG4gICAgICAgIGxldCBoID0gMDtcbiAgICAgICAgZm9yICg7bCA8IG47ICsrbCkge1xuICAgICAgICAgICAgbyA9IHNbbF07XG4gICAgICAgICAgICBpZiAoby5jaGFyU3BlYy5oYXModCkpIHtcbiAgICAgICAgICAgICAgICBpLnB1c2gobyk7XG4gICAgICAgICAgICAgICAgciA9IG8ucGF0dGVybnMubGVuZ3RoO1xuICAgICAgICAgICAgICAgIGggPSAwO1xuICAgICAgICAgICAgICAgIGlmIChvLmNoYXJTcGVjLmlzU3ltYm9sKSBmb3IgKDtoIDwgcjsgKytoKSBlLm5leHQoby5wYXR0ZXJuc1toXSk7IGVsc2UgZm9yICg7aCA8IHI7ICsraCkgZS5hcHBlbmQoby5wYXR0ZXJuc1toXSwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxufVxuXG5jbGFzcyBTdGF0aWNTZWdtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudGV4dCA9IHQ7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmxlbiA9IHQubGVuZ3RoO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5zcGVjcyA9IFtdO1xuICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgIGZvciAoO2UgPiBzOyArK3MpIGkucHVzaChuZXcgQ2hhclNwZWModFtzXSwgZmFsc2UsIGZhbHNlLCBmYWxzZSkpO1xuICAgIH1cbiAgICBlYWNoQ2hhcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmxlbjtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuc3BlY3M7XG4gICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgZm9yICg7ZSA+IHM7ICsrcykgdChpW3NdKTtcbiAgICB9XG59XG5cbmNsYXNzIER5bmFtaWNTZWdtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudGV4dCA9IFwiUEFSVFwiO1xuICAgICAgICB0aGlzLnNwZWMgPSBuZXcgQ2hhclNwZWModCwgdHJ1ZSwgZmFsc2UsIHRydWUpO1xuICAgIH1cbiAgICBlYWNoQ2hhcih0KSB7XG4gICAgICAgIHQodGhpcy5zcGVjKTtcbiAgICB9XG59XG5cbmNsYXNzIFN5bWJvbFNlZ21lbnQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50ZXh0ID0gdDtcbiAgICAgICAgdGhpcy5zcGVjID0gbmV3IENoYXJTcGVjKHQsIGZhbHNlLCB0cnVlLCBmYWxzZSk7XG4gICAgfVxuICAgIGVhY2hDaGFyKHQpIHtcbiAgICAgICAgdCh0aGlzLnNwZWMpO1xuICAgIH1cbn1cblxuY2xhc3MgU2VnbWVudFR5cGVzIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zdGF0aWNzID0gMDtcbiAgICAgICAgdGhpcy5keW5hbWljcyA9IDA7XG4gICAgICAgIHRoaXMuc3ltYm9scyA9IDA7XG4gICAgfVxufVxuXG5jb25zdCAkdCA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSVN5bnRheEludGVycHJldGVyXCIsICh0ID0+IHQuc2luZ2xldG9uKFN5bnRheEludGVycHJldGVyKSkpO1xuXG5jbGFzcyBTeW50YXhJbnRlcnByZXRlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucm9vdFN0YXRlID0gbmV3IFN0YXRlJDEobnVsbCk7XG4gICAgICAgIHRoaXMuaW5pdGlhbFN0YXRlcyA9IFsgdGhpcy5yb290U3RhdGUgXTtcbiAgICB9XG4gICAgYWRkKHQpIHtcbiAgICAgICAgdCA9IHQuc2xpY2UoMCkuc29ydCgoKHQsIGUpID0+IHQucGF0dGVybiA+IGUucGF0dGVybiA/IDEgOiAtMSkpO1xuICAgICAgICBjb25zdCBlID0gdC5sZW5ndGg7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBsZXQgcztcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGxldCByO1xuICAgICAgICBsZXQgbztcbiAgICAgICAgbGV0IGw7XG4gICAgICAgIGxldCBoO1xuICAgICAgICBsZXQgYSA9IDA7XG4gICAgICAgIGxldCBjO1xuICAgICAgICB3aGlsZSAoZSA+IGEpIHtcbiAgICAgICAgICAgIGkgPSB0aGlzLnJvb3RTdGF0ZTtcbiAgICAgICAgICAgIHMgPSB0W2FdO1xuICAgICAgICAgICAgbiA9IHMucGF0dGVybjtcbiAgICAgICAgICAgIHIgPSBuZXcgU2VnbWVudFR5cGVzO1xuICAgICAgICAgICAgbyA9IHRoaXMucGFyc2Uocywgcik7XG4gICAgICAgICAgICBsID0gby5sZW5ndGg7XG4gICAgICAgICAgICBoID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgaSA9IGkuYXBwZW5kKHQsIG4pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGZvciAoYyA9IDA7IGwgPiBjOyArK2MpIG9bY10uZWFjaENoYXIoaCk7XG4gICAgICAgICAgICBpLnR5cGVzID0gcjtcbiAgICAgICAgICAgIGkuaXNFbmRwb2ludCA9IHRydWU7XG4gICAgICAgICAgICArK2E7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaW50ZXJwcmV0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBJbnRlcnByZXRhdGlvbjtcbiAgICAgICAgY29uc3QgaSA9IHQubGVuZ3RoO1xuICAgICAgICBsZXQgcyA9IHRoaXMuaW5pdGlhbFN0YXRlcztcbiAgICAgICAgbGV0IG4gPSAwO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgZm9yICg7biA8IGk7ICsrbikge1xuICAgICAgICAgICAgcyA9IHRoaXMuZ2V0TmV4dFN0YXRlcyhzLCB0LmNoYXJBdChuKSwgZSk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gcy5sZW5ndGgpIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHMgPSBzLmZpbHRlcihMdCk7XG4gICAgICAgIGlmIChzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHMuc29ydChxdCk7XG4gICAgICAgICAgICByID0gc1swXTtcbiAgICAgICAgICAgIGlmICghci5jaGFyU3BlYy5pc1N5bWJvbCkgZS5uZXh0KHIucGF0dGVybik7XG4gICAgICAgICAgICBlLnBhdHRlcm4gPSByLnBhdHRlcm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIGdldE5leHRTdGF0ZXModCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIGxldCBuID0gbnVsbDtcbiAgICAgICAgY29uc3QgciA9IHQubGVuZ3RoO1xuICAgICAgICBsZXQgbyA9IDA7XG4gICAgICAgIGZvciAoO28gPCByOyArK28pIHtcbiAgICAgICAgICAgIG4gPSB0W29dO1xuICAgICAgICAgICAgcy5wdXNoKC4uLm4uZmluZE1hdGNoZXMoZSwgaSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzO1xuICAgIH1cbiAgICBwYXJzZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgY29uc3QgcyA9IHQucGF0dGVybjtcbiAgICAgICAgY29uc3QgbiA9IHMubGVuZ3RoO1xuICAgICAgICBjb25zdCByID0gdC5zeW1ib2xzO1xuICAgICAgICBsZXQgbyA9IDA7XG4gICAgICAgIGxldCBsID0gMDtcbiAgICAgICAgbGV0IGggPSBcIlwiO1xuICAgICAgICB3aGlsZSAobyA8IG4pIHtcbiAgICAgICAgICAgIGggPSBzLmNoYXJBdChvKTtcbiAgICAgICAgICAgIGlmICgwID09PSByLmxlbmd0aCB8fCAhci5pbmNsdWRlcyhoKSkgaWYgKG8gPT09IGwpIGlmIChcIlBcIiA9PT0gaCAmJiBcIlBBUlRcIiA9PT0gcy5zbGljZShvLCBvICsgNCkpIHtcbiAgICAgICAgICAgICAgICBsID0gbyArPSA0O1xuICAgICAgICAgICAgICAgIGkucHVzaChuZXcgRHluYW1pY1NlZ21lbnQocikpO1xuICAgICAgICAgICAgICAgICsrZS5keW5hbWljcztcbiAgICAgICAgICAgIH0gZWxzZSArK287IGVsc2UgKytvOyBlbHNlIGlmIChvICE9PSBsKSB7XG4gICAgICAgICAgICAgICAgaS5wdXNoKG5ldyBTdGF0aWNTZWdtZW50KHMuc2xpY2UobCwgbykpKTtcbiAgICAgICAgICAgICAgICArK2Uuc3RhdGljcztcbiAgICAgICAgICAgICAgICBsID0gbztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaS5wdXNoKG5ldyBTeW1ib2xTZWdtZW50KHMuc2xpY2UobCwgbyArIDEpKSk7XG4gICAgICAgICAgICAgICAgKytlLnN5bWJvbHM7XG4gICAgICAgICAgICAgICAgbCA9ICsrbztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobCAhPT0gbykge1xuICAgICAgICAgICAgaS5wdXNoKG5ldyBTdGF0aWNTZWdtZW50KHMuc2xpY2UobCwgbykpKTtcbiAgICAgICAgICAgICsrZS5zdGF0aWNzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gTHQodCkge1xuICAgIHJldHVybiB0LmlzRW5kcG9pbnQ7XG59XG5cbmZ1bmN0aW9uIHF0KHQsIGUpIHtcbiAgICBjb25zdCBpID0gdC50eXBlcztcbiAgICBjb25zdCBzID0gZS50eXBlcztcbiAgICBpZiAoaS5zdGF0aWNzICE9PSBzLnN0YXRpY3MpIHJldHVybiBzLnN0YXRpY3MgLSBpLnN0YXRpY3M7XG4gICAgaWYgKGkuZHluYW1pY3MgIT09IHMuZHluYW1pY3MpIHJldHVybiBzLmR5bmFtaWNzIC0gaS5keW5hbWljcztcbiAgICBpZiAoaS5zeW1ib2xzICE9PSBzLnN5bWJvbHMpIHJldHVybiBzLnN5bWJvbHMgLSBpLnN5bWJvbHM7XG4gICAgcmV0dXJuIDA7XG59XG5cbmNsYXNzIEF0dHJTeW50YXgge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdGhpcy5yYXdOYW1lID0gdDtcbiAgICAgICAgdGhpcy5yYXdWYWx1ZSA9IGU7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gaTtcbiAgICAgICAgdGhpcy5jb21tYW5kID0gcztcbiAgICB9XG59XG5cbmNvbnN0IE10ID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJQXR0cmlidXRlUGF0dGVyblwiKTtcblxuY29uc3QgVXQgPSBsLmNyZWF0ZUludGVyZmFjZShcIklBdHRyaWJ1dGVQYXJzZXJcIiwgKHQgPT4gdC5zaW5nbGV0b24oQXR0cmlidXRlUGFyc2VyKSkpO1xuXG5jbGFzcyBBdHRyaWJ1dGVQYXJzZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5NID0ge307XG4gICAgICAgIHRoaXMuVSA9IHQ7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLkYgPSB7fTtcbiAgICAgICAgY29uc3QgcyA9IGUucmVkdWNlKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IGp0KGUuY29uc3RydWN0b3IpO1xuICAgICAgICAgICAgcy5mb3JFYWNoKCh0ID0+IGlbdC5wYXR0ZXJuXSA9IGUpKTtcbiAgICAgICAgICAgIHJldHVybiB0LmNvbmNhdChzKTtcbiAgICAgICAgfSksIGgpO1xuICAgICAgICB0LmFkZChzKTtcbiAgICB9XG4gICAgcGFyc2UodCwgZSkge1xuICAgICAgICBsZXQgaSA9IHRoaXMuTVt0XTtcbiAgICAgICAgaWYgKG51bGwgPT0gaSkgaSA9IHRoaXMuTVt0XSA9IHRoaXMuVS5pbnRlcnByZXQodCk7XG4gICAgICAgIGNvbnN0IHMgPSBpLnBhdHRlcm47XG4gICAgICAgIGlmIChudWxsID09IHMpIHJldHVybiBuZXcgQXR0clN5bnRheCh0LCBlLCB0LCBudWxsKTsgZWxzZSByZXR1cm4gdGhpcy5GW3NdW3NdKHQsIGUsIGkucGFydHMpO1xuICAgIH1cbn1cblxuQXR0cmlidXRlUGFyc2VyLmluamVjdCA9IFsgJHQsIGEoTXQpIF07XG5cbmZ1bmN0aW9uIEZ0KC4uLnQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gZShpKSB7XG4gICAgICAgIHJldHVybiBOdC5kZWZpbmUodCwgaSk7XG4gICAgfTtcbn1cblxuY2xhc3MgQXR0cmlidXRlUGF0dGVyblJlc291cmNlRGVmaW5pdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLlR5cGUgPSB0O1xuICAgICAgICB0aGlzLm5hbWUgPSB2b2lkIDA7XG4gICAgfVxuICAgIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgYy5zaW5nbGV0b24oTXQsIHRoaXMuVHlwZSkucmVnaXN0ZXIodCk7XG4gICAgfVxufVxuXG5jb25zdCBWdCA9IG10KFwiYXR0cmlidXRlLXBhdHRlcm5cIik7XG5cbmNvbnN0IF90ID0gXCJhdHRyaWJ1dGUtcGF0dGVybi1kZWZpbml0aW9uc1wiO1xuXG5jb25zdCBqdCA9IHQgPT4gaS5hbm5vdGF0aW9uLmdldCh0LCBfdCk7XG5cbmNvbnN0IE50ID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgbmFtZTogVnQsXG4gICAgZGVmaW5pdGlvbkFubm90YXRpb25LZXk6IF90LFxuICAgIGRlZmluZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgQXR0cmlidXRlUGF0dGVyblJlc291cmNlRGVmaW5pdGlvbihlKTtcbiAgICAgICAgY3QoVnQsIHMsIGUpO1xuICAgICAgICB2dChlLCBWdCk7XG4gICAgICAgIGkuYW5ub3RhdGlvbi5zZXQoZSwgX3QsIHQpO1xuICAgICAgICBwdChlLCBfdCk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH0sXG4gICAgZ2V0UGF0dGVybkRlZmluaXRpb25zOiBqdFxufSk7XG5cbmxldCBXdCA9IGNsYXNzIERvdFNlcGFyYXRlZEF0dHJpYnV0ZVBhdHRlcm4ge1xuICAgIFwiUEFSVC5QQVJUXCIodCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gbmV3IEF0dHJTeW50YXgodCwgZSwgaVswXSwgaVsxXSk7XG4gICAgfVxuICAgIFwiUEFSVC5QQVJULlBBUlRcIih0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0clN5bnRheCh0LCBlLCBpWzBdLCBpWzJdKTtcbiAgICB9XG59O1xuXG5XdCA9IG90KFsgRnQoe1xuICAgIHBhdHRlcm46IFwiUEFSVC5QQVJUXCIsXG4gICAgc3ltYm9sczogXCIuXCJcbn0sIHtcbiAgICBwYXR0ZXJuOiBcIlBBUlQuUEFSVC5QQVJUXCIsXG4gICAgc3ltYm9sczogXCIuXCJcbn0pIF0sIFd0KTtcblxubGV0IEh0ID0gY2xhc3MgUmVmQXR0cmlidXRlUGF0dGVybiB7XG4gICAgcmVmKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyU3ludGF4KHQsIGUsIFwiZWxlbWVudFwiLCBcInJlZlwiKTtcbiAgICB9XG4gICAgXCJQQVJULnJlZlwiKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyU3ludGF4KHQsIGUsIGlbMF0sIFwicmVmXCIpO1xuICAgIH1cbn07XG5cbkh0ID0gb3QoWyBGdCh7XG4gICAgcGF0dGVybjogXCJyZWZcIixcbiAgICBzeW1ib2xzOiBcIlwiXG59LCB7XG4gICAgcGF0dGVybjogXCJQQVJULnJlZlwiLFxuICAgIHN5bWJvbHM6IFwiLlwiXG59KSBdLCBIdCk7XG5cbmxldCB6dCA9IGNsYXNzIENvbG9uUHJlZml4ZWRCaW5kQXR0cmlidXRlUGF0dGVybiB7XG4gICAgXCI6UEFSVFwiKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyU3ludGF4KHQsIGUsIGlbMF0sIFwiYmluZFwiKTtcbiAgICB9XG59O1xuXG56dCA9IG90KFsgRnQoe1xuICAgIHBhdHRlcm46IFwiOlBBUlRcIixcbiAgICBzeW1ib2xzOiBcIjpcIlxufSkgXSwgenQpO1xuXG5sZXQgR3QgPSBjbGFzcyBBdFByZWZpeGVkVHJpZ2dlckF0dHJpYnV0ZVBhdHRlcm4ge1xuICAgIFwiQFBBUlRcIih0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0clN5bnRheCh0LCBlLCBpWzBdLCBcInRyaWdnZXJcIik7XG4gICAgfVxufTtcblxuR3QgPSBvdChbIEZ0KHtcbiAgICBwYXR0ZXJuOiBcIkBQQVJUXCIsXG4gICAgc3ltYm9sczogXCJAXCJcbn0pIF0sIEd0KTtcblxubGV0IFh0ID0gY2xhc3MgU3ByZWFkQXR0cmlidXRlUGF0dGVybiB7XG4gICAgXCIuLi4kYXR0cnNcIih0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0clN5bnRheCh0LCBlLCBcIlwiLCBcIi4uLiRhdHRyc1wiKTtcbiAgICB9XG59O1xuXG5YdCA9IG90KFsgRnQoe1xuICAgIHBhdHRlcm46IFwiLi4uJGF0dHJzXCIsXG4gICAgc3ltYm9sczogXCJcIlxufSkgXSwgWHQpO1xuXG5jb25zdCBLdCA9IHU7XG5cbmNvbnN0IFl0ID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJU1ZHQW5hbHl6ZXJcIiwgKHQgPT4gdC5zaW5nbGV0b24oTm9vcFNWR0FuYWx5emVyKSkpO1xuXG5jbGFzcyBOb29wU1ZHQW5hbHl6ZXIge1xuICAgIGlzU3RhbmRhcmRTdmdBdHRyaWJ1dGUodCwgZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBRdCh0KSB7XG4gICAgY29uc3QgZSA9IHd0KCk7XG4gICAgbGV0IGk7XG4gICAgZm9yIChpIG9mIHQpIGVbaV0gPSB0cnVlO1xuICAgIHJldHVybiBlO1xufVxuXG5jbGFzcyBTVkdBbmFseXplciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLlYgPSBPYmplY3QuYXNzaWduKHd0KCksIHtcbiAgICAgICAgICAgIGE6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRhcmdldFwiLCBcInRyYW5zZm9ybVwiLCBcInhsaW5rOmFjdHVhdGVcIiwgXCJ4bGluazphcmNyb2xlXCIsIFwieGxpbms6aHJlZlwiLCBcInhsaW5rOnJvbGVcIiwgXCJ4bGluazpzaG93XCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgYWx0R2x5cGg6IFF0KFsgXCJjbGFzc1wiLCBcImR4XCIsIFwiZHlcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiZm9ybWF0XCIsIFwiZ2x5cGhSZWZcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwicm90YXRlXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInhcIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBhbHRnbHlwaDogd3QoKSxcbiAgICAgICAgICAgIGFsdEdseXBoRGVmOiBRdChbIFwiaWRcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBhbHRnbHlwaGRlZjogd3QoKSxcbiAgICAgICAgICAgIGFsdEdseXBoSXRlbTogUXQoWyBcImlkXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgYWx0Z2x5cGhpdGVtOiB3dCgpLFxuICAgICAgICAgICAgYW5pbWF0ZTogUXQoWyBcImFjY3VtdWxhdGVcIiwgXCJhZGRpdGl2ZVwiLCBcImF0dHJpYnV0ZU5hbWVcIiwgXCJhdHRyaWJ1dGVUeXBlXCIsIFwiYmVnaW5cIiwgXCJieVwiLCBcImNhbGNNb2RlXCIsIFwiZHVyXCIsIFwiZW5kXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImZpbGxcIiwgXCJmcm9tXCIsIFwiaWRcIiwgXCJrZXlTcGxpbmVzXCIsIFwia2V5VGltZXNcIiwgXCJtYXhcIiwgXCJtaW5cIiwgXCJvbmJlZ2luXCIsIFwib25lbmRcIiwgXCJvbmxvYWRcIiwgXCJvbnJlcGVhdFwiLCBcInJlcGVhdENvdW50XCIsIFwicmVwZWF0RHVyXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInJlc3RhcnRcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRvXCIsIFwidmFsdWVzXCIsIFwieGxpbms6YWN0dWF0ZVwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnNob3dcIiwgXCJ4bGluazp0aXRsZVwiLCBcInhsaW5rOnR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBhbmltYXRlQ29sb3I6IFF0KFsgXCJhY2N1bXVsYXRlXCIsIFwiYWRkaXRpdmVcIiwgXCJhdHRyaWJ1dGVOYW1lXCIsIFwiYXR0cmlidXRlVHlwZVwiLCBcImJlZ2luXCIsIFwiYnlcIiwgXCJjYWxjTW9kZVwiLCBcImR1clwiLCBcImVuZFwiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJmaWxsXCIsIFwiZnJvbVwiLCBcImlkXCIsIFwia2V5U3BsaW5lc1wiLCBcImtleVRpbWVzXCIsIFwibWF4XCIsIFwibWluXCIsIFwib25iZWdpblwiLCBcIm9uZW5kXCIsIFwib25sb2FkXCIsIFwib25yZXBlYXRcIiwgXCJyZXBlYXRDb3VudFwiLCBcInJlcGVhdER1clwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJyZXN0YXJ0XCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0b1wiLCBcInZhbHVlc1wiLCBcInhsaW5rOmFjdHVhdGVcIiwgXCJ4bGluazphcmNyb2xlXCIsIFwieGxpbms6aHJlZlwiLCBcInhsaW5rOnJvbGVcIiwgXCJ4bGluazpzaG93XCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgYW5pbWF0ZU1vdGlvbjogUXQoWyBcImFjY3VtdWxhdGVcIiwgXCJhZGRpdGl2ZVwiLCBcImJlZ2luXCIsIFwiYnlcIiwgXCJjYWxjTW9kZVwiLCBcImR1clwiLCBcImVuZFwiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJmaWxsXCIsIFwiZnJvbVwiLCBcImlkXCIsIFwia2V5UG9pbnRzXCIsIFwia2V5U3BsaW5lc1wiLCBcImtleVRpbWVzXCIsIFwibWF4XCIsIFwibWluXCIsIFwib25iZWdpblwiLCBcIm9uZW5kXCIsIFwib25sb2FkXCIsIFwib25yZXBlYXRcIiwgXCJvcmlnaW5cIiwgXCJwYXRoXCIsIFwicmVwZWF0Q291bnRcIiwgXCJyZXBlYXREdXJcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwicmVzdGFydFwiLCBcInJvdGF0ZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidG9cIiwgXCJ2YWx1ZXNcIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGFuaW1hdGVUcmFuc2Zvcm06IFF0KFsgXCJhY2N1bXVsYXRlXCIsIFwiYWRkaXRpdmVcIiwgXCJhdHRyaWJ1dGVOYW1lXCIsIFwiYXR0cmlidXRlVHlwZVwiLCBcImJlZ2luXCIsIFwiYnlcIiwgXCJjYWxjTW9kZVwiLCBcImR1clwiLCBcImVuZFwiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJmaWxsXCIsIFwiZnJvbVwiLCBcImlkXCIsIFwia2V5U3BsaW5lc1wiLCBcImtleVRpbWVzXCIsIFwibWF4XCIsIFwibWluXCIsIFwib25iZWdpblwiLCBcIm9uZW5kXCIsIFwib25sb2FkXCIsIFwib25yZXBlYXRcIiwgXCJyZXBlYXRDb3VudFwiLCBcInJlcGVhdER1clwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJyZXN0YXJ0XCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0b1wiLCBcInR5cGVcIiwgXCJ2YWx1ZXNcIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGNpcmNsZTogUXQoWyBcImNsYXNzXCIsIFwiY3hcIiwgXCJjeVwiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0cmFuc2Zvcm1cIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBjbGlwUGF0aDogUXQoWyBcImNsYXNzXCIsIFwiY2xpcFBhdGhVbml0c1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJzdHlsZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidHJhbnNmb3JtXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgXCJjb2xvci1wcm9maWxlXCI6IFF0KFsgXCJpZFwiLCBcImxvY2FsXCIsIFwibmFtZVwiLCBcInJlbmRlcmluZy1pbnRlbnRcIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGN1cnNvcjogUXQoWyBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInhcIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBkZWZzOiBRdChbIFwiY2xhc3NcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiaWRcIiwgXCJvbmFjdGl2YXRlXCIsIFwib25jbGlja1wiLCBcIm9uZm9jdXNpblwiLCBcIm9uZm9jdXNvdXRcIiwgXCJvbmxvYWRcIiwgXCJvbm1vdXNlZG93blwiLCBcIm9ubW91c2Vtb3ZlXCIsIFwib25tb3VzZW91dFwiLCBcIm9ubW91c2VvdmVyXCIsIFwib25tb3VzZXVwXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0cmFuc2Zvcm1cIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBkZXNjOiBRdChbIFwiY2xhc3NcIiwgXCJpZFwiLCBcInN0eWxlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgZWxsaXBzZTogUXQoWyBcImNsYXNzXCIsIFwiY3hcIiwgXCJjeVwiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwicnhcIiwgXCJyeVwiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0cmFuc2Zvcm1cIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBmZUJsZW5kOiBRdChbIFwiY2xhc3NcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcImluXCIsIFwiaW4yXCIsIFwibW9kZVwiLCBcInJlc3VsdFwiLCBcInN0eWxlXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGZlQ29sb3JNYXRyaXg6IFF0KFsgXCJjbGFzc1wiLCBcImhlaWdodFwiLCBcImlkXCIsIFwiaW5cIiwgXCJyZXN1bHRcIiwgXCJzdHlsZVwiLCBcInR5cGVcIiwgXCJ2YWx1ZXNcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmVDb21wb25lbnRUcmFuc2ZlcjogUXQoWyBcImNsYXNzXCIsIFwiaGVpZ2h0XCIsIFwiaWRcIiwgXCJpblwiLCBcInJlc3VsdFwiLCBcInN0eWxlXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGZlQ29tcG9zaXRlOiBRdChbIFwiY2xhc3NcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcImluXCIsIFwiaW4yXCIsIFwiazFcIiwgXCJrMlwiLCBcImszXCIsIFwiazRcIiwgXCJvcGVyYXRvclwiLCBcInJlc3VsdFwiLCBcInN0eWxlXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGZlQ29udm9sdmVNYXRyaXg6IFF0KFsgXCJiaWFzXCIsIFwiY2xhc3NcIiwgXCJkaXZpc29yXCIsIFwiZWRnZU1vZGVcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcImluXCIsIFwia2VybmVsTWF0cml4XCIsIFwia2VybmVsVW5pdExlbmd0aFwiLCBcIm9yZGVyXCIsIFwicHJlc2VydmVBbHBoYVwiLCBcInJlc3VsdFwiLCBcInN0eWxlXCIsIFwidGFyZ2V0WFwiLCBcInRhcmdldFlcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmVEaWZmdXNlTGlnaHRpbmc6IFF0KFsgXCJjbGFzc1wiLCBcImRpZmZ1c2VDb25zdGFudFwiLCBcImhlaWdodFwiLCBcImlkXCIsIFwiaW5cIiwgXCJrZXJuZWxVbml0TGVuZ3RoXCIsIFwicmVzdWx0XCIsIFwic3R5bGVcIiwgXCJzdXJmYWNlU2NhbGVcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmVEaXNwbGFjZW1lbnRNYXA6IFF0KFsgXCJjbGFzc1wiLCBcImhlaWdodFwiLCBcImlkXCIsIFwiaW5cIiwgXCJpbjJcIiwgXCJyZXN1bHRcIiwgXCJzY2FsZVwiLCBcInN0eWxlXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieENoYW5uZWxTZWxlY3RvclwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIsIFwieUNoYW5uZWxTZWxlY3RvclwiIF0pLFxuICAgICAgICAgICAgZmVEaXN0YW50TGlnaHQ6IFF0KFsgXCJhemltdXRoXCIsIFwiZWxldmF0aW9uXCIsIFwiaWRcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBmZUZsb29kOiBRdChbIFwiY2xhc3NcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcInJlc3VsdFwiLCBcInN0eWxlXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGZlRnVuY0E6IFF0KFsgXCJhbXBsaXR1ZGVcIiwgXCJleHBvbmVudFwiLCBcImlkXCIsIFwiaW50ZXJjZXB0XCIsIFwib2Zmc2V0XCIsIFwic2xvcGVcIiwgXCJ0YWJsZVZhbHVlc1wiLCBcInR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBmZUZ1bmNCOiBRdChbIFwiYW1wbGl0dWRlXCIsIFwiZXhwb25lbnRcIiwgXCJpZFwiLCBcImludGVyY2VwdFwiLCBcIm9mZnNldFwiLCBcInNsb3BlXCIsIFwidGFibGVWYWx1ZXNcIiwgXCJ0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgZmVGdW5jRzogUXQoWyBcImFtcGxpdHVkZVwiLCBcImV4cG9uZW50XCIsIFwiaWRcIiwgXCJpbnRlcmNlcHRcIiwgXCJvZmZzZXRcIiwgXCJzbG9wZVwiLCBcInRhYmxlVmFsdWVzXCIsIFwidHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGZlRnVuY1I6IFF0KFsgXCJhbXBsaXR1ZGVcIiwgXCJleHBvbmVudFwiLCBcImlkXCIsIFwiaW50ZXJjZXB0XCIsIFwib2Zmc2V0XCIsIFwic2xvcGVcIiwgXCJ0YWJsZVZhbHVlc1wiLCBcInR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBmZUdhdXNzaWFuQmx1cjogUXQoWyBcImNsYXNzXCIsIFwiaGVpZ2h0XCIsIFwiaWRcIiwgXCJpblwiLCBcInJlc3VsdFwiLCBcInN0ZERldmlhdGlvblwiLCBcInN0eWxlXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGZlSW1hZ2U6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcInByZXNlcnZlQXNwZWN0UmF0aW9cIiwgXCJyZXN1bHRcIiwgXCJzdHlsZVwiLCBcIndpZHRoXCIsIFwieFwiLCBcInhsaW5rOmFjdHVhdGVcIiwgXCJ4bGluazphcmNyb2xlXCIsIFwieGxpbms6aHJlZlwiLCBcInhsaW5rOnJvbGVcIiwgXCJ4bGluazpzaG93XCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGZlTWVyZ2U6IFF0KFsgXCJjbGFzc1wiLCBcImhlaWdodFwiLCBcImlkXCIsIFwicmVzdWx0XCIsIFwic3R5bGVcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmVNZXJnZU5vZGU6IFF0KFsgXCJpZFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGZlTW9ycGhvbG9neTogUXQoWyBcImNsYXNzXCIsIFwiaGVpZ2h0XCIsIFwiaWRcIiwgXCJpblwiLCBcIm9wZXJhdG9yXCIsIFwicmFkaXVzXCIsIFwicmVzdWx0XCIsIFwic3R5bGVcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmVPZmZzZXQ6IFF0KFsgXCJjbGFzc1wiLCBcImR4XCIsIFwiZHlcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcImluXCIsIFwicmVzdWx0XCIsIFwic3R5bGVcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmVQb2ludExpZ2h0OiBRdChbIFwiaWRcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiwgXCJ6XCIgXSksXG4gICAgICAgICAgICBmZVNwZWN1bGFyTGlnaHRpbmc6IFF0KFsgXCJjbGFzc1wiLCBcImhlaWdodFwiLCBcImlkXCIsIFwiaW5cIiwgXCJrZXJuZWxVbml0TGVuZ3RoXCIsIFwicmVzdWx0XCIsIFwic3BlY3VsYXJDb25zdGFudFwiLCBcInNwZWN1bGFyRXhwb25lbnRcIiwgXCJzdHlsZVwiLCBcInN1cmZhY2VTY2FsZVwiLCBcIndpZHRoXCIsIFwieFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBmZVNwb3RMaWdodDogUXQoWyBcImlkXCIsIFwibGltaXRpbmdDb25lQW5nbGVcIiwgXCJwb2ludHNBdFhcIiwgXCJwb2ludHNBdFlcIiwgXCJwb2ludHNBdFpcIiwgXCJzcGVjdWxhckV4cG9uZW50XCIsIFwieFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIsIFwielwiIF0pLFxuICAgICAgICAgICAgZmVUaWxlOiBRdChbIFwiY2xhc3NcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcImluXCIsIFwicmVzdWx0XCIsIFwic3R5bGVcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZmVUdXJidWxlbmNlOiBRdChbIFwiYmFzZUZyZXF1ZW5jeVwiLCBcImNsYXNzXCIsIFwiaGVpZ2h0XCIsIFwiaWRcIiwgXCJudW1PY3RhdmVzXCIsIFwicmVzdWx0XCIsIFwic2VlZFwiLCBcInN0aXRjaFRpbGVzXCIsIFwic3R5bGVcIiwgXCJ0eXBlXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGZpbHRlcjogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImZpbHRlclJlc1wiLCBcImZpbHRlclVuaXRzXCIsIFwiaGVpZ2h0XCIsIFwiaWRcIiwgXCJwcmltaXRpdmVVbml0c1wiLCBcInN0eWxlXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieGxpbms6YWN0dWF0ZVwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnNob3dcIiwgXCJ4bGluazp0aXRsZVwiLCBcInhsaW5rOnR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgZm9udDogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImhvcml6LWFkdi14XCIsIFwiaG9yaXotb3JpZ2luLXhcIiwgXCJob3Jpei1vcmlnaW4teVwiLCBcImlkXCIsIFwic3R5bGVcIiwgXCJ2ZXJ0LWFkdi15XCIsIFwidmVydC1vcmlnaW4teFwiLCBcInZlcnQtb3JpZ2luLXlcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBcImZvbnQtZmFjZVwiOiBRdChbIFwiYWNjZW50LWhlaWdodFwiLCBcImFscGhhYmV0aWNcIiwgXCJhc2NlbnRcIiwgXCJiYm94XCIsIFwiY2FwLWhlaWdodFwiLCBcImRlc2NlbnRcIiwgXCJmb250LWZhbWlseVwiLCBcImZvbnQtc2l6ZVwiLCBcImZvbnQtc3RyZXRjaFwiLCBcImZvbnQtc3R5bGVcIiwgXCJmb250LXZhcmlhbnRcIiwgXCJmb250LXdlaWdodFwiLCBcImhhbmdpbmdcIiwgXCJpZFwiLCBcImlkZW9ncmFwaGljXCIsIFwibWF0aGVtYXRpY2FsXCIsIFwib3ZlcmxpbmUtcG9zaXRpb25cIiwgXCJvdmVybGluZS10aGlja25lc3NcIiwgXCJwYW5vc2UtMVwiLCBcInNsb3BlXCIsIFwic3RlbWhcIiwgXCJzdGVtdlwiLCBcInN0cmlrZXRocm91Z2gtcG9zaXRpb25cIiwgXCJzdHJpa2V0aHJvdWdoLXRoaWNrbmVzc1wiLCBcInVuZGVybGluZS1wb3NpdGlvblwiLCBcInVuZGVybGluZS10aGlja25lc3NcIiwgXCJ1bmljb2RlLXJhbmdlXCIsIFwidW5pdHMtcGVyLWVtXCIsIFwidi1hbHBoYWJldGljXCIsIFwidi1oYW5naW5nXCIsIFwidi1pZGVvZ3JhcGhpY1wiLCBcInYtbWF0aGVtYXRpY2FsXCIsIFwid2lkdGhzXCIsIFwieC1oZWlnaHRcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBcImZvbnQtZmFjZS1mb3JtYXRcIjogUXQoWyBcImlkXCIsIFwic3RyaW5nXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgXCJmb250LWZhY2UtbmFtZVwiOiBRdChbIFwiaWRcIiwgXCJuYW1lXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgXCJmb250LWZhY2Utc3JjXCI6IFF0KFsgXCJpZFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIFwiZm9udC1mYWNlLXVyaVwiOiBRdChbIFwiaWRcIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIGZvcmVpZ25PYmplY3Q6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRyYW5zZm9ybVwiLCBcIndpZHRoXCIsIFwieFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBnOiBRdChbIFwiY2xhc3NcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiaWRcIiwgXCJvbmFjdGl2YXRlXCIsIFwib25jbGlja1wiLCBcIm9uZm9jdXNpblwiLCBcIm9uZm9jdXNvdXRcIiwgXCJvbmxvYWRcIiwgXCJvbm1vdXNlZG93blwiLCBcIm9ubW91c2Vtb3ZlXCIsIFwib25tb3VzZW91dFwiLCBcIm9ubW91c2VvdmVyXCIsIFwib25tb3VzZXVwXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0cmFuc2Zvcm1cIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBnbHlwaDogUXQoWyBcImFyYWJpYy1mb3JtXCIsIFwiY2xhc3NcIiwgXCJkXCIsIFwiZ2x5cGgtbmFtZVwiLCBcImhvcml6LWFkdi14XCIsIFwiaWRcIiwgXCJsYW5nXCIsIFwib3JpZW50YXRpb25cIiwgXCJzdHlsZVwiLCBcInVuaWNvZGVcIiwgXCJ2ZXJ0LWFkdi15XCIsIFwidmVydC1vcmlnaW4teFwiLCBcInZlcnQtb3JpZ2luLXlcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBnbHlwaFJlZjogUXQoWyBcImNsYXNzXCIsIFwiZHhcIiwgXCJkeVwiLCBcImZvcm1hdFwiLCBcImdseXBoUmVmXCIsIFwiaWRcIiwgXCJzdHlsZVwiLCBcInhcIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICBnbHlwaHJlZjogd3QoKSxcbiAgICAgICAgICAgIGhrZXJuOiBRdChbIFwiZzFcIiwgXCJnMlwiLCBcImlkXCIsIFwia1wiLCBcInUxXCIsIFwidTJcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBpbWFnZTogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImhlaWdodFwiLCBcImlkXCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInByZXNlcnZlQXNwZWN0UmF0aW9cIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRyYW5zZm9ybVwiLCBcIndpZHRoXCIsIFwieFwiLCBcInhsaW5rOmFjdHVhdGVcIiwgXCJ4bGluazphcmNyb2xlXCIsIFwieGxpbms6aHJlZlwiLCBcInhsaW5rOnJvbGVcIiwgXCJ4bGluazpzaG93XCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIGxpbmU6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRyYW5zZm9ybVwiLCBcIngxXCIsIFwieDJcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieTFcIiwgXCJ5MlwiIF0pLFxuICAgICAgICAgICAgbGluZWFyR3JhZGllbnQ6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJncmFkaWVudFRyYW5zZm9ybVwiLCBcImdyYWRpZW50VW5pdHNcIiwgXCJpZFwiLCBcInNwcmVhZE1ldGhvZFwiLCBcInN0eWxlXCIsIFwieDFcIiwgXCJ4MlwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5MVwiLCBcInkyXCIgXSksXG4gICAgICAgICAgICBtYXJrZXI6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcIm1hcmtlckhlaWdodFwiLCBcIm1hcmtlclVuaXRzXCIsIFwibWFya2VyV2lkdGhcIiwgXCJvcmllbnRcIiwgXCJwcmVzZXJ2ZUFzcGVjdFJhdGlvXCIsIFwicmVmWFwiLCBcInJlZllcIiwgXCJzdHlsZVwiLCBcInZpZXdCb3hcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBtYXNrOiBRdChbIFwiY2xhc3NcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiaGVpZ2h0XCIsIFwiaWRcIiwgXCJtYXNrQ29udGVudFVuaXRzXCIsIFwibWFza1VuaXRzXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgbWV0YWRhdGE6IFF0KFsgXCJpZFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIFwibWlzc2luZy1nbHlwaFwiOiBRdChbIFwiY2xhc3NcIiwgXCJkXCIsIFwiaG9yaXotYWR2LXhcIiwgXCJpZFwiLCBcInN0eWxlXCIsIFwidmVydC1hZHYteVwiLCBcInZlcnQtb3JpZ2luLXhcIiwgXCJ2ZXJ0LW9yaWdpbi15XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgbXBhdGg6IFF0KFsgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiaWRcIiwgXCJ4bGluazphY3R1YXRlXCIsIFwieGxpbms6YXJjcm9sZVwiLCBcInhsaW5rOmhyZWZcIiwgXCJ4bGluazpyb2xlXCIsIFwieGxpbms6c2hvd1wiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIHBhdGg6IFF0KFsgXCJjbGFzc1wiLCBcImRcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiaWRcIiwgXCJvbmFjdGl2YXRlXCIsIFwib25jbGlja1wiLCBcIm9uZm9jdXNpblwiLCBcIm9uZm9jdXNvdXRcIiwgXCJvbmxvYWRcIiwgXCJvbm1vdXNlZG93blwiLCBcIm9ubW91c2Vtb3ZlXCIsIFwib25tb3VzZW91dFwiLCBcIm9ubW91c2VvdmVyXCIsIFwib25tb3VzZXVwXCIsIFwicGF0aExlbmd0aFwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJzdHlsZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidHJhbnNmb3JtXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgcGF0dGVybjogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImhlaWdodFwiLCBcImlkXCIsIFwicGF0dGVybkNvbnRlbnRVbml0c1wiLCBcInBhdHRlcm5UcmFuc2Zvcm1cIiwgXCJwYXR0ZXJuVW5pdHNcIiwgXCJwcmVzZXJ2ZUFzcGVjdFJhdGlvXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ2aWV3Qm94XCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieGxpbms6YWN0dWF0ZVwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnNob3dcIiwgXCJ4bGluazp0aXRsZVwiLCBcInhsaW5rOnR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgcG9seWdvbjogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImlkXCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInBvaW50c1wiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJzdHlsZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidHJhbnNmb3JtXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgcG9seWxpbmU6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJwb2ludHNcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRyYW5zZm9ybVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIHJhZGlhbEdyYWRpZW50OiBRdChbIFwiY2xhc3NcIiwgXCJjeFwiLCBcImN5XCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImZ4XCIsIFwiZnlcIiwgXCJncmFkaWVudFRyYW5zZm9ybVwiLCBcImdyYWRpZW50VW5pdHNcIiwgXCJpZFwiLCBcInJcIiwgXCJzcHJlYWRNZXRob2RcIiwgXCJzdHlsZVwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIHJlY3Q6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwicnhcIiwgXCJyeVwiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0cmFuc2Zvcm1cIiwgXCJ3aWR0aFwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgc2NyaXB0OiBRdChbIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImlkXCIsIFwidHlwZVwiLCBcInhsaW5rOmFjdHVhdGVcIiwgXCJ4bGluazphcmNyb2xlXCIsIFwieGxpbms6aHJlZlwiLCBcInhsaW5rOnJvbGVcIiwgXCJ4bGluazpzaG93XCIsIFwieGxpbms6dGl0bGVcIiwgXCJ4bGluazp0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgc2V0OiBRdChbIFwiYXR0cmlidXRlTmFtZVwiLCBcImF0dHJpYnV0ZVR5cGVcIiwgXCJiZWdpblwiLCBcImR1clwiLCBcImVuZFwiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJmaWxsXCIsIFwiaWRcIiwgXCJtYXhcIiwgXCJtaW5cIiwgXCJvbmJlZ2luXCIsIFwib25lbmRcIiwgXCJvbmxvYWRcIiwgXCJvbnJlcGVhdFwiLCBcInJlcGVhdENvdW50XCIsIFwicmVwZWF0RHVyXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInJlc3RhcnRcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRvXCIsIFwieGxpbms6YWN0dWF0ZVwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnNob3dcIiwgXCJ4bGluazp0aXRsZVwiLCBcInhsaW5rOnR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICBzdG9wOiBRdChbIFwiY2xhc3NcIiwgXCJpZFwiLCBcIm9mZnNldFwiLCBcInN0eWxlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgc3R5bGU6IFF0KFsgXCJpZFwiLCBcIm1lZGlhXCIsIFwidGl0bGVcIiwgXCJ0eXBlXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pLFxuICAgICAgICAgICAgc3ZnOiBRdChbIFwiYmFzZVByb2ZpbGVcIiwgXCJjbGFzc1wiLCBcImNvbnRlbnRTY3JpcHRUeXBlXCIsIFwiY29udGVudFN0eWxlVHlwZVwiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJoZWlnaHRcIiwgXCJpZFwiLCBcIm9uYWJvcnRcIiwgXCJvbmFjdGl2YXRlXCIsIFwib25jbGlja1wiLCBcIm9uZXJyb3JcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcIm9ucmVzaXplXCIsIFwib25zY3JvbGxcIiwgXCJvbnVubG9hZFwiLCBcIm9uem9vbVwiLCBcInByZXNlcnZlQXNwZWN0UmF0aW9cIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInZlcnNpb25cIiwgXCJ2aWV3Qm94XCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiwgXCJ6b29tQW5kUGFuXCIgXSksXG4gICAgICAgICAgICBzd2l0Y2g6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRyYW5zZm9ybVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIHN5bWJvbDogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImlkXCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInByZXNlcnZlQXNwZWN0UmF0aW9cIiwgXCJzdHlsZVwiLCBcInZpZXdCb3hcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICB0ZXh0OiBRdChbIFwiY2xhc3NcIiwgXCJkeFwiLCBcImR5XCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImlkXCIsIFwibGVuZ3RoQWRqdXN0XCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJyb3RhdGVcIiwgXCJzdHlsZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidGV4dExlbmd0aFwiLCBcInRyYW5zZm9ybVwiLCBcInhcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgdGV4dFBhdGg6IFF0KFsgXCJjbGFzc1wiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcImxlbmd0aEFkanVzdFwiLCBcIm1ldGhvZFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwic3BhY2luZ1wiLCBcInN0YXJ0T2Zmc2V0XCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRleHRMZW5ndGhcIiwgXCJ4bGluazphcmNyb2xlXCIsIFwieGxpbms6aHJlZlwiLCBcInhsaW5rOnJvbGVcIiwgXCJ4bGluazp0aXRsZVwiLCBcInhsaW5rOnR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIgXSksXG4gICAgICAgICAgICB0aXRsZTogUXQoWyBcImNsYXNzXCIsIFwiaWRcIiwgXCJzdHlsZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiBdKSxcbiAgICAgICAgICAgIHRyZWY6IFF0KFsgXCJjbGFzc1wiLCBcImR4XCIsIFwiZHlcIiwgXCJleHRlcm5hbFJlc291cmNlc1JlcXVpcmVkXCIsIFwiaWRcIiwgXCJsZW5ndGhBZGp1c3RcIiwgXCJvbmFjdGl2YXRlXCIsIFwib25jbGlja1wiLCBcIm9uZm9jdXNpblwiLCBcIm9uZm9jdXNvdXRcIiwgXCJvbmxvYWRcIiwgXCJvbm1vdXNlZG93blwiLCBcIm9ubW91c2Vtb3ZlXCIsIFwib25tb3VzZW91dFwiLCBcIm9ubW91c2VvdmVyXCIsIFwib25tb3VzZXVwXCIsIFwicmVxdWlyZWRFeHRlbnNpb25zXCIsIFwicmVxdWlyZWRGZWF0dXJlc1wiLCBcInJvdGF0ZVwiLCBcInN0eWxlXCIsIFwic3lzdGVtTGFuZ3VhZ2VcIiwgXCJ0ZXh0TGVuZ3RoXCIsIFwieFwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnRpdGxlXCIsIFwieGxpbms6dHlwZVwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ5XCIgXSksXG4gICAgICAgICAgICB0c3BhbjogUXQoWyBcImNsYXNzXCIsIFwiZHhcIiwgXCJkeVwiLCBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcImxlbmd0aEFkanVzdFwiLCBcIm9uYWN0aXZhdGVcIiwgXCJvbmNsaWNrXCIsIFwib25mb2N1c2luXCIsIFwib25mb2N1c291dFwiLCBcIm9ubG9hZFwiLCBcIm9ubW91c2Vkb3duXCIsIFwib25tb3VzZW1vdmVcIiwgXCJvbm1vdXNlb3V0XCIsIFwib25tb3VzZW92ZXJcIiwgXCJvbm1vdXNldXBcIiwgXCJyZXF1aXJlZEV4dGVuc2lvbnNcIiwgXCJyZXF1aXJlZEZlYXR1cmVzXCIsIFwicm90YXRlXCIsIFwic3R5bGVcIiwgXCJzeXN0ZW1MYW5ndWFnZVwiLCBcInRleHRMZW5ndGhcIiwgXCJ4XCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiLCBcInlcIiBdKSxcbiAgICAgICAgICAgIHVzZTogUXQoWyBcImNsYXNzXCIsIFwiZXh0ZXJuYWxSZXNvdXJjZXNSZXF1aXJlZFwiLCBcImhlaWdodFwiLCBcImlkXCIsIFwib25hY3RpdmF0ZVwiLCBcIm9uY2xpY2tcIiwgXCJvbmZvY3VzaW5cIiwgXCJvbmZvY3Vzb3V0XCIsIFwib25sb2FkXCIsIFwib25tb3VzZWRvd25cIiwgXCJvbm1vdXNlbW92ZVwiLCBcIm9ubW91c2VvdXRcIiwgXCJvbm1vdXNlb3ZlclwiLCBcIm9ubW91c2V1cFwiLCBcInJlcXVpcmVkRXh0ZW5zaW9uc1wiLCBcInJlcXVpcmVkRmVhdHVyZXNcIiwgXCJzdHlsZVwiLCBcInN5c3RlbUxhbmd1YWdlXCIsIFwidHJhbnNmb3JtXCIsIFwid2lkdGhcIiwgXCJ4XCIsIFwieGxpbms6YWN0dWF0ZVwiLCBcInhsaW5rOmFyY3JvbGVcIiwgXCJ4bGluazpocmVmXCIsIFwieGxpbms6cm9sZVwiLCBcInhsaW5rOnNob3dcIiwgXCJ4bGluazp0aXRsZVwiLCBcInhsaW5rOnR5cGVcIiwgXCJ4bWw6YmFzZVwiLCBcInhtbDpsYW5nXCIsIFwieG1sOnNwYWNlXCIsIFwieVwiIF0pLFxuICAgICAgICAgICAgdmlldzogUXQoWyBcImV4dGVybmFsUmVzb3VyY2VzUmVxdWlyZWRcIiwgXCJpZFwiLCBcInByZXNlcnZlQXNwZWN0UmF0aW9cIiwgXCJ2aWV3Qm94XCIsIFwidmlld1RhcmdldFwiLCBcInhtbDpiYXNlXCIsIFwieG1sOmxhbmdcIiwgXCJ4bWw6c3BhY2VcIiwgXCJ6b29tQW5kUGFuXCIgXSksXG4gICAgICAgICAgICB2a2VybjogUXQoWyBcImcxXCIsIFwiZzJcIiwgXCJpZFwiLCBcImtcIiwgXCJ1MVwiLCBcInUyXCIsIFwieG1sOmJhc2VcIiwgXCJ4bWw6bGFuZ1wiLCBcInhtbDpzcGFjZVwiIF0pXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLl8gPSBRdChbIFwiYVwiLCBcImFsdEdseXBoXCIsIFwiYW5pbWF0ZVwiLCBcImFuaW1hdGVDb2xvclwiLCBcImNpcmNsZVwiLCBcImNsaXBQYXRoXCIsIFwiZGVmc1wiLCBcImVsbGlwc2VcIiwgXCJmZUJsZW5kXCIsIFwiZmVDb2xvck1hdHJpeFwiLCBcImZlQ29tcG9uZW50VHJhbnNmZXJcIiwgXCJmZUNvbXBvc2l0ZVwiLCBcImZlQ29udm9sdmVNYXRyaXhcIiwgXCJmZURpZmZ1c2VMaWdodGluZ1wiLCBcImZlRGlzcGxhY2VtZW50TWFwXCIsIFwiZmVGbG9vZFwiLCBcImZlR2F1c3NpYW5CbHVyXCIsIFwiZmVJbWFnZVwiLCBcImZlTWVyZ2VcIiwgXCJmZU1vcnBob2xvZ3lcIiwgXCJmZU9mZnNldFwiLCBcImZlU3BlY3VsYXJMaWdodGluZ1wiLCBcImZlVGlsZVwiLCBcImZlVHVyYnVsZW5jZVwiLCBcImZpbHRlclwiLCBcImZvbnRcIiwgXCJmb3JlaWduT2JqZWN0XCIsIFwiZ1wiLCBcImdseXBoXCIsIFwiZ2x5cGhSZWZcIiwgXCJpbWFnZVwiLCBcImxpbmVcIiwgXCJsaW5lYXJHcmFkaWVudFwiLCBcIm1hcmtlclwiLCBcIm1hc2tcIiwgXCJtaXNzaW5nLWdseXBoXCIsIFwicGF0aFwiLCBcInBhdHRlcm5cIiwgXCJwb2x5Z29uXCIsIFwicG9seWxpbmVcIiwgXCJyYWRpYWxHcmFkaWVudFwiLCBcInJlY3RcIiwgXCJzdG9wXCIsIFwic3ZnXCIsIFwic3dpdGNoXCIsIFwic3ltYm9sXCIsIFwidGV4dFwiLCBcInRleHRQYXRoXCIsIFwidHJlZlwiLCBcInRzcGFuXCIsIFwidXNlXCIgXSk7XG4gICAgICAgIHRoaXMuaiA9IFF0KFsgXCJhbGlnbm1lbnQtYmFzZWxpbmVcIiwgXCJiYXNlbGluZS1zaGlmdFwiLCBcImNsaXAtcGF0aFwiLCBcImNsaXAtcnVsZVwiLCBcImNsaXBcIiwgXCJjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnNcIiwgXCJjb2xvci1pbnRlcnBvbGF0aW9uXCIsIFwiY29sb3ItcHJvZmlsZVwiLCBcImNvbG9yLXJlbmRlcmluZ1wiLCBcImNvbG9yXCIsIFwiY3Vyc29yXCIsIFwiZGlyZWN0aW9uXCIsIFwiZGlzcGxheVwiLCBcImRvbWluYW50LWJhc2VsaW5lXCIsIFwiZW5hYmxlLWJhY2tncm91bmRcIiwgXCJmaWxsLW9wYWNpdHlcIiwgXCJmaWxsLXJ1bGVcIiwgXCJmaWxsXCIsIFwiZmlsdGVyXCIsIFwiZmxvb2QtY29sb3JcIiwgXCJmbG9vZC1vcGFjaXR5XCIsIFwiZm9udC1mYW1pbHlcIiwgXCJmb250LXNpemUtYWRqdXN0XCIsIFwiZm9udC1zaXplXCIsIFwiZm9udC1zdHJldGNoXCIsIFwiZm9udC1zdHlsZVwiLCBcImZvbnQtdmFyaWFudFwiLCBcImZvbnQtd2VpZ2h0XCIsIFwiZ2x5cGgtb3JpZW50YXRpb24taG9yaXpvbnRhbFwiLCBcImdseXBoLW9yaWVudGF0aW9uLXZlcnRpY2FsXCIsIFwiaW1hZ2UtcmVuZGVyaW5nXCIsIFwia2VybmluZ1wiLCBcImxldHRlci1zcGFjaW5nXCIsIFwibGlnaHRpbmctY29sb3JcIiwgXCJtYXJrZXItZW5kXCIsIFwibWFya2VyLW1pZFwiLCBcIm1hcmtlci1zdGFydFwiLCBcIm1hc2tcIiwgXCJvcGFjaXR5XCIsIFwib3ZlcmZsb3dcIiwgXCJwb2ludGVyLWV2ZW50c1wiLCBcInNoYXBlLXJlbmRlcmluZ1wiLCBcInN0b3AtY29sb3JcIiwgXCJzdG9wLW9wYWNpdHlcIiwgXCJzdHJva2UtZGFzaGFycmF5XCIsIFwic3Ryb2tlLWRhc2hvZmZzZXRcIiwgXCJzdHJva2UtbGluZWNhcFwiLCBcInN0cm9rZS1saW5lam9pblwiLCBcInN0cm9rZS1taXRlcmxpbWl0XCIsIFwic3Ryb2tlLW9wYWNpdHlcIiwgXCJzdHJva2Utd2lkdGhcIiwgXCJzdHJva2VcIiwgXCJ0ZXh0LWFuY2hvclwiLCBcInRleHQtZGVjb3JhdGlvblwiLCBcInRleHQtcmVuZGVyaW5nXCIsIFwidW5pY29kZS1iaWRpXCIsIFwidmlzaWJpbGl0eVwiLCBcIndvcmQtc3BhY2luZ1wiLCBcIndyaXRpbmctbW9kZVwiIF0pO1xuICAgICAgICB0aGlzLlNWR0VsZW1lbnQgPSB0Lmdsb2JhbFRoaXMuU1ZHRWxlbWVudDtcbiAgICAgICAgY29uc3QgZSA9IHQuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgZS5pbm5lckhUTUwgPSBcIjxzdmc+PGFsdEdseXBoIC8+PC9zdmc+XCI7XG4gICAgICAgIGlmIChcImFsdGdseXBoXCIgPT09IGUuZmlyc3RFbGVtZW50Q2hpbGQubm9kZU5hbWUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLlY7XG4gICAgICAgICAgICBsZXQgZSA9IHQuYWx0R2x5cGg7XG4gICAgICAgICAgICB0LmFsdEdseXBoID0gdC5hbHRnbHlwaDtcbiAgICAgICAgICAgIHQuYWx0Z2x5cGggPSBlO1xuICAgICAgICAgICAgZSA9IHQuYWx0R2x5cGhEZWY7XG4gICAgICAgICAgICB0LmFsdEdseXBoRGVmID0gdC5hbHRnbHlwaGRlZjtcbiAgICAgICAgICAgIHQuYWx0Z2x5cGhkZWYgPSBlO1xuICAgICAgICAgICAgZSA9IHQuYWx0R2x5cGhJdGVtO1xuICAgICAgICAgICAgdC5hbHRHbHlwaEl0ZW0gPSB0LmFsdGdseXBoaXRlbTtcbiAgICAgICAgICAgIHQuYWx0Z2x5cGhpdGVtID0gZTtcbiAgICAgICAgICAgIGUgPSB0LmdseXBoUmVmO1xuICAgICAgICAgICAgdC5nbHlwaFJlZiA9IHQuZ2x5cGhyZWY7XG4gICAgICAgICAgICB0LmdseXBocmVmID0gZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdGF0aWMgcmVnaXN0ZXIodCkge1xuICAgICAgICByZXR1cm4gYy5zaW5nbGV0b24oWXQsIHRoaXMpLnJlZ2lzdGVyKHQpO1xuICAgIH1cbiAgICBpc1N0YW5kYXJkU3ZnQXR0cmlidXRlKHQsIGUpIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiB0aGlzLlNWR0VsZW1lbnQpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIHJldHVybiB0cnVlID09PSB0aGlzLl9bdC5ub2RlTmFtZV0gJiYgdHJ1ZSA9PT0gdGhpcy5qW2VdIHx8IHRydWUgPT09IChudWxsID09PSAoaSA9IHRoaXMuVlt0Lm5vZGVOYW1lXSkgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaVtlXSk7XG4gICAgfVxufVxuXG5TVkdBbmFseXplci5pbmplY3QgPSBbIEt0IF07XG5cbmNvbnN0IFp0ID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJQXR0ck1hcHBlclwiLCAodCA9PiB0LnNpbmdsZXRvbihBdHRyTWFwcGVyKSkpO1xuXG5jbGFzcyBBdHRyTWFwcGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuc3ZnID0gdDtcbiAgICAgICAgdGhpcy5mbnMgPSBbXTtcbiAgICAgICAgdGhpcy5OID0gd3QoKTtcbiAgICAgICAgdGhpcy5XID0gd3QoKTtcbiAgICAgICAgdGhpcy51c2VNYXBwaW5nKHtcbiAgICAgICAgICAgIExBQkVMOiB7XG4gICAgICAgICAgICAgICAgZm9yOiBcImh0bWxGb3JcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIElNRzoge1xuICAgICAgICAgICAgICAgIHVzZW1hcDogXCJ1c2VNYXBcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIElOUFVUOiB7XG4gICAgICAgICAgICAgICAgbWF4bGVuZ3RoOiBcIm1heExlbmd0aFwiLFxuICAgICAgICAgICAgICAgIG1pbmxlbmd0aDogXCJtaW5MZW5ndGhcIixcbiAgICAgICAgICAgICAgICBmb3JtYWN0aW9uOiBcImZvcm1BY3Rpb25cIixcbiAgICAgICAgICAgICAgICBmb3JtZW5jdHlwZTogXCJmb3JtRW5jVHlwZVwiLFxuICAgICAgICAgICAgICAgIGZvcm1tZXRob2Q6IFwiZm9ybU1ldGhvZFwiLFxuICAgICAgICAgICAgICAgIGZvcm1ub3ZhbGlkYXRlOiBcImZvcm1Ob1ZhbGlkYXRlXCIsXG4gICAgICAgICAgICAgICAgZm9ybXRhcmdldDogXCJmb3JtVGFyZ2V0XCIsXG4gICAgICAgICAgICAgICAgaW5wdXRtb2RlOiBcImlucHV0TW9kZVwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgVEVYVEFSRUE6IHtcbiAgICAgICAgICAgICAgICBtYXhsZW5ndGg6IFwibWF4TGVuZ3RoXCJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBURDoge1xuICAgICAgICAgICAgICAgIHJvd3NwYW46IFwicm93U3BhblwiLFxuICAgICAgICAgICAgICAgIGNvbHNwYW46IFwiY29sU3BhblwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgVEg6IHtcbiAgICAgICAgICAgICAgICByb3dzcGFuOiBcInJvd1NwYW5cIixcbiAgICAgICAgICAgICAgICBjb2xzcGFuOiBcImNvbFNwYW5cIlxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy51c2VHbG9iYWxNYXBwaW5nKHtcbiAgICAgICAgICAgIGFjY2Vzc2tleTogXCJhY2Nlc3NLZXlcIixcbiAgICAgICAgICAgIGNvbnRlbnRlZGl0YWJsZTogXCJjb250ZW50RWRpdGFibGVcIixcbiAgICAgICAgICAgIHRhYmluZGV4OiBcInRhYkluZGV4XCIsXG4gICAgICAgICAgICB0ZXh0Y29udGVudDogXCJ0ZXh0Q29udGVudFwiLFxuICAgICAgICAgICAgaW5uZXJodG1sOiBcImlubmVySFRNTFwiLFxuICAgICAgICAgICAgc2Nyb2xsdG9wOiBcInNjcm9sbFRvcFwiLFxuICAgICAgICAgICAgc2Nyb2xsbGVmdDogXCJzY3JvbGxMZWZ0XCIsXG4gICAgICAgICAgICByZWFkb25seTogXCJyZWFkT25seVwiXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGluamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIFsgWXQgXTtcbiAgICB9XG4gICAgdXNlTWFwcGluZyh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgbGV0IG87XG4gICAgICAgIGZvciAociBpbiB0KSB7XG4gICAgICAgICAgICBzID0gdFtyXTtcbiAgICAgICAgICAgIG4gPSBudWxsICE9PSAoZSA9IChpID0gdGhpcy5OKVtyXSkgJiYgdm9pZCAwICE9PSBlID8gZSA6IGlbcl0gPSB3dCgpO1xuICAgICAgICAgICAgZm9yIChvIGluIHMpIHtcbiAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBuW29dKSB0aHJvdyB0ZShvLCByKTtcbiAgICAgICAgICAgICAgICBuW29dID0gc1tvXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICB1c2VHbG9iYWxNYXBwaW5nKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuVztcbiAgICAgICAgZm9yIChjb25zdCBpIGluIHQpIHtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGVbaV0pIHRocm93IHRlKGksIFwiKlwiKTtcbiAgICAgICAgICAgIGVbaV0gPSB0W2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVzZVR3b1dheSh0KSB7XG4gICAgICAgIHRoaXMuZm5zLnB1c2godCk7XG4gICAgfVxuICAgIGlzVHdvV2F5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEp0KHQsIGUpIHx8IHRoaXMuZm5zLmxlbmd0aCA+IDAgJiYgdGhpcy5mbnMuc29tZSgoaSA9PiBpKHQsIGUpKSk7XG4gICAgfVxuICAgIG1hcCh0LCBlKSB7XG4gICAgICAgIHZhciBpLCBzLCBuO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gKG4gPSBudWxsICE9PSAocyA9IG51bGwgPT09IChpID0gdGhpcy5OW3Qubm9kZU5hbWVdKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpW2VdKSAmJiB2b2lkIDAgIT09IHMgPyBzIDogdGhpcy5XW2VdKSAmJiB2b2lkIDAgIT09IG4gPyBuIDogeXQodCwgZSwgdGhpcy5zdmcpID8gZSA6IG51bGw7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBKdCh0LCBlKSB7XG4gICAgc3dpdGNoICh0Lm5vZGVOYW1lKSB7XG4gICAgICBjYXNlIFwiSU5QVVRcIjpcbiAgICAgICAgc3dpdGNoICh0LnR5cGUpIHtcbiAgICAgICAgICBjYXNlIFwiY2hlY2tib3hcIjpcbiAgICAgICAgICBjYXNlIFwicmFkaW9cIjpcbiAgICAgICAgICAgIHJldHVybiBcImNoZWNrZWRcIiA9PT0gZTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gXCJ2YWx1ZVwiID09PSBlIHx8IFwiZmlsZXNcIiA9PT0gZSB8fCBcInZhbHVlLWFzLW51bWJlclwiID09PSBlIHx8IFwidmFsdWUtYXMtZGF0ZVwiID09PSBlO1xuICAgICAgICB9XG5cbiAgICAgIGNhc2UgXCJURVhUQVJFQVwiOlxuICAgICAgY2FzZSBcIlNFTEVDVFwiOlxuICAgICAgICByZXR1cm4gXCJ2YWx1ZVwiID09PSBlO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIFwidGV4dGNvbnRlbnRcIjpcbiAgICAgICAgICBjYXNlIFwiaW5uZXJodG1sXCI6XG4gICAgICAgICAgICByZXR1cm4gdC5oYXNBdHRyaWJ1dGUoXCJjb250ZW50ZWRpdGFibGVcIik7XG5cbiAgICAgICAgICBjYXNlIFwic2Nyb2xsdG9wXCI6XG4gICAgICAgICAgY2FzZSBcInNjcm9sbGxlZnRcIjpcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gdGUodCwgZSkge1xuICAgIHJldHVybiBuZXcgRXJyb3IoYEF0dHJpYnV0ZSAke3R9IGhhcyBiZWVuIGFscmVhZHkgcmVnaXN0ZXJlZCBmb3IgJHtcIipcIiA9PT0gZSA/IFwiYWxsIGVsZW1lbnRzXCIgOiBgPCR7ZX0vPmB9YCk7XG59XG5cbmNsYXNzIENhbGxCaW5kaW5nIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuKSB7XG4gICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbiA9IHQ7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gZTtcbiAgICAgICAgdGhpcy50YXJnZXRQcm9wZXJ0eSA9IGk7XG4gICAgICAgIHRoaXMubG9jYXRvciA9IG47XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50YXJnZXRPYnNlcnZlciA9IHMuZ2V0QWNjZXNzb3IoZSwgaSk7XG4gICAgfVxuICAgIGNhbGxTb3VyY2UodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy4kc2NvcGUub3ZlcnJpZGVDb250ZXh0O1xuICAgICAgICBlLiRldmVudCA9IHQ7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb24uZXZhbHVhdGUoOCwgdGhpcy4kc2NvcGUsIHRoaXMubG9jYXRvciwgbnVsbCk7XG4gICAgICAgIFJlZmxlY3QuZGVsZXRlUHJvcGVydHkoZSwgXCIkZXZlbnRcIik7XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICAkYmluZCh0LCBlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQm91bmQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiRzY29wZSA9PT0gZSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5pbnRlcmNlcHRvci4kdW5iaW5kKDIgfCB0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiRzY29wZSA9IGU7XG4gICAgICAgIGlmICh0aGlzLnNvdXJjZUV4cHJlc3Npb24uaGFzQmluZCkgdGhpcy5zb3VyY2VFeHByZXNzaW9uLmJpbmQodCwgZSwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIHRoaXMudGFyZ2V0T2JzZXJ2ZXIuc2V0VmFsdWUoKHQgPT4gdGhpcy5pbnRlcmNlcHRvci5jYWxsU291cmNlKHQpKSwgdCwgdGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0UHJvcGVydHkpO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSB0cnVlO1xuICAgIH1cbiAgICAkdW5iaW5kKHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMuc291cmNlRXhwcmVzc2lvbi5oYXNVbmJpbmQpIHRoaXMuc291cmNlRXhwcmVzc2lvbi51bmJpbmQodCwgdGhpcy4kc2NvcGUsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICB0aGlzLiRzY29wZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy50YXJnZXRPYnNlcnZlci5zZXRWYWx1ZShudWxsLCB0LCB0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRQcm9wZXJ0eSk7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgIH1cbiAgICBvYnNlcnZlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgaSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxufVxuXG5jbGFzcyBBdHRyaWJ1dGVPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLnR5cGUgPSAyIHwgMSB8IDQ7XG4gICAgICAgIHRoaXMudiA9IG51bGw7XG4gICAgICAgIHRoaXMub3YgPSBudWxsO1xuICAgICAgICB0aGlzLkggPSBmYWxzZTtcbiAgICAgICAgdGhpcy5mID0gMDtcbiAgICAgICAgdGhpcy5vID0gdDtcbiAgICAgICAgdGhpcy5HID0gZTtcbiAgICAgICAgdGhpcy5YID0gaTtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnY7XG4gICAgfVxuICAgIHNldFZhbHVlKHQsIGUpIHtcbiAgICAgICAgdGhpcy52ID0gdDtcbiAgICAgICAgdGhpcy5IID0gdCAhPT0gdGhpcy5vdjtcbiAgICAgICAgaWYgKDAgPT09ICgyNTYgJiBlKSkgdGhpcy5LKCk7XG4gICAgfVxuICAgIEsoKSB7XG4gICAgICAgIGlmICh0aGlzLkgpIHtcbiAgICAgICAgICAgIHRoaXMuSCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5vdiA9IHRoaXMudjtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5YKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJjbGFzc1wiOlxuICAgICAgICAgICAgICAgIHRoaXMuby5jbGFzc0xpc3QudG9nZ2xlKHRoaXMuRywgISF0aGlzLnYpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJzdHlsZVwiOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBsZXQgZSA9IHRoaXMudjtcbiAgICAgICAgICAgICAgICAgICAgaWYgKEF0KGUpICYmIGUuaW5jbHVkZXMoXCIhaW1wb3J0YW50XCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ID0gXCJpbXBvcnRhbnRcIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUgPSBlLnJlcGxhY2UoXCIhaW1wb3J0YW50XCIsIFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuby5zdHlsZS5zZXRQcm9wZXJ0eSh0aGlzLkcsIGUsIHQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSB0aGlzLnYpIHRoaXMuby5yZW1vdmVBdHRyaWJ1dGUodGhpcy5YKTsgZWxzZSB0aGlzLm8uc2V0QXR0cmlidXRlKHRoaXMuWCwgU3RyaW5nKHRoaXMudikpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZU11dGF0aW9uKHQpIHtcbiAgICAgICAgbGV0IGUgPSBmYWxzZTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDAsIHMgPSB0Lmxlbmd0aDsgcyA+IGk7ICsraSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRbaV07XG4gICAgICAgICAgICBpZiAoXCJhdHRyaWJ1dGVzXCIgPT09IHMudHlwZSAmJiBzLmF0dHJpYnV0ZU5hbWUgPT09IHRoaXMuRykge1xuICAgICAgICAgICAgICAgIGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICBsZXQgdDtcbiAgICAgICAgICAgIHN3aXRjaCAodGhpcy5YKSB7XG4gICAgICAgICAgICAgIGNhc2UgXCJjbGFzc1wiOlxuICAgICAgICAgICAgICAgIHQgPSB0aGlzLm8uY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMuRyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSBcInN0eWxlXCI6XG4gICAgICAgICAgICAgICAgdCA9IHRoaXMuby5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKHRoaXMuRyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFVUjA2NTE6JHt0aGlzLlh9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodCAhPT0gdGhpcy52KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vdiA9IHRoaXMudjtcbiAgICAgICAgICAgICAgICB0aGlzLnYgPSB0O1xuICAgICAgICAgICAgICAgIHRoaXMuSCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMuZiA9IDA7XG4gICAgICAgICAgICAgICAgdGhpcy5xdWV1ZS5hZGQodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3Vic2NyaWJlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicy5hZGQodCkgJiYgMSA9PT0gdGhpcy5zdWJzLmNvdW50KSB7XG4gICAgICAgICAgICB0aGlzLnYgPSB0aGlzLm92ID0gdGhpcy5vLmdldEF0dHJpYnV0ZSh0aGlzLkcpO1xuICAgICAgICAgICAgZWUodGhpcy5vLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuTXV0YXRpb25PYnNlcnZlciwgdGhpcy5vLCB0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bnN1YnNjcmliZSh0KSB7XG4gICAgICAgIGlmICh0aGlzLnN1YnMucmVtb3ZlKHQpICYmIDAgPT09IHRoaXMuc3Vicy5jb3VudCkgaWUodGhpcy5vLCB0aGlzKTtcbiAgICB9XG4gICAgZmx1c2goKSB7XG4gICAgICAgIHJlID0gdGhpcy5vdjtcbiAgICAgICAgdGhpcy5vdiA9IHRoaXMudjtcbiAgICAgICAgdGhpcy5zdWJzLm5vdGlmeSh0aGlzLnYsIHJlLCB0aGlzLmYpO1xuICAgIH1cbn1cblxuUChBdHRyaWJ1dGVPYnNlcnZlcik7XG5cbk8oQXR0cmlidXRlT2JzZXJ2ZXIpO1xuXG5jb25zdCBlZSA9ICh0LCBlLCBpKSA9PiB7XG4gICAgaWYgKHZvaWQgMCA9PT0gZS4kZU1PYnMpIGUuJGVNT2JzID0gbmV3IFNldDtcbiAgICBpZiAodm9pZCAwID09PSBlLiRtT2JzKSAoZS4kbU9icyA9IG5ldyB0KHNlKSkub2JzZXJ2ZShlLCB7XG4gICAgICAgIGF0dHJpYnV0ZXM6IHRydWVcbiAgICB9KTtcbiAgICBlLiRlTU9icy5hZGQoaSk7XG59O1xuXG5jb25zdCBpZSA9ICh0LCBlKSA9PiB7XG4gICAgY29uc3QgaSA9IHQuJGVNT2JzO1xuICAgIGlmIChpICYmIGkuZGVsZXRlKGUpKSB7XG4gICAgICAgIGlmICgwID09PSBpLnNpemUpIHtcbiAgICAgICAgICAgIHQuJG1PYnMuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgdC4kbU9icyA9IHZvaWQgMDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3Qgc2UgPSB0ID0+IHtcbiAgICB0WzBdLnRhcmdldC4kZU1PYnMuZm9yRWFjaChuZSwgdCk7XG59O1xuXG5mdW5jdGlvbiBuZSh0KSB7XG4gICAgdC5oYW5kbGVNdXRhdGlvbih0aGlzKTtcbn1cblxubGV0IHJlO1xuXG5jbGFzcyBCaW5kaW5nVGFyZ2V0U3Vic2NyaWJlciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmIgPSB0O1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy5iO1xuICAgICAgICBpZiAodCAhPT0gcy5zb3VyY2VFeHByZXNzaW9uLmV2YWx1YXRlKGksIHMuJHNjb3BlLCBzLmxvY2F0b3IsIG51bGwpKSBzLnVwZGF0ZVNvdXJjZSh0LCBpKTtcbiAgICB9XG59XG5cbmNvbnN0IHtvbmVUaW1lOiBvZSwgdG9WaWV3OiBsZSwgZnJvbVZpZXc6IGhlfSA9IEQ7XG5cbmNvbnN0IGFlID0gbGUgfCBvZTtcblxuY29uc3QgY2UgPSB7XG4gICAgcmV1c2FibGU6IGZhbHNlLFxuICAgIHByZWVtcHQ6IHRydWVcbn07XG5cbmNsYXNzIEF0dHJpYnV0ZUJpbmRpbmcge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4sIHIsIG8pIHtcbiAgICAgICAgdGhpcy5zb3VyY2VFeHByZXNzaW9uID0gdDtcbiAgICAgICAgdGhpcy50YXJnZXRBdHRyaWJ1dGUgPSBpO1xuICAgICAgICB0aGlzLnRhcmdldFByb3BlcnR5ID0gcztcbiAgICAgICAgdGhpcy5tb2RlID0gbjtcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gbztcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvciA9IHRoaXM7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLiRzY29wZSA9IG51bGw7XG4gICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgIHRoaXMudGFyZ2V0U3Vic2NyaWJlciA9IG51bGw7XG4gICAgICAgIHRoaXMucGVyc2lzdGVudEZsYWdzID0gMDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBlO1xuICAgICAgICB0aGlzLnAgPSBvLmdldChLdCk7XG4gICAgICAgIHRoaXMub0wgPSByO1xuICAgIH1cbiAgICB1cGRhdGVUYXJnZXQodCwgZSkge1xuICAgICAgICBlIHw9IHRoaXMucGVyc2lzdGVudEZsYWdzO1xuICAgICAgICB0aGlzLnRhcmdldE9ic2VydmVyLnNldFZhbHVlKHQsIGUsIHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldFByb3BlcnR5KTtcbiAgICB9XG4gICAgdXBkYXRlU291cmNlKHQsIGUpIHtcbiAgICAgICAgZSB8PSB0aGlzLnBlcnNpc3RlbnRGbGFncztcbiAgICAgICAgdGhpcy5zb3VyY2VFeHByZXNzaW9uLmFzc2lnbihlLCB0aGlzLiRzY29wZSwgdGhpcy5sb2NhdG9yLCB0KTtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKHQsIGUsIGkpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgaSB8PSB0aGlzLnBlcnNpc3RlbnRGbGFncztcbiAgICAgICAgY29uc3QgcyA9IHRoaXMubW9kZTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuaW50ZXJjZXB0b3I7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIGNvbnN0IG8gPSB0aGlzLiRzY29wZTtcbiAgICAgICAgY29uc3QgbCA9IHRoaXMubG9jYXRvcjtcbiAgICAgICAgY29uc3QgaCA9IHRoaXMudGFyZ2V0T2JzZXJ2ZXI7XG4gICAgICAgIGNvbnN0IGEgPSAwID09PSAoMiAmIGkpICYmICg0ICYgaC50eXBlKSA+IDA7XG4gICAgICAgIGxldCBjID0gZmFsc2U7XG4gICAgICAgIGxldCB1O1xuICAgICAgICBpZiAoMTAwODIgIT09IHIuJGtpbmQgfHwgdGhpcy5vYnMuY291bnQgPiAxKSB7XG4gICAgICAgICAgICBjID0gMCA9PT0gKHMgJiBvZSk7XG4gICAgICAgICAgICBpZiAoYykgdGhpcy5vYnMudmVyc2lvbisrO1xuICAgICAgICAgICAgdCA9IHIuZXZhbHVhdGUoaSwgbywgbCwgbik7XG4gICAgICAgICAgICBpZiAoYykgdGhpcy5vYnMuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodCAhPT0gdGhpcy52YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHQ7XG4gICAgICAgICAgICBpZiAoYSkge1xuICAgICAgICAgICAgICAgIHUgPSB0aGlzLnRhc2s7XG4gICAgICAgICAgICAgICAgdGhpcy50YXNrID0gdGhpcy5wLmRvbVdyaXRlUXVldWUucXVldWVUYXNrKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgIG4udXBkYXRlVGFyZ2V0KHQsIGkpO1xuICAgICAgICAgICAgICAgIH0pLCBjZSk7XG4gICAgICAgICAgICAgICAgbnVsbCA9PT0gdSB8fCB2b2lkIDAgPT09IHUgPyB2b2lkIDAgOiB1LmNhbmNlbCgpO1xuICAgICAgICAgICAgfSBlbHNlIG4udXBkYXRlVGFyZ2V0KHQsIGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgICRiaW5kKHQsIGUpIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIGlmICh0aGlzLmlzQm91bmQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiRzY29wZSA9PT0gZSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5pbnRlcmNlcHRvci4kdW5iaW5kKDIgfCB0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBlcnNpc3RlbnRGbGFncyA9IDk2MSAmIHQ7XG4gICAgICAgIHRoaXMuJHNjb3BlID0gZTtcbiAgICAgICAgbGV0IHMgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIGlmIChzLmhhc0JpbmQpIHMuYmluZCh0LCBlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgbGV0IG4gPSB0aGlzLnRhcmdldE9ic2VydmVyO1xuICAgICAgICBpZiAoIW4pIG4gPSB0aGlzLnRhcmdldE9ic2VydmVyID0gbmV3IEF0dHJpYnV0ZU9ic2VydmVyKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldFByb3BlcnR5LCB0aGlzLnRhcmdldEF0dHJpYnV0ZSk7XG4gICAgICAgIHMgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLm1vZGU7XG4gICAgICAgIGNvbnN0IG8gPSB0aGlzLmludGVyY2VwdG9yO1xuICAgICAgICBsZXQgbCA9IGZhbHNlO1xuICAgICAgICBpZiAociAmIGFlKSB7XG4gICAgICAgICAgICBsID0gKHIgJiBsZSkgPiAwO1xuICAgICAgICAgICAgby51cGRhdGVUYXJnZXQodGhpcy52YWx1ZSA9IHMuZXZhbHVhdGUodCwgZSwgdGhpcy5sb2NhdG9yLCBsID8gbyA6IG51bGwpLCB0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAociAmIGhlKSBuLnN1YnNjcmliZShudWxsICE9PSAoaSA9IHRoaXMudGFyZ2V0U3Vic2NyaWJlcikgJiYgdm9pZCAwICE9PSBpID8gaSA6IHRoaXMudGFyZ2V0U3Vic2NyaWJlciA9IG5ldyBCaW5kaW5nVGFyZ2V0U3Vic2NyaWJlcihvKSk7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IHRydWU7XG4gICAgfVxuICAgICR1bmJpbmQodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW50RmxhZ3MgPSAwO1xuICAgICAgICBpZiAodGhpcy5zb3VyY2VFeHByZXNzaW9uLmhhc1VuYmluZCkgdGhpcy5zb3VyY2VFeHByZXNzaW9uLnVuYmluZCh0LCB0aGlzLiRzY29wZSwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIHRoaXMuJHNjb3BlID0gbnVsbDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZvaWQgMDtcbiAgICAgICAgaWYgKHRoaXMudGFyZ2V0U3Vic2NyaWJlcikgdGhpcy50YXJnZXRPYnNlcnZlci51bnN1YnNjcmliZSh0aGlzLnRhcmdldFN1YnNjcmliZXIpO1xuICAgICAgICBudWxsID09PSAoZSA9IHRoaXMudGFzaykgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5jYW5jZWwoKTtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy5vYnMuY2xlYXJBbGwoKTtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgfVxufVxuXG4kKEF0dHJpYnV0ZUJpbmRpbmcpO1xuXG5jb25zdCB7dG9WaWV3OiB1ZX0gPSBEO1xuXG5jb25zdCBmZSA9IHtcbiAgICByZXVzYWJsZTogZmFsc2UsXG4gICAgcHJlZW1wdDogdHJ1ZVxufTtcblxuY2xhc3MgSW50ZXJwb2xhdGlvbkJpbmRpbmcge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4sIHIsIG8pIHtcbiAgICAgICAgdGhpcy5pbnRlcnBvbGF0aW9uID0gZTtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBpO1xuICAgICAgICB0aGlzLnRhcmdldFByb3BlcnR5ID0gcztcbiAgICAgICAgdGhpcy5tb2RlID0gbjtcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gcjtcbiAgICAgICAgdGhpcy50YXNrUXVldWUgPSBvO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgIHRoaXMuJHNjb3BlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB0aGlzLm9MID0gdDtcbiAgICAgICAgdGhpcy50YXJnZXRPYnNlcnZlciA9IHQuZ2V0QWNjZXNzb3IoaSwgcyk7XG4gICAgICAgIGNvbnN0IGwgPSBlLmV4cHJlc3Npb25zO1xuICAgICAgICBjb25zdCBoID0gdGhpcy5wYXJ0QmluZGluZ3MgPSBBcnJheShsLmxlbmd0aCk7XG4gICAgICAgIGNvbnN0IGEgPSBsLmxlbmd0aDtcbiAgICAgICAgbGV0IGMgPSAwO1xuICAgICAgICBmb3IgKDthID4gYzsgKytjKSBoW2NdID0gbmV3IEludGVycG9sYXRpb25QYXJ0QmluZGluZyhsW2NdLCBpLCBzLCByLCB0LCB0aGlzKTtcbiAgICB9XG4gICAgdXBkYXRlVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMucGFydEJpbmRpbmdzO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5pbnRlcnBvbGF0aW9uLnBhcnRzO1xuICAgICAgICBjb25zdCBuID0gaS5sZW5ndGg7XG4gICAgICAgIGxldCByID0gXCJcIjtcbiAgICAgICAgbGV0IG8gPSAwO1xuICAgICAgICBpZiAoMSA9PT0gbikgciA9IHNbMF0gKyBpWzBdLnZhbHVlICsgc1sxXTsgZWxzZSB7XG4gICAgICAgICAgICByID0gc1swXTtcbiAgICAgICAgICAgIGZvciAoO24gPiBvOyArK28pIHIgKz0gaVtvXS52YWx1ZSArIHNbbyArIDFdO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGwgPSB0aGlzLnRhcmdldE9ic2VydmVyO1xuICAgICAgICBjb25zdCBoID0gMCA9PT0gKDIgJiBlKSAmJiAoNCAmIGwudHlwZSkgPiAwO1xuICAgICAgICBsZXQgYTtcbiAgICAgICAgaWYgKGgpIHtcbiAgICAgICAgICAgIGEgPSB0aGlzLnRhc2s7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnRhc2tRdWV1ZS5xdWV1ZVRhc2soKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICAgICAgICAgIGwuc2V0VmFsdWUociwgZSwgdGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0UHJvcGVydHkpO1xuICAgICAgICAgICAgfSksIGZlKTtcbiAgICAgICAgICAgIG51bGwgPT09IGEgfHwgdm9pZCAwID09PSBhID8gdm9pZCAwIDogYS5jYW5jZWwoKTtcbiAgICAgICAgICAgIGEgPSBudWxsO1xuICAgICAgICB9IGVsc2UgbC5zZXRWYWx1ZShyLCBlLCB0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRQcm9wZXJ0eSk7XG4gICAgfVxuICAgICRiaW5kKHQsIGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNCb3VuZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuJHNjb3BlID09PSBlKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLmludGVyY2VwdG9yLiR1bmJpbmQodCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0JvdW5kID0gdHJ1ZTtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSBlO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5wYXJ0QmluZGluZ3M7XG4gICAgICAgIGNvbnN0IHMgPSBpLmxlbmd0aDtcbiAgICAgICAgbGV0IG4gPSAwO1xuICAgICAgICBmb3IgKDtzID4gbjsgKytuKSBpW25dLiRiaW5kKHQsIGUpO1xuICAgICAgICB0aGlzLnVwZGF0ZVRhcmdldCh2b2lkIDAsIHQpO1xuICAgIH1cbiAgICAkdW5iaW5kKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGlmICghdGhpcy5pc0JvdW5kKSByZXR1cm47XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLiRzY29wZSA9IHZvaWQgMDtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMucGFydEJpbmRpbmdzO1xuICAgICAgICBjb25zdCBzID0gaS5sZW5ndGg7XG4gICAgICAgIGxldCBuID0gMDtcbiAgICAgICAgZm9yICg7cyA+IG47ICsrbikgaVtuXS5pbnRlcmNlcHRvci4kdW5iaW5kKHQpO1xuICAgICAgICBudWxsID09PSAoZSA9IHRoaXMudGFzaykgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5jYW5jZWwoKTtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICB9XG59XG5cbmNsYXNzIEludGVycG9sYXRpb25QYXJ0QmluZGluZyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbiwgcikge1xuICAgICAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24gPSB0O1xuICAgICAgICB0aGlzLnRhcmdldCA9IGU7XG4gICAgICAgIHRoaXMudGFyZ2V0UHJvcGVydHkgPSBpO1xuICAgICAgICB0aGlzLmxvY2F0b3IgPSBzO1xuICAgICAgICB0aGlzLm93bmVyID0gcjtcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvciA9IHRoaXM7XG4gICAgICAgIHRoaXMubW9kZSA9IEQudG9WaWV3O1xuICAgICAgICB0aGlzLnZhbHVlID0gXCJcIjtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgIHRoaXMub0wgPSBuO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgaSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNCb3VuZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5vYnM7XG4gICAgICAgIGNvbnN0IHIgPSAxMDA4MiA9PT0gcy4ka2luZCAmJiAxID09PSBuLmNvdW50O1xuICAgICAgICBsZXQgbyA9IGZhbHNlO1xuICAgICAgICBpZiAoIXIpIHtcbiAgICAgICAgICAgIG8gPSAodGhpcy5tb2RlICYgdWUpID4gMDtcbiAgICAgICAgICAgIGlmIChvKSBuLnZlcnNpb24rKztcbiAgICAgICAgICAgIHQgPSBzLmV2YWx1YXRlKGksIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIG8gPyB0aGlzLmludGVyY2VwdG9yIDogbnVsbCk7XG4gICAgICAgICAgICBpZiAobykgbi5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0ICE9IHRoaXMudmFsdWUpIHtcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBBcnJheSkgdGhpcy5vYnNlcnZlQ29sbGVjdGlvbih0KTtcbiAgICAgICAgICAgIHRoaXMub3duZXIudXBkYXRlVGFyZ2V0KHQsIGkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UodCwgZSkge1xuICAgICAgICB0aGlzLm93bmVyLnVwZGF0ZVRhcmdldCh2b2lkIDAsIGUpO1xuICAgIH1cbiAgICAkYmluZCh0LCBlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQm91bmQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiRzY29wZSA9PT0gZSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5pbnRlcmNlcHRvci4kdW5iaW5kKHQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IHRydWU7XG4gICAgICAgIHRoaXMuJHNjb3BlID0gZTtcbiAgICAgICAgaWYgKHRoaXMuc291cmNlRXhwcmVzc2lvbi5oYXNCaW5kKSB0aGlzLnNvdXJjZUV4cHJlc3Npb24uYmluZCh0LCBlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuc291cmNlRXhwcmVzc2lvbi5ldmFsdWF0ZSh0LCBlLCB0aGlzLmxvY2F0b3IsICh0aGlzLm1vZGUgJiB1ZSkgPiAwID8gdGhpcy5pbnRlcmNlcHRvciA6IG51bGwpO1xuICAgICAgICBpZiAodGhpcy52YWx1ZSBpbnN0YW5jZW9mIEFycmF5KSB0aGlzLm9ic2VydmVDb2xsZWN0aW9uKHRoaXMudmFsdWUpO1xuICAgIH1cbiAgICAkdW5iaW5kKHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLnNvdXJjZUV4cHJlc3Npb24uaGFzVW5iaW5kKSB0aGlzLnNvdXJjZUV4cHJlc3Npb24udW5iaW5kKHQsIHRoaXMuJHNjb3BlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMub2JzLmNsZWFyQWxsKCk7XG4gICAgfVxufVxuXG4kKEludGVycG9sYXRpb25QYXJ0QmluZGluZyk7XG5cbmNsYXNzIENvbnRlbnRCaW5kaW5nIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCByKSB7XG4gICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbiA9IHQ7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gZTtcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gaTtcbiAgICAgICAgdGhpcy5wID0gbjtcbiAgICAgICAgdGhpcy5zdHJpY3QgPSByO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgdGhpcy5tb2RlID0gRC50b1ZpZXc7XG4gICAgICAgIHRoaXMudmFsdWUgPSBcIlwiO1xuICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5vTCA9IHM7XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldCh0LCBlKSB7XG4gICAgICAgIHZhciBpLCBzO1xuICAgICAgICBjb25zdCBuID0gdGhpcy50YXJnZXQ7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLnAuTm9kZTtcbiAgICAgICAgY29uc3QgbyA9IHRoaXMudmFsdWU7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgICAgICBpZiAobyBpbnN0YW5jZW9mIHIpIG51bGwgPT09IChpID0gby5wYXJlbnROb2RlKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLnJlbW92ZUNoaWxkKG8pO1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIHIpIHtcbiAgICAgICAgICAgIG4udGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICAgICAgbnVsbCA9PT0gKHMgPSBuLnBhcmVudE5vZGUpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuaW5zZXJ0QmVmb3JlKHQsIG4pO1xuICAgICAgICB9IGVsc2Ugbi50ZXh0Q29udGVudCA9IFN0cmluZyh0KTtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKHQsIGUsIGkpIHtcbiAgICAgICAgdmFyIHM7XG4gICAgICAgIGlmICghdGhpcy5pc0JvdW5kKSByZXR1cm47XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLm9icztcbiAgICAgICAgY29uc3QgbyA9IDEwMDgyID09PSBuLiRraW5kICYmIDEgPT09IHIuY291bnQ7XG4gICAgICAgIGxldCBsID0gZmFsc2U7XG4gICAgICAgIGlmICghbykge1xuICAgICAgICAgICAgbCA9ICh0aGlzLm1vZGUgJiB1ZSkgPiAwO1xuICAgICAgICAgICAgaWYgKGwpIHIudmVyc2lvbisrO1xuICAgICAgICAgICAgaSB8PSB0aGlzLnN0cmljdCA/IDEgOiAwO1xuICAgICAgICAgICAgdCA9IG4uZXZhbHVhdGUoaSwgdGhpcy4kc2NvcGUsIHRoaXMubG9jYXRvciwgbCA/IHRoaXMuaW50ZXJjZXB0b3IgOiBudWxsKTtcbiAgICAgICAgICAgIGlmIChsKSByLmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHQgPT09IHRoaXMudmFsdWUpIHtcbiAgICAgICAgICAgIG51bGwgPT09IChzID0gdGhpcy50YXNrKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmNhbmNlbCgpO1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBoID0gMCA9PT0gKDIgJiBpKTtcbiAgICAgICAgaWYgKGgpIHRoaXMucXVldWVVcGRhdGUodCwgaSk7IGVsc2UgdGhpcy51cGRhdGVUYXJnZXQodCwgaSk7XG4gICAgfVxuICAgIGhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMucXVldWVVcGRhdGUodGhpcy52YWx1ZSwgMCk7XG4gICAgfVxuICAgICRiaW5kKHQsIGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNCb3VuZCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuJHNjb3BlID09PSBlKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLmludGVyY2VwdG9yLiR1bmJpbmQodCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0JvdW5kID0gdHJ1ZTtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSBlO1xuICAgICAgICBpZiAodGhpcy5zb3VyY2VFeHByZXNzaW9uLmhhc0JpbmQpIHRoaXMuc291cmNlRXhwcmVzc2lvbi5iaW5kKHQsIGUsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICB0IHw9IHRoaXMuc3RyaWN0ID8gMSA6IDA7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnZhbHVlID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uLmV2YWx1YXRlKHQsIGUsIHRoaXMubG9jYXRvciwgKHRoaXMubW9kZSAmIHVlKSA+IDAgPyB0aGlzLmludGVyY2VwdG9yIDogbnVsbCk7XG4gICAgICAgIGlmIChpIGluc3RhbmNlb2YgQXJyYXkpIHRoaXMub2JzZXJ2ZUNvbGxlY3Rpb24oaSk7XG4gICAgICAgIHRoaXMudXBkYXRlVGFyZ2V0KGksIHQpO1xuICAgIH1cbiAgICAkdW5iaW5kKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGlmICghdGhpcy5pc0JvdW5kKSByZXR1cm47XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICBpZiAodGhpcy5zb3VyY2VFeHByZXNzaW9uLmhhc1VuYmluZCkgdGhpcy5zb3VyY2VFeHByZXNzaW9uLnVuYmluZCh0LCB0aGlzLiRzY29wZSwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIHRoaXMuJHNjb3BlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm9icy5jbGVhckFsbCgpO1xuICAgICAgICBudWxsID09PSAoZSA9IHRoaXMudGFzaykgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5jYW5jZWwoKTtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICB9XG4gICAgcXVldWVVcGRhdGUodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdGhpcy50YXNrO1xuICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnAuZG9tV3JpdGVRdWV1ZS5xdWV1ZVRhc2soKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVRhcmdldCh0LCBlKTtcbiAgICAgICAgfSksIGZlKTtcbiAgICAgICAgbnVsbCA9PT0gaSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLmNhbmNlbCgpO1xuICAgIH1cbn1cblxuJChDb250ZW50QmluZGluZyk7XG5cbmNsYXNzIExldEJpbmRpbmcge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4gPSBmYWxzZSkge1xuICAgICAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24gPSB0O1xuICAgICAgICB0aGlzLnRhcmdldFByb3BlcnR5ID0gZTtcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gcztcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvciA9IHRoaXM7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLiRzY29wZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBudWxsO1xuICAgICAgICB0aGlzLm9MID0gaTtcbiAgICAgICAgdGhpcy5ZID0gbjtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKHQsIGUsIGkpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMudGFyZ2V0O1xuICAgICAgICBjb25zdCBuID0gdGhpcy50YXJnZXRQcm9wZXJ0eTtcbiAgICAgICAgY29uc3QgciA9IHNbbl07XG4gICAgICAgIHRoaXMub2JzLnZlcnNpb24rKztcbiAgICAgICAgdCA9IHRoaXMuc291cmNlRXhwcmVzc2lvbi5ldmFsdWF0ZShpLCB0aGlzLiRzY29wZSwgdGhpcy5sb2NhdG9yLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgdGhpcy5vYnMuY2xlYXIoKTtcbiAgICAgICAgaWYgKHQgIT09IHIpIHNbbl0gPSB0O1xuICAgIH1cbiAgICAkYmluZCh0LCBlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzQm91bmQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLiRzY29wZSA9PT0gZSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5pbnRlcmNlcHRvci4kdW5iaW5kKDIgfCB0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiRzY29wZSA9IGU7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGhpcy5ZID8gZS5iaW5kaW5nQ29udGV4dCA6IGUub3ZlcnJpZGVDb250ZXh0O1xuICAgICAgICBjb25zdCBpID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICBpZiAoaS5oYXNCaW5kKSBpLmJpbmQodCwgZSwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIHRoaXMudGFyZ2V0W3RoaXMudGFyZ2V0UHJvcGVydHldID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uLmV2YWx1YXRlKDIgfCB0LCBlLCB0aGlzLmxvY2F0b3IsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSB0cnVlO1xuICAgIH1cbiAgICAkdW5iaW5kKHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc291cmNlRXhwcmVzc2lvbjtcbiAgICAgICAgaWYgKGUuaGFzVW5iaW5kKSBlLnVuYmluZCh0LCB0aGlzLiRzY29wZSwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIHRoaXMuJHNjb3BlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm9icy5jbGVhckFsbCgpO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICB9XG59XG5cbiQoTGV0QmluZGluZyk7XG5cbmNvbnN0IHtvbmVUaW1lOiBkZSwgdG9WaWV3OiBtZSwgZnJvbVZpZXc6IHZlfSA9IEQ7XG5cbmNvbnN0IHBlID0gbWUgfCBkZTtcblxuY29uc3QgZ2UgPSB7XG4gICAgcmV1c2FibGU6IGZhbHNlLFxuICAgIHByZWVtcHQ6IHRydWVcbn07XG5cbmNsYXNzIFByb3BlcnR5QmluZGluZyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbiwgciwgbykge1xuICAgICAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24gPSB0O1xuICAgICAgICB0aGlzLnRhcmdldCA9IGU7XG4gICAgICAgIHRoaXMudGFyZ2V0UHJvcGVydHkgPSBpO1xuICAgICAgICB0aGlzLm1vZGUgPSBzO1xuICAgICAgICB0aGlzLmxvY2F0b3IgPSByO1xuICAgICAgICB0aGlzLnRhc2tRdWV1ZSA9IG87XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMudGFyZ2V0T2JzZXJ2ZXIgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMucGVyc2lzdGVudEZsYWdzID0gMDtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXJnZXRTdWJzY3JpYmVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5vTCA9IG47XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldCh0LCBlKSB7XG4gICAgICAgIGUgfD0gdGhpcy5wZXJzaXN0ZW50RmxhZ3M7XG4gICAgICAgIHRoaXMudGFyZ2V0T2JzZXJ2ZXIuc2V0VmFsdWUodCwgZSwgdGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0UHJvcGVydHkpO1xuICAgIH1cbiAgICB1cGRhdGVTb3VyY2UodCwgZSkge1xuICAgICAgICBlIHw9IHRoaXMucGVyc2lzdGVudEZsYWdzO1xuICAgICAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24uYXNzaWduKGUsIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIHQpO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgaSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNCb3VuZCkgcmV0dXJuO1xuICAgICAgICBpIHw9IHRoaXMucGVyc2lzdGVudEZsYWdzO1xuICAgICAgICBjb25zdCBzID0gMCA9PT0gKDIgJiBpKSAmJiAoNCAmIHRoaXMudGFyZ2V0T2JzZXJ2ZXIudHlwZSkgPiAwO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5vYnM7XG4gICAgICAgIGxldCByID0gZmFsc2U7XG4gICAgICAgIGlmICgxMDA4MiAhPT0gdGhpcy5zb3VyY2VFeHByZXNzaW9uLiRraW5kIHx8IG4uY291bnQgPiAxKSB7XG4gICAgICAgICAgICByID0gdGhpcy5tb2RlID4gZGU7XG4gICAgICAgICAgICBpZiAocikgbi52ZXJzaW9uKys7XG4gICAgICAgICAgICB0ID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uLmV2YWx1YXRlKGksIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICAgICAgaWYgKHIpIG4uY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocykge1xuICAgICAgICAgICAgd2UgPSB0aGlzLnRhc2s7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnRhc2tRdWV1ZS5xdWV1ZVRhc2soKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmludGVyY2VwdG9yLnVwZGF0ZVRhcmdldCh0LCBpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICAgICAgfSksIGdlKTtcbiAgICAgICAgICAgIG51bGwgPT09IHdlIHx8IHZvaWQgMCA9PT0gd2UgPyB2b2lkIDAgOiB3ZS5jYW5jZWwoKTtcbiAgICAgICAgICAgIHdlID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIHRoaXMuaW50ZXJjZXB0b3IudXBkYXRlVGFyZ2V0KHQsIGkpO1xuICAgIH1cbiAgICAkYmluZCh0LCBlKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBpZiAodGhpcy5pc0JvdW5kKSB7XG4gICAgICAgICAgICBpZiAodGhpcy4kc2NvcGUgPT09IGUpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJjZXB0b3IuJHVuYmluZCgyIHwgdCk7XG4gICAgICAgIH1cbiAgICAgICAgdCB8PSAxO1xuICAgICAgICB0aGlzLnBlcnNpc3RlbnRGbGFncyA9IDk2MSAmIHQ7XG4gICAgICAgIHRoaXMuJHNjb3BlID0gZTtcbiAgICAgICAgbGV0IHMgPSB0aGlzLnNvdXJjZUV4cHJlc3Npb247XG4gICAgICAgIGlmIChzLmhhc0JpbmQpIHMuYmluZCh0LCBlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMub0w7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLm1vZGU7XG4gICAgICAgIGxldCBvID0gdGhpcy50YXJnZXRPYnNlcnZlcjtcbiAgICAgICAgaWYgKCFvKSB7XG4gICAgICAgICAgICBpZiAociAmIHZlKSBvID0gbi5nZXRPYnNlcnZlcih0aGlzLnRhcmdldCwgdGhpcy50YXJnZXRQcm9wZXJ0eSk7IGVsc2UgbyA9IG4uZ2V0QWNjZXNzb3IodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0UHJvcGVydHkpO1xuICAgICAgICAgICAgdGhpcy50YXJnZXRPYnNlcnZlciA9IG87XG4gICAgICAgIH1cbiAgICAgICAgcyA9IHRoaXMuc291cmNlRXhwcmVzc2lvbjtcbiAgICAgICAgY29uc3QgbCA9IHRoaXMuaW50ZXJjZXB0b3I7XG4gICAgICAgIGNvbnN0IGggPSAociAmIG1lKSA+IDA7XG4gICAgICAgIGlmIChyICYgcGUpIGwudXBkYXRlVGFyZ2V0KHMuZXZhbHVhdGUodCwgZSwgdGhpcy5sb2NhdG9yLCBoID8gbCA6IG51bGwpLCB0KTtcbiAgICAgICAgaWYgKHIgJiB2ZSkge1xuICAgICAgICAgICAgby5zdWJzY3JpYmUobnVsbCAhPT0gKGkgPSB0aGlzLnRhcmdldFN1YnNjcmliZXIpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiB0aGlzLnRhcmdldFN1YnNjcmliZXIgPSBuZXcgQmluZGluZ1RhcmdldFN1YnNjcmliZXIobCkpO1xuICAgICAgICAgICAgaWYgKCFoKSBsLnVwZGF0ZVNvdXJjZShvLmdldFZhbHVlKHRoaXMudGFyZ2V0LCB0aGlzLnRhcmdldFByb3BlcnR5KSwgdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0JvdW5kID0gdHJ1ZTtcbiAgICB9XG4gICAgJHVuYmluZCh0KSB7XG4gICAgICAgIGlmICghdGhpcy5pc0JvdW5kKSByZXR1cm47XG4gICAgICAgIHRoaXMucGVyc2lzdGVudEZsYWdzID0gMDtcbiAgICAgICAgaWYgKHRoaXMuc291cmNlRXhwcmVzc2lvbi5oYXNVbmJpbmQpIHRoaXMuc291cmNlRXhwcmVzc2lvbi51bmJpbmQodCwgdGhpcy4kc2NvcGUsIHRoaXMuaW50ZXJjZXB0b3IpO1xuICAgICAgICB0aGlzLiRzY29wZSA9IHZvaWQgMDtcbiAgICAgICAgd2UgPSB0aGlzLnRhc2s7XG4gICAgICAgIGlmICh0aGlzLnRhcmdldFN1YnNjcmliZXIpIHRoaXMudGFyZ2V0T2JzZXJ2ZXIudW5zdWJzY3JpYmUodGhpcy50YXJnZXRTdWJzY3JpYmVyKTtcbiAgICAgICAgaWYgKG51bGwgIT0gd2UpIHtcbiAgICAgICAgICAgIHdlLmNhbmNlbCgpO1xuICAgICAgICAgICAgd2UgPSB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub2JzLmNsZWFyQWxsKCk7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgIH1cbn1cblxuJChQcm9wZXJ0eUJpbmRpbmcpO1xuXG5sZXQgd2UgPSBudWxsO1xuXG5jbGFzcyBSZWZCaW5kaW5nIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuc291cmNlRXhwcmVzc2lvbiA9IHQ7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gZTtcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gaTtcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvciA9IHRoaXM7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLiRzY29wZSA9IHZvaWQgMDtcbiAgICB9XG4gICAgJGJpbmQodCwgZSkge1xuICAgICAgICBpZiAodGhpcy5pc0JvdW5kKSB7XG4gICAgICAgICAgICBpZiAodGhpcy4kc2NvcGUgPT09IGUpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJjZXB0b3IuJHVuYmluZCgyIHwgdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kc2NvcGUgPSBlO1xuICAgICAgICBpZiAodGhpcy5zb3VyY2VFeHByZXNzaW9uLmhhc0JpbmQpIHRoaXMuc291cmNlRXhwcmVzc2lvbi5iaW5kKHQsIGUsIHRoaXMpO1xuICAgICAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24uYXNzaWduKHQsIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIHRoaXMudGFyZ2V0KTtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gdHJ1ZTtcbiAgICB9XG4gICAgJHVuYmluZCh0KSB7XG4gICAgICAgIGlmICghdGhpcy5pc0JvdW5kKSByZXR1cm47XG4gICAgICAgIGxldCBlID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICBpZiAoZS5ldmFsdWF0ZSh0LCB0aGlzLiRzY29wZSwgdGhpcy5sb2NhdG9yLCBudWxsKSA9PT0gdGhpcy50YXJnZXQpIGUuYXNzaWduKHQsIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIG51bGwpO1xuICAgICAgICBlID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICBpZiAoZS5oYXNVbmJpbmQpIGUudW5iaW5kKHQsIHRoaXMuJHNjb3BlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgIH1cbiAgICBvYnNlcnZlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgaSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxufVxuXG5jb25zdCBiZSA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSUFwcFRhc2tcIik7XG5cbmNsYXNzICRBcHBUYXNrIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuYyA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5zbG90ID0gdDtcbiAgICAgICAgdGhpcy5rID0gZTtcbiAgICAgICAgdGhpcy5jYiA9IGk7XG4gICAgfVxuICAgIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYyA9IHQucmVnaXN0ZXIoYy5pbnN0YW5jZShiZSwgdGhpcykpO1xuICAgIH1cbiAgICBydW4oKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLms7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNiO1xuICAgICAgICByZXR1cm4gbnVsbCA9PT0gdCA/IGUoKSA6IGUodGhpcy5jLmdldCh0KSk7XG4gICAgfVxufVxuXG5jb25zdCB4ZSA9IE9iamVjdC5mcmVlemUoe1xuICAgIGJlZm9yZUNyZWF0ZTogeWUoXCJiZWZvcmVDcmVhdGVcIiksXG4gICAgaHlkcmF0aW5nOiB5ZShcImh5ZHJhdGluZ1wiKSxcbiAgICBoeWRyYXRlZDogeWUoXCJoeWRyYXRlZFwiKSxcbiAgICBiZWZvcmVBY3RpdmF0ZTogeWUoXCJiZWZvcmVBY3RpdmF0ZVwiKSxcbiAgICBhZnRlckFjdGl2YXRlOiB5ZShcImFmdGVyQWN0aXZhdGVcIiksXG4gICAgYmVmb3JlRGVhY3RpdmF0ZTogeWUoXCJiZWZvcmVEZWFjdGl2YXRlXCIpLFxuICAgIGFmdGVyRGVhY3RpdmF0ZTogeWUoXCJhZnRlckRlYWN0aXZhdGVcIilcbn0pO1xuXG5mdW5jdGlvbiB5ZSh0KSB7XG4gICAgZnVuY3Rpb24gZShlLCBpKSB7XG4gICAgICAgIGlmIChDdChpKSkgcmV0dXJuIG5ldyAkQXBwVGFzayh0LCBlLCBpKTtcbiAgICAgICAgcmV0dXJuIG5ldyAkQXBwVGFzayh0LCBudWxsLCBlKTtcbiAgICB9XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIGtlKHQsIGUpIHtcbiAgICBsZXQgaTtcbiAgICBmdW5jdGlvbiBzKHQsIGUpIHtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSBpLnByb3BlcnR5ID0gZTtcbiAgICAgICAgY3QoQWUsIENoaWxkcmVuRGVmaW5pdGlvbi5jcmVhdGUoZSwgaSksIHQuY29uc3RydWN0b3IsIGUpO1xuICAgICAgICBwdCh0LmNvbnN0cnVjdG9yLCBTZS5rZXlGcm9tKGUpKTtcbiAgICB9XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGkgPSB7fTtcbiAgICAgICAgcyh0LCBlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH0gZWxzZSBpZiAoQXQodCkpIHtcbiAgICAgICAgaSA9IHt9O1xuICAgICAgICByZXR1cm4gcztcbiAgICB9XG4gICAgaSA9IHZvaWQgMCA9PT0gdCA/IHt9IDogdDtcbiAgICByZXR1cm4gcztcbn1cblxuZnVuY3Rpb24gQ2UodCkge1xuICAgIHJldHVybiB0LnN0YXJ0c1dpdGgoQWUpO1xufVxuXG5jb25zdCBBZSA9IGR0KFwiY2hpbGRyZW4tb2JzZXJ2ZXJcIik7XG5cbmNvbnN0IFNlID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgbmFtZTogQWUsXG4gICAga2V5RnJvbTogdCA9PiBgJHtBZX06JHt0fWAsXG4gICAgZnJvbSguLi50KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7fTtcbiAgICAgICAgY29uc3QgaSA9IEFycmF5LmlzQXJyYXk7XG4gICAgICAgIGZ1bmN0aW9uIHModCkge1xuICAgICAgICAgICAgZVt0XSA9IENoaWxkcmVuRGVmaW5pdGlvbi5jcmVhdGUodCk7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gbih0LCBpKSB7XG4gICAgICAgICAgICBlW3RdID0gQ2hpbGRyZW5EZWZpbml0aW9uLmNyZWF0ZSh0LCBpKTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiByKHQpIHtcbiAgICAgICAgICAgIGlmIChpKHQpKSB0LmZvckVhY2gocyk7IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBDaGlsZHJlbkRlZmluaXRpb24pIGVbdC5wcm9wZXJ0eV0gPSB0OyBlbHNlIGlmICh2b2lkIDAgIT09IHQpIE9iamVjdC5rZXlzKHQpLmZvckVhY2goKGUgPT4gbihlLCB0KSkpO1xuICAgICAgICB9XG4gICAgICAgIHQuZm9yRWFjaChyKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfSxcbiAgICBnZXRBbGwodCkge1xuICAgICAgICBjb25zdCBlID0gQWUubGVuZ3RoICsgMTtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICBjb25zdCBuID0gcyh0KTtcbiAgICAgICAgbGV0IHIgPSBuLmxlbmd0aDtcbiAgICAgICAgbGV0IG8gPSAwO1xuICAgICAgICBsZXQgbDtcbiAgICAgICAgbGV0IGg7XG4gICAgICAgIGxldCBhO1xuICAgICAgICB3aGlsZSAoLS1yID49IDApIHtcbiAgICAgICAgICAgIGEgPSBuW3JdO1xuICAgICAgICAgICAgbCA9IGd0KGEpLmZpbHRlcihDZSk7XG4gICAgICAgICAgICBoID0gbC5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGg7ICsrdCkgaVtvKytdID0gaHQoQWUsIGEsIGxbdF0uc2xpY2UoZSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbn0pO1xuXG5jb25zdCBSZSA9IHtcbiAgICBjaGlsZExpc3Q6IHRydWVcbn07XG5cbmNsYXNzIENoaWxkcmVuRGVmaW5pdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbiwgcikge1xuICAgICAgICB0aGlzLmNhbGxiYWNrID0gdDtcbiAgICAgICAgdGhpcy5wcm9wZXJ0eSA9IGU7XG4gICAgICAgIHRoaXMub3B0aW9ucyA9IGk7XG4gICAgICAgIHRoaXMucXVlcnkgPSBzO1xuICAgICAgICB0aGlzLmZpbHRlciA9IG47XG4gICAgICAgIHRoaXMubWFwID0gcjtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0LCBlID0ge30pIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIHJldHVybiBuZXcgQ2hpbGRyZW5EZWZpbml0aW9uKG4oZS5jYWxsYmFjaywgYCR7dH1DaGFuZ2VkYCksIG4oZS5wcm9wZXJ0eSwgdCksIG51bGwgIT09IChpID0gZS5vcHRpb25zKSAmJiB2b2lkIDAgIT09IGkgPyBpIDogUmUsIGUucXVlcnksIGUuZmlsdGVyLCBlLm1hcCk7XG4gICAgfVxufVxuXG5jbGFzcyBDaGlsZHJlbk9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuID0gRWUsIHIgPSBCZSwgbyA9IEllLCBsKSB7XG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IHQ7XG4gICAgICAgIHRoaXMub2JqID0gZTtcbiAgICAgICAgdGhpcy5wcm9wZXJ0eUtleSA9IGk7XG4gICAgICAgIHRoaXMucXVlcnkgPSBuO1xuICAgICAgICB0aGlzLmZpbHRlciA9IHI7XG4gICAgICAgIHRoaXMubWFwID0gbztcbiAgICAgICAgdGhpcy5vcHRpb25zID0gbDtcbiAgICAgICAgdGhpcy5vYnNlcnZpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jaGlsZHJlbiA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGVbc107XG4gICAgICAgIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodGhpcy5vYmosIHRoaXMucHJvcGVydHlLZXksIHtcbiAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6ICgpID0+IHRoaXMuZ2V0VmFsdWUoKSxcbiAgICAgICAgICAgIHNldDogKCkgPT4ge31cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vYnNlcnZpbmcgPyB0aGlzLmNoaWxkcmVuIDogdGhpcy5nZXQoKTtcbiAgICB9XG4gICAgc2V0VmFsdWUodCkge31cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIGlmICghdGhpcy5vYnNlcnZpbmcpIHtcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW4gPSB0aGlzLmdldCgpO1xuICAgICAgICAgICAgKG51bGwgIT09ICh0ID0gdGhpcy5vYnNlcnZlcikgJiYgdm9pZCAwICE9PSB0ID8gdCA6IHRoaXMub2JzZXJ2ZXIgPSBuZXcgdGhpcy5jb250cm9sbGVyLmhvc3Qub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldy5NdXRhdGlvbk9ic2VydmVyKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5aKCk7XG4gICAgICAgICAgICB9KSkpLm9ic2VydmUodGhpcy5jb250cm9sbGVyLmhvc3QsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2aW5nKSB7XG4gICAgICAgICAgICB0aGlzLm9ic2VydmluZyA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5vYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB0aGlzLmNoaWxkcmVuID0gaDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBaKCkge1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gdGhpcy5nZXQoKTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gdGhpcy5jYWxsYmFjaykgdGhpcy5jYWxsYmFjay5jYWxsKHRoaXMub2JqKTtcbiAgICAgICAgdGhpcy5zdWJzLm5vdGlmeSh0aGlzLmNoaWxkcmVuLCB2b2lkIDAsIDApO1xuICAgIH1cbiAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiBEZSh0aGlzLmNvbnRyb2xsZXIsIHRoaXMucXVlcnksIHRoaXMuZmlsdGVyLCB0aGlzLm1hcCk7XG4gICAgfVxufVxuXG5QKCkoQ2hpbGRyZW5PYnNlcnZlcik7XG5cbmZ1bmN0aW9uIEVlKHQpIHtcbiAgICByZXR1cm4gdC5ob3N0LmNoaWxkTm9kZXM7XG59XG5cbmZ1bmN0aW9uIEJlKHQsIGUsIGkpIHtcbiAgICByZXR1cm4gISFpO1xufVxuXG5mdW5jdGlvbiBJZSh0LCBlLCBpKSB7XG4gICAgcmV0dXJuIGk7XG59XG5cbmNvbnN0IFRlID0ge1xuICAgIG9wdGlvbmFsOiB0cnVlXG59O1xuXG5mdW5jdGlvbiBEZSh0LCBlLCBpLCBzKSB7XG4gICAgdmFyIG47XG4gICAgY29uc3QgciA9IGUodCk7XG4gICAgY29uc3QgbyA9IHIubGVuZ3RoO1xuICAgIGNvbnN0IGwgPSBbXTtcbiAgICBsZXQgaDtcbiAgICBsZXQgYTtcbiAgICBsZXQgYztcbiAgICBsZXQgdSA9IDA7XG4gICAgZm9yICg7dSA8IG87ICsrdSkge1xuICAgICAgICBoID0gclt1XTtcbiAgICAgICAgYSA9IHNpLmZvcihoLCBUZSk7XG4gICAgICAgIGMgPSBudWxsICE9PSAobiA9IG51bGwgPT09IGEgfHwgdm9pZCAwID09PSBhID8gdm9pZCAwIDogYS52aWV3TW9kZWwpICYmIHZvaWQgMCAhPT0gbiA/IG4gOiBudWxsO1xuICAgICAgICBpZiAoaShoLCBhLCBjKSkgbC5wdXNoKHMoaCwgYSwgYykpO1xuICAgIH1cbiAgICByZXR1cm4gbDtcbn1cblxuZnVuY3Rpb24gUGUodCkge1xuICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHJldHVybiBNZS5kZWZpbmUodCwgZSk7XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gT2UodCkge1xuICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHJldHVybiBNZS5kZWZpbmUoQXQodCkgPyB7XG4gICAgICAgICAgICBpc1RlbXBsYXRlQ29udHJvbGxlcjogdHJ1ZSxcbiAgICAgICAgICAgIG5hbWU6IHRcbiAgICAgICAgfSA6IHtcbiAgICAgICAgICAgIGlzVGVtcGxhdGVDb250cm9sbGVyOiB0cnVlLFxuICAgICAgICAgICAgLi4udFxuICAgICAgICB9LCBlKTtcbiAgICB9O1xufVxuXG5jbGFzcyBDdXN0b21BdHRyaWJ1dGVEZWZpbml0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCByLCBvLCBsLCBoKSB7XG4gICAgICAgIHRoaXMuVHlwZSA9IHQ7XG4gICAgICAgIHRoaXMubmFtZSA9IGU7XG4gICAgICAgIHRoaXMuYWxpYXNlcyA9IGk7XG4gICAgICAgIHRoaXMua2V5ID0gcztcbiAgICAgICAgdGhpcy5kZWZhdWx0QmluZGluZ01vZGUgPSBuO1xuICAgICAgICB0aGlzLmlzVGVtcGxhdGVDb250cm9sbGVyID0gcjtcbiAgICAgICAgdGhpcy5iaW5kYWJsZXMgPSBvO1xuICAgICAgICB0aGlzLm5vTXVsdGlCaW5kaW5ncyA9IGw7XG4gICAgICAgIHRoaXMud2F0Y2hlcyA9IGg7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gMjtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0LCBlKSB7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBsZXQgcztcbiAgICAgICAgaWYgKEF0KHQpKSB7XG4gICAgICAgICAgICBpID0gdDtcbiAgICAgICAgICAgIHMgPSB7XG4gICAgICAgICAgICAgICAgbmFtZTogaVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGkgPSB0Lm5hbWU7XG4gICAgICAgICAgICBzID0gdDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IEN1c3RvbUF0dHJpYnV0ZURlZmluaXRpb24oZSwgbihxZShlLCBcIm5hbWVcIiksIGkpLCBmKHFlKGUsIFwiYWxpYXNlc1wiKSwgcy5hbGlhc2VzLCBlLmFsaWFzZXMpLCBNZS5rZXlGcm9tKGkpLCBuKHFlKGUsIFwiZGVmYXVsdEJpbmRpbmdNb2RlXCIpLCBzLmRlZmF1bHRCaW5kaW5nTW9kZSwgZS5kZWZhdWx0QmluZGluZ01vZGUsIEQudG9WaWV3KSwgbihxZShlLCBcImlzVGVtcGxhdGVDb250cm9sbGVyXCIpLCBzLmlzVGVtcGxhdGVDb250cm9sbGVyLCBlLmlzVGVtcGxhdGVDb250cm9sbGVyLCBmYWxzZSksIEJ0LmZyb20oZSwgLi4uQnQuZ2V0QWxsKGUpLCBxZShlLCBcImJpbmRhYmxlc1wiKSwgZS5iaW5kYWJsZXMsIHMuYmluZGFibGVzKSwgbihxZShlLCBcIm5vTXVsdGlCaW5kaW5nc1wiKSwgcy5ub011bHRpQmluZGluZ3MsIGUubm9NdWx0aUJpbmRpbmdzLCBmYWxzZSksIGYoX2UuZ2V0QW5ub3RhdGlvbihlKSwgZS53YXRjaGVzKSk7XG4gICAgfVxuICAgIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgY29uc3Qge1R5cGU6IGUsIGtleTogaSwgYWxpYXNlczogc30gPSB0aGlzO1xuICAgICAgICBjLnRyYW5zaWVudChpLCBlKS5yZWdpc3Rlcih0KTtcbiAgICAgICAgYy5hbGlhc1RvKGksIGUpLnJlZ2lzdGVyKHQpO1xuICAgICAgICBMKHMsIE1lLCBpLCB0KTtcbiAgICB9XG59XG5cbmNvbnN0ICRlID0gbXQoXCJjdXN0b20tYXR0cmlidXRlXCIpO1xuXG5jb25zdCBMZSA9IHQgPT4gYCR7JGV9OiR7dH1gO1xuXG5jb25zdCBxZSA9ICh0LCBlKSA9PiBodChkdChlKSwgdCk7XG5cbmNvbnN0IE1lID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgbmFtZTogJGUsXG4gICAga2V5RnJvbTogTGUsXG4gICAgaXNUeXBlKHQpIHtcbiAgICAgICAgcmV0dXJuIEN0KHQpICYmIGF0KCRlLCB0KTtcbiAgICB9LFxuICAgIGZvcih0LCBlKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gKGkgPSBpcyh0LCBMZShlKSkpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiB2b2lkIDA7XG4gICAgfSxcbiAgICBkZWZpbmUodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gQ3VzdG9tQXR0cmlidXRlRGVmaW5pdGlvbi5jcmVhdGUodCwgZSk7XG4gICAgICAgIGN0KCRlLCBpLCBpLlR5cGUpO1xuICAgICAgICBjdCgkZSwgaSwgaSk7XG4gICAgICAgIHZ0KGUsICRlKTtcbiAgICAgICAgcmV0dXJuIGkuVHlwZTtcbiAgICB9LFxuICAgIGdldERlZmluaXRpb24odCkge1xuICAgICAgICBjb25zdCBlID0gaHQoJGUsIHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3NTk6JHt0Lm5hbWV9YCk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH0sXG4gICAgYW5ub3RhdGUodCwgZSwgaSkge1xuICAgICAgICBjdChkdChlKSwgaSwgdCk7XG4gICAgfSxcbiAgICBnZXRBbm5vdGF0aW9uOiBxZVxufSk7XG5cbmZ1bmN0aW9uIFVlKHQsIGUpIHtcbiAgICBpZiAoIXQpIHRocm93IG5ldyBFcnJvcihcIkFVUjA3NzJcIik7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGkocywgbiwgcikge1xuICAgICAgICBjb25zdCBvID0gbnVsbCA9PSBuO1xuICAgICAgICBjb25zdCBsID0gbyA/IHMgOiBzLmNvbnN0cnVjdG9yO1xuICAgICAgICBjb25zdCBoID0gbmV3IFdhdGNoRGVmaW5pdGlvbih0LCBvID8gZSA6IHIudmFsdWUpO1xuICAgICAgICBpZiAobykge1xuICAgICAgICAgICAgaWYgKCFDdChlKSAmJiAobnVsbCA9PSBlIHx8ICEoZSBpbiBsLnByb3RvdHlwZSkpKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3NzM6JHtTdHJpbmcoZSl9QCR7bC5uYW1lfX1gKTtcbiAgICAgICAgfSBlbHNlIGlmICghQ3QobnVsbCA9PT0gciB8fCB2b2lkIDAgPT09IHIgPyB2b2lkIDAgOiByLnZhbHVlKSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwNzc0OiR7U3RyaW5nKG4pfWApO1xuICAgICAgICBfZS5hZGQobCwgaCk7XG4gICAgICAgIGlmIChNZS5pc1R5cGUobCkpIE1lLmdldERlZmluaXRpb24obCkud2F0Y2hlcy5wdXNoKGgpO1xuICAgICAgICBpZiAoc2kuaXNUeXBlKGwpKSBzaS5nZXREZWZpbml0aW9uKGwpLndhdGNoZXMucHVzaChoKTtcbiAgICB9O1xufVxuXG5jbGFzcyBXYXRjaERlZmluaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uID0gdDtcbiAgICAgICAgdGhpcy5jYWxsYmFjayA9IGU7XG4gICAgfVxufVxuXG5jb25zdCBGZSA9IGg7XG5cbmNvbnN0IFZlID0gZHQoXCJ3YXRjaFwiKTtcblxuY29uc3QgX2UgPSBPYmplY3QuZnJlZXplKHtcbiAgICBuYW1lOiBWZSxcbiAgICBhZGQodCwgZSkge1xuICAgICAgICBsZXQgaSA9IGh0KFZlLCB0KTtcbiAgICAgICAgaWYgKG51bGwgPT0gaSkgY3QoVmUsIGkgPSBbXSwgdCk7XG4gICAgICAgIGkucHVzaChlKTtcbiAgICB9LFxuICAgIGdldEFubm90YXRpb24odCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IChlID0gaHQoVmUsIHQpKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogRmU7XG4gICAgfVxufSk7XG5cbmZ1bmN0aW9uIGplKHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICByZXR1cm4gc2kuZGVmaW5lKHQsIGUpO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIE5lKHQpIHtcbiAgICBpZiAodm9pZCAwID09PSB0KSByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICBlaSh0LCBcInNoYWRvd09wdGlvbnNcIiwge1xuICAgICAgICAgICAgbW9kZTogXCJvcGVuXCJcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBpZiAoIUN0KHQpKSByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICBlaShlLCBcInNoYWRvd09wdGlvbnNcIiwgdCk7XG4gICAgfTtcbiAgICBlaSh0LCBcInNoYWRvd09wdGlvbnNcIiwge1xuICAgICAgICBtb2RlOiBcIm9wZW5cIlxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBXZSh0KSB7XG4gICAgaWYgKHZvaWQgMCA9PT0gdCkgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgZWkodCwgXCJjb250YWluZXJsZXNzXCIsIHRydWUpO1xuICAgIH07XG4gICAgZWkodCwgXCJjb250YWluZXJsZXNzXCIsIHRydWUpO1xufVxuXG5jb25zdCBIZSA9IG5ldyBXZWFrTWFwO1xuXG5jbGFzcyBDdXN0b21FbGVtZW50RGVmaW5pdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbiwgciwgbywgbCwgaCwgYSwgYywgdSwgZiwgZCwgbSwgdiwgcCwgZywgdywgYiwgeCkge1xuICAgICAgICB0aGlzLlR5cGUgPSB0O1xuICAgICAgICB0aGlzLm5hbWUgPSBlO1xuICAgICAgICB0aGlzLmFsaWFzZXMgPSBpO1xuICAgICAgICB0aGlzLmtleSA9IHM7XG4gICAgICAgIHRoaXMuY2FjaGUgPSBuO1xuICAgICAgICB0aGlzLmNhcHR1cmUgPSByO1xuICAgICAgICB0aGlzLnRlbXBsYXRlID0gbztcbiAgICAgICAgdGhpcy5pbnN0cnVjdGlvbnMgPSBsO1xuICAgICAgICB0aGlzLmRlcGVuZGVuY2llcyA9IGg7XG4gICAgICAgIHRoaXMuaW5qZWN0YWJsZSA9IGE7XG4gICAgICAgIHRoaXMubmVlZHNDb21waWxlID0gYztcbiAgICAgICAgdGhpcy5zdXJyb2dhdGVzID0gdTtcbiAgICAgICAgdGhpcy5iaW5kYWJsZXMgPSBmO1xuICAgICAgICB0aGlzLmNoaWxkcmVuT2JzZXJ2ZXJzID0gZDtcbiAgICAgICAgdGhpcy5jb250YWluZXJsZXNzID0gbTtcbiAgICAgICAgdGhpcy5pc1N0cmljdEJpbmRpbmcgPSB2O1xuICAgICAgICB0aGlzLnNoYWRvd09wdGlvbnMgPSBwO1xuICAgICAgICB0aGlzLmhhc1Nsb3RzID0gZztcbiAgICAgICAgdGhpcy5lbmhhbmNlID0gdztcbiAgICAgICAgdGhpcy53YXRjaGVzID0gYjtcbiAgICAgICAgdGhpcy5wcm9jZXNzQ29udGVudCA9IHg7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0LCBlID0gbnVsbCkge1xuICAgICAgICBpZiAobnVsbCA9PT0gZSkge1xuICAgICAgICAgICAgY29uc3QgaSA9IHQ7XG4gICAgICAgICAgICBpZiAoQXQoaSkpIHRocm93IG5ldyBFcnJvcihgQVVSMDc2MToke3R9YCk7XG4gICAgICAgICAgICBjb25zdCBzID0gZChcIm5hbWVcIiwgaSwgdGkpO1xuICAgICAgICAgICAgaWYgKEN0KGkuVHlwZSkpIGUgPSBpLlR5cGU7IGVsc2UgZSA9IHNpLmdlbmVyYXRlVHlwZShtKHMpKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgQ3VzdG9tRWxlbWVudERlZmluaXRpb24oZSwgcywgZihpLmFsaWFzZXMpLCBkKFwia2V5XCIsIGksICgoKSA9PiBzaS5rZXlGcm9tKHMpKSksIGQoXCJjYWNoZVwiLCBpLCBHZSksIGQoXCJjYXB0dXJlXCIsIGksIEtlKSwgZChcInRlbXBsYXRlXCIsIGksIFhlKSwgZihpLmluc3RydWN0aW9ucyksIGYoaS5kZXBlbmRlbmNpZXMpLCBkKFwiaW5qZWN0YWJsZVwiLCBpLCBYZSksIGQoXCJuZWVkc0NvbXBpbGVcIiwgaSwgWWUpLCBmKGkuc3Vycm9nYXRlcyksIEJ0LmZyb20oZSwgaS5iaW5kYWJsZXMpLCBTZS5mcm9tKGkuY2hpbGRyZW5PYnNlcnZlcnMpLCBkKFwiY29udGFpbmVybGVzc1wiLCBpLCBLZSksIGQoXCJpc1N0cmljdEJpbmRpbmdcIiwgaSwgS2UpLCBkKFwic2hhZG93T3B0aW9uc1wiLCBpLCBYZSksIGQoXCJoYXNTbG90c1wiLCBpLCBLZSksIGQoXCJlbmhhbmNlXCIsIGksIEtlKSwgZChcIndhdGNoZXNcIiwgaSwgUWUpLCB2KFwicHJvY2Vzc0NvbnRlbnRcIiwgZSwgWGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXQodCkpIHJldHVybiBuZXcgQ3VzdG9tRWxlbWVudERlZmluaXRpb24oZSwgdCwgZihpaShlLCBcImFsaWFzZXNcIiksIGUuYWxpYXNlcyksIHNpLmtleUZyb20odCksIHYoXCJjYWNoZVwiLCBlLCBHZSksIHYoXCJjYXB0dXJlXCIsIGUsIEtlKSwgdihcInRlbXBsYXRlXCIsIGUsIFhlKSwgZihpaShlLCBcImluc3RydWN0aW9uc1wiKSwgZS5pbnN0cnVjdGlvbnMpLCBmKGlpKGUsIFwiZGVwZW5kZW5jaWVzXCIpLCBlLmRlcGVuZGVuY2llcyksIHYoXCJpbmplY3RhYmxlXCIsIGUsIFhlKSwgdihcIm5lZWRzQ29tcGlsZVwiLCBlLCBZZSksIGYoaWkoZSwgXCJzdXJyb2dhdGVzXCIpLCBlLnN1cnJvZ2F0ZXMpLCBCdC5mcm9tKGUsIC4uLkJ0LmdldEFsbChlKSwgaWkoZSwgXCJiaW5kYWJsZXNcIiksIGUuYmluZGFibGVzKSwgU2UuZnJvbSguLi5TZS5nZXRBbGwoZSksIGlpKGUsIFwiY2hpbGRyZW5PYnNlcnZlcnNcIiksIGUuY2hpbGRyZW5PYnNlcnZlcnMpLCB2KFwiY29udGFpbmVybGVzc1wiLCBlLCBLZSksIHYoXCJpc1N0cmljdEJpbmRpbmdcIiwgZSwgS2UpLCB2KFwic2hhZG93T3B0aW9uc1wiLCBlLCBYZSksIHYoXCJoYXNTbG90c1wiLCBlLCBLZSksIHYoXCJlbmhhbmNlXCIsIGUsIEtlKSwgZihfZS5nZXRBbm5vdGF0aW9uKGUpLCBlLndhdGNoZXMpLCB2KFwicHJvY2Vzc0NvbnRlbnRcIiwgZSwgWGUpKTtcbiAgICAgICAgY29uc3QgaSA9IGQoXCJuYW1lXCIsIHQsIHRpKTtcbiAgICAgICAgcmV0dXJuIG5ldyBDdXN0b21FbGVtZW50RGVmaW5pdGlvbihlLCBpLCBmKGlpKGUsIFwiYWxpYXNlc1wiKSwgdC5hbGlhc2VzLCBlLmFsaWFzZXMpLCBzaS5rZXlGcm9tKGkpLCBwKFwiY2FjaGVcIiwgdCwgZSwgR2UpLCBwKFwiY2FwdHVyZVwiLCB0LCBlLCBLZSksIHAoXCJ0ZW1wbGF0ZVwiLCB0LCBlLCBYZSksIGYoaWkoZSwgXCJpbnN0cnVjdGlvbnNcIiksIHQuaW5zdHJ1Y3Rpb25zLCBlLmluc3RydWN0aW9ucyksIGYoaWkoZSwgXCJkZXBlbmRlbmNpZXNcIiksIHQuZGVwZW5kZW5jaWVzLCBlLmRlcGVuZGVuY2llcyksIHAoXCJpbmplY3RhYmxlXCIsIHQsIGUsIFhlKSwgcChcIm5lZWRzQ29tcGlsZVwiLCB0LCBlLCBZZSksIGYoaWkoZSwgXCJzdXJyb2dhdGVzXCIpLCB0LnN1cnJvZ2F0ZXMsIGUuc3Vycm9nYXRlcyksIEJ0LmZyb20oZSwgLi4uQnQuZ2V0QWxsKGUpLCBpaShlLCBcImJpbmRhYmxlc1wiKSwgZS5iaW5kYWJsZXMsIHQuYmluZGFibGVzKSwgU2UuZnJvbSguLi5TZS5nZXRBbGwoZSksIGlpKGUsIFwiY2hpbGRyZW5PYnNlcnZlcnNcIiksIGUuY2hpbGRyZW5PYnNlcnZlcnMsIHQuY2hpbGRyZW5PYnNlcnZlcnMpLCBwKFwiY29udGFpbmVybGVzc1wiLCB0LCBlLCBLZSksIHAoXCJpc1N0cmljdEJpbmRpbmdcIiwgdCwgZSwgS2UpLCBwKFwic2hhZG93T3B0aW9uc1wiLCB0LCBlLCBYZSksIHAoXCJoYXNTbG90c1wiLCB0LCBlLCBLZSksIHAoXCJlbmhhbmNlXCIsIHQsIGUsIEtlKSwgZih0LndhdGNoZXMsIF9lLmdldEFubm90YXRpb24oZSksIGUud2F0Y2hlcyksIHAoXCJwcm9jZXNzQ29udGVudFwiLCB0LCBlLCBYZSkpO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0T3JDcmVhdGUodCkge1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEN1c3RvbUVsZW1lbnREZWZpbml0aW9uKSByZXR1cm4gdDtcbiAgICAgICAgaWYgKEhlLmhhcyh0KSkgcmV0dXJuIEhlLmdldCh0KTtcbiAgICAgICAgY29uc3QgZSA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZSh0KTtcbiAgICAgICAgSGUuc2V0KHQsIGUpO1xuICAgICAgICBjdChaZSwgZSwgZS5UeXBlKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgY29uc3Qge1R5cGU6IGUsIGtleTogaSwgYWxpYXNlczogc30gPSB0aGlzO1xuICAgICAgICBpZiAoIXQuaGFzKGksIGZhbHNlKSkge1xuICAgICAgICAgICAgYy50cmFuc2llbnQoaSwgZSkucmVnaXN0ZXIodCk7XG4gICAgICAgICAgICBjLmFsaWFzVG8oaSwgZSkucmVnaXN0ZXIodCk7XG4gICAgICAgICAgICBMKHMsIHNpLCBpLCB0KTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgemUgPSB7XG4gICAgbmFtZTogdm9pZCAwLFxuICAgIHNlYXJjaFBhcmVudHM6IGZhbHNlLFxuICAgIG9wdGlvbmFsOiBmYWxzZVxufTtcblxuY29uc3QgR2UgPSAoKSA9PiAwO1xuXG5jb25zdCBYZSA9ICgpID0+IG51bGw7XG5cbmNvbnN0IEtlID0gKCkgPT4gZmFsc2U7XG5cbmNvbnN0IFllID0gKCkgPT4gdHJ1ZTtcblxuY29uc3QgUWUgPSAoKSA9PiBoO1xuXG5jb25zdCBaZSA9IG10KFwiY3VzdG9tLWVsZW1lbnRcIik7XG5cbmNvbnN0IEplID0gdCA9PiBgJHtaZX06JHt0fWA7XG5cbmNvbnN0IHRpID0gKCgpID0+IHtcbiAgICBsZXQgdCA9IDA7XG4gICAgcmV0dXJuICgpID0+IGB1bm5hbWVkLSR7Kyt0fWA7XG59KSgpO1xuXG5jb25zdCBlaSA9ICh0LCBlLCBpKSA9PiB7XG4gICAgY3QoZHQoZSksIGksIHQpO1xufTtcblxuY29uc3QgaWkgPSAodCwgZSkgPT4gaHQoZHQoZSksIHQpO1xuXG5jb25zdCBzaSA9IE9iamVjdC5mcmVlemUoe1xuICAgIG5hbWU6IFplLFxuICAgIGtleUZyb206IEplLFxuICAgIGlzVHlwZSh0KSB7XG4gICAgICAgIHJldHVybiBDdCh0KSAmJiBhdChaZSwgdCk7XG4gICAgfSxcbiAgICBmb3IodCwgZSA9IHplKSB7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUubmFtZSAmJiB0cnVlICE9PSBlLnNlYXJjaFBhcmVudHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBpcyh0LCBaZSk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gaSkge1xuICAgICAgICAgICAgICAgIGlmICh0cnVlID09PSBlLm9wdGlvbmFsKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwNzYyXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gZS5uYW1lKSB7XG4gICAgICAgICAgICBpZiAodHJ1ZSAhPT0gZS5zZWFyY2hQYXJlbnRzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IGlzKHQsIFplKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gaSkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDc2M1wiKTtcbiAgICAgICAgICAgICAgICBpZiAoaS5pcyhlLm5hbWUpKSByZXR1cm4gaTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgaSA9IHQ7XG4gICAgICAgICAgICBsZXQgcyA9IGZhbHNlO1xuICAgICAgICAgICAgd2hpbGUgKG51bGwgIT09IGkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gaXMoaSwgWmUpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSB0KSB7XG4gICAgICAgICAgICAgICAgICAgIHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodC5pcyhlLm5hbWUpKSByZXR1cm4gdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaSA9IGFzKGkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHMpIHJldHVybjtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFVUjA3NjRcIik7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IGkgPSB0O1xuICAgICAgICB3aGlsZSAobnVsbCAhPT0gaSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGlzKGksIFplKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSB0KSByZXR1cm4gdDtcbiAgICAgICAgICAgIGkgPSBhcyhpKTtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwNzY1XCIpO1xuICAgIH0sXG4gICAgZGVmaW5lKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZSh0LCBlKTtcbiAgICAgICAgY3QoWmUsIGksIGkuVHlwZSk7XG4gICAgICAgIGN0KFplLCBpLCBpKTtcbiAgICAgICAgdnQoaS5UeXBlLCBaZSk7XG4gICAgICAgIHJldHVybiBpLlR5cGU7XG4gICAgfSxcbiAgICBnZXREZWZpbml0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGh0KFplLCB0KTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwNzYwOiR7dC5uYW1lfWApO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9LFxuICAgIGFubm90YXRlOiBlaSxcbiAgICBnZXRBbm5vdGF0aW9uOiBpaSxcbiAgICBnZW5lcmF0ZU5hbWU6IHRpLFxuICAgIGNyZWF0ZUluamVjdGFibGUoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBmdW5jdGlvbihlLCBpLCBzKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gbC5nZXRPckNyZWF0ZUFubm90YXRpb25QYXJhbVR5cGVzKGUpO1xuICAgICAgICAgICAgbltzXSA9IHQ7XG4gICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgfTtcbiAgICAgICAgdC5yZWdpc3RlciA9IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShlLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpLmhhcyh0LCB0cnVlKSkgcmV0dXJuIGkuZ2V0KHQpOyBlbHNlIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0O1xuICAgIH0sXG4gICAgZ2VuZXJhdGVUeXBlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIHZhbHVlOiBcIlwiLFxuICAgICAgICAgICAgd3JpdGFibGU6IGZhbHNlLFxuICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZSA9IHt9O1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oaSwgcyA9IGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBjbGFzcyB7fTtcbiAgICAgICAgICAgIHQudmFsdWUgPSBpO1xuICAgICAgICAgICAgUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eShuLCBcIm5hbWVcIiwgdCk7XG4gICAgICAgICAgICBpZiAocyAhPT0gZSkgT2JqZWN0LmFzc2lnbihuLnByb3RvdHlwZSwgcyk7XG4gICAgICAgICAgICByZXR1cm4gbjtcbiAgICAgICAgfTtcbiAgICB9KClcbn0pO1xuXG5jb25zdCBuaSA9IGR0KFwicHJvY2Vzc0NvbnRlbnRcIik7XG5cbmZ1bmN0aW9uIHJpKHQpIHtcbiAgICByZXR1cm4gdm9pZCAwID09PSB0ID8gZnVuY3Rpb24odCwgZSwgaSkge1xuICAgICAgICBjdChuaSwgb2kodCwgZSksIHQpO1xuICAgIH0gOiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHQgPSBvaShlLCB0KTtcbiAgICAgICAgY29uc3QgaSA9IGh0KFplLCBlKTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gaSkgaS5wcm9jZXNzQ29udGVudCA9IHQ7IGVsc2UgY3QobmksIHQsIGUpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBvaSh0LCBlKSB7XG4gICAgaWYgKEF0KGUpKSBlID0gdFtlXTtcbiAgICBpZiAoIUN0KGUpKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3NjY6JHt0eXBlb2YgZX1gKTtcbiAgICByZXR1cm4gZTtcbn1cblxuY2xhc3MgQ2xhc3NBdHRyaWJ1dGVBY2Nlc3NvciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLm9iaiA9IHQ7XG4gICAgICAgIHRoaXMudHlwZSA9IDIgfCA0O1xuICAgICAgICB0aGlzLnZhbHVlID0gXCJcIjtcbiAgICAgICAgdGhpcy5vdiA9IFwiXCI7XG4gICAgICAgIHRoaXMuSiA9IHt9O1xuICAgICAgICB0aGlzLnR0ID0gMDtcbiAgICAgICAgdGhpcy5IID0gZmFsc2U7XG4gICAgfVxuICAgIGdldCBkb05vdENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh0LCBlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgICAgICB0aGlzLkggPSB0ICE9PSB0aGlzLm92O1xuICAgICAgICBpZiAoMCA9PT0gKDI1NiAmIGUpKSB0aGlzLksoKTtcbiAgICB9XG4gICAgSygpIHtcbiAgICAgICAgaWYgKHRoaXMuSCkge1xuICAgICAgICAgICAgdGhpcy5IID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLko7XG4gICAgICAgICAgICBjb25zdCBpID0gbGkodCk7XG4gICAgICAgICAgICBsZXQgcyA9IHRoaXMudHQ7XG4gICAgICAgICAgICB0aGlzLm92ID0gdDtcbiAgICAgICAgICAgIGlmIChpLmxlbmd0aCA+IDApIHRoaXMuZXQoaSk7XG4gICAgICAgICAgICB0aGlzLnR0ICs9IDE7XG4gICAgICAgICAgICBpZiAoMCA9PT0gcykgcmV0dXJuO1xuICAgICAgICAgICAgcyAtPSAxO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IGluIGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoIU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLCB0KSB8fCBlW3RdICE9PSBzKSBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB0aGlzLm9iai5jbGFzc0xpc3QucmVtb3ZlKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGV0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMub2JqO1xuICAgICAgICBjb25zdCBpID0gdC5sZW5ndGg7XG4gICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGZvciAoO3MgPCBpOyBzKyspIHtcbiAgICAgICAgICAgIG4gPSB0W3NdO1xuICAgICAgICAgICAgaWYgKDAgPT09IG4ubGVuZ3RoKSBjb250aW51ZTtcbiAgICAgICAgICAgIHRoaXMuSltuXSA9IHRoaXMudHQ7XG4gICAgICAgICAgICBlLmNsYXNzTGlzdC5hZGQobik7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmZ1bmN0aW9uIGxpKHQpIHtcbiAgICBpZiAoQXQodCkpIHJldHVybiBoaSh0KTtcbiAgICBpZiAoXCJvYmplY3RcIiAhPT0gdHlwZW9mIHQpIHJldHVybiBoO1xuICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubGVuZ3RoO1xuICAgICAgICBpZiAoZSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgICAgIGZvciAoO2UgPiBzOyArK3MpIGkucHVzaCguLi5saSh0W3NdKSk7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfSBlbHNlIHJldHVybiBoO1xuICAgIH1cbiAgICBjb25zdCBlID0gW107XG4gICAgbGV0IGk7XG4gICAgZm9yIChpIGluIHQpIGlmIChCb29sZWFuKHRbaV0pKSBpZiAoaS5pbmNsdWRlcyhcIiBcIikpIGUucHVzaCguLi5oaShpKSk7IGVsc2UgZS5wdXNoKGkpO1xuICAgIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBoaSh0KSB7XG4gICAgY29uc3QgZSA9IHQubWF0Y2goL1xcUysvZyk7XG4gICAgaWYgKG51bGwgPT09IGUpIHJldHVybiBoO1xuICAgIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBhaSguLi50KSB7XG4gICAgcmV0dXJuIG5ldyBDU1NNb2R1bGVzUHJvY2Vzc29yUmVnaXN0cnkodCk7XG59XG5cbmNsYXNzIENTU01vZHVsZXNQcm9jZXNzb3JSZWdpc3RyeSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLm1vZHVsZXMgPSB0O1xuICAgIH1cbiAgICByZWdpc3Rlcih0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBjb25zdCBpID0gT2JqZWN0LmFzc2lnbih7fSwgLi4udGhpcy5tb2R1bGVzKTtcbiAgICAgICAgY29uc3QgcyA9IE1lLmRlZmluZSh7XG4gICAgICAgICAgICBuYW1lOiBcImNsYXNzXCIsXG4gICAgICAgICAgICBiaW5kYWJsZXM6IFsgXCJ2YWx1ZVwiIF1cbiAgICAgICAgfSwgKGUgPSBjbGFzcyBDdXN0b21BdHRyaWJ1dGVDbGFzcyB7XG4gICAgICAgICAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJpbmRpbmcoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZUNoYW5nZWQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbHVlQ2hhbmdlZCgpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMudmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5lbGVtZW50LmNsYXNzTmFtZSA9IGxpKHRoaXMudmFsdWUpLm1hcCgodCA9PiBpW3RdIHx8IHQpKS5qb2luKFwiIFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSwgZS5pbmplY3QgPSBbIG5zIF0sIGUpKTtcbiAgICAgICAgdC5yZWdpc3RlcihzKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGNpKC4uLnQpIHtcbiAgICByZXR1cm4gbmV3IFNoYWRvd0RPTVJlZ2lzdHJ5KHQpO1xufVxuXG5jb25zdCB1aSA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSVNoYWRvd0RPTVN0eWxlRmFjdG9yeVwiLCAodCA9PiB0LmNhY2hlZENhbGxiYWNrKCh0ID0+IHtcbiAgICBpZiAoQWRvcHRlZFN0eWxlU2hlZXRzU3R5bGVzLnN1cHBvcnRlZCh0LmdldChLdCkpKSByZXR1cm4gdC5nZXQoQWRvcHRlZFN0eWxlU2hlZXRzU3R5bGVzRmFjdG9yeSk7XG4gICAgcmV0dXJuIHQuZ2V0KFN0eWxlRWxlbWVudFN0eWxlc0ZhY3RvcnkpO1xufSkpKSk7XG5cbmNsYXNzIFNoYWRvd0RPTVJlZ2lzdHJ5IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuY3NzID0gdDtcbiAgICB9XG4gICAgcmVnaXN0ZXIodCkge1xuICAgICAgICBjb25zdCBlID0gdC5nZXQoZGkpO1xuICAgICAgICBjb25zdCBpID0gdC5nZXQodWkpO1xuICAgICAgICB0LnJlZ2lzdGVyKGMuaW5zdGFuY2UoZmksIGkuY3JlYXRlU3R5bGVzKHRoaXMuY3NzLCBlKSkpO1xuICAgIH1cbn1cblxuY2xhc3MgQWRvcHRlZFN0eWxlU2hlZXRzU3R5bGVzRmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnAgPSB0O1xuICAgICAgICB0aGlzLmNhY2hlID0gbmV3IE1hcDtcbiAgICB9XG4gICAgY3JlYXRlU3R5bGVzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBZG9wdGVkU3R5bGVTaGVldHNTdHlsZXModGhpcy5wLCB0LCB0aGlzLmNhY2hlLCBlKTtcbiAgICB9XG59XG5cbkFkb3B0ZWRTdHlsZVNoZWV0c1N0eWxlc0ZhY3RvcnkuaW5qZWN0ID0gWyBLdCBdO1xuXG5jbGFzcyBTdHlsZUVsZW1lbnRTdHlsZXNGYWN0b3J5IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMucCA9IHQ7XG4gICAgfVxuICAgIGNyZWF0ZVN0eWxlcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgU3R5bGVFbGVtZW50U3R5bGVzKHRoaXMucCwgdCwgZSk7XG4gICAgfVxufVxuXG5TdHlsZUVsZW1lbnRTdHlsZXNGYWN0b3J5LmluamVjdCA9IFsgS3QgXTtcblxuY29uc3QgZmkgPSBsLmNyZWF0ZUludGVyZmFjZShcIklTaGFkb3dET01TdHlsZXNcIik7XG5cbmNvbnN0IGRpID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJU2hhZG93RE9NR2xvYmFsU3R5bGVzXCIsICh0ID0+IHQuaW5zdGFuY2Uoe1xuICAgIGFwcGx5VG86IG9cbn0pKSk7XG5cbmNsYXNzIEFkb3B0ZWRTdHlsZVNoZWV0c1N0eWxlcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcyA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zaGFyZWRTdHlsZXMgPSBzO1xuICAgICAgICB0aGlzLnN0eWxlU2hlZXRzID0gZS5tYXAoKGUgPT4ge1xuICAgICAgICAgICAgbGV0IHM7XG4gICAgICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIHQuQ1NTU3R5bGVTaGVldCkgcyA9IGU7IGVsc2Uge1xuICAgICAgICAgICAgICAgIHMgPSBpLmdldChlKTtcbiAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBzKSB7XG4gICAgICAgICAgICAgICAgICAgIHMgPSBuZXcgdC5DU1NTdHlsZVNoZWV0O1xuICAgICAgICAgICAgICAgICAgICBzLnJlcGxhY2VTeW5jKGUpO1xuICAgICAgICAgICAgICAgICAgICBpLnNldChlLCBzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzdGF0aWMgc3VwcG9ydGVkKHQpIHtcbiAgICAgICAgcmV0dXJuIFwiYWRvcHRlZFN0eWxlU2hlZXRzXCIgaW4gdC5TaGFkb3dSb290LnByb3RvdHlwZTtcbiAgICB9XG4gICAgYXBwbHlUbyh0KSB7XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLnNoYXJlZFN0eWxlcykgdGhpcy5zaGFyZWRTdHlsZXMuYXBwbHlUbyh0KTtcbiAgICAgICAgdC5hZG9wdGVkU3R5bGVTaGVldHMgPSBbIC4uLnQuYWRvcHRlZFN0eWxlU2hlZXRzLCAuLi50aGlzLnN0eWxlU2hlZXRzIF07XG4gICAgfVxufVxuXG5jbGFzcyBTdHlsZUVsZW1lbnRTdHlsZXMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkgPSBudWxsKSB7XG4gICAgICAgIHRoaXMucCA9IHQ7XG4gICAgICAgIHRoaXMubG9jYWxTdHlsZXMgPSBlO1xuICAgICAgICB0aGlzLnNoYXJlZFN0eWxlcyA9IGk7XG4gICAgfVxuICAgIGFwcGx5VG8odCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5sb2NhbFN0eWxlcztcbiAgICAgICAgY29uc3QgaSA9IHRoaXMucDtcbiAgICAgICAgZm9yIChsZXQgcyA9IGUubGVuZ3RoIC0gMTsgcyA+IC0xOyAtLXMpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBpLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtcbiAgICAgICAgICAgIG4uaW5uZXJIVE1MID0gZVtzXTtcbiAgICAgICAgICAgIHQucHJlcGVuZChuKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobnVsbCAhPT0gdGhpcy5zaGFyZWRTdHlsZXMpIHRoaXMuc2hhcmVkU3R5bGVzLmFwcGx5VG8odCk7XG4gICAgfVxufVxuXG5jb25zdCBtaSA9IHtcbiAgICBzaGFkb3dET00odCkge1xuICAgICAgICByZXR1cm4geGUuYmVmb3JlQ3JlYXRlKGcsIChlID0+IHtcbiAgICAgICAgICAgIGlmIChudWxsICE9IHQuc2hhcmVkU3R5bGVzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IGUuZ2V0KHVpKTtcbiAgICAgICAgICAgICAgICBlLnJlZ2lzdGVyKGMuaW5zdGFuY2UoZGksIGkuY3JlYXRlU3R5bGVzKHQuc2hhcmVkU3R5bGVzLCBudWxsKSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgfVxufTtcblxuY29uc3Qge2VudGVyOiB2aSwgZXhpdDogcGl9ID0gcTtcblxuY29uc3Qge3dyYXA6IGdpLCB1bndyYXA6IHdpfSA9IE07XG5cbmNsYXNzIENvbXB1dGVkV2F0Y2hlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbikge1xuICAgICAgICB0aGlzLm9iaiA9IHQ7XG4gICAgICAgIHRoaXMuZ2V0ID0gaTtcbiAgICAgICAgdGhpcy5jYiA9IHM7XG4gICAgICAgIHRoaXMudXNlUHJveHkgPSBuO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgIHRoaXMucnVubmluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLm9MID0gZTtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLnJ1bigpO1xuICAgIH1cbiAgICBoYW5kbGVDb2xsZWN0aW9uQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLnJ1bigpO1xuICAgIH1cbiAgICAkYmluZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNCb3VuZCkgcmV0dXJuO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSB0cnVlO1xuICAgICAgICB0aGlzLmNvbXB1dGUoKTtcbiAgICB9XG4gICAgJHVuYmluZCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgIHRoaXMub2JzLmNsZWFyQWxsKCk7XG4gICAgfVxuICAgIHJ1bigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQgfHwgdGhpcy5ydW5uaW5nKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLm9iajtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMudmFsdWU7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmNvbXB1dGUoKTtcbiAgICAgICAgaWYgKCFPYmplY3QuaXMoaSwgZSkpIHRoaXMuY2IuY2FsbCh0LCBpLCBlLCB0KTtcbiAgICB9XG4gICAgY29tcHV0ZSgpIHtcbiAgICAgICAgdGhpcy5ydW5uaW5nID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5vYnMudmVyc2lvbisrO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdmkodGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52YWx1ZSA9IHdpKHRoaXMuZ2V0LmNhbGwodm9pZCAwLCB0aGlzLnVzZVByb3h5ID8gZ2kodGhpcy5vYmopIDogdGhpcy5vYmosIHRoaXMpKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMub2JzLmNsZWFyKCk7XG4gICAgICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIHBpKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jbGFzcyBFeHByZXNzaW9uV2F0Y2hlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbikge1xuICAgICAgICB0aGlzLnNjb3BlID0gdDtcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gZTtcbiAgICAgICAgdGhpcy5vTCA9IGk7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IHM7XG4gICAgICAgIHRoaXMuY2FsbGJhY2sgPSBuO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgIHRoaXMub2JqID0gdC5iaW5kaW5nQ29udGV4dDtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZXhwcmVzc2lvbjtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMub2JqO1xuICAgICAgICBjb25zdCBzID0gdGhpcy52YWx1ZTtcbiAgICAgICAgY29uc3QgbiA9IDEwMDgyID09PSBlLiRraW5kICYmIDEgPT09IHRoaXMub2JzLmNvdW50O1xuICAgICAgICBpZiAoIW4pIHtcbiAgICAgICAgICAgIHRoaXMub2JzLnZlcnNpb24rKztcbiAgICAgICAgICAgIHQgPSBlLmV2YWx1YXRlKDAsIHRoaXMuc2NvcGUsIHRoaXMubG9jYXRvciwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLm9icy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghT2JqZWN0LmlzKHQsIHMpKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdDtcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2suY2FsbChpLCB0LCBzLCBpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAkYmluZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNCb3VuZCkgcmV0dXJuO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSB0cnVlO1xuICAgICAgICB0aGlzLm9icy52ZXJzaW9uKys7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUoMCwgdGhpcy5zY29wZSwgdGhpcy5sb2NhdG9yLCB0aGlzKTtcbiAgICAgICAgdGhpcy5vYnMuY2xlYXIoKTtcbiAgICB9XG4gICAgJHVuYmluZCgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQm91bmQpIHJldHVybjtcbiAgICAgICAgdGhpcy5pc0JvdW5kID0gZmFsc2U7XG4gICAgICAgIHRoaXMub2JzLmNsZWFyQWxsKCk7XG4gICAgICAgIHRoaXMudmFsdWUgPSB2b2lkIDA7XG4gICAgfVxufVxuXG4kKENvbXB1dGVkV2F0Y2hlcik7XG5cbiQoRXhwcmVzc2lvbldhdGNoZXIpO1xuXG5jb25zdCBiaSA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSUxpZmVjeWNsZUhvb2tzXCIpO1xuXG5jbGFzcyBMaWZlY3ljbGVIb29rc0VudHJ5IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZGVmaW5pdGlvbiA9IHQ7XG4gICAgICAgIHRoaXMuaW5zdGFuY2UgPSBlO1xuICAgIH1cbn1cblxuY2xhc3MgTGlmZWN5Y2xlSG9va3NEZWZpbml0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuVHlwZSA9IHQ7XG4gICAgICAgIHRoaXMucHJvcGVydHlOYW1lcyA9IGU7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gbmV3IFNldDtcbiAgICAgICAgbGV0IHMgPSBlLnByb3RvdHlwZTtcbiAgICAgICAgd2hpbGUgKHMgIT09IE9iamVjdC5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhzKSkgaWYgKFwiY29uc3RydWN0b3JcIiAhPT0gdCkgaS5hZGQodCk7XG4gICAgICAgICAgICBzID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgTGlmZWN5Y2xlSG9va3NEZWZpbml0aW9uKGUsIGkpO1xuICAgIH1cbiAgICByZWdpc3Rlcih0KSB7XG4gICAgICAgIGMuc2luZ2xldG9uKGJpLCB0aGlzLlR5cGUpLnJlZ2lzdGVyKHQpO1xuICAgIH1cbn1cblxuY29uc3QgeGkgPSBuZXcgV2Vha01hcDtcblxuY29uc3QgeWkgPSBkdChcImxpZmVjeWNsZS1ob29rc1wiKTtcblxuY29uc3Qga2kgPSBPYmplY3QuZnJlZXplKHtcbiAgICBuYW1lOiB5aSxcbiAgICBkZWZpbmUodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gTGlmZWN5Y2xlSG9va3NEZWZpbml0aW9uLmNyZWF0ZSh0LCBlKTtcbiAgICAgICAgY3QoeWksIGksIGUpO1xuICAgICAgICB2dChlLCB5aSk7XG4gICAgICAgIHJldHVybiBpLlR5cGU7XG4gICAgfSxcbiAgICByZXNvbHZlKHQpIHtcbiAgICAgICAgbGV0IGUgPSB4aS5nZXQodCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHtcbiAgICAgICAgICAgIGUgPSBuZXcgTGlmZWN5Y2xlSG9va3NMb29rdXBJbXBsO1xuICAgICAgICAgICAgY29uc3QgaSA9IHQucm9vdDtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBpLmlkID09PSB0LmlkID8gdC5nZXRBbGwoYmkpIDogdC5oYXMoYmksIGZhbHNlKSA/IFsgLi4uaS5nZXRBbGwoYmkpLCAuLi50LmdldEFsbChiaSkgXSA6IGkuZ2V0QWxsKGJpKTtcbiAgICAgICAgICAgIGxldCBuO1xuICAgICAgICAgICAgbGV0IHI7XG4gICAgICAgICAgICBsZXQgbztcbiAgICAgICAgICAgIGxldCBsO1xuICAgICAgICAgICAgbGV0IGg7XG4gICAgICAgICAgICBmb3IgKG4gb2Ygcykge1xuICAgICAgICAgICAgICAgIHIgPSBodCh5aSwgbi5jb25zdHJ1Y3Rvcik7XG4gICAgICAgICAgICAgICAgbyA9IG5ldyBMaWZlY3ljbGVIb29rc0VudHJ5KHIsIG4pO1xuICAgICAgICAgICAgICAgIGZvciAobCBvZiByLnByb3BlcnR5TmFtZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaCA9IGVbbF07XG4gICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IGgpIGVbbF0gPSBbIG8gXTsgZWxzZSBoLnB1c2gobyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbn0pO1xuXG5jbGFzcyBMaWZlY3ljbGVIb29rc0xvb2t1cEltcGwge31cblxuZnVuY3Rpb24gQ2koKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHQoZSkge1xuICAgICAgICByZXR1cm4ga2kuZGVmaW5lKHt9LCBlKTtcbiAgICB9O1xufVxuXG5jb25zdCBBaSA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSVZpZXdGYWN0b3J5XCIpO1xuXG5jbGFzcyBWaWV3RmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmlzQ2FjaGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNhY2hlID0gbnVsbDtcbiAgICAgICAgdGhpcy5jYWNoZVNpemUgPSAtMTtcbiAgICAgICAgdGhpcy5uYW1lID0gZS5uYW1lO1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHQ7XG4gICAgICAgIHRoaXMuZGVmID0gZTtcbiAgICB9XG4gICAgc2V0Q2FjaGVTaXplKHQsIGUpIHtcbiAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGlmIChcIipcIiA9PT0gdCkgdCA9IFZpZXdGYWN0b3J5Lm1heENhY2hlU2l6ZTsgZWxzZSBpZiAoQXQodCkpIHQgPSBwYXJzZUludCh0LCAxMCk7XG4gICAgICAgICAgICBpZiAoLTEgPT09IHRoaXMuY2FjaGVTaXplIHx8ICFlKSB0aGlzLmNhY2hlU2l6ZSA9IHQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuY2FjaGVTaXplID4gMCkgdGhpcy5jYWNoZSA9IFtdOyBlbHNlIHRoaXMuY2FjaGUgPSBudWxsO1xuICAgICAgICB0aGlzLmlzQ2FjaGluZyA9IHRoaXMuY2FjaGVTaXplID4gMDtcbiAgICB9XG4gICAgY2FuUmV0dXJuVG9DYWNoZSh0KSB7XG4gICAgICAgIHJldHVybiBudWxsICE9IHRoaXMuY2FjaGUgJiYgdGhpcy5jYWNoZS5sZW5ndGggPCB0aGlzLmNhY2hlU2l6ZTtcbiAgICB9XG4gICAgdHJ5UmV0dXJuVG9DYWNoZSh0KSB7XG4gICAgICAgIGlmICh0aGlzLmNhblJldHVyblRvQ2FjaGUodCkpIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUucHVzaCh0KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY3JlYXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY2FjaGU7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBpZiAobnVsbCAhPSBlICYmIGUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgaSA9IGUucG9wKCk7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgICAgICBpID0gQ29udHJvbGxlci4kdmlldyh0aGlzLCB0KTtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxufVxuXG5WaWV3RmFjdG9yeS5tYXhDYWNoZVNpemUgPSA2NTUzNTtcblxuY29uc3QgU2kgPSBuZXcgV2Vha1NldDtcblxuZnVuY3Rpb24gUmkodCkge1xuICAgIHJldHVybiAhU2kuaGFzKHQpO1xufVxuXG5mdW5jdGlvbiBFaSh0KSB7XG4gICAgU2kuYWRkKHQpO1xuICAgIHJldHVybiBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5jcmVhdGUodCk7XG59XG5cbmNvbnN0IEJpID0gbXQoXCJ2aWV3c1wiKTtcblxuY29uc3QgSWkgPSBPYmplY3QuZnJlZXplKHtcbiAgICBuYW1lOiBCaSxcbiAgICBoYXModCkge1xuICAgICAgICByZXR1cm4gQ3QodCkgJiYgKGF0KEJpLCB0KSB8fCBcIiR2aWV3c1wiIGluIHQpO1xuICAgIH0sXG4gICAgZ2V0KHQpIHtcbiAgICAgICAgaWYgKEN0KHQpICYmIFwiJHZpZXdzXCIgaW4gdCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuJHZpZXdzO1xuICAgICAgICAgICAgY29uc3QgaSA9IGUuZmlsdGVyKFJpKS5tYXAoRWkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIGkpIElpLmFkZCh0LCBlKTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZSA9IGh0KEJpLCB0KTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgY3QoQmksIGUgPSBbXSwgdCk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH0sXG4gICAgYWRkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZShlKTtcbiAgICAgICAgbGV0IHMgPSBodChCaSwgdCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHMpIGN0KEJpLCBzID0gWyBpIF0sIHQpOyBlbHNlIHMucHVzaChpKTtcbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfVxufSk7XG5cbmZ1bmN0aW9uIFRpKHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oZSkge1xuICAgICAgICBJaS5hZGQoZSwgdCk7XG4gICAgfTtcbn1cblxuY29uc3QgRGkgPSBsLmNyZWF0ZUludGVyZmFjZShcIklWaWV3TG9jYXRvclwiLCAodCA9PiB0LnNpbmdsZXRvbihWaWV3TG9jYXRvcikpKTtcblxuY2xhc3MgVmlld0xvY2F0b3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLml0ID0gbmV3IFdlYWtNYXA7XG4gICAgICAgIHRoaXMuc3QgPSBuZXcgTWFwO1xuICAgIH1cbiAgICBnZXRWaWV3Q29tcG9uZW50Rm9yT2JqZWN0KHQsIGUpIHtcbiAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBJaS5oYXModC5jb25zdHJ1Y3RvcikgPyBJaS5nZXQodC5jb25zdHJ1Y3RvcikgOiBbXTtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBDdChlKSA/IGUodCwgaSkgOiB0aGlzLm50KGksIGUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucnQodCwgaSwgcyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJ0KHQsIGUsIGkpIHtcbiAgICAgICAgbGV0IHMgPSB0aGlzLml0LmdldCh0KTtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHMpIHtcbiAgICAgICAgICAgIHMgPSB7fTtcbiAgICAgICAgICAgIHRoaXMuaXQuc2V0KHQsIHMpO1xuICAgICAgICB9IGVsc2UgbiA9IHNbaV07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IG4pIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLm90KHQsIGUsIGkpO1xuICAgICAgICAgICAgbiA9IHNpLmRlZmluZShzaS5nZXREZWZpbml0aW9uKHIpLCBjbGFzcyBleHRlbmRzIHIge1xuICAgICAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgICAgICAgICBzdXBlcih0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNbaV0gPSBuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgICBvdCh0LCBlLCBpKSB7XG4gICAgICAgIGxldCBzID0gdGhpcy5zdC5nZXQodC5jb25zdHJ1Y3Rvcik7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBpZiAodm9pZCAwID09PSBzKSB7XG4gICAgICAgICAgICBzID0ge307XG4gICAgICAgICAgICB0aGlzLnN0LnNldCh0LmNvbnN0cnVjdG9yLCBzKTtcbiAgICAgICAgfSBlbHNlIG4gPSBzW2ldO1xuICAgICAgICBpZiAodm9pZCAwID09PSBuKSB7XG4gICAgICAgICAgICBuID0gc2kuZGVmaW5lKHRoaXMubHQoZSwgaSksIGNsYXNzIHtcbiAgICAgICAgICAgICAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlld01vZGVsID0gdDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZGVmaW5lKHQsIGUsIGkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMudmlld01vZGVsO1xuICAgICAgICAgICAgICAgICAgICB0LnNjb3BlID0gVS5mcm9tUGFyZW50KHQuc2NvcGUsIHMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBzLmRlZmluZSkgcmV0dXJuIHMuZGVmaW5lKHQsIGUsIGkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc3QgciA9IG4ucHJvdG90eXBlO1xuICAgICAgICAgICAgaWYgKFwiaHlkcmF0aW5nXCIgaW4gdCkgci5oeWRyYXRpbmcgPSBmdW5jdGlvbiB0KGUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5oeWRyYXRpbmcoZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKFwiaHlkcmF0ZWRcIiBpbiB0KSByLmh5ZHJhdGVkID0gZnVuY3Rpb24gdChlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3TW9kZWwuaHlkcmF0ZWQoZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKFwiY3JlYXRlZFwiIGluIHQpIHIuY3JlYXRlZCA9IGZ1bmN0aW9uIHQoZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudmlld01vZGVsLmNyZWF0ZWQoZSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKFwiYmluZGluZ1wiIGluIHQpIHIuYmluZGluZyA9IGZ1bmN0aW9uIHQoZSwgaSwgcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXdNb2RlbC5iaW5kaW5nKGUsIGksIHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChcImJvdW5kXCIgaW4gdCkgci5ib3VuZCA9IGZ1bmN0aW9uIHQoZSwgaSwgcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXdNb2RlbC5ib3VuZChlLCBpLCBzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoXCJhdHRhY2hpbmdcIiBpbiB0KSByLmF0dGFjaGluZyA9IGZ1bmN0aW9uIHQoZSwgaSwgcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXdNb2RlbC5hdHRhY2hpbmcoZSwgaSwgcyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKFwiYXR0YWNoZWRcIiBpbiB0KSByLmF0dGFjaGVkID0gZnVuY3Rpb24gdChlLCBpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld01vZGVsLmF0dGFjaGVkKGUsIGkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGlmIChcImRldGFjaGluZ1wiIGluIHQpIHIuZGV0YWNoaW5nID0gZnVuY3Rpb24gdChlLCBpLCBzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld01vZGVsLmRldGFjaGluZyhlLCBpLCBzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoXCJ1bmJpbmRpbmdcIiBpbiB0KSByLnVuYmluZGluZyA9IGZ1bmN0aW9uIHQoZSwgaSwgcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXdNb2RlbC51bmJpbmRpbmcoZSwgaSwgcyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKFwiZGlzcG9zZVwiIGluIHQpIHIuZGlzcG9zZSA9IGZ1bmN0aW9uIHQoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3TW9kZWwuZGlzcG9zZSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHNbaV0gPSBuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgICBudCh0LCBlKSB7XG4gICAgICAgIGlmIChlKSByZXR1cm4gZTtcbiAgICAgICAgaWYgKDEgPT09IHQubGVuZ3RoKSByZXR1cm4gdFswXS5uYW1lO1xuICAgICAgICByZXR1cm4gXCJkZWZhdWx0LXZpZXdcIjtcbiAgICB9XG4gICAgbHQodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdC5maW5kKCh0ID0+IHQubmFtZSA9PT0gZSkpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBpKSB0aHJvdyBuZXcgRXJyb3IoYENvdWxkIG5vdCBmaW5kIHZpZXc6ICR7ZX1gKTtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxufVxuXG5jb25zdCBQaSA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSVJlbmRlcmluZ1wiLCAodCA9PiB0LnNpbmdsZXRvbihSZW5kZXJpbmcpKSk7XG5cbmNsYXNzIFJlbmRlcmluZyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmh0ID0gbmV3IFdlYWtNYXA7XG4gICAgICAgIHRoaXMuYXQgPSBuZXcgV2Vha01hcDtcbiAgICAgICAgdGhpcy5jdCA9ICh0aGlzLnV0ID0gdC5yb290KS5nZXQoS3QpO1xuICAgICAgICB0aGlzLmZ0ID0gbmV3IEZyYWdtZW50Tm9kZVNlcXVlbmNlKHRoaXMuY3QsIHRoaXMuY3QuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtcbiAgICB9XG4gICAgZ2V0IHJlbmRlcmVycygpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgPT0gdGhpcy5ycyA/IHRoaXMucnMgPSB0aGlzLnV0LmdldEFsbChTcywgZmFsc2UpLnJlZHVjZSgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHRbZS5pbnN0cnVjdGlvblR5cGVdID0gZTtcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9KSwgd3QoKSkgOiB0aGlzLnJzO1xuICAgIH1cbiAgICBjb21waWxlKHQsIGUsIGkpIHtcbiAgICAgICAgaWYgKGZhbHNlICE9PSB0Lm5lZWRzQ29tcGlsZSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMuaHQ7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5nZXQoQXMpO1xuICAgICAgICAgICAgbGV0IHIgPSBzLmdldCh0KTtcbiAgICAgICAgICAgIGlmIChudWxsID09IHIpIHMuc2V0KHQsIHIgPSBuLmNvbXBpbGUodCwgZSwgaSkpOyBlbHNlIGUucmVnaXN0ZXIoLi4uci5kZXBlbmRlbmNpZXMpO1xuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIGdldFZpZXdGYWN0b3J5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBWaWV3RmFjdG9yeShlLCBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5nZXRPckNyZWF0ZSh0KSk7XG4gICAgfVxuICAgIGNyZWF0ZU5vZGVzKHQpIHtcbiAgICAgICAgaWYgKHRydWUgPT09IHQuZW5oYW5jZSkgcmV0dXJuIG5ldyBGcmFnbWVudE5vZGVTZXF1ZW5jZSh0aGlzLmN0LCB0LnRlbXBsYXRlKTtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmF0O1xuICAgICAgICBpZiAoaS5oYXModCkpIGUgPSBpLmdldCh0KTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5jdDtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBzLmRvY3VtZW50O1xuICAgICAgICAgICAgY29uc3QgciA9IHQudGVtcGxhdGU7XG4gICAgICAgICAgICBsZXQgbztcbiAgICAgICAgICAgIGlmIChudWxsID09PSByKSBlID0gbnVsbDsgZWxzZSBpZiAociBpbnN0YW5jZW9mIHMuTm9kZSkgaWYgKFwiVEVNUExBVEVcIiA9PT0gci5ub2RlTmFtZSkgZSA9IG4uYWRvcHROb2RlKHIuY29udGVudCk7IGVsc2UgKGUgPSBuLmFkb3B0Tm9kZShuLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSkpLmFwcGVuZENoaWxkKHIuY2xvbmVOb2RlKHRydWUpKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgbyA9IG4uY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuICAgICAgICAgICAgICAgIGlmIChBdChyKSkgby5pbm5lckhUTUwgPSByO1xuICAgICAgICAgICAgICAgIG4uYWRvcHROb2RlKGUgPSBvLmNvbnRlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaS5zZXQodCwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGwgPT0gZSA/IHRoaXMuZnQgOiBuZXcgRnJhZ21lbnROb2RlU2VxdWVuY2UodGhpcy5jdCwgZS5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgIH1cbiAgICByZW5kZXIodCwgZSwgaSwgcykge1xuICAgICAgICBjb25zdCBuID0gaS5pbnN0cnVjdGlvbnM7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLnJlbmRlcmVycztcbiAgICAgICAgY29uc3QgbyA9IGUubGVuZ3RoO1xuICAgICAgICBpZiAoZS5sZW5ndGggIT09IG4ubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3NTc6JHtvfTw+JHtuLmxlbmd0aH1gKTtcbiAgICAgICAgbGV0IGwgPSAwO1xuICAgICAgICBsZXQgaCA9IDA7XG4gICAgICAgIGxldCBhID0gMDtcbiAgICAgICAgbGV0IGM7XG4gICAgICAgIGxldCB1O1xuICAgICAgICBsZXQgZjtcbiAgICAgICAgaWYgKG8gPiAwKSB3aGlsZSAobyA+IGwpIHtcbiAgICAgICAgICAgIGMgPSBuW2xdO1xuICAgICAgICAgICAgZiA9IGVbbF07XG4gICAgICAgICAgICBoID0gMDtcbiAgICAgICAgICAgIGEgPSBjLmxlbmd0aDtcbiAgICAgICAgICAgIHdoaWxlIChhID4gaCkge1xuICAgICAgICAgICAgICAgIHUgPSBjW2hdO1xuICAgICAgICAgICAgICAgIHJbdS50eXBlXS5yZW5kZXIodCwgZiwgdSk7XG4gICAgICAgICAgICAgICAgKytoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKytsO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHMgJiYgbnVsbCAhPT0gcykge1xuICAgICAgICAgICAgYyA9IGkuc3Vycm9nYXRlcztcbiAgICAgICAgICAgIGlmICgoYSA9IGMubGVuZ3RoKSA+IDApIHtcbiAgICAgICAgICAgICAgICBoID0gMDtcbiAgICAgICAgICAgICAgICB3aGlsZSAoYSA+IGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdSA9IGNbaF07XG4gICAgICAgICAgICAgICAgICAgIHJbdS50eXBlXS5yZW5kZXIodCwgcywgdSk7XG4gICAgICAgICAgICAgICAgICAgICsraDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cblJlbmRlcmluZy5pbmplY3QgPSBbIGcgXTtcblxudmFyIE9pO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIm5vbmVcIl0gPSAwXSA9IFwibm9uZVwiO1xuICAgIHRbdFtcImhvc3RcIl0gPSAxXSA9IFwiaG9zdFwiO1xuICAgIHRbdFtcInNoYWRvd1Jvb3RcIl0gPSAyXSA9IFwic2hhZG93Um9vdFwiO1xuICAgIHRbdFtcImxvY2F0aW9uXCJdID0gM10gPSBcImxvY2F0aW9uXCI7XG59KShPaSB8fCAoT2kgPSB7fSkpO1xuXG5jb25zdCAkaSA9IHtcbiAgICBvcHRpb25hbDogdHJ1ZVxufTtcblxuY29uc3QgTGkgPSBuZXcgV2Vha01hcDtcblxuY2xhc3MgQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbiwgcikge1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IHQ7XG4gICAgICAgIHRoaXMudm1LaW5kID0gZTtcbiAgICAgICAgdGhpcy5kZWZpbml0aW9uID0gaTtcbiAgICAgICAgdGhpcy52aWV3RmFjdG9yeSA9IHM7XG4gICAgICAgIHRoaXMudmlld01vZGVsID0gbjtcbiAgICAgICAgdGhpcy5ob3N0ID0gcjtcbiAgICAgICAgdGhpcy5pZCA9IHcoXCJhdSRjb21wb25lbnRcIik7XG4gICAgICAgIHRoaXMuaGVhZCA9IG51bGw7XG4gICAgICAgIHRoaXMudGFpbCA9IG51bGw7XG4gICAgICAgIHRoaXMubmV4dCA9IG51bGw7XG4gICAgICAgIHRoaXMucGFyZW50ID0gbnVsbDtcbiAgICAgICAgdGhpcy5iaW5kaW5ncyA9IG51bGw7XG4gICAgICAgIHRoaXMuY2hpbGRyZW4gPSBudWxsO1xuICAgICAgICB0aGlzLmhhc0xvY2tlZFNjb3BlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuaXNTdHJpY3RCaW5kaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2NvcGUgPSBudWxsO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5ob3N0Q29udHJvbGxlciA9IG51bGw7XG4gICAgICAgIHRoaXMubW91bnRUYXJnZXQgPSAwO1xuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QgPSBudWxsO1xuICAgICAgICB0aGlzLm5vZGVzID0gbnVsbDtcbiAgICAgICAgdGhpcy5sb2NhdGlvbiA9IG51bGw7XG4gICAgICAgIHRoaXMubGlmZWN5Y2xlSG9va3MgPSBudWxsO1xuICAgICAgICB0aGlzLnN0YXRlID0gMDtcbiAgICAgICAgdGhpcy5kdCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnZ0ID0gaDtcbiAgICAgICAgdGhpcy5mbGFncyA9IDA7XG4gICAgICAgIHRoaXMuJGluaXRpYXRvciA9IG51bGw7XG4gICAgICAgIHRoaXMuJGZsYWdzID0gMDtcbiAgICAgICAgdGhpcy4kcmVzb2x2ZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy4kcmVqZWN0ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLiRwcm9taXNlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmd0ID0gMDtcbiAgICAgICAgdGhpcy53dCA9IDA7XG4gICAgICAgIHRoaXMuYnQgPSAwO1xuICAgICAgICB0aGlzLnIgPSB0LnJvb3QuZ2V0KFBpKTtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgIHRoaXMuaG9va3MgPSBuZXcgSG9va3NEZWZpbml0aW9uKG4pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICB0aGlzLmhvb2tzID0gSG9va3NEZWZpbml0aW9uLm5vbmU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgaXNBY3RpdmUoKSB7XG4gICAgICAgIHJldHVybiAodGhpcy5zdGF0ZSAmICgxIHwgMikpID4gMCAmJiAwID09PSAoNCAmIHRoaXMuc3RhdGUpO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIGlmIChudWxsID09PSB0aGlzLnBhcmVudCkgc3dpdGNoICh0aGlzLnZtS2luZCkge1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBgWyR7dGhpcy5kZWZpbml0aW9uLm5hbWV9XWA7XG5cbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kZWZpbml0aW9uLm5hbWU7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3RmFjdG9yeS5uYW1lO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAodGhpcy52bUtpbmQpIHtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5wYXJlbnQubmFtZX0+WyR7dGhpcy5kZWZpbml0aW9uLm5hbWV9XWA7XG5cbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gYCR7dGhpcy5wYXJlbnQubmFtZX0+JHt0aGlzLmRlZmluaXRpb24ubmFtZX1gO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld0ZhY3RvcnkubmFtZSA9PT0gKG51bGwgPT09ICh0ID0gdGhpcy5wYXJlbnQuZGVmaW5pdGlvbikgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5uYW1lKSA/IGAke3RoaXMucGFyZW50Lm5hbWV9W3ZpZXddYCA6IGAke3RoaXMucGFyZW50Lm5hbWV9W3ZpZXc6JHt0aGlzLnZpZXdGYWN0b3J5Lm5hbWV9XWA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc3RhdGljIGdldENhY2hlZCh0KSB7XG4gICAgICAgIHJldHVybiBMaS5nZXQodCk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXRDYWNoZWRPclRocm93KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IENvbnRyb2xsZXIuZ2V0Q2FjaGVkKHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA1MDA6JHt0fWApO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgc3RhdGljICRlbCh0LCBlLCBpLCBzLCBuID0gdm9pZCAwKSB7XG4gICAgICAgIGlmIChMaS5oYXMoZSkpIHJldHVybiBMaS5nZXQoZSk7XG4gICAgICAgIG4gPSBudWxsICE9PSBuICYmIHZvaWQgMCAhPT0gbiA/IG4gOiBzaS5nZXREZWZpbml0aW9uKGUuY29uc3RydWN0b3IpO1xuICAgICAgICBjb25zdCByID0gbmV3IENvbnRyb2xsZXIodCwgMCwgbiwgbnVsbCwgZSwgaSk7XG4gICAgICAgIGNvbnN0IG8gPSB0LmdldChiKEtpKSk7XG4gICAgICAgIGlmIChuLmRlcGVuZGVuY2llcy5sZW5ndGggPiAwKSB0LnJlZ2lzdGVyKC4uLm4uZGVwZW5kZW5jaWVzKTtcbiAgICAgICAgdC5yZWdpc3RlclJlc29sdmVyKEtpLCBuZXcgeChcIklIeWRyYXRpb25Db250ZXh0XCIsIG5ldyBIeWRyYXRpb25Db250ZXh0KHIsIHMsIG8pKSk7XG4gICAgICAgIExpLnNldChlLCByKTtcbiAgICAgICAgaWYgKG51bGwgPT0gcyB8fCBmYWxzZSAhPT0gcy5oeWRyYXRlKSByLnh0KHMsIG8pO1xuICAgICAgICByZXR1cm4gcjtcbiAgICB9XG4gICAgc3RhdGljICRhdHRyKHQsIGUsIGksIHMpIHtcbiAgICAgICAgaWYgKExpLmhhcyhlKSkgcmV0dXJuIExpLmdldChlKTtcbiAgICAgICAgcyA9IG51bGwgIT09IHMgJiYgdm9pZCAwICE9PSBzID8gcyA6IE1lLmdldERlZmluaXRpb24oZS5jb25zdHJ1Y3Rvcik7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgQ29udHJvbGxlcih0LCAxLCBzLCBudWxsLCBlLCBpKTtcbiAgICAgICAgTGkuc2V0KGUsIG4pO1xuICAgICAgICBuLnl0KCk7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgICBzdGF0aWMgJHZpZXcodCwgZSA9IHZvaWQgMCkge1xuICAgICAgICBjb25zdCBpID0gbmV3IENvbnRyb2xsZXIodC5jb250YWluZXIsIDIsIG51bGwsIHQsIG51bGwsIG51bGwpO1xuICAgICAgICBpLnBhcmVudCA9IG51bGwgIT09IGUgJiYgdm9pZCAwICE9PSBlID8gZSA6IG51bGw7XG4gICAgICAgIGkua3QoKTtcbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIHh0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuY29udGFpbmVyO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5mbGFncztcbiAgICAgICAgY29uc3QgbiA9IHRoaXMudmlld01vZGVsO1xuICAgICAgICBsZXQgciA9IHRoaXMuZGVmaW5pdGlvbjtcbiAgICAgICAgdGhpcy5zY29wZSA9IFUuY3JlYXRlKG4sIG51bGwsIHRydWUpO1xuICAgICAgICBpZiAoci53YXRjaGVzLmxlbmd0aCA+IDApIF9pKHRoaXMsIGksIHIsIG4pO1xuICAgICAgICBNaSh0aGlzLCByLCBzLCBuKTtcbiAgICAgICAgdGhpcy52dCA9IFVpKHRoaXMsIHIsIG4pO1xuICAgICAgICBpZiAodGhpcy5ob29rcy5oYXNEZWZpbmUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuLmRlZmluZSh0aGlzLCBlLCByKTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHQgJiYgdCAhPT0gcikgciA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmdldE9yQ3JlYXRlKHQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGlmZWN5Y2xlSG9va3MgPSBraS5yZXNvbHZlKGkpO1xuICAgICAgICByLnJlZ2lzdGVyKGkpO1xuICAgICAgICBpZiAobnVsbCAhPT0gci5pbmplY3RhYmxlKSBpLnJlZ2lzdGVyUmVzb2x2ZXIoci5pbmplY3RhYmxlLCBuZXcgeChcImRlZmluaXRpb24uaW5qZWN0YWJsZVwiLCBuKSk7XG4gICAgICAgIGlmIChudWxsID09IHQgfHwgZmFsc2UgIT09IHQuaHlkcmF0ZSkge1xuICAgICAgICAgICAgdGhpcy5DdCh0KTtcbiAgICAgICAgICAgIHRoaXMuQXQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBDdCh0KSB7XG4gICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0h5ZHJhdGluZykgdGhpcy52aWV3TW9kZWwuaHlkcmF0aW5nKHRoaXMpO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5TdCA9IHRoaXMuci5jb21waWxlKHRoaXMuZGVmaW5pdGlvbiwgdGhpcy5jb250YWluZXIsIHQpO1xuICAgICAgICBjb25zdCB7c2hhZG93T3B0aW9uczogaSwgaXNTdHJpY3RCaW5kaW5nOiBzLCBoYXNTbG90czogbiwgY29udGFpbmVybGVzczogcn0gPSBlO1xuICAgICAgICB0aGlzLmlzU3RyaWN0QmluZGluZyA9IHM7XG4gICAgICAgIGlmIChudWxsICE9PSAodGhpcy5ob3N0Q29udHJvbGxlciA9IHNpLmZvcih0aGlzLmhvc3QsICRpKSkpIHRoaXMuaG9zdCA9IHRoaXMuY29udGFpbmVyLnJvb3QuZ2V0KEt0KS5kb2N1bWVudC5jcmVhdGVFbGVtZW50KHRoaXMuZGVmaW5pdGlvbi5uYW1lKTtcbiAgICAgICAgc3ModGhpcy5ob3N0LCBzaS5uYW1lLCB0aGlzKTtcbiAgICAgICAgc3ModGhpcy5ob3N0LCB0aGlzLmRlZmluaXRpb24ua2V5LCB0aGlzKTtcbiAgICAgICAgaWYgKG51bGwgIT09IGkgfHwgbikge1xuICAgICAgICAgICAgaWYgKHIpIHRocm93IG5ldyBFcnJvcihcIkFVUjA1MDFcIik7XG4gICAgICAgICAgICBzcyh0aGlzLnNoYWRvd1Jvb3QgPSB0aGlzLmhvc3QuYXR0YWNoU2hhZG93KG51bGwgIT09IGkgJiYgdm9pZCAwICE9PSBpID8gaSA6IFdpKSwgc2kubmFtZSwgdGhpcyk7XG4gICAgICAgICAgICBzcyh0aGlzLnNoYWRvd1Jvb3QsIHRoaXMuZGVmaW5pdGlvbi5rZXksIHRoaXMpO1xuICAgICAgICAgICAgdGhpcy5tb3VudFRhcmdldCA9IDI7XG4gICAgICAgIH0gZWxzZSBpZiAocikge1xuICAgICAgICAgICAgc3ModGhpcy5sb2NhdGlvbiA9IHVzKHRoaXMuaG9zdCksIHNpLm5hbWUsIHRoaXMpO1xuICAgICAgICAgICAgc3ModGhpcy5sb2NhdGlvbiwgdGhpcy5kZWZpbml0aW9uLmtleSwgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLm1vdW50VGFyZ2V0ID0gMztcbiAgICAgICAgfSBlbHNlIHRoaXMubW91bnRUYXJnZXQgPSAxO1xuICAgICAgICB0aGlzLnZpZXdNb2RlbC4kY29udHJvbGxlciA9IHRoaXM7XG4gICAgICAgIHRoaXMubm9kZXMgPSB0aGlzLnIuY3JlYXRlTm9kZXMoZSk7XG4gICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0h5ZHJhdGVkKSB0aGlzLnZpZXdNb2RlbC5oeWRyYXRlZCh0aGlzKTtcbiAgICB9XG4gICAgQXQoKSB7XG4gICAgICAgIHRoaXMuci5yZW5kZXIodGhpcywgdGhpcy5ub2Rlcy5maW5kVGFyZ2V0cygpLCB0aGlzLlN0LCB0aGlzLmhvc3QpO1xuICAgICAgICBpZiAodGhpcy5ob29rcy5oYXNDcmVhdGVkKSB0aGlzLnZpZXdNb2RlbC5jcmVhdGVkKHRoaXMpO1xuICAgIH1cbiAgICB5dCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZGVmaW5pdGlvbjtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMudmlld01vZGVsO1xuICAgICAgICBpZiAodC53YXRjaGVzLmxlbmd0aCA+IDApIF9pKHRoaXMsIHRoaXMuY29udGFpbmVyLCB0LCBlKTtcbiAgICAgICAgTWkodGhpcywgdCwgdGhpcy5mbGFncywgZSk7XG4gICAgICAgIGUuJGNvbnRyb2xsZXIgPSB0aGlzO1xuICAgICAgICB0aGlzLmxpZmVjeWNsZUhvb2tzID0ga2kucmVzb2x2ZSh0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0NyZWF0ZWQpIHRoaXMudmlld01vZGVsLmNyZWF0ZWQodGhpcyk7XG4gICAgfVxuICAgIGt0KCkge1xuICAgICAgICB0aGlzLlN0ID0gdGhpcy5yLmNvbXBpbGUodGhpcy52aWV3RmFjdG9yeS5kZWYsIHRoaXMuY29udGFpbmVyLCBudWxsKTtcbiAgICAgICAgdGhpcy5pc1N0cmljdEJpbmRpbmcgPSB0aGlzLlN0LmlzU3RyaWN0QmluZGluZztcbiAgICAgICAgdGhpcy5yLnJlbmRlcih0aGlzLCAodGhpcy5ub2RlcyA9IHRoaXMuci5jcmVhdGVOb2Rlcyh0aGlzLlN0KSkuZmluZFRhcmdldHMoKSwgdGhpcy5TdCwgdm9pZCAwKTtcbiAgICB9XG4gICAgYWN0aXZhdGUodCwgZSwgaSwgcykge1xuICAgICAgICBzd2l0Y2ggKHRoaXMuc3RhdGUpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgICAgaWYgKCEobnVsbCA9PT0gZSB8fCBlLmlzQWN0aXZlKSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5zdGF0ZSA9IDE7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgIGNhc2UgMzI6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFVUjA1MDI6JHt0aGlzLm5hbWV9YCk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBVVIwNTAzOiR7dGhpcy5uYW1lfSAke0dpKHRoaXMuc3RhdGUpfWApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucGFyZW50ID0gZTtcbiAgICAgICAgaSB8PSAyO1xuICAgICAgICBzd2l0Y2ggKHRoaXMudm1LaW5kKSB7XG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgdGhpcy5zY29wZS5wYXJlbnRTY29wZSA9IG51bGwgIT09IHMgJiYgdm9pZCAwICE9PSBzID8gcyA6IG51bGw7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHRoaXMuc2NvcGUgPSBudWxsICE9PSBzICYmIHZvaWQgMCAhPT0gcyA/IHMgOiBudWxsO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSBzIHx8IG51bGwgPT09IHMpIHRocm93IG5ldyBFcnJvcihcIkFVUjA1MDRcIik7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFzTG9ja2VkU2NvcGUpIHRoaXMuc2NvcGUgPSBzO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaXNTdHJpY3RCaW5kaW5nKSBpIHw9IDE7XG4gICAgICAgIHRoaXMuJGluaXRpYXRvciA9IHQ7XG4gICAgICAgIHRoaXMuJGZsYWdzID0gaTtcbiAgICAgICAgdGhpcy5SdCgpO1xuICAgICAgICBpZiAodGhpcy5ob29rcy5oYXNCaW5kaW5nKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy52aWV3TW9kZWwuYmluZGluZyh0aGlzLiRpbml0aWF0b3IsIHRoaXMucGFyZW50LCB0aGlzLiRmbGFncyk7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLkV0KCk7XG4gICAgICAgICAgICAgICAgdC50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYmluZCgpO1xuICAgICAgICAgICAgICAgIH0pKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuQnQodCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRwcm9taXNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuYmluZCgpO1xuICAgICAgICByZXR1cm4gdGhpcy4kcHJvbWlzZTtcbiAgICB9XG4gICAgYmluZCgpIHtcbiAgICAgICAgbGV0IHQgPSAwO1xuICAgICAgICBsZXQgZSA9IHRoaXMudnQubGVuZ3RoO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgaWYgKGUgPiAwKSB3aGlsZSAoZSA+IHQpIHtcbiAgICAgICAgICAgIHRoaXMudnRbdF0uc3RhcnQoKTtcbiAgICAgICAgICAgICsrdDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobnVsbCAhPT0gdGhpcy5iaW5kaW5ncykge1xuICAgICAgICAgICAgdCA9IDA7XG4gICAgICAgICAgICBlID0gdGhpcy5iaW5kaW5ncy5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoZSA+IHQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJpbmRpbmdzW3RdLiRiaW5kKHRoaXMuJGZsYWdzLCB0aGlzLnNjb3BlKTtcbiAgICAgICAgICAgICAgICArK3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuaG9va3MuaGFzQm91bmQpIHtcbiAgICAgICAgICAgIGkgPSB0aGlzLnZpZXdNb2RlbC5ib3VuZCh0aGlzLiRpbml0aWF0b3IsIHRoaXMucGFyZW50LCB0aGlzLiRmbGFncyk7XG4gICAgICAgICAgICBpZiAoaSBpbnN0YW5jZW9mIFByb21pc2UpIHtcbiAgICAgICAgICAgICAgICB0aGlzLkV0KCk7XG4gICAgICAgICAgICAgICAgaS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNCb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuSXQoKTtcbiAgICAgICAgICAgICAgICB9KSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkJ0KHQpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc0JvdW5kID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5JdCgpO1xuICAgIH1cbiAgICBUdCguLi50KSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5tb3VudFRhcmdldCkge1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHRoaXMuaG9zdC5hcHBlbmQoLi4udCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHRoaXMuc2hhZG93Um9vdC5hcHBlbmQoLi4udCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgICAgICAgICAgZm9yICg7ZSA8IHQubGVuZ3RoOyArK2UpIHRoaXMubG9jYXRpb24ucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUodFtlXSwgdGhpcy5sb2NhdGlvbik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgSXQoKSB7XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLmhvc3RDb250cm9sbGVyKSBzd2l0Y2ggKHRoaXMubW91bnRUYXJnZXQpIHtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgdGhpcy5ob3N0Q29udHJvbGxlci5UdCh0aGlzLmhvc3QpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICB0aGlzLmhvc3RDb250cm9sbGVyLlR0KHRoaXMubG9jYXRpb24uJHN0YXJ0LCB0aGlzLmxvY2F0aW9uKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAodGhpcy5tb3VudFRhcmdldCkge1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHRoaXMubm9kZXMuYXBwZW5kVG8odGhpcy5ob3N0LCBudWxsICE9IHRoaXMuZGVmaW5pdGlvbiAmJiB0aGlzLmRlZmluaXRpb24uZW5oYW5jZSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5jb250YWluZXI7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuaGFzKGZpLCBmYWxzZSkgPyB0LmdldChmaSkgOiB0LmdldChkaSk7XG4gICAgICAgICAgICAgICAgZS5hcHBseVRvKHRoaXMuc2hhZG93Um9vdCk7XG4gICAgICAgICAgICAgICAgdGhpcy5ub2Rlcy5hcHBlbmRUbyh0aGlzLnNoYWRvd1Jvb3QpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgdGhpcy5ub2Rlcy5pbnNlcnRCZWZvcmUodGhpcy5sb2NhdGlvbik7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5ob29rcy5oYXNBdHRhY2hpbmcpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnZpZXdNb2RlbC5hdHRhY2hpbmcodGhpcy4kaW5pdGlhdG9yLCB0aGlzLnBhcmVudCwgdGhpcy4kZmxhZ3MpO1xuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5FdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuUnQoKTtcbiAgICAgICAgICAgICAgICB0LnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5EdCgpO1xuICAgICAgICAgICAgICAgIH0pKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuQnQodCk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLmNoaWxkcmVuKSB7XG4gICAgICAgICAgICBsZXQgdCA9IDA7XG4gICAgICAgICAgICBmb3IgKDt0IDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7ICsrdCkgdm9pZCB0aGlzLmNoaWxkcmVuW3RdLmFjdGl2YXRlKHRoaXMuJGluaXRpYXRvciwgdGhpcywgdGhpcy4kZmxhZ3MsIHRoaXMuc2NvcGUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuRHQoKTtcbiAgICB9XG4gICAgZGVhY3RpdmF0ZSh0LCBlLCBpKSB7XG4gICAgICAgIHN3aXRjaCAofjE2ICYgdGhpcy5zdGF0ZSkge1xuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSA0O1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgY2FzZSA4OlxuICAgICAgICAgIGNhc2UgMzI6XG4gICAgICAgICAgY2FzZSA4IHwgMzI6XG4gICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBVVIwNTA1OiR7dGhpcy5uYW1lfSAke0dpKHRoaXMuc3RhdGUpfWApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJGluaXRpYXRvciA9IHQ7XG4gICAgICAgIHRoaXMuJGZsYWdzID0gaTtcbiAgICAgICAgaWYgKHQgPT09IHRoaXMpIHRoaXMuUHQoKTtcbiAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICBpZiAodGhpcy52dC5sZW5ndGgpIGZvciAoO3MgPCB0aGlzLnZ0Lmxlbmd0aDsgKytzKSB0aGlzLnZ0W3NdLnN0b3AoKTtcbiAgICAgICAgaWYgKG51bGwgIT09IHRoaXMuY2hpbGRyZW4pIGZvciAocyA9IDA7IHMgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgKytzKSB2b2lkIHRoaXMuY2hpbGRyZW5bc10uZGVhY3RpdmF0ZSh0LCB0aGlzLCBpKTtcbiAgICAgICAgaWYgKHRoaXMuaG9va3MuaGFzRGV0YWNoaW5nKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy52aWV3TW9kZWwuZGV0YWNoaW5nKHRoaXMuJGluaXRpYXRvciwgdGhpcy5wYXJlbnQsIHRoaXMuJGZsYWdzKTtcbiAgICAgICAgICAgIGlmIChlIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuRXQoKTtcbiAgICAgICAgICAgICAgICB0LlB0KCk7XG4gICAgICAgICAgICAgICAgZS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHQuT3QoKTtcbiAgICAgICAgICAgICAgICB9KSkuY2F0Y2goKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0LkJ0KGUpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAobnVsbCA9PT0gdC5oZWFkKSB0LmhlYWQgPSB0aGlzOyBlbHNlIHQudGFpbC5uZXh0ID0gdGhpcztcbiAgICAgICAgdC50YWlsID0gdGhpcztcbiAgICAgICAgaWYgKHQgIT09IHRoaXMpIHJldHVybjtcbiAgICAgICAgdGhpcy5PdCgpO1xuICAgICAgICByZXR1cm4gdGhpcy4kcHJvbWlzZTtcbiAgICB9XG4gICAgcmVtb3ZlTm9kZXMoKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy52bUtpbmQpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgdGhpcy5ub2Rlcy5yZW1vdmUoKTtcbiAgICAgICAgICAgIHRoaXMubm9kZXMudW5saW5rKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG51bGwgIT09IHRoaXMuaG9zdENvbnRyb2xsZXIpIHN3aXRjaCAodGhpcy5tb3VudFRhcmdldCkge1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICB0aGlzLmhvc3QucmVtb3ZlKCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgIHRoaXMubG9jYXRpb24uJHN0YXJ0LnJlbW92ZSgpO1xuICAgICAgICAgICAgdGhpcy5sb2NhdGlvbi5yZW1vdmUoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVuYmluZCgpIHtcbiAgICAgICAgY29uc3QgdCA9IDQgfCB0aGlzLiRmbGFncztcbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICBpZiAobnVsbCAhPT0gdGhpcy5iaW5kaW5ncykgZm9yICg7ZSA8IHRoaXMuYmluZGluZ3MubGVuZ3RoOyArK2UpIHRoaXMuYmluZGluZ3NbZV0uJHVuYmluZCh0KTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBudWxsO1xuICAgICAgICBzd2l0Y2ggKHRoaXMudm1LaW5kKSB7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgdGhpcy5zY29wZSA9IG51bGw7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIGlmICghdGhpcy5oYXNMb2NrZWRTY29wZSkgdGhpcy5zY29wZSA9IG51bGw7XG4gICAgICAgICAgICBpZiAoMTYgPT09ICgxNiAmIHRoaXMuc3RhdGUpICYmICF0aGlzLnZpZXdGYWN0b3J5LnRyeVJldHVyblRvQ2FjaGUodGhpcykgJiYgdGhpcy4kaW5pdGlhdG9yID09PSB0aGlzKSB0aGlzLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgdGhpcy5zY29wZS5wYXJlbnRTY29wZSA9IG51bGw7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBpZiAoMzIgPT09ICgzMiAmIHQpICYmIHRoaXMuJGluaXRpYXRvciA9PT0gdGhpcykgdGhpcy5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAzMiAmIHRoaXMuc3RhdGUgfCA4O1xuICAgICAgICB0aGlzLiRpbml0aWF0b3IgPSBudWxsO1xuICAgICAgICB0aGlzLiR0KCk7XG4gICAgfVxuICAgIEV0KCkge1xuICAgICAgICBpZiAodm9pZCAwID09PSB0aGlzLiRwcm9taXNlKSB7XG4gICAgICAgICAgICB0aGlzLiRwcm9taXNlID0gbmV3IFByb21pc2UoKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy4kcmVzb2x2ZSA9IHQ7XG4gICAgICAgICAgICAgICAgdGhpcy4kcmVqZWN0ID0gZTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGlmICh0aGlzLiRpbml0aWF0b3IgIT09IHRoaXMpIHRoaXMucGFyZW50LkV0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgJHQoKSB7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHRoaXMuJHByb21pc2UpIHtcbiAgICAgICAgICAgIFFpID0gdGhpcy4kcmVzb2x2ZTtcbiAgICAgICAgICAgIHRoaXMuJHJlc29sdmUgPSB0aGlzLiRyZWplY3QgPSB0aGlzLiRwcm9taXNlID0gdm9pZCAwO1xuICAgICAgICAgICAgUWkoKTtcbiAgICAgICAgICAgIFFpID0gdm9pZCAwO1xuICAgICAgICB9XG4gICAgfVxuICAgIEJ0KHQpIHtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gdGhpcy4kcHJvbWlzZSkge1xuICAgICAgICAgICAgWmkgPSB0aGlzLiRyZWplY3Q7XG4gICAgICAgICAgICB0aGlzLiRyZXNvbHZlID0gdGhpcy4kcmVqZWN0ID0gdGhpcy4kcHJvbWlzZSA9IHZvaWQgMDtcbiAgICAgICAgICAgIFppKHQpO1xuICAgICAgICAgICAgWmkgPSB2b2lkIDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuJGluaXRpYXRvciAhPT0gdGhpcykgdGhpcy5wYXJlbnQuQnQodCk7XG4gICAgfVxuICAgIFJ0KCkge1xuICAgICAgICArK3RoaXMuZ3Q7XG4gICAgICAgIGlmICh0aGlzLiRpbml0aWF0b3IgIT09IHRoaXMpIHRoaXMucGFyZW50LlJ0KCk7XG4gICAgfVxuICAgIER0KCkge1xuICAgICAgICBpZiAoMCA9PT0gLS10aGlzLmd0KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ob29rcy5oYXNBdHRhY2hlZCkge1xuICAgICAgICAgICAgICAgIEppID0gdGhpcy52aWV3TW9kZWwuYXR0YWNoZWQodGhpcy4kaW5pdGlhdG9yLCB0aGlzLiRmbGFncyk7XG4gICAgICAgICAgICAgICAgaWYgKEppIGluc3RhbmNlb2YgUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLkV0KCk7XG4gICAgICAgICAgICAgICAgICAgIEppLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAyO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuJGluaXRpYXRvciAhPT0gdGhpcykgdGhpcy5wYXJlbnQuRHQoKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuQnQodCk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgSmkgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgSmkgPSB2b2lkIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gMjtcbiAgICAgICAgICAgIHRoaXMuJHQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy4kaW5pdGlhdG9yICE9PSB0aGlzKSB0aGlzLnBhcmVudC5EdCgpO1xuICAgIH1cbiAgICBQdCgpIHtcbiAgICAgICAgKyt0aGlzLnd0O1xuICAgIH1cbiAgICBPdCgpIHtcbiAgICAgICAgaWYgKDAgPT09IC0tdGhpcy53dCkge1xuICAgICAgICAgICAgdGhpcy5MdCgpO1xuICAgICAgICAgICAgdGhpcy5yZW1vdmVOb2RlcygpO1xuICAgICAgICAgICAgbGV0IHQgPSB0aGlzLiRpbml0aWF0b3IuaGVhZDtcbiAgICAgICAgICAgIHdoaWxlIChudWxsICE9PSB0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHQgIT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQuZGVidWcpIHQubG9nZ2VyLnRyYWNlKGBkZXRhY2goKWApO1xuICAgICAgICAgICAgICAgICAgICB0LnJlbW92ZU5vZGVzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0Lmhvb2tzLmhhc1VuYmluZGluZykge1xuICAgICAgICAgICAgICAgICAgICBpZiAodC5kZWJ1ZykgdC5sb2dnZXIudHJhY2UoXCJ1bmJpbmRpbmcoKVwiKTtcbiAgICAgICAgICAgICAgICAgICAgSmkgPSB0LnZpZXdNb2RlbC51bmJpbmRpbmcodC4kaW5pdGlhdG9yLCB0LnBhcmVudCwgdC4kZmxhZ3MpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoSmkgaW5zdGFuY2VvZiBQcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkV0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBKaS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5xdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLkJ0KHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIEppID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0ID0gdC5uZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5xdCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIEx0KCkge1xuICAgICAgICArK3RoaXMuYnQ7XG4gICAgfVxuICAgIHF0KCkge1xuICAgICAgICBpZiAoMCA9PT0gLS10aGlzLmJ0KSB7XG4gICAgICAgICAgICBsZXQgdCA9IHRoaXMuJGluaXRpYXRvci5oZWFkO1xuICAgICAgICAgICAgbGV0IGUgPSBudWxsO1xuICAgICAgICAgICAgd2hpbGUgKG51bGwgIT09IHQpIHtcbiAgICAgICAgICAgICAgICBpZiAodCAhPT0gdGhpcykge1xuICAgICAgICAgICAgICAgICAgICB0LmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgdC51bmJpbmQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZSA9IHQubmV4dDtcbiAgICAgICAgICAgICAgICB0Lm5leHQgPSBudWxsO1xuICAgICAgICAgICAgICAgIHQgPSBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gbnVsbDtcbiAgICAgICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy51bmJpbmQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhZGRCaW5kaW5nKHQpIHtcbiAgICAgICAgaWYgKG51bGwgPT09IHRoaXMuYmluZGluZ3MpIHRoaXMuYmluZGluZ3MgPSBbIHQgXTsgZWxzZSB0aGlzLmJpbmRpbmdzW3RoaXMuYmluZGluZ3MubGVuZ3RoXSA9IHQ7XG4gICAgfVxuICAgIGFkZENoaWxkKHQpIHtcbiAgICAgICAgaWYgKG51bGwgPT09IHRoaXMuY2hpbGRyZW4pIHRoaXMuY2hpbGRyZW4gPSBbIHQgXTsgZWxzZSB0aGlzLmNoaWxkcmVuW3RoaXMuY2hpbGRyZW4ubGVuZ3RoXSA9IHQ7XG4gICAgfVxuICAgIGlzKHQpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLnZtS2luZCkge1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBNZS5nZXREZWZpbml0aW9uKHRoaXMudmlld01vZGVsLmNvbnN0cnVjdG9yKS5uYW1lID09PSB0O1xuXG4gICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgcmV0dXJuIHNpLmdldERlZmluaXRpb24odGhpcy52aWV3TW9kZWwuY29uc3RydWN0b3IpLm5hbWUgPT09IHQ7XG5cbiAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3RmFjdG9yeS5uYW1lID09PSB0O1xuICAgICAgICB9XG4gICAgfVxuICAgIGxvY2tTY29wZSh0KSB7XG4gICAgICAgIHRoaXMuc2NvcGUgPSB0O1xuICAgICAgICB0aGlzLmhhc0xvY2tlZFNjb3BlID0gdHJ1ZTtcbiAgICB9XG4gICAgc2V0SG9zdCh0KSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLnZtS2luZCkge1xuICAgICAgICAgICAgc3ModCwgc2kubmFtZSwgdGhpcyk7XG4gICAgICAgICAgICBzcyh0LCB0aGlzLmRlZmluaXRpb24ua2V5LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhvc3QgPSB0O1xuICAgICAgICB0aGlzLm1vdW50VGFyZ2V0ID0gMTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHNldFNoYWRvd1Jvb3QodCkge1xuICAgICAgICBpZiAoMCA9PT0gdGhpcy52bUtpbmQpIHtcbiAgICAgICAgICAgIHNzKHQsIHNpLm5hbWUsIHRoaXMpO1xuICAgICAgICAgICAgc3ModCwgdGhpcy5kZWZpbml0aW9uLmtleSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaGFkb3dSb290ID0gdDtcbiAgICAgICAgdGhpcy5tb3VudFRhcmdldCA9IDI7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBzZXRMb2NhdGlvbih0KSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLnZtS2luZCkge1xuICAgICAgICAgICAgc3ModCwgc2kubmFtZSwgdGhpcyk7XG4gICAgICAgICAgICBzcyh0LCB0aGlzLmRlZmluaXRpb24ua2V5LCB0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxvY2F0aW9uID0gdDtcbiAgICAgICAgdGhpcy5tb3VudFRhcmdldCA9IDM7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICByZWxlYXNlKCkge1xuICAgICAgICB0aGlzLnN0YXRlIHw9IDE2O1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICBpZiAoMzIgPT09ICgzMiAmIHRoaXMuc3RhdGUpKSByZXR1cm47XG4gICAgICAgIHRoaXMuc3RhdGUgfD0gMzI7XG4gICAgICAgIGlmICh0aGlzLmhvb2tzLmhhc0Rpc3Bvc2UpIHRoaXMudmlld01vZGVsLmRpc3Bvc2UoKTtcbiAgICAgICAgaWYgKG51bGwgIT09IHRoaXMuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW4uZm9yRWFjaChZaSk7XG4gICAgICAgICAgICB0aGlzLmNoaWxkcmVuID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmhvc3RDb250cm9sbGVyID0gbnVsbDtcbiAgICAgICAgdGhpcy5zY29wZSA9IG51bGw7XG4gICAgICAgIHRoaXMubm9kZXMgPSBudWxsO1xuICAgICAgICB0aGlzLmxvY2F0aW9uID0gbnVsbDtcbiAgICAgICAgdGhpcy52aWV3RmFjdG9yeSA9IG51bGw7XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLnZpZXdNb2RlbCkge1xuICAgICAgICAgICAgTGkuZGVsZXRlKHRoaXMudmlld01vZGVsKTtcbiAgICAgICAgICAgIHRoaXMudmlld01vZGVsID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZpZXdNb2RlbCA9IG51bGw7XG4gICAgICAgIHRoaXMuaG9zdCA9IG51bGw7XG4gICAgICAgIHRoaXMuc2hhZG93Um9vdCA9IG51bGw7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmRpc3Bvc2VSZXNvbHZlcnMoKTtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgaWYgKHRydWUgPT09IHQodGhpcykpIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAodGhpcy5ob29rcy5oYXNBY2NlcHQgJiYgdHJ1ZSA9PT0gdGhpcy52aWV3TW9kZWwuYWNjZXB0KHQpKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKG51bGwgIT09IHRoaXMuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGNvbnN0IHtjaGlsZHJlbjogZX0gPSB0aGlzO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIHMgPSBlLmxlbmd0aDsgaSA8IHM7ICsraSkgaWYgKHRydWUgPT09IGVbaV0uYWNjZXB0KHQpKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gcWkodCkge1xuICAgIGxldCBlID0gdC4kb2JzZXJ2ZXJzO1xuICAgIGlmICh2b2lkIDAgPT09IGUpIFJlZmxlY3QuZGVmaW5lUHJvcGVydHkodCwgXCIkb2JzZXJ2ZXJzXCIsIHtcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgIHZhbHVlOiBlID0ge31cbiAgICB9KTtcbiAgICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gTWkodCwgZSwgaSwgcykge1xuICAgIGNvbnN0IG4gPSBlLmJpbmRhYmxlcztcbiAgICBjb25zdCByID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobik7XG4gICAgY29uc3QgbyA9IHIubGVuZ3RoO1xuICAgIGlmIChvID4gMCkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGxldCBsID0gMDtcbiAgICAgICAgY29uc3QgaCA9IHFpKHMpO1xuICAgICAgICBjb25zdCBhID0gdC5jb250YWluZXI7XG4gICAgICAgIGNvbnN0IGMgPSBhLmhhcyhGLCB0cnVlKSA/IGEuZ2V0KEYpIDogbnVsbDtcbiAgICAgICAgZm9yICg7bCA8IG87ICsrbCkge1xuICAgICAgICAgICAgZSA9IHJbbF07XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSBoW2VdKSB7XG4gICAgICAgICAgICAgICAgaSA9IG5bZV07XG4gICAgICAgICAgICAgICAgaFtlXSA9IG5ldyBCaW5kYWJsZU9ic2VydmVyKHMsIGUsIGkuY2FsbGJhY2ssIGkuc2V0LCB0LCBjKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gVWkodCwgZSwgaSkge1xuICAgIGNvbnN0IHMgPSBlLmNoaWxkcmVuT2JzZXJ2ZXJzO1xuICAgIGNvbnN0IG4gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhzKTtcbiAgICBjb25zdCByID0gbi5sZW5ndGg7XG4gICAgaWYgKHIgPiAwKSB7XG4gICAgICAgIGNvbnN0IGUgPSBxaShpKTtcbiAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICBsZXQgbDtcbiAgICAgICAgbGV0IGggPSAwO1xuICAgICAgICBsZXQgYTtcbiAgICAgICAgZm9yICg7aCA8IHI7ICsraCkge1xuICAgICAgICAgICAgbCA9IG5baF07XG4gICAgICAgICAgICBpZiAodm9pZCAwID09IGVbbF0pIHtcbiAgICAgICAgICAgICAgICBhID0gc1tsXTtcbiAgICAgICAgICAgICAgICBvW28ubGVuZ3RoXSA9IGVbbF0gPSBuZXcgQ2hpbGRyZW5PYnNlcnZlcih0LCBpLCBsLCBhLmNhbGxiYWNrLCBhLnF1ZXJ5LCBhLmZpbHRlciwgYS5tYXAsIGEub3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG87XG4gICAgfVxuICAgIHJldHVybiBoO1xufVxuXG5jb25zdCBGaSA9IG5ldyBNYXA7XG5cbmNvbnN0IFZpID0gdCA9PiB7XG4gICAgbGV0IGUgPSBGaS5nZXQodCk7XG4gICAgaWYgKG51bGwgPT0gZSkge1xuICAgICAgICBlID0gbmV3IGoodCwgMCk7XG4gICAgICAgIEZpLnNldCh0LCBlKTtcbiAgICB9XG4gICAgcmV0dXJuIGU7XG59O1xuXG5mdW5jdGlvbiBfaSh0LCBlLCBpLCBzKSB7XG4gICAgY29uc3QgbiA9IGUuZ2V0KFYpO1xuICAgIGNvbnN0IHIgPSBlLmdldChfKTtcbiAgICBjb25zdCBvID0gaS53YXRjaGVzO1xuICAgIGNvbnN0IGwgPSAwID09PSB0LnZtS2luZCA/IHQuc2NvcGUgOiBVLmNyZWF0ZShzLCBudWxsLCB0cnVlKTtcbiAgICBjb25zdCBoID0gby5sZW5ndGg7XG4gICAgbGV0IGE7XG4gICAgbGV0IGM7XG4gICAgbGV0IHU7XG4gICAgbGV0IGYgPSAwO1xuICAgIGZvciAoO2ggPiBmOyArK2YpIHtcbiAgICAgICAgKHtleHByZXNzaW9uOiBhLCBjYWxsYmFjazogY30gPSBvW2ZdKTtcbiAgICAgICAgYyA9IEN0KGMpID8gYyA6IFJlZmxlY3QuZ2V0KHMsIGMpO1xuICAgICAgICBpZiAoIUN0KGMpKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA1MDY6JHtTdHJpbmcoYyl9YCk7XG4gICAgICAgIGlmIChDdChhKSkgdC5hZGRCaW5kaW5nKG5ldyBDb21wdXRlZFdhdGNoZXIocywgbiwgYSwgYywgdHJ1ZSkpOyBlbHNlIHtcbiAgICAgICAgICAgIHUgPSBBdChhKSA/IHIucGFyc2UoYSwgOCkgOiBWaShhKTtcbiAgICAgICAgICAgIHQuYWRkQmluZGluZyhuZXcgRXhwcmVzc2lvbldhdGNoZXIobCwgZSwgbiwgdSwgYykpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiBqaSh0KSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBDb250cm9sbGVyICYmIDAgPT09IHQudm1LaW5kO1xufVxuXG5mdW5jdGlvbiBOaSh0KSB7XG4gICAgcmV0dXJuIHkodCkgJiYgc2kuaXNUeXBlKHQuY29uc3RydWN0b3IpO1xufVxuXG5jbGFzcyBIb29rc0RlZmluaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5oYXNEZWZpbmUgPSBcImRlZmluZVwiIGluIHQ7XG4gICAgICAgIHRoaXMuaGFzSHlkcmF0aW5nID0gXCJoeWRyYXRpbmdcIiBpbiB0O1xuICAgICAgICB0aGlzLmhhc0h5ZHJhdGVkID0gXCJoeWRyYXRlZFwiIGluIHQ7XG4gICAgICAgIHRoaXMuaGFzQ3JlYXRlZCA9IFwiY3JlYXRlZFwiIGluIHQ7XG4gICAgICAgIHRoaXMuaGFzQmluZGluZyA9IFwiYmluZGluZ1wiIGluIHQ7XG4gICAgICAgIHRoaXMuaGFzQm91bmQgPSBcImJvdW5kXCIgaW4gdDtcbiAgICAgICAgdGhpcy5oYXNBdHRhY2hpbmcgPSBcImF0dGFjaGluZ1wiIGluIHQ7XG4gICAgICAgIHRoaXMuaGFzQXR0YWNoZWQgPSBcImF0dGFjaGVkXCIgaW4gdDtcbiAgICAgICAgdGhpcy5oYXNEZXRhY2hpbmcgPSBcImRldGFjaGluZ1wiIGluIHQ7XG4gICAgICAgIHRoaXMuaGFzVW5iaW5kaW5nID0gXCJ1bmJpbmRpbmdcIiBpbiB0O1xuICAgICAgICB0aGlzLmhhc0Rpc3Bvc2UgPSBcImRpc3Bvc2VcIiBpbiB0O1xuICAgICAgICB0aGlzLmhhc0FjY2VwdCA9IFwiYWNjZXB0XCIgaW4gdDtcbiAgICB9XG59XG5cbkhvb2tzRGVmaW5pdGlvbi5ub25lID0gbmV3IEhvb2tzRGVmaW5pdGlvbih7fSk7XG5cbmNvbnN0IFdpID0ge1xuICAgIG1vZGU6IFwib3BlblwiXG59O1xuXG52YXIgSGk7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wiY3VzdG9tRWxlbWVudFwiXSA9IDBdID0gXCJjdXN0b21FbGVtZW50XCI7XG4gICAgdFt0W1wiY3VzdG9tQXR0cmlidXRlXCJdID0gMV0gPSBcImN1c3RvbUF0dHJpYnV0ZVwiO1xuICAgIHRbdFtcInN5bnRoZXRpY1wiXSA9IDJdID0gXCJzeW50aGV0aWNcIjtcbn0pKEhpIHx8IChIaSA9IHt9KSk7XG5cbnZhciB6aTtcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJub25lXCJdID0gMF0gPSBcIm5vbmVcIjtcbiAgICB0W3RbXCJhY3RpdmF0aW5nXCJdID0gMV0gPSBcImFjdGl2YXRpbmdcIjtcbiAgICB0W3RbXCJhY3RpdmF0ZWRcIl0gPSAyXSA9IFwiYWN0aXZhdGVkXCI7XG4gICAgdFt0W1wiZGVhY3RpdmF0aW5nXCJdID0gNF0gPSBcImRlYWN0aXZhdGluZ1wiO1xuICAgIHRbdFtcImRlYWN0aXZhdGVkXCJdID0gOF0gPSBcImRlYWN0aXZhdGVkXCI7XG4gICAgdFt0W1wicmVsZWFzZWRcIl0gPSAxNl0gPSBcInJlbGVhc2VkXCI7XG4gICAgdFt0W1wiZGlzcG9zZWRcIl0gPSAzMl0gPSBcImRpc3Bvc2VkXCI7XG59KSh6aSB8fCAoemkgPSB7fSkpO1xuXG5mdW5jdGlvbiBHaSh0KSB7XG4gICAgY29uc3QgZSA9IFtdO1xuICAgIGlmICgxID09PSAoMSAmIHQpKSBlLnB1c2goXCJhY3RpdmF0aW5nXCIpO1xuICAgIGlmICgyID09PSAoMiAmIHQpKSBlLnB1c2goXCJhY3RpdmF0ZWRcIik7XG4gICAgaWYgKDQgPT09ICg0ICYgdCkpIGUucHVzaChcImRlYWN0aXZhdGluZ1wiKTtcbiAgICBpZiAoOCA9PT0gKDggJiB0KSkgZS5wdXNoKFwiZGVhY3RpdmF0ZWRcIik7XG4gICAgaWYgKDE2ID09PSAoMTYgJiB0KSkgZS5wdXNoKFwicmVsZWFzZWRcIik7XG4gICAgaWYgKDMyID09PSAoMzIgJiB0KSkgZS5wdXNoKFwiZGlzcG9zZWRcIik7XG4gICAgcmV0dXJuIDAgPT09IGUubGVuZ3RoID8gXCJub25lXCIgOiBlLmpvaW4oXCJ8XCIpO1xufVxuXG5jb25zdCBYaSA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSUNvbnRyb2xsZXJcIik7XG5cbmNvbnN0IEtpID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJSHlkcmF0aW9uQ29udGV4dFwiKTtcblxuY2xhc3MgSHlkcmF0aW9uQ29udGV4dCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLmluc3RydWN0aW9uID0gZTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBpO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gWWkodCkge1xuICAgIHQuZGlzcG9zZSgpO1xufVxuXG5sZXQgUWk7XG5cbmxldCBaaTtcblxubGV0IEppO1xuXG5jb25zdCB0cyA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSUFwcFJvb3RcIik7XG5cbmNvbnN0IGVzID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJV29ya1RyYWNrZXJcIiwgKHQgPT4gdC5zaW5nbGV0b24oV29ya1RyYWNrZXIpKSk7XG5cbmNsYXNzIFdvcmtUcmFja2VyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuTXQgPSAwO1xuICAgICAgICB0aGlzLlV0ID0gbnVsbDtcbiAgICAgICAgdGhpcy4kdCA9IG51bGw7XG4gICAgICAgIHRoaXMuRnQgPSB0LnNjb3BlVG8oXCJXb3JrVHJhY2tlclwiKTtcbiAgICB9XG4gICAgc3RhcnQoKSB7XG4gICAgICAgIHRoaXMuRnQudHJhY2UoYHN0YXJ0KHN0YWNrOiR7dGhpcy5NdH0pYCk7XG4gICAgICAgICsrdGhpcy5NdDtcbiAgICB9XG4gICAgZmluaXNoKCkge1xuICAgICAgICB0aGlzLkZ0LnRyYWNlKGBmaW5pc2goc3RhY2s6JHt0aGlzLk10fSlgKTtcbiAgICAgICAgaWYgKDAgPT09IC0tdGhpcy5NdCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuJHQ7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuJHQgPSB0aGlzLlV0ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgd2FpdCgpIHtcbiAgICAgICAgdGhpcy5GdC50cmFjZShgd2FpdChzdGFjazoke3RoaXMuTXR9KWApO1xuICAgICAgICBpZiAobnVsbCA9PT0gdGhpcy5VdCkge1xuICAgICAgICAgICAgaWYgKDAgPT09IHRoaXMuTXQpIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgICAgIHRoaXMuVXQgPSBuZXcgUHJvbWlzZSgodCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy4kdCA9IHQ7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuVXQ7XG4gICAgfVxufVxuXG5Xb3JrVHJhY2tlci5pbmplY3QgPSBbIGsgXTtcblxuY2xhc3MgQXBwUm9vdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcykge1xuICAgICAgICB0aGlzLmNvbmZpZyA9IHQ7XG4gICAgICAgIHRoaXMucGxhdGZvcm0gPSBlO1xuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGk7XG4gICAgICAgIHRoaXMuY29udHJvbGxlciA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5WdCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5ob3N0ID0gdC5ob3N0O1xuICAgICAgICB0aGlzLndvcmsgPSBpLmdldChlcyk7XG4gICAgICAgIHMucHJlcGFyZSh0aGlzKTtcbiAgICAgICAgaS5yZWdpc3RlclJlc29sdmVyKGUuSFRNTEVsZW1lbnQsIGkucmVnaXN0ZXJSZXNvbHZlcihlLkVsZW1lbnQsIGkucmVnaXN0ZXJSZXNvbHZlcihucywgbmV3IHgoXCJFbGVtZW50UmVzb2x2ZXJcIiwgdC5ob3N0KSkpKTtcbiAgICAgICAgdGhpcy5WdCA9IEModGhpcy5fdChcImJlZm9yZUNyZWF0ZVwiKSwgKCgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNvbXBvbmVudDtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBpLmNyZWF0ZUNoaWxkKCk7XG4gICAgICAgICAgICBsZXQgbjtcbiAgICAgICAgICAgIGlmIChzaS5pc1R5cGUoZSkpIG4gPSB0aGlzLmNvbnRhaW5lci5nZXQoZSk7IGVsc2UgbiA9IHQuY29tcG9uZW50O1xuICAgICAgICAgICAgY29uc3QgciA9IHtcbiAgICAgICAgICAgICAgICBoeWRyYXRlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcm9qZWN0aW9uczogbnVsbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGNvbnN0IG8gPSB0aGlzLmNvbnRyb2xsZXIgPSBDb250cm9sbGVyLiRlbChzLCBuLCB0aGlzLmhvc3QsIHIpO1xuICAgICAgICAgICAgby54dChyLCBudWxsKTtcbiAgICAgICAgICAgIHJldHVybiBDKHRoaXMuX3QoXCJoeWRyYXRpbmdcIiksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgby5DdChudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gQyh0aGlzLl90KFwiaHlkcmF0ZWRcIiksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG8uQXQoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5WdCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgYWN0aXZhdGUoKSB7XG4gICAgICAgIHJldHVybiBDKHRoaXMuVnQsICgoKSA9PiBDKHRoaXMuX3QoXCJiZWZvcmVBY3RpdmF0ZVwiKSwgKCgpID0+IEModGhpcy5jb250cm9sbGVyLmFjdGl2YXRlKHRoaXMuY29udHJvbGxlciwgbnVsbCwgMiwgdm9pZCAwKSwgKCgpID0+IHRoaXMuX3QoXCJhZnRlckFjdGl2YXRlXCIpKSkpKSkpO1xuICAgIH1cbiAgICBkZWFjdGl2YXRlKCkge1xuICAgICAgICByZXR1cm4gQyh0aGlzLl90KFwiYmVmb3JlRGVhY3RpdmF0ZVwiKSwgKCgpID0+IEModGhpcy5jb250cm9sbGVyLmRlYWN0aXZhdGUodGhpcy5jb250cm9sbGVyLCBudWxsLCAwKSwgKCgpID0+IHRoaXMuX3QoXCJhZnRlckRlYWN0aXZhdGVcIikpKSkpO1xuICAgIH1cbiAgICBfdCh0KSB7XG4gICAgICAgIHJldHVybiBBKC4uLnRoaXMuY29udGFpbmVyLmdldEFsbChiZSkucmVkdWNlKCgoZSwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKGkuc2xvdCA9PT0gdCkgZS5wdXNoKGkucnVuKCkpO1xuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH0pLCBbXSkpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgbnVsbCA9PT0gKHQgPSB0aGlzLmNvbnRyb2xsZXIpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuZGlzcG9zZSgpO1xuICAgIH1cbn1cblxuY2xhc3MgUmVmcyB7fVxuXG5mdW5jdGlvbiBpcyh0LCBlKSB7XG4gICAgdmFyIGksIHM7XG4gICAgcmV0dXJuIG51bGwgIT09IChzID0gbnVsbCA9PT0gKGkgPSB0LiRhdSkgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaVtlXSkgJiYgdm9pZCAwICE9PSBzID8gcyA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIHNzKHQsIGUsIGkpIHtcbiAgICB2YXIgcztcbiAgICB2YXIgbjtcbiAgICAobnVsbCAhPT0gKHMgPSAobiA9IHQpLiRhdSkgJiYgdm9pZCAwICE9PSBzID8gcyA6IG4uJGF1ID0gbmV3IFJlZnMpW2VdID0gaTtcbn1cblxuY29uc3QgbnMgPSBsLmNyZWF0ZUludGVyZmFjZShcIklOb2RlXCIpO1xuXG5jb25zdCBycyA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSUV2ZW50VGFyZ2V0XCIsICh0ID0+IHQuY2FjaGVkQ2FsbGJhY2soKHQgPT4ge1xuICAgIGlmICh0Lmhhcyh0cywgdHJ1ZSkpIHJldHVybiB0LmdldCh0cykuaG9zdDtcbiAgICByZXR1cm4gdC5nZXQoS3QpLmRvY3VtZW50O1xufSkpKSk7XG5cbmNvbnN0IG9zID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJUmVuZGVyTG9jYXRpb25cIik7XG5cbnZhciBscztcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJFbGVtZW50XCJdID0gMV0gPSBcIkVsZW1lbnRcIjtcbiAgICB0W3RbXCJBdHRyXCJdID0gMl0gPSBcIkF0dHJcIjtcbiAgICB0W3RbXCJUZXh0XCJdID0gM10gPSBcIlRleHRcIjtcbiAgICB0W3RbXCJDREFUQVNlY3Rpb25cIl0gPSA0XSA9IFwiQ0RBVEFTZWN0aW9uXCI7XG4gICAgdFt0W1wiRW50aXR5UmVmZXJlbmNlXCJdID0gNV0gPSBcIkVudGl0eVJlZmVyZW5jZVwiO1xuICAgIHRbdFtcIkVudGl0eVwiXSA9IDZdID0gXCJFbnRpdHlcIjtcbiAgICB0W3RbXCJQcm9jZXNzaW5nSW5zdHJ1Y3Rpb25cIl0gPSA3XSA9IFwiUHJvY2Vzc2luZ0luc3RydWN0aW9uXCI7XG4gICAgdFt0W1wiQ29tbWVudFwiXSA9IDhdID0gXCJDb21tZW50XCI7XG4gICAgdFt0W1wiRG9jdW1lbnRcIl0gPSA5XSA9IFwiRG9jdW1lbnRcIjtcbiAgICB0W3RbXCJEb2N1bWVudFR5cGVcIl0gPSAxMF0gPSBcIkRvY3VtZW50VHlwZVwiO1xuICAgIHRbdFtcIkRvY3VtZW50RnJhZ21lbnRcIl0gPSAxMV0gPSBcIkRvY3VtZW50RnJhZ21lbnRcIjtcbiAgICB0W3RbXCJOb3RhdGlvblwiXSA9IDEyXSA9IFwiTm90YXRpb25cIjtcbn0pKGxzIHx8IChscyA9IHt9KSk7XG5cbmNvbnN0IGhzID0gbmV3IFdlYWtNYXA7XG5cbmZ1bmN0aW9uIGFzKHQpIHtcbiAgICBpZiAoaHMuaGFzKHQpKSByZXR1cm4gaHMuZ2V0KHQpO1xuICAgIGxldCBlID0gMDtcbiAgICBsZXQgaSA9IHQubmV4dFNpYmxpbmc7XG4gICAgd2hpbGUgKG51bGwgIT09IGkpIHtcbiAgICAgICAgaWYgKDggPT09IGkubm9kZVR5cGUpIHN3aXRjaCAoaS50ZXh0Q29udGVudCkge1xuICAgICAgICAgIGNhc2UgXCJhdS1zdGFydFwiOlxuICAgICAgICAgICAgKytlO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiYXUtZW5kXCI6XG4gICAgICAgICAgICBpZiAoMCA9PT0gZS0tKSByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgICAgICBpID0gaS5uZXh0U2libGluZztcbiAgICB9XG4gICAgaWYgKG51bGwgPT09IHQucGFyZW50Tm9kZSAmJiAxMSA9PT0gdC5ub2RlVHlwZSkge1xuICAgICAgICBjb25zdCBlID0gc2kuZm9yKHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSByZXR1cm4gbnVsbDtcbiAgICAgICAgaWYgKDIgPT09IGUubW91bnRUYXJnZXQpIHJldHVybiBhcyhlLmhvc3QpO1xuICAgIH1cbiAgICByZXR1cm4gdC5wYXJlbnROb2RlO1xufVxuXG5mdW5jdGlvbiBjcyh0LCBlKSB7XG4gICAgaWYgKHZvaWQgMCAhPT0gdC5wbGF0Zm9ybSAmJiAhKHQgaW5zdGFuY2VvZiB0LnBsYXRmb3JtLk5vZGUpKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0LmNoaWxkTm9kZXM7XG4gICAgICAgIGZvciAobGV0IHQgPSAwLCBzID0gaS5sZW5ndGg7IHQgPCBzOyArK3QpIGhzLnNldChpW3RdLCBlKTtcbiAgICB9IGVsc2UgaHMuc2V0KHQsIGUpO1xufVxuXG5mdW5jdGlvbiB1cyh0KSB7XG4gICAgaWYgKGZzKHQpKSByZXR1cm4gdDtcbiAgICBjb25zdCBlID0gdC5vd25lckRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoXCJhdS1lbmRcIik7XG4gICAgY29uc3QgaSA9IHQub3duZXJEb2N1bWVudC5jcmVhdGVDb21tZW50KFwiYXUtc3RhcnRcIik7XG4gICAgaWYgKG51bGwgIT09IHQucGFyZW50Tm9kZSkge1xuICAgICAgICB0LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGUsIHQpO1xuICAgICAgICBlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGksIGUpO1xuICAgIH1cbiAgICBlLiRzdGFydCA9IGk7XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIGZzKHQpIHtcbiAgICByZXR1cm4gXCJhdS1lbmRcIiA9PT0gdC50ZXh0Q29udGVudDtcbn1cblxuY2xhc3MgRnJhZ21lbnROb2RlU2VxdWVuY2Uge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5wbGF0Zm9ybSA9IHQ7XG4gICAgICAgIHRoaXMuZnJhZ21lbnQgPSBlO1xuICAgICAgICB0aGlzLmlzTW91bnRlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzTGlua2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubmV4dCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5yZWZOb2RlID0gdm9pZCAwO1xuICAgICAgICBjb25zdCBpID0gZS5xdWVyeVNlbGVjdG9yQWxsKFwiLmF1XCIpO1xuICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgIGxldCBuID0gaS5sZW5ndGg7XG4gICAgICAgIGxldCByO1xuICAgICAgICBsZXQgbyA9IHRoaXMudGFyZ2V0cyA9IEFycmF5KG4pO1xuICAgICAgICB3aGlsZSAobiA+IHMpIHtcbiAgICAgICAgICAgIHIgPSBpW3NdO1xuICAgICAgICAgICAgaWYgKFwiQVUtTVwiID09PSByLm5vZGVOYW1lKSBvW3NdID0gdXMocik7IGVsc2Ugb1tzXSA9IHI7XG4gICAgICAgICAgICArK3M7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbCA9IGUuY2hpbGROb2RlcztcbiAgICAgICAgY29uc3QgaCA9IHRoaXMuY2hpbGROb2RlcyA9IEFycmF5KG4gPSBsLmxlbmd0aCk7XG4gICAgICAgIHMgPSAwO1xuICAgICAgICB3aGlsZSAobiA+IHMpIHtcbiAgICAgICAgICAgIGhbc10gPSBsW3NdO1xuICAgICAgICAgICAgKytzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZmlyc3RDaGlsZCA9IGUuZmlyc3RDaGlsZDtcbiAgICAgICAgdGhpcy5sYXN0Q2hpbGQgPSBlLmxhc3RDaGlsZDtcbiAgICB9XG4gICAgZmluZFRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRhcmdldHM7XG4gICAgfVxuICAgIGluc2VydEJlZm9yZSh0KSB7XG4gICAgICAgIGlmICh0aGlzLmlzTGlua2VkICYmICEhdGhpcy5yZWZOb2RlKSB0aGlzLmFkZFRvTGlua2VkKCk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzTW91bnRlZCkge1xuICAgICAgICAgICAgICAgIGxldCBpID0gdGhpcy5maXJzdENoaWxkO1xuICAgICAgICAgICAgICAgIGxldCBzO1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLmxhc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB3aGlsZSAobnVsbCAhPSBpKSB7XG4gICAgICAgICAgICAgICAgICAgIHMgPSBpLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgICAgICBlLmluc2VydEJlZm9yZShpLCB0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGkgPT09IG4pIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBpID0gcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNNb3VudGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHRoaXMuZnJhZ21lbnQsIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFwcGVuZFRvKHQsIGUgPSBmYWxzZSkge1xuICAgICAgICBpZiAodGhpcy5pc01vdW50ZWQpIHtcbiAgICAgICAgICAgIGxldCBlID0gdGhpcy5maXJzdENoaWxkO1xuICAgICAgICAgICAgbGV0IGk7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICB3aGlsZSAobnVsbCAhPSBlKSB7XG4gICAgICAgICAgICAgICAgaSA9IGUubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgdC5hcHBlbmRDaGlsZChlKTtcbiAgICAgICAgICAgICAgICBpZiAoZSA9PT0gcykgYnJlYWs7XG4gICAgICAgICAgICAgICAgZSA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlzTW91bnRlZCA9IHRydWU7XG4gICAgICAgICAgICBpZiAoIWUpIHQuYXBwZW5kQ2hpbGQodGhpcy5mcmFnbWVudCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmVtb3ZlKCkge1xuICAgICAgICBpZiAodGhpcy5pc01vdW50ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaXNNb3VudGVkID0gZmFsc2U7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5mcmFnbWVudDtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmxhc3RDaGlsZDtcbiAgICAgICAgICAgIGxldCBpO1xuICAgICAgICAgICAgbGV0IHMgPSB0aGlzLmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICB3aGlsZSAobnVsbCAhPT0gcykge1xuICAgICAgICAgICAgICAgIGkgPSBzLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgIHQuYXBwZW5kQ2hpbGQocyk7XG4gICAgICAgICAgICAgICAgaWYgKHMgPT09IGUpIGJyZWFrO1xuICAgICAgICAgICAgICAgIHMgPSBpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGFkZFRvTGlua2VkKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5yZWZOb2RlO1xuICAgICAgICBjb25zdCBlID0gdC5wYXJlbnROb2RlO1xuICAgICAgICBpZiAodGhpcy5pc01vdW50ZWQpIHtcbiAgICAgICAgICAgIGxldCBpID0gdGhpcy5maXJzdENoaWxkO1xuICAgICAgICAgICAgbGV0IHM7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5sYXN0Q2hpbGQ7XG4gICAgICAgICAgICB3aGlsZSAobnVsbCAhPSBpKSB7XG4gICAgICAgICAgICAgICAgcyA9IGkubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgZS5pbnNlcnRCZWZvcmUoaSwgdCk7XG4gICAgICAgICAgICAgICAgaWYgKGkgPT09IG4pIGJyZWFrO1xuICAgICAgICAgICAgICAgIGkgPSBzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pc01vdW50ZWQgPSB0cnVlO1xuICAgICAgICAgICAgZS5pbnNlcnRCZWZvcmUodGhpcy5mcmFnbWVudCwgdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5saW5rKCkge1xuICAgICAgICB0aGlzLmlzTGlua2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMubmV4dCA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5yZWZOb2RlID0gdm9pZCAwO1xuICAgIH1cbiAgICBsaW5rKHQpIHtcbiAgICAgICAgdGhpcy5pc0xpbmtlZCA9IHRydWU7XG4gICAgICAgIGlmIChmcyh0KSkgdGhpcy5yZWZOb2RlID0gdDsgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLm5leHQgPSB0O1xuICAgICAgICAgICAgdGhpcy5vYnRhaW5SZWZOb2RlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb2J0YWluUmVmTm9kZSgpIHtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gdGhpcy5uZXh0KSB0aGlzLnJlZk5vZGUgPSB0aGlzLm5leHQuZmlyc3RDaGlsZDsgZWxzZSB0aGlzLnJlZk5vZGUgPSB2b2lkIDA7XG4gICAgfVxufVxuXG5jb25zdCBkcyA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSVdpbmRvd1wiLCAodCA9PiB0LmNhbGxiYWNrKCh0ID0+IHQuZ2V0KEt0KS53aW5kb3cpKSkpO1xuXG5jb25zdCBtcyA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSUxvY2F0aW9uXCIsICh0ID0+IHQuY2FsbGJhY2soKHQgPT4gdC5nZXQoZHMpLmxvY2F0aW9uKSkpKTtcblxuY29uc3QgdnMgPSBsLmNyZWF0ZUludGVyZmFjZShcIklIaXN0b3J5XCIsICh0ID0+IHQuY2FsbGJhY2soKHQgPT4gdC5nZXQoZHMpLmhpc3RvcnkpKSkpO1xuXG5jb25zdCBwcyA9IHtcbiAgICBbTi5jYXB0dXJpbmddOiB7XG4gICAgICAgIGNhcHR1cmU6IHRydWVcbiAgICB9LFxuICAgIFtOLmJ1YmJsaW5nXToge1xuICAgICAgICBjYXB0dXJlOiBmYWxzZVxuICAgIH1cbn07XG5cbmNsYXNzIExpc3RlbmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCByLCBvLCBsKSB7XG4gICAgICAgIHRoaXMucGxhdGZvcm0gPSB0O1xuICAgICAgICB0aGlzLnRhcmdldEV2ZW50ID0gZTtcbiAgICAgICAgdGhpcy5kZWxlZ2F0aW9uU3RyYXRlZ3kgPSBpO1xuICAgICAgICB0aGlzLnNvdXJjZUV4cHJlc3Npb24gPSBzO1xuICAgICAgICB0aGlzLnRhcmdldCA9IG47XG4gICAgICAgIHRoaXMucHJldmVudERlZmF1bHQgPSByO1xuICAgICAgICB0aGlzLmV2ZW50RGVsZWdhdG9yID0gbztcbiAgICAgICAgdGhpcy5sb2NhdG9yID0gbDtcbiAgICAgICAgdGhpcy5pbnRlcmNlcHRvciA9IHRoaXM7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmhhbmRsZXIgPSBudWxsO1xuICAgIH1cbiAgICBjYWxsU291cmNlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuJHNjb3BlLm92ZXJyaWRlQ29udGV4dDtcbiAgICAgICAgZS4kZXZlbnQgPSB0O1xuICAgICAgICBjb25zdCBpID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uLmV2YWx1YXRlKDgsIHRoaXMuJHNjb3BlLCB0aGlzLmxvY2F0b3IsIG51bGwpO1xuICAgICAgICBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KGUsIFwiJGV2ZW50XCIpO1xuICAgICAgICBpZiAodHJ1ZSAhPT0gaSAmJiB0aGlzLnByZXZlbnREZWZhdWx0KSB0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBoYW5kbGVFdmVudCh0KSB7XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IuY2FsbFNvdXJjZSh0KTtcbiAgICB9XG4gICAgJGJpbmQodCwgZSkge1xuICAgICAgICBpZiAodGhpcy5pc0JvdW5kKSB7XG4gICAgICAgICAgICBpZiAodGhpcy4kc2NvcGUgPT09IGUpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuaW50ZXJjZXB0b3IuJHVuYmluZCgyIHwgdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kc2NvcGUgPSBlO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICBpZiAoaS5oYXNCaW5kKSBpLmJpbmQodCwgZSwgdGhpcy5pbnRlcmNlcHRvcik7XG4gICAgICAgIGlmICh0aGlzLmRlbGVnYXRpb25TdHJhdGVneSA9PT0gTi5ub25lKSB0aGlzLnRhcmdldC5hZGRFdmVudExpc3RlbmVyKHRoaXMudGFyZ2V0RXZlbnQsIHRoaXMpOyBlbHNlIHRoaXMuaGFuZGxlciA9IHRoaXMuZXZlbnREZWxlZ2F0b3IuYWRkRXZlbnRMaXN0ZW5lcih0aGlzLmxvY2F0b3IuZ2V0KHJzKSwgdGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0RXZlbnQsIHRoaXMsIHBzW3RoaXMuZGVsZWdhdGlvblN0cmF0ZWd5XSk7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IHRydWU7XG4gICAgfVxuICAgICR1bmJpbmQodCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNCb3VuZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICBpZiAoZS5oYXNVbmJpbmQpIGUudW5iaW5kKHQsIHRoaXMuJHNjb3BlLCB0aGlzLmludGVyY2VwdG9yKTtcbiAgICAgICAgdGhpcy4kc2NvcGUgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5kZWxlZ2F0aW9uU3RyYXRlZ3kgPT09IE4ubm9uZSkgdGhpcy50YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0aGlzLnRhcmdldEV2ZW50LCB0aGlzKTsgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXIuZGlzcG9zZSgpO1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVyID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICB9XG4gICAgb2JzZXJ2ZSh0LCBlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbn1cblxuY29uc3QgZ3MgPSB7XG4gICAgY2FwdHVyZTogZmFsc2Vcbn07XG5cbmNsYXNzIExpc3RlbmVyVHJhY2tlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSA9IGdzKSB7XG4gICAgICAgIHRoaXMuanQgPSB0O1xuICAgICAgICB0aGlzLk50ID0gZTtcbiAgICAgICAgdGhpcy5XdCA9IGk7XG4gICAgICAgIHRoaXMuSHQgPSAwO1xuICAgICAgICB0aGlzLnp0ID0gbmV3IE1hcDtcbiAgICAgICAgdGhpcy5HdCA9IG5ldyBNYXA7XG4gICAgfVxuICAgIFh0KCkge1xuICAgICAgICBpZiAoMSA9PT0gKyt0aGlzLkh0KSB0aGlzLmp0LmFkZEV2ZW50TGlzdGVuZXIodGhpcy5OdCwgdGhpcywgdGhpcy5XdCk7XG4gICAgfVxuICAgIEt0KCkge1xuICAgICAgICBpZiAoMCA9PT0gLS10aGlzLkh0KSB0aGlzLmp0LnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5OdCwgdGhpcywgdGhpcy5XdCk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLkh0ID4gMCkge1xuICAgICAgICAgICAgdGhpcy5IdCA9IDA7XG4gICAgICAgICAgICB0aGlzLmp0LnJlbW92ZUV2ZW50TGlzdGVuZXIodGhpcy5OdCwgdGhpcywgdGhpcy5XdCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy56dC5jbGVhcigpO1xuICAgICAgICB0aGlzLkd0LmNsZWFyKCk7XG4gICAgfVxuICAgIFl0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRydWUgPT09IHRoaXMuV3QuY2FwdHVyZSA/IHRoaXMuenQgOiB0aGlzLkd0O1xuICAgICAgICBsZXQgaSA9IGUuZ2V0KHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBpKSBlLnNldCh0LCBpID0gd3QoKSk7XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBoYW5kbGVFdmVudCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0cnVlID09PSB0aGlzLld0LmNhcHR1cmUgPyB0aGlzLnp0IDogdGhpcy5HdDtcbiAgICAgICAgY29uc3QgaSA9IHQuY29tcG9zZWRQYXRoKCk7XG4gICAgICAgIGlmICh0cnVlID09PSB0aGlzLld0LmNhcHR1cmUpIGkucmV2ZXJzZSgpO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgaSkge1xuICAgICAgICAgICAgY29uc3QgaSA9IGUuZ2V0KHMpO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gaSkgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCBuID0gaVt0aGlzLk50XTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IG4pIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKEN0KG4pKSBuKHQpOyBlbHNlIG4uaGFuZGxlRXZlbnQodCk7XG4gICAgICAgICAgICBpZiAodHJ1ZSA9PT0gdC5jYW5jZWxCdWJibGUpIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY2xhc3MgRGVsZWdhdGVTdWJzY3JpcHRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdGhpcy5RdCA9IHQ7XG4gICAgICAgIHRoaXMuWnQgPSBlO1xuICAgICAgICB0aGlzLk50ID0gaTtcbiAgICAgICAgdC5YdCgpO1xuICAgICAgICBlW2ldID0gcztcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy5RdC5LdCgpO1xuICAgICAgICB0aGlzLlp0W3RoaXMuTnRdID0gdm9pZCAwO1xuICAgIH1cbn1cblxuY2xhc3MgRXZlbnRTdWJzY3JpYmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuY29uZmlnID0gdDtcbiAgICAgICAgdGhpcy50YXJnZXQgPSBudWxsO1xuICAgICAgICB0aGlzLmhhbmRsZXIgPSBudWxsO1xuICAgIH1cbiAgICBzdWJzY3JpYmUodCwgZSkge1xuICAgICAgICB0aGlzLnRhcmdldCA9IHQ7XG4gICAgICAgIHRoaXMuaGFuZGxlciA9IGU7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBmb3IgKGkgb2YgdGhpcy5jb25maWcuZXZlbnRzKSB0LmFkZEV2ZW50TGlzdGVuZXIoaSwgZSk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGNvbnN0IHt0YXJnZXQ6IHQsIGhhbmRsZXI6IGV9ID0gdGhpcztcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGlmIChudWxsICE9PSB0ICYmIG51bGwgIT09IGUpIGZvciAoaSBvZiB0aGlzLmNvbmZpZy5ldmVudHMpIHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihpLCBlKTtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0aGlzLmhhbmRsZXIgPSBudWxsO1xuICAgIH1cbn1cblxuY29uc3Qgd3MgPSBsLmNyZWF0ZUludGVyZmFjZShcIklFdmVudERlbGVnYXRvclwiLCAodCA9PiB0LnNpbmdsZXRvbihFdmVudERlbGVnYXRvcikpKTtcblxuY2xhc3MgRXZlbnREZWxlZ2F0b3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLkp0ID0gd3QoKTtcbiAgICB9XG4gICAgYWRkRXZlbnRMaXN0ZW5lcih0LCBlLCBpLCBzLCBuKSB7XG4gICAgICAgIHZhciByO1xuICAgICAgICB2YXIgbztcbiAgICAgICAgY29uc3QgbCA9IG51bGwgIT09IChyID0gKG8gPSB0aGlzLkp0KVtpXSkgJiYgdm9pZCAwICE9PSByID8gciA6IG9baV0gPSBuZXcgTWFwO1xuICAgICAgICBsZXQgaCA9IGwuZ2V0KHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBoKSBsLnNldCh0LCBoID0gbmV3IExpc3RlbmVyVHJhY2tlcih0LCBpLCBuKSk7XG4gICAgICAgIHJldHVybiBuZXcgRGVsZWdhdGVTdWJzY3JpcHRpb24oaCwgaC5ZdChlKSwgaSwgcyk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGZvciAoY29uc3QgdCBpbiB0aGlzLkp0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5KdFt0XTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBlLnZhbHVlcygpKSB0LmRpc3Bvc2UoKTtcbiAgICAgICAgICAgIGUuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuY29uc3QgYnMgPSBsLmNyZWF0ZUludGVyZmFjZShcIklQcm9qZWN0aW9uc1wiKTtcblxuY29uc3QgeHMgPSBsLmNyZWF0ZUludGVyZmFjZShcIklBdVNsb3RzSW5mb1wiKTtcblxuY2xhc3MgQXVTbG90c0luZm8ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wcm9qZWN0ZWRTbG90cyA9IHQ7XG4gICAgfVxufVxuXG52YXIgeXM7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFtcImh5ZHJhdGVFbGVtZW50XCJdID0gXCJyYVwiO1xuICAgIHRbXCJoeWRyYXRlQXR0cmlidXRlXCJdID0gXCJyYlwiO1xuICAgIHRbXCJoeWRyYXRlVGVtcGxhdGVDb250cm9sbGVyXCJdID0gXCJyY1wiO1xuICAgIHRbXCJoeWRyYXRlTGV0RWxlbWVudFwiXSA9IFwicmRcIjtcbiAgICB0W1wic2V0UHJvcGVydHlcIl0gPSBcInJlXCI7XG4gICAgdFtcImludGVycG9sYXRpb25cIl0gPSBcInJmXCI7XG4gICAgdFtcInByb3BlcnR5QmluZGluZ1wiXSA9IFwicmdcIjtcbiAgICB0W1wiY2FsbEJpbmRpbmdcIl0gPSBcInJoXCI7XG4gICAgdFtcImxldEJpbmRpbmdcIl0gPSBcInJpXCI7XG4gICAgdFtcInJlZkJpbmRpbmdcIl0gPSBcInJqXCI7XG4gICAgdFtcIml0ZXJhdG9yQmluZGluZ1wiXSA9IFwicmtcIjtcbiAgICB0W1widGV4dEJpbmRpbmdcIl0gPSBcImhhXCI7XG4gICAgdFtcImxpc3RlbmVyQmluZGluZ1wiXSA9IFwiaGJcIjtcbiAgICB0W1wiYXR0cmlidXRlQmluZGluZ1wiXSA9IFwiaGNcIjtcbiAgICB0W1wic3R5bGVQcm9wZXJ0eUJpbmRpbmdcIl0gPSBcImhkXCI7XG4gICAgdFtcInNldEF0dHJpYnV0ZVwiXSA9IFwiaGVcIjtcbiAgICB0W1wic2V0Q2xhc3NBdHRyaWJ1dGVcIl0gPSBcImhmXCI7XG4gICAgdFtcInNldFN0eWxlQXR0cmlidXRlXCJdID0gXCJoZ1wiO1xuICAgIHRbXCJzcHJlYWRCaW5kaW5nXCJdID0gXCJoc1wiO1xuICAgIHRbXCJzcHJlYWRFbGVtZW50UHJvcFwiXSA9IFwiaHBcIjtcbn0pKHlzIHx8ICh5cyA9IHt9KSk7XG5cbmNvbnN0IGtzID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJbnN0cnVjdGlvblwiKTtcblxuZnVuY3Rpb24gQ3ModCkge1xuICAgIGNvbnN0IGUgPSB0LnR5cGU7XG4gICAgcmV0dXJuIEF0KGUpICYmIDIgPT09IGUubGVuZ3RoO1xufVxuXG5jbGFzcyBJbnRlcnBvbGF0aW9uSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gdDtcbiAgICAgICAgdGhpcy50byA9IGU7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJyZlwiO1xuICAgIH1cbn1cblxuY2xhc3MgUHJvcGVydHlCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gdDtcbiAgICAgICAgdGhpcy50byA9IGU7XG4gICAgICAgIHRoaXMubW9kZSA9IGk7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJyZ1wiO1xuICAgIH1cbn1cblxuY2xhc3MgSXRlcmF0b3JCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gdDtcbiAgICAgICAgdGhpcy50byA9IGU7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJya1wiO1xuICAgIH1cbn1cblxuY2xhc3MgQ2FsbEJpbmRpbmdJbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmZyb20gPSB0O1xuICAgICAgICB0aGlzLnRvID0gZTtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInJoXCI7XG4gICAgfVxufVxuXG5jbGFzcyBSZWZCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gdDtcbiAgICAgICAgdGhpcy50byA9IGU7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJyalwiO1xuICAgIH1cbn1cblxuY2xhc3MgU2V0UHJvcGVydHlJbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdDtcbiAgICAgICAgdGhpcy50byA9IGU7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJyZVwiO1xuICAgIH1cbn1cblxuY2xhc3MgSHlkcmF0ZUVsZW1lbnRJbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbiwgcikge1xuICAgICAgICB0aGlzLnJlcyA9IHQ7XG4gICAgICAgIHRoaXMuYWxpYXMgPSBlO1xuICAgICAgICB0aGlzLnByb3BzID0gaTtcbiAgICAgICAgdGhpcy5wcm9qZWN0aW9ucyA9IHM7XG4gICAgICAgIHRoaXMuY29udGFpbmVybGVzcyA9IG47XG4gICAgICAgIHRoaXMuY2FwdHVyZXMgPSByO1xuICAgICAgICB0aGlzLmF1U2xvdCA9IG51bGw7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJyYVwiO1xuICAgIH1cbn1cblxuY2xhc3MgSHlkcmF0ZUF0dHJpYnV0ZUluc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMucmVzID0gdDtcbiAgICAgICAgdGhpcy5hbGlhcyA9IGU7XG4gICAgICAgIHRoaXMucHJvcHMgPSBpO1xuICAgIH1cbiAgICBnZXQgdHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwicmJcIjtcbiAgICB9XG59XG5cbmNsYXNzIEh5ZHJhdGVUZW1wbGF0ZUNvbnRyb2xsZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdGhpcy5kZWYgPSB0O1xuICAgICAgICB0aGlzLnJlcyA9IGU7XG4gICAgICAgIHRoaXMuYWxpYXMgPSBpO1xuICAgICAgICB0aGlzLnByb3BzID0gcztcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInJjXCI7XG4gICAgfVxufVxuXG5jbGFzcyBIeWRyYXRlTGV0RWxlbWVudEluc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zID0gdDtcbiAgICAgICAgdGhpcy50b0JpbmRpbmdDb250ZXh0ID0gZTtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcInJkXCI7XG4gICAgfVxufVxuXG5jbGFzcyBMZXRCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gdDtcbiAgICAgICAgdGhpcy50byA9IGU7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJyaVwiO1xuICAgIH1cbn1cblxuY2xhc3MgVGV4dEJpbmRpbmdJbnN0cnVjdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmZyb20gPSB0O1xuICAgICAgICB0aGlzLnN0cmljdCA9IGU7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJoYVwiO1xuICAgIH1cbn1cblxuY2xhc3MgTGlzdGVuZXJCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdGhpcy5mcm9tID0gdDtcbiAgICAgICAgdGhpcy50byA9IGU7XG4gICAgICAgIHRoaXMucHJldmVudERlZmF1bHQgPSBpO1xuICAgICAgICB0aGlzLnN0cmF0ZWd5ID0gcztcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImhiXCI7XG4gICAgfVxufVxuXG5jbGFzcyBTdHlsZVByb3BlcnR5QmluZGluZ0luc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZnJvbSA9IHQ7XG4gICAgICAgIHRoaXMudG8gPSBlO1xuICAgIH1cbiAgICBnZXQgdHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiaGRcIjtcbiAgICB9XG59XG5cbmNsYXNzIFNldEF0dHJpYnV0ZUluc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgICAgICB0aGlzLnRvID0gZTtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImhlXCI7XG4gICAgfVxufVxuXG5jbGFzcyBTZXRDbGFzc0F0dHJpYnV0ZUluc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgICAgICB0aGlzLnR5cGUgPSBcImhmXCI7XG4gICAgfVxufVxuXG5jbGFzcyBTZXRTdHlsZUF0dHJpYnV0ZUluc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgICAgICB0aGlzLnR5cGUgPSBcImhnXCI7XG4gICAgfVxufVxuXG5jbGFzcyBBdHRyaWJ1dGVCaW5kaW5nSW5zdHJ1Y3Rpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5hdHRyID0gdDtcbiAgICAgICAgdGhpcy5mcm9tID0gZTtcbiAgICAgICAgdGhpcy50byA9IGk7XG4gICAgfVxuICAgIGdldCB0eXBlKCkge1xuICAgICAgICByZXR1cm4gXCJoY1wiO1xuICAgIH1cbn1cblxuY2xhc3MgU3ByZWFkQmluZGluZ0luc3RydWN0aW9uIHtcbiAgICBnZXQgdHlwZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiaHNcIjtcbiAgICB9XG59XG5cbmNsYXNzIFNwcmVhZEVsZW1lbnRQcm9wQmluZGluZ0luc3RydWN0aW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuaW5zdHJ1Y3Rpb25zID0gdDtcbiAgICB9XG4gICAgZ2V0IHR5cGUoKSB7XG4gICAgICAgIHJldHVybiBcImhwXCI7XG4gICAgfVxufVxuXG5jb25zdCBBcyA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSVRlbXBsYXRlQ29tcGlsZXJcIik7XG5cbmNvbnN0IFNzID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJUmVuZGVyZXJcIik7XG5cbmZ1bmN0aW9uIFJzKHQpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gaShzKSB7XG4gICAgICAgIGNvbnN0IG4gPSBmdW5jdGlvbiguLi5lKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gbmV3IHMoLi4uZSk7XG4gICAgICAgICAgICBpLmluc3RydWN0aW9uVHlwZSA9IHQ7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfTtcbiAgICAgICAgbi5yZWdpc3RlciA9IGZ1bmN0aW9uIHQoZSkge1xuICAgICAgICAgICAgYy5zaW5nbGV0b24oU3MsIG4pLnJlZ2lzdGVyKGUpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCByID0gZS5nZXRPd25LZXlzKHMpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgcikgY3QodCwgaHQodCwgcyksIG4pO1xuICAgICAgICBjb25zdCBvID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMocyk7XG4gICAgICAgIE9iamVjdC5rZXlzKG8pLmZpbHRlcigodCA9PiBcInByb3RvdHlwZVwiICE9PSB0KSkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBSZWZsZWN0LmRlZmluZVByb3BlcnR5KG4sIHQsIG9bdF0pO1xuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIEVzKHQsIGUsIGkpIHtcbiAgICBpZiAoQXQoZSkpIHJldHVybiB0LnBhcnNlKGUsIGkpO1xuICAgIHJldHVybiBlO1xufVxuXG5mdW5jdGlvbiBCcyh0KSB7XG4gICAgaWYgKG51bGwgIT0gdC52aWV3TW9kZWwpIHJldHVybiB0LnZpZXdNb2RlbDtcbiAgICByZXR1cm4gdDtcbn1cblxuZnVuY3Rpb24gSXModCwgZSkge1xuICAgIGlmIChcImVsZW1lbnRcIiA9PT0gZSkgcmV0dXJuIHQ7XG4gICAgc3dpdGNoIChlKSB7XG4gICAgICBjYXNlIFwiY29udHJvbGxlclwiOlxuICAgICAgICByZXR1cm4gc2kuZm9yKHQpO1xuXG4gICAgICBjYXNlIFwidmlld1wiOlxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwNzUwXCIpO1xuXG4gICAgICBjYXNlIFwidmlldy1tb2RlbFwiOlxuICAgICAgICByZXR1cm4gc2kuZm9yKHQpLnZpZXdNb2RlbDtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgaSA9IE1lLmZvcih0LCBlKTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGkpIHJldHVybiBpLnZpZXdNb2RlbDtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBzaS5mb3IodCwge1xuICAgICAgICAgICAgICAgIG5hbWU6IGVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gcykgdGhyb3cgbmV3IEVycm9yKGBBVVIwNzUxOiR7ZX1gKTtcbiAgICAgICAgICAgIHJldHVybiBzLnZpZXdNb2RlbDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxubGV0IFRzID0gY2xhc3MgU2V0UHJvcGVydHlSZW5kZXJlciB7XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IEJzKGUpO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBzLiRvYnNlcnZlcnMgJiYgdm9pZCAwICE9PSBzLiRvYnNlcnZlcnNbaS50b10pIHMuJG9ic2VydmVyc1tpLnRvXS5zZXRWYWx1ZShpLnZhbHVlLCAyKTsgZWxzZSBzW2kudG9dID0gaS52YWx1ZTtcbiAgICB9XG59O1xuXG5UcyA9IG90KFsgUnMoXCJyZVwiKSBdLCBUcyk7XG5cbmxldCBEcyA9IGNsYXNzIEN1c3RvbUVsZW1lbnRSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnIgPSB0O1xuICAgICAgICB0aGlzLnAgPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGluamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIFsgUGksIEt0IF07XG4gICAgfVxuICAgIHJlbmRlcih0LCBlLCBpKSB7XG4gICAgICAgIGxldCBzO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIGxldCBvO1xuICAgICAgICBjb25zdCBsID0gaS5yZXM7XG4gICAgICAgIGNvbnN0IGggPSBpLnByb2plY3Rpb25zO1xuICAgICAgICBjb25zdCBhID0gdC5jb250YWluZXI7XG4gICAgICAgIGNvbnN0IGMgPSBubih0aGlzLnAsIHQsIGUsIGksIGUsIG51bGwgPT0gaCA/IHZvaWQgMCA6IG5ldyBBdVNsb3RzSW5mbyhPYmplY3Qua2V5cyhoKSkpO1xuICAgICAgICBzd2l0Y2ggKHR5cGVvZiBsKSB7XG4gICAgICAgICAgY2FzZSBcInN0cmluZ1wiOlxuICAgICAgICAgICAgcyA9IGEuZmluZChzaSwgbCk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBzKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3NTI6JHtsfUAke3RbXCJuYW1lXCJdfWApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcyA9IGw7XG4gICAgICAgIH1cbiAgICAgICAgbiA9IHMuVHlwZTtcbiAgICAgICAgciA9IGMuaW52b2tlKG4pO1xuICAgICAgICBjLnJlZ2lzdGVyUmVzb2x2ZXIobiwgbmV3IHgocy5rZXksIHIpKTtcbiAgICAgICAgbyA9IENvbnRyb2xsZXIuJGVsKGMsIHIsIGUsIGksIHMpO1xuICAgICAgICBzcyhlLCBzLmtleSwgbyk7XG4gICAgICAgIGNvbnN0IHUgPSB0aGlzLnIucmVuZGVyZXJzO1xuICAgICAgICBjb25zdCBmID0gaS5wcm9wcztcbiAgICAgICAgY29uc3QgZCA9IGYubGVuZ3RoO1xuICAgICAgICBsZXQgbSA9IDA7XG4gICAgICAgIGxldCB2O1xuICAgICAgICB3aGlsZSAoZCA+IG0pIHtcbiAgICAgICAgICAgIHYgPSBmW21dO1xuICAgICAgICAgICAgdVt2LnR5cGVdLnJlbmRlcih0LCBvLCB2KTtcbiAgICAgICAgICAgICsrbTtcbiAgICAgICAgfVxuICAgICAgICB0LmFkZENoaWxkKG8pO1xuICAgIH1cbn07XG5cbkRzID0gb3QoWyBScyhcInJhXCIpIF0sIERzKTtcblxubGV0IFBzID0gY2xhc3MgQ3VzdG9tQXR0cmlidXRlUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5yID0gdDtcbiAgICAgICAgdGhpcy5wID0gZTtcbiAgICB9XG4gICAgc3RhdGljIGdldCBpbmplY3QoKSB7XG4gICAgICAgIHJldHVybiBbIFBpLCBLdCBdO1xuICAgIH1cbiAgICByZW5kZXIodCwgZSwgaSkge1xuICAgICAgICBsZXQgcyA9IHQuY29udGFpbmVyO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgc3dpdGNoICh0eXBlb2YgaS5yZXMpIHtcbiAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICBuID0gcy5maW5kKE1lLCBpLnJlcyk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBuKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3NTM6JHtpLnJlc31AJHt0W1wibmFtZVwiXX1gKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIG4gPSBpLnJlcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByID0gcm4odGhpcy5wLCBuLCB0LCBlLCBpLCB2b2lkIDAsIHZvaWQgMCk7XG4gICAgICAgIGNvbnN0IG8gPSBDb250cm9sbGVyLiRhdHRyKHQuY29udGFpbmVyLCByLCBlLCBuKTtcbiAgICAgICAgc3MoZSwgbi5rZXksIG8pO1xuICAgICAgICBjb25zdCBsID0gdGhpcy5yLnJlbmRlcmVycztcbiAgICAgICAgY29uc3QgaCA9IGkucHJvcHM7XG4gICAgICAgIGNvbnN0IGEgPSBoLmxlbmd0aDtcbiAgICAgICAgbGV0IGMgPSAwO1xuICAgICAgICBsZXQgdTtcbiAgICAgICAgd2hpbGUgKGEgPiBjKSB7XG4gICAgICAgICAgICB1ID0gaFtjXTtcbiAgICAgICAgICAgIGxbdS50eXBlXS5yZW5kZXIodCwgbywgdSk7XG4gICAgICAgICAgICArK2M7XG4gICAgICAgIH1cbiAgICAgICAgdC5hZGRDaGlsZChvKTtcbiAgICB9XG59O1xuXG5QcyA9IG90KFsgUnMoXCJyYlwiKSBdLCBQcyk7XG5cbmxldCBPcyA9IGNsYXNzIFRlbXBsYXRlQ29udHJvbGxlclJlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuciA9IHQ7XG4gICAgICAgIHRoaXMucCA9IGU7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgaW5qZWN0KCkge1xuICAgICAgICByZXR1cm4gWyBQaSwgS3QgXTtcbiAgICB9XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgdmFyIHM7XG4gICAgICAgIGxldCBuID0gdC5jb250YWluZXI7XG4gICAgICAgIGxldCByO1xuICAgICAgICBzd2l0Y2ggKHR5cGVvZiBpLnJlcykge1xuICAgICAgICAgIGNhc2UgXCJzdHJpbmdcIjpcbiAgICAgICAgICAgIHIgPSBuLmZpbmQoTWUsIGkucmVzKTtcbiAgICAgICAgICAgIGlmIChudWxsID09IHIpIHRocm93IG5ldyBFcnJvcihgQVVSMDc1NDoke2kucmVzfUAke3RbXCJuYW1lXCJdfWApO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgciA9IGkucmVzO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG8gPSB0aGlzLnIuZ2V0Vmlld0ZhY3RvcnkoaS5kZWYsIG4pO1xuICAgICAgICBjb25zdCBsID0gdXMoZSk7XG4gICAgICAgIGNvbnN0IGggPSBybih0aGlzLnAsIHIsIHQsIGUsIGksIG8sIGwpO1xuICAgICAgICBjb25zdCBhID0gQ29udHJvbGxlci4kYXR0cih0LmNvbnRhaW5lciwgaCwgZSwgcik7XG4gICAgICAgIHNzKGwsIHIua2V5LCBhKTtcbiAgICAgICAgbnVsbCA9PT0gKHMgPSBoLmxpbmspIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuY2FsbChoLCB0LCBhLCBlLCBpKTtcbiAgICAgICAgY29uc3QgYyA9IHRoaXMuci5yZW5kZXJlcnM7XG4gICAgICAgIGNvbnN0IHUgPSBpLnByb3BzO1xuICAgICAgICBjb25zdCBmID0gdS5sZW5ndGg7XG4gICAgICAgIGxldCBkID0gMDtcbiAgICAgICAgbGV0IG07XG4gICAgICAgIHdoaWxlIChmID4gZCkge1xuICAgICAgICAgICAgbSA9IHVbZF07XG4gICAgICAgICAgICBjW20udHlwZV0ucmVuZGVyKHQsIGEsIG0pO1xuICAgICAgICAgICAgKytkO1xuICAgICAgICB9XG4gICAgICAgIHQuYWRkQ2hpbGQoYSk7XG4gICAgfVxufTtcblxuT3MgPSBvdChbIFJzKFwicmNcIikgXSwgT3MpO1xuXG5sZXQgJHMgPSBjbGFzcyBMZXRFbGVtZW50UmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5lcCA9IHQ7XG4gICAgICAgIHRoaXMub0wgPSBlO1xuICAgIH1cbiAgICByZW5kZXIodCwgZSwgaSkge1xuICAgICAgICBlLnJlbW92ZSgpO1xuICAgICAgICBjb25zdCBzID0gaS5pbnN0cnVjdGlvbnM7XG4gICAgICAgIGNvbnN0IG4gPSBpLnRvQmluZGluZ0NvbnRleHQ7XG4gICAgICAgIGNvbnN0IHIgPSB0LmNvbnRhaW5lcjtcbiAgICAgICAgY29uc3QgbyA9IHMubGVuZ3RoO1xuICAgICAgICBsZXQgbDtcbiAgICAgICAgbGV0IGg7XG4gICAgICAgIGxldCBhO1xuICAgICAgICBsZXQgYyA9IDA7XG4gICAgICAgIHdoaWxlIChvID4gYykge1xuICAgICAgICAgICAgbCA9IHNbY107XG4gICAgICAgICAgICBoID0gRXModGhpcy5lcCwgbC5mcm9tLCA4KTtcbiAgICAgICAgICAgIGEgPSBuZXcgTGV0QmluZGluZyhoLCBsLnRvLCB0aGlzLm9MLCByLCBuKTtcbiAgICAgICAgICAgIHQuYWRkQmluZGluZygzODk2MiA9PT0gaC4ka2luZCA/IGpzKGEsIGgsIHIpIDogYSk7XG4gICAgICAgICAgICArK2M7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4kcy5pbmplY3QgPSBbIF8sIFYgXTtcblxuJHMgPSBvdChbIFJzKFwicmRcIikgXSwgJHMpO1xuXG5sZXQgTHMgPSBjbGFzcyBDYWxsQmluZGluZ1JlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgICAgICB0aGlzLm9MID0gZTtcbiAgICB9XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IEVzKHRoaXMuZXAsIGkuZnJvbSwgOCB8IDQpO1xuICAgICAgICBjb25zdCBuID0gbmV3IENhbGxCaW5kaW5nKHMsIEJzKGUpLCBpLnRvLCB0aGlzLm9MLCB0LmNvbnRhaW5lcik7XG4gICAgICAgIHQuYWRkQmluZGluZygzODk2MiA9PT0gcy4ka2luZCA/IGpzKG4sIHMsIHQuY29udGFpbmVyKSA6IG4pO1xuICAgIH1cbn07XG5cbkxzLmluamVjdCA9IFsgXywgViBdO1xuXG5McyA9IG90KFsgUnMoXCJyaFwiKSBdLCBMcyk7XG5cbmxldCBxcyA9IGNsYXNzIFJlZkJpbmRpbmdSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmVwID0gdDtcbiAgICB9XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IEVzKHRoaXMuZXAsIGkuZnJvbSwgOCk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgUmVmQmluZGluZyhzLCBJcyhlLCBpLnRvKSwgdC5jb250YWluZXIpO1xuICAgICAgICB0LmFkZEJpbmRpbmcoMzg5NjIgPT09IHMuJGtpbmQgPyBqcyhuLCBzLCB0LmNvbnRhaW5lcikgOiBuKTtcbiAgICB9XG59O1xuXG5xcy5pbmplY3QgPSBbIF8gXTtcblxucXMgPSBvdChbIFJzKFwicmpcIikgXSwgcXMpO1xuXG5sZXQgTXMgPSBjbGFzcyBJbnRlcnBvbGF0aW9uQmluZGluZ1JlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgICAgICB0aGlzLm9MID0gZTtcbiAgICAgICAgdGhpcy5wID0gaTtcbiAgICB9XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IHQuY29udGFpbmVyO1xuICAgICAgICBjb25zdCBuID0gRXModGhpcy5lcCwgaS5mcm9tLCAxKTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBJbnRlcnBvbGF0aW9uQmluZGluZyh0aGlzLm9MLCBuLCBCcyhlKSwgaS50bywgRC50b1ZpZXcsIHMsIHRoaXMucC5kb21Xcml0ZVF1ZXVlKTtcbiAgICAgICAgY29uc3QgbyA9IHIucGFydEJpbmRpbmdzO1xuICAgICAgICBjb25zdCBsID0gby5sZW5ndGg7XG4gICAgICAgIGxldCBoID0gMDtcbiAgICAgICAgbGV0IGE7XG4gICAgICAgIGZvciAoO2wgPiBoOyArK2gpIHtcbiAgICAgICAgICAgIGEgPSBvW2hdO1xuICAgICAgICAgICAgaWYgKDM4OTYyID09PSBhLnNvdXJjZUV4cHJlc3Npb24uJGtpbmQpIG9baF0gPSBqcyhhLCBhLnNvdXJjZUV4cHJlc3Npb24sIHMpO1xuICAgICAgICB9XG4gICAgICAgIHQuYWRkQmluZGluZyhyKTtcbiAgICB9XG59O1xuXG5Ncy5pbmplY3QgPSBbIF8sIFYsIEt0IF07XG5cbk1zID0gb3QoWyBScyhcInJmXCIpIF0sIE1zKTtcblxubGV0IFVzID0gY2xhc3MgUHJvcGVydHlCaW5kaW5nUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5lcCA9IHQ7XG4gICAgICAgIHRoaXMub0wgPSBlO1xuICAgICAgICB0aGlzLnAgPSBpO1xuICAgIH1cbiAgICByZW5kZXIodCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gRXModGhpcy5lcCwgaS5mcm9tLCA4KTtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBQcm9wZXJ0eUJpbmRpbmcocywgQnMoZSksIGkudG8sIGkubW9kZSwgdGhpcy5vTCwgdC5jb250YWluZXIsIHRoaXMucC5kb21Xcml0ZVF1ZXVlKTtcbiAgICAgICAgdC5hZGRCaW5kaW5nKDM4OTYyID09PSBzLiRraW5kID8ganMobiwgcywgdC5jb250YWluZXIpIDogbik7XG4gICAgfVxufTtcblxuVXMuaW5qZWN0ID0gWyBfLCBWLCBLdCBdO1xuXG5VcyA9IG90KFsgUnMoXCJyZ1wiKSBdLCBVcyk7XG5cbmxldCBGcyA9IGNsYXNzIEl0ZXJhdG9yQmluZGluZ1JlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgICAgICB0aGlzLm9MID0gZTtcbiAgICAgICAgdGhpcy5wID0gaTtcbiAgICB9XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IEVzKHRoaXMuZXAsIGkuZnJvbSwgMik7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgUHJvcGVydHlCaW5kaW5nKHMsIEJzKGUpLCBpLnRvLCBELnRvVmlldywgdGhpcy5vTCwgdC5jb250YWluZXIsIHRoaXMucC5kb21Xcml0ZVF1ZXVlKTtcbiAgICAgICAgdC5hZGRCaW5kaW5nKDM4OTYyID09PSBzLml0ZXJhYmxlLiRraW5kID8ganMobiwgcy5pdGVyYWJsZSwgdC5jb250YWluZXIpIDogbik7XG4gICAgfVxufTtcblxuRnMuaW5qZWN0ID0gWyBfLCBWLCBLdCBdO1xuXG5GcyA9IG90KFsgUnMoXCJya1wiKSBdLCBGcyk7XG5cbmxldCBWcyA9IDA7XG5cbmNvbnN0IF9zID0gW107XG5cbmZ1bmN0aW9uIGpzKHQsIGUsIGkpIHtcbiAgICB3aGlsZSAoZSBpbnN0YW5jZW9mIFcpIHtcbiAgICAgICAgX3NbVnMrK10gPSBlO1xuICAgICAgICBlID0gZS5leHByZXNzaW9uO1xuICAgIH1cbiAgICB3aGlsZSAoVnMgPiAwKSB7XG4gICAgICAgIGNvbnN0IGUgPSBfc1stLVZzXTtcbiAgICAgICAgY29uc3QgcyA9IGkuZ2V0KGUuYmVoYXZpb3JLZXkpO1xuICAgICAgICBpZiAocyBpbnN0YW5jZW9mIEgpIHQgPSBzLmNvbnN0cnVjdCh0LCBlKTtcbiAgICB9XG4gICAgX3MubGVuZ3RoID0gMDtcbiAgICByZXR1cm4gdDtcbn1cblxubGV0IE5zID0gY2xhc3MgVGV4dEJpbmRpbmdSZW5kZXJlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLmVwID0gdDtcbiAgICAgICAgdGhpcy5vTCA9IGU7XG4gICAgICAgIHRoaXMucCA9IGk7XG4gICAgfVxuICAgIHJlbmRlcih0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0LmNvbnRhaW5lcjtcbiAgICAgICAgY29uc3QgbiA9IGUubmV4dFNpYmxpbmc7XG4gICAgICAgIGNvbnN0IHIgPSBlLnBhcmVudE5vZGU7XG4gICAgICAgIGNvbnN0IG8gPSB0aGlzLnAuZG9jdW1lbnQ7XG4gICAgICAgIGNvbnN0IGwgPSBFcyh0aGlzLmVwLCBpLmZyb20sIDEpO1xuICAgICAgICBjb25zdCBoID0gbC5wYXJ0cztcbiAgICAgICAgY29uc3QgYSA9IGwuZXhwcmVzc2lvbnM7XG4gICAgICAgIGNvbnN0IGMgPSBhLmxlbmd0aDtcbiAgICAgICAgbGV0IHUgPSAwO1xuICAgICAgICBsZXQgZiA9IGhbMF07XG4gICAgICAgIGxldCBkO1xuICAgICAgICBsZXQgbTtcbiAgICAgICAgaWYgKFwiXCIgIT09IGYpIHIuaW5zZXJ0QmVmb3JlKG8uY3JlYXRlVGV4dE5vZGUoZiksIG4pO1xuICAgICAgICBmb3IgKDtjID4gdTsgKyt1KSB7XG4gICAgICAgICAgICBtID0gYVt1XTtcbiAgICAgICAgICAgIGQgPSBuZXcgQ29udGVudEJpbmRpbmcobSwgci5pbnNlcnRCZWZvcmUoby5jcmVhdGVUZXh0Tm9kZShcIlwiKSwgbiksIHMsIHRoaXMub0wsIHRoaXMucCwgaS5zdHJpY3QpO1xuICAgICAgICAgICAgdC5hZGRCaW5kaW5nKDM4OTYyID09PSBtLiRraW5kID8ganMoZCwgbSwgcykgOiBkKTtcbiAgICAgICAgICAgIGYgPSBoW3UgKyAxXTtcbiAgICAgICAgICAgIGlmIChcIlwiICE9PSBmKSByLmluc2VydEJlZm9yZShvLmNyZWF0ZVRleHROb2RlKGYpLCBuKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJBVS1NXCIgPT09IGUubm9kZU5hbWUpIGUucmVtb3ZlKCk7XG4gICAgfVxufTtcblxuTnMuaW5qZWN0ID0gWyBfLCBWLCBLdCBdO1xuXG5OcyA9IG90KFsgUnMoXCJoYVwiKSBdLCBOcyk7XG5cbmxldCBXcyA9IGNsYXNzIExpc3RlbmVyQmluZGluZ1JlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgICAgICB0aGlzLnRlID0gZTtcbiAgICAgICAgdGhpcy5wID0gaTtcbiAgICB9XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IEVzKHRoaXMuZXAsIGkuZnJvbSwgNCk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgTGlzdGVuZXIodGhpcy5wLCBpLnRvLCBpLnN0cmF0ZWd5LCBzLCBlLCBpLnByZXZlbnREZWZhdWx0LCB0aGlzLnRlLCB0LmNvbnRhaW5lcik7XG4gICAgICAgIHQuYWRkQmluZGluZygzODk2MiA9PT0gcy4ka2luZCA/IGpzKG4sIHMsIHQuY29udGFpbmVyKSA6IG4pO1xuICAgIH1cbn07XG5cbldzLmluamVjdCA9IFsgXywgd3MsIEt0IF07XG5cbldzID0gb3QoWyBScyhcImhiXCIpIF0sIFdzKTtcblxubGV0IEhzID0gY2xhc3MgU2V0QXR0cmlidXRlUmVuZGVyZXIge1xuICAgIHJlbmRlcih0LCBlLCBpKSB7XG4gICAgICAgIGUuc2V0QXR0cmlidXRlKGkudG8sIGkudmFsdWUpO1xuICAgIH1cbn07XG5cbkhzID0gb3QoWyBScyhcImhlXCIpIF0sIEhzKTtcblxubGV0IHpzID0gY2xhc3MgU2V0Q2xhc3NBdHRyaWJ1dGVSZW5kZXJlciB7XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgUXMoZS5jbGFzc0xpc3QsIGkudmFsdWUpO1xuICAgIH1cbn07XG5cbnpzID0gb3QoWyBScyhcImhmXCIpIF0sIHpzKTtcblxubGV0IEdzID0gY2xhc3MgU2V0U3R5bGVBdHRyaWJ1dGVSZW5kZXJlciB7XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgZS5zdHlsZS5jc3NUZXh0ICs9IGkudmFsdWU7XG4gICAgfVxufTtcblxuR3MgPSBvdChbIFJzKFwiaGdcIikgXSwgR3MpO1xuXG5sZXQgWHMgPSBjbGFzcyBTdHlsZVByb3BlcnR5QmluZGluZ1JlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgICAgICB0aGlzLm9MID0gZTtcbiAgICAgICAgdGhpcy5wID0gaTtcbiAgICB9XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IEVzKHRoaXMuZXAsIGkuZnJvbSwgOCk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgUHJvcGVydHlCaW5kaW5nKHMsIGUuc3R5bGUsIGkudG8sIEQudG9WaWV3LCB0aGlzLm9MLCB0LmNvbnRhaW5lciwgdGhpcy5wLmRvbVdyaXRlUXVldWUpO1xuICAgICAgICB0LmFkZEJpbmRpbmcoMzg5NjIgPT09IHMuJGtpbmQgPyBqcyhuLCBzLCB0LmNvbnRhaW5lcikgOiBuKTtcbiAgICB9XG59O1xuXG5Ycy5pbmplY3QgPSBbIF8sIFYsIEt0IF07XG5cblhzID0gb3QoWyBScyhcImhkXCIpIF0sIFhzKTtcblxubGV0IEtzID0gY2xhc3MgQXR0cmlidXRlQmluZGluZ1JlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgICAgICB0aGlzLm9MID0gZTtcbiAgICB9XG4gICAgcmVuZGVyKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IEVzKHRoaXMuZXAsIGkuZnJvbSwgOCk7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgQXR0cmlidXRlQmluZGluZyhzLCBlLCBpLmF0dHIsIGkudG8sIEQudG9WaWV3LCB0aGlzLm9MLCB0LmNvbnRhaW5lcik7XG4gICAgICAgIHQuYWRkQmluZGluZygzODk2MiA9PT0gcy4ka2luZCA/IGpzKG4sIHMsIHQuY29udGFpbmVyKSA6IG4pO1xuICAgIH1cbn07XG5cbktzLmluamVjdCA9IFsgXywgViBdO1xuXG5LcyA9IG90KFsgUnMoXCJoY1wiKSBdLCBLcyk7XG5cbmxldCBZcyA9IGNsYXNzIFNwcmVhZFJlbmRlcmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZWUgPSB0O1xuICAgICAgICB0aGlzLnIgPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGluamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIFsgQXMsIFBpIF07XG4gICAgfVxuICAgIHJlbmRlcih0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0LmNvbnRhaW5lcjtcbiAgICAgICAgY29uc3QgbiA9IHMuZ2V0KEtpKTtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuci5yZW5kZXJlcnM7XG4gICAgICAgIGNvbnN0IG8gPSB0ID0+IHtcbiAgICAgICAgICAgIGxldCBlID0gdDtcbiAgICAgICAgICAgIGxldCBpID0gbjtcbiAgICAgICAgICAgIHdoaWxlIChudWxsICE9IGkgJiYgZSA+IDApIHtcbiAgICAgICAgICAgICAgICBpID0gaS5wYXJlbnQ7XG4gICAgICAgICAgICAgICAgLS1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG51bGwgPT0gaSkgdGhyb3cgbmV3IEVycm9yKFwiTm8gc2NvcGUgY29udGV4dCBmb3Igc3ByZWFkIGJpbmRpbmcuXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGwgPSBpID0+IHtcbiAgICAgICAgICAgIHZhciBzLCBuO1xuICAgICAgICAgICAgY29uc3QgYSA9IG8oaSk7XG4gICAgICAgICAgICBjb25zdCBjID0gWnMoYSk7XG4gICAgICAgICAgICBjb25zdCB1ID0gdGhpcy5lZS5jb21waWxlU3ByZWFkKGEuY29udHJvbGxlci5kZWZpbml0aW9uLCBudWxsICE9PSAobiA9IG51bGwgPT09IChzID0gYS5pbnN0cnVjdGlvbikgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5jYXB0dXJlcykgJiYgdm9pZCAwICE9PSBuID8gbiA6IGgsIGEuY29udHJvbGxlci5jb250YWluZXIsIGUpO1xuICAgICAgICAgICAgbGV0IGY7XG4gICAgICAgICAgICBmb3IgKGYgb2YgdSkgc3dpdGNoIChmLnR5cGUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcImhzXCI6XG4gICAgICAgICAgICAgICAgbChpICsgMSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSBcImhwXCI6XG4gICAgICAgICAgICAgICAgcltmLmluc3RydWN0aW9ucy50eXBlXS5yZW5kZXIoYywgc2kuZm9yKGUpLCBmLmluc3RydWN0aW9ucyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByW2YudHlwZV0ucmVuZGVyKGMsIGUsIGYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdC5hZGRCaW5kaW5nKGMpO1xuICAgICAgICB9O1xuICAgICAgICBsKDApO1xuICAgIH1cbn07XG5cbllzID0gb3QoWyBScyhcImhzXCIpIF0sIFlzKTtcblxuY2xhc3MgU3ByZWFkQmluZGluZyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmllID0gdDtcbiAgICAgICAgdGhpcy5zZSA9IGU7XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jdHJsID0gZS5jb250cm9sbGVyO1xuICAgICAgICB0aGlzLmxvY2F0b3IgPSB0aGlzLmN0cmwuY29udGFpbmVyO1xuICAgIH1cbiAgICBnZXQgY29udGFpbmVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhdG9yO1xuICAgIH1cbiAgICBnZXQgZGVmaW5pdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY3RybC5kZWZpbml0aW9uO1xuICAgIH1cbiAgICBnZXQgaXNTdHJpY3RCaW5kaW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdHJsLmlzU3RyaWN0QmluZGluZztcbiAgICB9XG4gICAgJGJpbmQodCwgZSkge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgaWYgKHRoaXMuaXNCb3VuZCkgcmV0dXJuO1xuICAgICAgICB0aGlzLmlzQm91bmQgPSB0cnVlO1xuICAgICAgICBjb25zdCBzID0gdGhpcy4kc2NvcGUgPSBudWxsICE9PSAoaSA9IHRoaXMuc2UuY29udHJvbGxlci5zY29wZS5wYXJlbnRTY29wZSkgJiYgdm9pZCAwICE9PSBpID8gaSA6IHZvaWQgMDtcbiAgICAgICAgaWYgKG51bGwgPT0gcykgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBzcHJlYWRpbmcuIENvbnRleHQgc2NvcGUgaXMgbnVsbC91bmRlZmluZWRcIik7XG4gICAgICAgIHRoaXMuaWUuZm9yRWFjaCgoZSA9PiBlLiRiaW5kKHQsIHMpKSk7XG4gICAgfVxuICAgICR1bmJpbmQodCkge1xuICAgICAgICB0aGlzLmllLmZvckVhY2goKGUgPT4gZS4kdW5iaW5kKHQpKSk7XG4gICAgICAgIHRoaXMuaXNCb3VuZCA9IGZhbHNlO1xuICAgIH1cbiAgICBhZGRCaW5kaW5nKHQpIHtcbiAgICAgICAgdGhpcy5pZS5wdXNoKHQpO1xuICAgIH1cbiAgICBhZGRDaGlsZCh0KSB7XG4gICAgICAgIGlmICgxICE9PSB0LnZtS2luZCkgdGhyb3cgbmV3IEVycm9yKFwiU3ByZWFkIGJpbmRpbmcgZG9lcyBub3Qgc3VwcG9ydCBzcHJlYWRpbmcgY3VzdG9tIGF0dHJpYnV0ZXMvdGVtcGxhdGUgY29udHJvbGxlcnNcIik7XG4gICAgICAgIHRoaXMuY3RybC5hZGRDaGlsZCh0KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFFzKHQsIGUpIHtcbiAgICBjb25zdCBpID0gZS5sZW5ndGg7XG4gICAgbGV0IHMgPSAwO1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgaTsgKytuKSBpZiAoMzIgPT09IGUuY2hhckNvZGVBdChuKSkge1xuICAgICAgICBpZiAobiAhPT0gcykgdC5hZGQoZS5zbGljZShzLCBuKSk7XG4gICAgICAgIHMgPSBuICsgMTtcbiAgICB9IGVsc2UgaWYgKG4gKyAxID09PSBpKSB0LmFkZChlLnNsaWNlKHMpKTtcbn1cblxuY29uc3QgWnMgPSB0ID0+IG5ldyBTcHJlYWRCaW5kaW5nKFtdLCB0KTtcblxuY29uc3QgSnMgPSBcIklDb250cm9sbGVyXCI7XG5cbmNvbnN0IHRuID0gXCJJSW5zdHJ1Y3Rpb25cIjtcblxuY29uc3QgZW4gPSBcIklSZW5kZXJMb2NhdGlvblwiO1xuXG5jb25zdCBzbiA9IFwiSUF1U2xvdHNJbmZvXCI7XG5cbmZ1bmN0aW9uIG5uKHQsIGUsIGksIHMsIG4sIHIpIHtcbiAgICBjb25zdCBvID0gZS5jb250YWluZXIuY3JlYXRlQ2hpbGQoKTtcbiAgICBvLnJlZ2lzdGVyUmVzb2x2ZXIodC5IVE1MRWxlbWVudCwgby5yZWdpc3RlclJlc29sdmVyKHQuRWxlbWVudCwgby5yZWdpc3RlclJlc29sdmVyKG5zLCBuZXcgeChcIkVsZW1lbnRSZXNvbHZlclwiLCBpKSkpKTtcbiAgICBvLnJlZ2lzdGVyUmVzb2x2ZXIoWGksIG5ldyB4KEpzLCBlKSk7XG4gICAgby5yZWdpc3RlclJlc29sdmVyKGtzLCBuZXcgeCh0biwgcykpO1xuICAgIG8ucmVnaXN0ZXJSZXNvbHZlcihvcywgbnVsbCA9PSBuID8gb24gOiBuZXcgeChlbiwgbikpO1xuICAgIG8ucmVnaXN0ZXJSZXNvbHZlcihBaSwgbG4pO1xuICAgIG8ucmVnaXN0ZXJSZXNvbHZlcih4cywgbnVsbCA9PSByID8gaG4gOiBuZXcgeChzbiwgcikpO1xuICAgIHJldHVybiBvO1xufVxuXG5jbGFzcyBWaWV3RmFjdG9yeVByb3ZpZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZiA9IHQ7XG4gICAgfVxuICAgIGdldCAkaXNSZXNvbHZlcigpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJlc29sdmUoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmY7XG4gICAgICAgIGlmIChudWxsID09PSB0KSB0aHJvdyBuZXcgRXJyb3IoXCJBVVI3MDU1XCIpO1xuICAgICAgICBpZiAoIUF0KHQubmFtZSkgfHwgMCA9PT0gdC5uYW1lLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDc1NlwiKTtcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBybih0LCBlLCBpLCBzLCBuLCByLCBvLCBsKSB7XG4gICAgY29uc3QgaCA9IGkuY29udGFpbmVyLmNyZWF0ZUNoaWxkKCk7XG4gICAgaC5yZWdpc3RlclJlc29sdmVyKHQuSFRNTEVsZW1lbnQsIGgucmVnaXN0ZXJSZXNvbHZlcih0LkVsZW1lbnQsIGgucmVnaXN0ZXJSZXNvbHZlcihucywgbmV3IHgoXCJFbGVtZW50UmVzb2x2ZXJcIiwgcykpKSk7XG4gICAgaSA9IGkgaW5zdGFuY2VvZiBDb250cm9sbGVyID8gaSA6IGkuY3RybDtcbiAgICBoLnJlZ2lzdGVyUmVzb2x2ZXIoWGksIG5ldyB4KEpzLCBpKSk7XG4gICAgaC5yZWdpc3RlclJlc29sdmVyKGtzLCBuZXcgeCh0biwgbikpO1xuICAgIGgucmVnaXN0ZXJSZXNvbHZlcihvcywgbnVsbCA9PSBvID8gb24gOiBuZXcgeChlbiwgbykpO1xuICAgIGgucmVnaXN0ZXJSZXNvbHZlcihBaSwgbnVsbCA9PSByID8gbG4gOiBuZXcgVmlld0ZhY3RvcnlQcm92aWRlcihyKSk7XG4gICAgaC5yZWdpc3RlclJlc29sdmVyKHhzLCBudWxsID09IGwgPyBobiA6IG5ldyB4KHNuLCBsKSk7XG4gICAgcmV0dXJuIGguaW52b2tlKGUuVHlwZSk7XG59XG5cbmNvbnN0IG9uID0gbmV3IHgoZW4pO1xuXG5jb25zdCBsbiA9IG5ldyBWaWV3RmFjdG9yeVByb3ZpZGVyKG51bGwpO1xuXG5jb25zdCBobiA9IG5ldyB4KHNuLCBuZXcgQXVTbG90c0luZm8oaCkpO1xuXG52YXIgYW47XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wiTm9uZVwiXSA9IDBdID0gXCJOb25lXCI7XG4gICAgdFt0W1wiSWdub3JlQXR0clwiXSA9IDFdID0gXCJJZ25vcmVBdHRyXCI7XG59KShhbiB8fCAoYW4gPSB7fSkpO1xuXG5mdW5jdGlvbiBjbih0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIG1uLmRlZmluZSh0LCBlKTtcbiAgICB9O1xufVxuXG5jbGFzcyBCaW5kaW5nQ29tbWFuZERlZmluaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4pIHtcbiAgICAgICAgdGhpcy5UeXBlID0gdDtcbiAgICAgICAgdGhpcy5uYW1lID0gZTtcbiAgICAgICAgdGhpcy5hbGlhc2VzID0gaTtcbiAgICAgICAgdGhpcy5rZXkgPSBzO1xuICAgICAgICB0aGlzLnR5cGUgPSBuO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKHQsIGUpIHtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGxldCBzO1xuICAgICAgICBpZiAoQXQodCkpIHtcbiAgICAgICAgICAgIGkgPSB0O1xuICAgICAgICAgICAgcyA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaSA9IHQubmFtZTtcbiAgICAgICAgICAgIHMgPSB0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgQmluZGluZ0NvbW1hbmREZWZpbml0aW9uKGUsIG4oZG4oZSwgXCJuYW1lXCIpLCBpKSwgZihkbihlLCBcImFsaWFzZXNcIiksIHMuYWxpYXNlcywgZS5hbGlhc2VzKSwgZm4oaSksIG4oZG4oZSwgXCJ0eXBlXCIpLCBzLnR5cGUsIGUudHlwZSwgbnVsbCkpO1xuICAgIH1cbiAgICByZWdpc3Rlcih0KSB7XG4gICAgICAgIGNvbnN0IHtUeXBlOiBlLCBrZXk6IGksIGFsaWFzZXM6IHN9ID0gdGhpcztcbiAgICAgICAgYy5zaW5nbGV0b24oaSwgZSkucmVnaXN0ZXIodCk7XG4gICAgICAgIGMuYWxpYXNUbyhpLCBlKS5yZWdpc3Rlcih0KTtcbiAgICAgICAgTChzLCBtbiwgaSwgdCk7XG4gICAgfVxufVxuXG5jb25zdCB1biA9IG10KFwiYmluZGluZy1jb21tYW5kXCIpO1xuXG5jb25zdCBmbiA9IHQgPT4gYCR7dW59OiR7dH1gO1xuXG5jb25zdCBkbiA9ICh0LCBlKSA9PiBodChkdChlKSwgdCk7XG5cbmNvbnN0IG1uID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgbmFtZTogdW4sXG4gICAga2V5RnJvbTogZm4sXG4gICAgZGVmaW5lKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IEJpbmRpbmdDb21tYW5kRGVmaW5pdGlvbi5jcmVhdGUodCwgZSk7XG4gICAgICAgIGN0KHVuLCBpLCBpLlR5cGUpO1xuICAgICAgICBjdCh1biwgaSwgaSk7XG4gICAgICAgIHZ0KGUsIHVuKTtcbiAgICAgICAgcmV0dXJuIGkuVHlwZTtcbiAgICB9LFxuICAgIGdldEFubm90YXRpb246IGRuXG59KTtcblxubGV0IHZuID0gY2xhc3MgT25lVGltZUJpbmRpbmdDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDA7XG4gICAgICAgIHRoaXMubSA9IHQ7XG4gICAgICAgIHRoaXMuZXAgPSBlO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwib25lLXRpbWVcIjtcbiAgICB9XG4gICAgYnVpbGQodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgaSA9IHQuYXR0cjtcbiAgICAgICAgbGV0IHMgPSBpLnRhcmdldDtcbiAgICAgICAgbGV0IG4gPSB0LmF0dHIucmF3VmFsdWU7XG4gICAgICAgIGlmIChudWxsID09IHQuYmluZGFibGUpIHMgPSBudWxsICE9PSAoZSA9IHRoaXMubS5tYXAodC5ub2RlLCBzKSkgJiYgdm9pZCAwICE9PSBlID8gZSA6IFMocyk7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKFwiXCIgPT09IG4gJiYgMSA9PT0gdC5kZWYudHlwZSkgbiA9IFMocyk7XG4gICAgICAgICAgICBzID0gdC5iaW5kYWJsZS5wcm9wZXJ0eTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFByb3BlcnR5QmluZGluZ0luc3RydWN0aW9uKHRoaXMuZXAucGFyc2UobiwgOCksIHMsIEQub25lVGltZSk7XG4gICAgfVxufTtcblxudm4uaW5qZWN0ID0gWyBadCwgXyBdO1xuXG52biA9IG90KFsgY24oXCJvbmUtdGltZVwiKSBdLCB2bik7XG5cbmxldCBwbiA9IGNsYXNzIFRvVmlld0JpbmRpbmdDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDA7XG4gICAgICAgIHRoaXMubSA9IHQ7XG4gICAgICAgIHRoaXMuZXAgPSBlO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwidG8tdmlld1wiO1xuICAgIH1cbiAgICBidWlsZCh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBjb25zdCBpID0gdC5hdHRyO1xuICAgICAgICBsZXQgcyA9IGkudGFyZ2V0O1xuICAgICAgICBsZXQgbiA9IHQuYXR0ci5yYXdWYWx1ZTtcbiAgICAgICAgaWYgKG51bGwgPT0gdC5iaW5kYWJsZSkgcyA9IG51bGwgIT09IChlID0gdGhpcy5tLm1hcCh0Lm5vZGUsIHMpKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogUyhzKTsgZWxzZSB7XG4gICAgICAgICAgICBpZiAoXCJcIiA9PT0gbiAmJiAxID09PSB0LmRlZi50eXBlKSBuID0gUyhzKTtcbiAgICAgICAgICAgIHMgPSB0LmJpbmRhYmxlLnByb3BlcnR5O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgUHJvcGVydHlCaW5kaW5nSW5zdHJ1Y3Rpb24odGhpcy5lcC5wYXJzZShuLCA4KSwgcywgRC50b1ZpZXcpO1xuICAgIH1cbn07XG5cbnBuLmluamVjdCA9IFsgWnQsIF8gXTtcblxucG4gPSBvdChbIGNuKFwidG8tdmlld1wiKSBdLCBwbik7XG5cbmxldCBnbiA9IGNsYXNzIEZyb21WaWV3QmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMDtcbiAgICAgICAgdGhpcy5tID0gdDtcbiAgICAgICAgdGhpcy5lcCA9IGU7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJmcm9tLXZpZXdcIjtcbiAgICB9XG4gICAgYnVpbGQodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgaSA9IHQuYXR0cjtcbiAgICAgICAgbGV0IHMgPSBpLnRhcmdldDtcbiAgICAgICAgbGV0IG4gPSBpLnJhd1ZhbHVlO1xuICAgICAgICBpZiAobnVsbCA9PSB0LmJpbmRhYmxlKSBzID0gbnVsbCAhPT0gKGUgPSB0aGlzLm0ubWFwKHQubm9kZSwgcykpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiBTKHMpOyBlbHNlIHtcbiAgICAgICAgICAgIGlmIChcIlwiID09PSBuICYmIDEgPT09IHQuZGVmLnR5cGUpIG4gPSBTKHMpO1xuICAgICAgICAgICAgcyA9IHQuYmluZGFibGUucHJvcGVydHk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9wZXJ0eUJpbmRpbmdJbnN0cnVjdGlvbih0aGlzLmVwLnBhcnNlKG4sIDgpLCBzLCBELmZyb21WaWV3KTtcbiAgICB9XG59O1xuXG5nbi5pbmplY3QgPSBbIFp0LCBfIF07XG5cbmduID0gb3QoWyBjbihcImZyb20tdmlld1wiKSBdLCBnbik7XG5cbmxldCB3biA9IGNsYXNzIFR3b1dheUJpbmRpbmdDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDA7XG4gICAgICAgIHRoaXMubSA9IHQ7XG4gICAgICAgIHRoaXMuZXAgPSBlO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwidHdvLXdheVwiO1xuICAgIH1cbiAgICBidWlsZCh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBjb25zdCBpID0gdC5hdHRyO1xuICAgICAgICBsZXQgcyA9IGkudGFyZ2V0O1xuICAgICAgICBsZXQgbiA9IGkucmF3VmFsdWU7XG4gICAgICAgIGlmIChudWxsID09IHQuYmluZGFibGUpIHMgPSBudWxsICE9PSAoZSA9IHRoaXMubS5tYXAodC5ub2RlLCBzKSkgJiYgdm9pZCAwICE9PSBlID8gZSA6IFMocyk7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKFwiXCIgPT09IG4gJiYgMSA9PT0gdC5kZWYudHlwZSkgbiA9IFMocyk7XG4gICAgICAgICAgICBzID0gdC5iaW5kYWJsZS5wcm9wZXJ0eTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFByb3BlcnR5QmluZGluZ0luc3RydWN0aW9uKHRoaXMuZXAucGFyc2UobiwgOCksIHMsIEQudHdvV2F5KTtcbiAgICB9XG59O1xuXG53bi5pbmplY3QgPSBbIFp0LCBfIF07XG5cbnduID0gb3QoWyBjbihcInR3by13YXlcIikgXSwgd24pO1xuXG5sZXQgYm4gPSBjbGFzcyBEZWZhdWx0QmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMDtcbiAgICAgICAgdGhpcy5tID0gdDtcbiAgICAgICAgdGhpcy5lcCA9IGU7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJiaW5kXCI7XG4gICAgfVxuICAgIGJ1aWxkKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGNvbnN0IGkgPSB0LmF0dHI7XG4gICAgICAgIGNvbnN0IHMgPSB0LmJpbmRhYmxlO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIGxldCBvID0gaS50YXJnZXQ7XG4gICAgICAgIGxldCBsID0gaS5yYXdWYWx1ZTtcbiAgICAgICAgaWYgKG51bGwgPT0gcykge1xuICAgICAgICAgICAgciA9IHRoaXMubS5pc1R3b1dheSh0Lm5vZGUsIG8pID8gRC50d29XYXkgOiBELnRvVmlldztcbiAgICAgICAgICAgIG8gPSBudWxsICE9PSAoZSA9IHRoaXMubS5tYXAodC5ub2RlLCBvKSkgJiYgdm9pZCAwICE9PSBlID8gZSA6IFMobyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoXCJcIiA9PT0gbCAmJiAxID09PSB0LmRlZi50eXBlKSBsID0gUyhvKTtcbiAgICAgICAgICAgIG4gPSB0LmRlZi5kZWZhdWx0QmluZGluZ01vZGU7XG4gICAgICAgICAgICByID0gcy5tb2RlID09PSBELmRlZmF1bHQgfHwgbnVsbCA9PSBzLm1vZGUgPyBudWxsID09IG4gfHwgbiA9PT0gRC5kZWZhdWx0ID8gRC50b1ZpZXcgOiBuIDogcy5tb2RlO1xuICAgICAgICAgICAgbyA9IHMucHJvcGVydHk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9wZXJ0eUJpbmRpbmdJbnN0cnVjdGlvbih0aGlzLmVwLnBhcnNlKGwsIDgpLCBvLCByKTtcbiAgICB9XG59O1xuXG5ibi5pbmplY3QgPSBbIFp0LCBfIF07XG5cbmJuID0gb3QoWyBjbihcImJpbmRcIikgXSwgYm4pO1xuXG5sZXQgeG4gPSBjbGFzcyBDYWxsQmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMDtcbiAgICAgICAgdGhpcy5lcCA9IHQ7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJjYWxsXCI7XG4gICAgfVxuICAgIGJ1aWxkKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG51bGwgPT09IHQuYmluZGFibGUgPyBTKHQuYXR0ci50YXJnZXQpIDogdC5iaW5kYWJsZS5wcm9wZXJ0eTtcbiAgICAgICAgcmV0dXJuIG5ldyBDYWxsQmluZGluZ0luc3RydWN0aW9uKHRoaXMuZXAucGFyc2UodC5hdHRyLnJhd1ZhbHVlLCA4IHwgNCksIGUpO1xuICAgIH1cbn07XG5cbnhuLmluamVjdCA9IFsgXyBdO1xuXG54biA9IG90KFsgY24oXCJjYWxsXCIpIF0sIHhuKTtcblxubGV0IHluID0gY2xhc3MgRm9yQmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMDtcbiAgICAgICAgdGhpcy5lcCA9IHQ7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJmb3JcIjtcbiAgICB9XG4gICAgYnVpbGQodCkge1xuICAgICAgICBjb25zdCBlID0gbnVsbCA9PT0gdC5iaW5kYWJsZSA/IFModC5hdHRyLnRhcmdldCkgOiB0LmJpbmRhYmxlLnByb3BlcnR5O1xuICAgICAgICByZXR1cm4gbmV3IEl0ZXJhdG9yQmluZGluZ0luc3RydWN0aW9uKHRoaXMuZXAucGFyc2UodC5hdHRyLnJhd1ZhbHVlLCAyKSwgZSk7XG4gICAgfVxufTtcblxueW4uaW5qZWN0ID0gWyBfIF07XG5cbnluID0gb3QoWyBjbihcImZvclwiKSBdLCB5bik7XG5cbmxldCBrbiA9IGNsYXNzIFRyaWdnZXJCaW5kaW5nQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnR5cGUgPSAxO1xuICAgICAgICB0aGlzLmVwID0gdDtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiBcInRyaWdnZXJcIjtcbiAgICB9XG4gICAgYnVpbGQodCkge1xuICAgICAgICByZXR1cm4gbmV3IExpc3RlbmVyQmluZGluZ0luc3RydWN0aW9uKHRoaXMuZXAucGFyc2UodC5hdHRyLnJhd1ZhbHVlLCA0KSwgdC5hdHRyLnRhcmdldCwgdHJ1ZSwgTi5ub25lKTtcbiAgICB9XG59O1xuXG5rbi5pbmplY3QgPSBbIF8gXTtcblxua24gPSBvdChbIGNuKFwidHJpZ2dlclwiKSBdLCBrbik7XG5cbmxldCBDbiA9IGNsYXNzIERlbGVnYXRlQmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMTtcbiAgICAgICAgdGhpcy5lcCA9IHQ7XG4gICAgfVxuICAgIGdldCBuYW1lKCkge1xuICAgICAgICByZXR1cm4gXCJkZWxlZ2F0ZVwiO1xuICAgIH1cbiAgICBidWlsZCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgTGlzdGVuZXJCaW5kaW5nSW5zdHJ1Y3Rpb24odGhpcy5lcC5wYXJzZSh0LmF0dHIucmF3VmFsdWUsIDQpLCB0LmF0dHIudGFyZ2V0LCBmYWxzZSwgTi5idWJibGluZyk7XG4gICAgfVxufTtcblxuQ24uaW5qZWN0ID0gWyBfIF07XG5cbkNuID0gb3QoWyBjbihcImRlbGVnYXRlXCIpIF0sIENuKTtcblxubGV0IEFuID0gY2xhc3MgQ2FwdHVyZUJpbmRpbmdDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDE7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiY2FwdHVyZVwiO1xuICAgIH1cbiAgICBidWlsZCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgTGlzdGVuZXJCaW5kaW5nSW5zdHJ1Y3Rpb24odGhpcy5lcC5wYXJzZSh0LmF0dHIucmF3VmFsdWUsIDQpLCB0LmF0dHIudGFyZ2V0LCBmYWxzZSwgTi5jYXB0dXJpbmcpO1xuICAgIH1cbn07XG5cbkFuLmluamVjdCA9IFsgXyBdO1xuXG5BbiA9IG90KFsgY24oXCJjYXB0dXJlXCIpIF0sIEFuKTtcblxubGV0IFNuID0gY2xhc3MgQXR0ckJpbmRpbmdDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDE7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiYXR0clwiO1xuICAgIH1cbiAgICBidWlsZCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0cmlidXRlQmluZGluZ0luc3RydWN0aW9uKHQuYXR0ci50YXJnZXQsIHRoaXMuZXAucGFyc2UodC5hdHRyLnJhd1ZhbHVlLCA4KSwgdC5hdHRyLnRhcmdldCk7XG4gICAgfVxufTtcblxuU24uaW5qZWN0ID0gWyBfIF07XG5cblNuID0gb3QoWyBjbihcImF0dHJcIikgXSwgU24pO1xuXG5sZXQgUm4gPSBjbGFzcyBTdHlsZUJpbmRpbmdDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDE7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwic3R5bGVcIjtcbiAgICB9XG4gICAgYnVpbGQodCkge1xuICAgICAgICByZXR1cm4gbmV3IEF0dHJpYnV0ZUJpbmRpbmdJbnN0cnVjdGlvbihcInN0eWxlXCIsIHRoaXMuZXAucGFyc2UodC5hdHRyLnJhd1ZhbHVlLCA4KSwgdC5hdHRyLnRhcmdldCk7XG4gICAgfVxufTtcblxuUm4uaW5qZWN0ID0gWyBfIF07XG5cblJuID0gb3QoWyBjbihcInN0eWxlXCIpIF0sIFJuKTtcblxubGV0IEVuID0gY2xhc3MgQ2xhc3NCaW5kaW5nQ29tbWFuZCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnR5cGUgPSAxO1xuICAgICAgICB0aGlzLmVwID0gdDtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiBcImNsYXNzXCI7XG4gICAgfVxuICAgIGJ1aWxkKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyaWJ1dGVCaW5kaW5nSW5zdHJ1Y3Rpb24oXCJjbGFzc1wiLCB0aGlzLmVwLnBhcnNlKHQuYXR0ci5yYXdWYWx1ZSwgOCksIHQuYXR0ci50YXJnZXQpO1xuICAgIH1cbn07XG5cbkVuLmluamVjdCA9IFsgXyBdO1xuXG5FbiA9IG90KFsgY24oXCJjbGFzc1wiKSBdLCBFbik7XG5cbmxldCBCbiA9IGNsYXNzIFJlZkJpbmRpbmdDb21tYW5kIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDE7XG4gICAgICAgIHRoaXMuZXAgPSB0O1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwicmVmXCI7XG4gICAgfVxuICAgIGJ1aWxkKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBSZWZCaW5kaW5nSW5zdHJ1Y3Rpb24odGhpcy5lcC5wYXJzZSh0LmF0dHIucmF3VmFsdWUsIDgpLCB0LmF0dHIudGFyZ2V0KTtcbiAgICB9XG59O1xuXG5Cbi5pbmplY3QgPSBbIF8gXTtcblxuQm4gPSBvdChbIGNuKFwicmVmXCIpIF0sIEJuKTtcblxubGV0IEluID0gY2xhc3MgU3ByZWFkQmluZGluZ0NvbW1hbmQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnR5cGUgPSAxO1xuICAgIH1cbiAgICBnZXQgbmFtZSgpIHtcbiAgICAgICAgcmV0dXJuIFwiLi4uJGF0dHJzXCI7XG4gICAgfVxuICAgIGJ1aWxkKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBTcHJlYWRCaW5kaW5nSW5zdHJ1Y3Rpb247XG4gICAgfVxufTtcblxuSW4gPSBvdChbIGNuKFwiLi4uJGF0dHJzXCIpIF0sIEluKTtcblxuY29uc3QgVG4gPSBsLmNyZWF0ZUludGVyZmFjZShcIklUZW1wbGF0ZUVsZW1lbnRGYWN0b3J5XCIsICh0ID0+IHQuc2luZ2xldG9uKFRlbXBsYXRlRWxlbWVudEZhY3RvcnkpKSk7XG5cbmNvbnN0IERuID0ge307XG5cbmNsYXNzIFRlbXBsYXRlRWxlbWVudEZhY3Rvcnkge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wID0gdDtcbiAgICAgICAgdGhpcy5uZSA9IHQuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuICAgIH1cbiAgICBjcmVhdGVUZW1wbGF0ZSh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBpZiAoQXQodCkpIHtcbiAgICAgICAgICAgIGxldCBlID0gRG5bdF07XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMubmU7XG4gICAgICAgICAgICAgICAgaS5pbm5lckhUTUwgPSB0O1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBpLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQ7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gcyB8fCBcIlRFTVBMQVRFXCIgIT09IHMubm9kZU5hbWUgfHwgbnVsbCAhPSBzLm5leHRFbGVtZW50U2libGluZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm5lID0gdGhpcy5wLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZW1wbGF0ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgZSA9IGk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaS5jb250ZW50LnJlbW92ZUNoaWxkKHMpO1xuICAgICAgICAgICAgICAgICAgICBlID0gcztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgRG5bdF0gPSBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGUuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChcIlRFTVBMQVRFXCIgIT09IHQubm9kZU5hbWUpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLnAuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpO1xuICAgICAgICAgICAgZS5jb250ZW50LmFwcGVuZENoaWxkKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH1cbiAgICAgICAgbnVsbCA9PT0gKGUgPSB0LnBhcmVudE5vZGUpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUucmVtb3ZlQ2hpbGQodCk7XG4gICAgICAgIHJldHVybiB0LmNsb25lTm9kZSh0cnVlKTtcbiAgICB9XG59XG5cblRlbXBsYXRlRWxlbWVudEZhY3RvcnkuaW5qZWN0ID0gWyBLdCBdO1xuXG5jb25zdCBQbiA9IGZ1bmN0aW9uKHQpIHtcbiAgICBmdW5jdGlvbiBlKHQsIGksIHMpIHtcbiAgICAgICAgbC5pbmplY3QoZSkodCwgaSwgcyk7XG4gICAgfVxuICAgIGUuJGlzUmVzb2x2ZXIgPSB0cnVlO1xuICAgIGUucmVzb2x2ZSA9IGZ1bmN0aW9uKGUsIGkpIHtcbiAgICAgICAgaWYgKGkucm9vdCA9PT0gaSkgcmV0dXJuIGkuZ2V0QWxsKHQsIGZhbHNlKTtcbiAgICAgICAgcmV0dXJuIGkuaGFzKHQsIGZhbHNlKSA/IGkuZ2V0QWxsKHQsIGZhbHNlKS5jb25jYXQoaS5yb290LmdldEFsbCh0LCBmYWxzZSkpIDogaS5yb290LmdldEFsbCh0LCBmYWxzZSk7XG4gICAgfTtcbiAgICByZXR1cm4gZTtcbn07XG5cbmNsYXNzIFRlbXBsYXRlQ29tcGlsZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmRlYnVnID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmVzb2x2ZVJlc291cmNlcyA9IHRydWU7XG4gICAgfVxuICAgIHN0YXRpYyByZWdpc3Rlcih0KSB7XG4gICAgICAgIHJldHVybiBjLnNpbmdsZXRvbihBcywgdGhpcykucmVnaXN0ZXIodCk7XG4gICAgfVxuICAgIGNvbXBpbGUodCwgZSwgaSkge1xuICAgICAgICB2YXIgcywgbiwgciwgbztcbiAgICAgICAgY29uc3QgbCA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmdldE9yQ3JlYXRlKHQpO1xuICAgICAgICBpZiAobnVsbCA9PT0gbC50ZW1wbGF0ZSB8fCB2b2lkIDAgPT09IGwudGVtcGxhdGUpIHJldHVybiBsO1xuICAgICAgICBpZiAoZmFsc2UgPT09IGwubmVlZHNDb21waWxlKSByZXR1cm4gbDtcbiAgICAgICAgbnVsbCAhPT0gaSAmJiB2b2lkIDAgIT09IGkgPyBpIDogaSA9IExuO1xuICAgICAgICBjb25zdCBhID0gbmV3IENvbXBpbGF0aW9uQ29udGV4dCh0LCBlLCBpLCBudWxsLCBudWxsLCB2b2lkIDApO1xuICAgICAgICBjb25zdCBjID0gQXQobC50ZW1wbGF0ZSkgfHwgIXQuZW5oYW5jZSA/IGEucmUuY3JlYXRlVGVtcGxhdGUobC50ZW1wbGF0ZSkgOiBsLnRlbXBsYXRlO1xuICAgICAgICBjb25zdCB1ID0gXCJURU1QTEFURVwiID09PSBjLm5vZGVOYW1lICYmIG51bGwgIT0gYy5jb250ZW50O1xuICAgICAgICBjb25zdCBmID0gdSA/IGMuY29udGVudCA6IGM7XG4gICAgICAgIGNvbnN0IGQgPSBlLmdldChQbih6bikpO1xuICAgICAgICBjb25zdCBtID0gZC5sZW5ndGg7XG4gICAgICAgIGxldCB2ID0gMDtcbiAgICAgICAgaWYgKG0gPiAwKSB3aGlsZSAobSA+IHYpIHtcbiAgICAgICAgICAgIG51bGwgPT09IChuID0gKHMgPSBkW3ZdKS5jb21waWxpbmcpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uY2FsbChzLCBjKTtcbiAgICAgICAgICAgICsrdjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoYy5oYXNBdHRyaWJ1dGUoTm4pKSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwNzAxXCIpO1xuICAgICAgICB0aGlzLm9lKGYsIGEpO1xuICAgICAgICB0aGlzLmxlKGYsIGEpO1xuICAgICAgICByZXR1cm4gQ3VzdG9tRWxlbWVudERlZmluaXRpb24uY3JlYXRlKHtcbiAgICAgICAgICAgIC4uLnQsXG4gICAgICAgICAgICBuYW1lOiB0Lm5hbWUgfHwgUW4oKSxcbiAgICAgICAgICAgIGRlcGVuZGVuY2llczogKG51bGwgIT09IChyID0gdC5kZXBlbmRlbmNpZXMpICYmIHZvaWQgMCAhPT0gciA/IHIgOiBoKS5jb25jYXQobnVsbCAhPT0gKG8gPSBhLmRlcHMpICYmIHZvaWQgMCAhPT0gbyA/IG8gOiBoKSxcbiAgICAgICAgICAgIGluc3RydWN0aW9uczogYS5yb3dzLFxuICAgICAgICAgICAgc3Vycm9nYXRlczogdSA/IHRoaXMuaGUoYywgYSkgOiBoLFxuICAgICAgICAgICAgdGVtcGxhdGU6IGMsXG4gICAgICAgICAgICBoYXNTbG90czogYS5oYXNTbG90LFxuICAgICAgICAgICAgbmVlZHNDb21waWxlOiBmYWxzZVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29tcGlsZVNwcmVhZCh0LCBlLCBpLCBzKSB7XG4gICAgICAgIHZhciBuO1xuICAgICAgICBjb25zdCByID0gbmV3IENvbXBpbGF0aW9uQ29udGV4dCh0LCBpLCBMbiwgbnVsbCwgbnVsbCwgdm9pZCAwKTtcbiAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICBjb25zdCBsID0gci5hZShzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICBjb25zdCBoID0gci5lcDtcbiAgICAgICAgY29uc3QgYSA9IGUubGVuZ3RoO1xuICAgICAgICBsZXQgYyA9IDA7XG4gICAgICAgIGxldCB1O1xuICAgICAgICBsZXQgZiA9IG51bGw7XG4gICAgICAgIGxldCBkO1xuICAgICAgICBsZXQgbTtcbiAgICAgICAgbGV0IHY7XG4gICAgICAgIGxldCBwO1xuICAgICAgICBsZXQgZztcbiAgICAgICAgbGV0IHcgPSBudWxsO1xuICAgICAgICBsZXQgYjtcbiAgICAgICAgbGV0IHg7XG4gICAgICAgIGxldCB5O1xuICAgICAgICBsZXQgaztcbiAgICAgICAgZm9yICg7YSA+IGM7ICsrYykge1xuICAgICAgICAgICAgdSA9IGVbY107XG4gICAgICAgICAgICB5ID0gdS50YXJnZXQ7XG4gICAgICAgICAgICBrID0gdS5yYXdWYWx1ZTtcbiAgICAgICAgICAgIHcgPSByLmNlKHUpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHcgJiYgKDEgJiB3LnR5cGUpID4gMCkge1xuICAgICAgICAgICAgICAgIE1uLm5vZGUgPSBzO1xuICAgICAgICAgICAgICAgIE1uLmF0dHIgPSB1O1xuICAgICAgICAgICAgICAgIE1uLmJpbmRhYmxlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBNbi5kZWYgPSBudWxsO1xuICAgICAgICAgICAgICAgIG8ucHVzaCh3LmJ1aWxkKE1uKSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmID0gci51ZSh5KTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBmKSB7XG4gICAgICAgICAgICAgICAgaWYgKGYuaXNUZW1wbGF0ZUNvbnRyb2xsZXIpIHRocm93IG5ldyBFcnJvcihgQVVSMDcwMzoke3l9YCk7XG4gICAgICAgICAgICAgICAgdiA9IEJpbmRhYmxlc0luZm8uZnJvbShmLCB0cnVlKTtcbiAgICAgICAgICAgICAgICB4ID0gZmFsc2UgPT09IGYubm9NdWx0aUJpbmRpbmdzICYmIG51bGwgPT09IHcgJiYgT24oayk7XG4gICAgICAgICAgICAgICAgaWYgKHgpIG0gPSB0aGlzLmZlKHMsIGssIGYsIHIpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZyA9IHYucHJpbWFyeTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IHcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGIgPSBoLnBhcnNlKGssIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbSA9IFsgbnVsbCA9PT0gYiA/IG5ldyBTZXRQcm9wZXJ0eUluc3RydWN0aW9uKGssIGcucHJvcGVydHkpIDogbmV3IEludGVycG9sYXRpb25JbnN0cnVjdGlvbihiLCBnLnByb3BlcnR5KSBdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgTW4ubm9kZSA9IHM7XG4gICAgICAgICAgICAgICAgICAgICAgICBNbi5hdHRyID0gdTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1uLmJpbmRhYmxlID0gZztcbiAgICAgICAgICAgICAgICAgICAgICAgIE1uLmRlZiA9IGY7XG4gICAgICAgICAgICAgICAgICAgICAgICBtID0gWyB3LmJ1aWxkKE1uKSBdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIChudWxsICE9PSBkICYmIHZvaWQgMCAhPT0gZCA/IGQgOiBkID0gW10pLnB1c2gobmV3IEh5ZHJhdGVBdHRyaWJ1dGVJbnN0cnVjdGlvbih0aGlzLnJlc29sdmVSZXNvdXJjZXMgPyBmIDogZi5uYW1lLCBudWxsICE9IGYuYWxpYXNlcyAmJiBmLmFsaWFzZXMuaW5jbHVkZXMoeSkgPyB5IDogdm9pZCAwLCBtKSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gdykge1xuICAgICAgICAgICAgICAgIGIgPSBoLnBhcnNlKGssIDEpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBsKSB7XG4gICAgICAgICAgICAgICAgICAgIHYgPSBCaW5kYWJsZXNJbmZvLmZyb20obCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBwID0gdi5hdHRyc1t5XTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gcCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYiA9IGgucGFyc2UoaywgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2gobmV3IFNwcmVhZEVsZW1lbnRQcm9wQmluZGluZ0luc3RydWN0aW9uKG51bGwgPT0gYiA/IG5ldyBTZXRQcm9wZXJ0eUluc3RydWN0aW9uKGssIHAucHJvcGVydHkpIDogbmV3IEludGVycG9sYXRpb25JbnN0cnVjdGlvbihiLCBwLnByb3BlcnR5KSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gYikgby5wdXNoKG5ldyBJbnRlcnBvbGF0aW9uSW5zdHJ1Y3Rpb24oYiwgbnVsbCAhPT0gKG4gPSByLm0ubWFwKHMsIHkpKSAmJiB2b2lkIDAgIT09IG4gPyBuIDogUyh5KSkpOyBlbHNlIHN3aXRjaCAoeSkge1xuICAgICAgICAgICAgICAgICAgY2FzZSBcImNsYXNzXCI6XG4gICAgICAgICAgICAgICAgICAgIG8ucHVzaChuZXcgU2V0Q2xhc3NBdHRyaWJ1dGVJbnN0cnVjdGlvbihrKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICBjYXNlIFwic3R5bGVcIjpcbiAgICAgICAgICAgICAgICAgICAgby5wdXNoKG5ldyBTZXRTdHlsZUF0dHJpYnV0ZUluc3RydWN0aW9uKGspKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIG8ucHVzaChuZXcgU2V0QXR0cmlidXRlSW5zdHJ1Y3Rpb24oaywgeSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGwpIHtcbiAgICAgICAgICAgICAgICAgICAgdiA9IEJpbmRhYmxlc0luZm8uZnJvbShsLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIHAgPSB2LmF0dHJzW3ldO1xuICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBNbi5ub2RlID0gcztcbiAgICAgICAgICAgICAgICAgICAgICAgIE1uLmF0dHIgPSB1O1xuICAgICAgICAgICAgICAgICAgICAgICAgTW4uYmluZGFibGUgPSBwO1xuICAgICAgICAgICAgICAgICAgICAgICAgTW4uZGVmID0gbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIG8ucHVzaChuZXcgU3ByZWFkRWxlbWVudFByb3BCaW5kaW5nSW5zdHJ1Y3Rpb24ody5idWlsZChNbikpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIE1uLm5vZGUgPSBzO1xuICAgICAgICAgICAgICAgIE1uLmF0dHIgPSB1O1xuICAgICAgICAgICAgICAgIE1uLmJpbmRhYmxlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBNbi5kZWYgPSBudWxsO1xuICAgICAgICAgICAgICAgIG8ucHVzaCh3LmJ1aWxkKE1uKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgJG4oKTtcbiAgICAgICAgaWYgKG51bGwgIT0gZCkgcmV0dXJuIGQuY29uY2F0KG8pO1xuICAgICAgICByZXR1cm4gbztcbiAgICB9XG4gICAgaGUodCwgZSkge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICBjb25zdCBuID0gdC5hdHRyaWJ1dGVzO1xuICAgICAgICBjb25zdCByID0gZS5lcDtcbiAgICAgICAgbGV0IG8gPSBuLmxlbmd0aDtcbiAgICAgICAgbGV0IGwgPSAwO1xuICAgICAgICBsZXQgaDtcbiAgICAgICAgbGV0IGE7XG4gICAgICAgIGxldCBjO1xuICAgICAgICBsZXQgdTtcbiAgICAgICAgbGV0IGYgPSBudWxsO1xuICAgICAgICBsZXQgZDtcbiAgICAgICAgbGV0IG07XG4gICAgICAgIGxldCB2O1xuICAgICAgICBsZXQgcDtcbiAgICAgICAgbGV0IGcgPSBudWxsO1xuICAgICAgICBsZXQgdztcbiAgICAgICAgbGV0IGI7XG4gICAgICAgIGxldCB4O1xuICAgICAgICBsZXQgeTtcbiAgICAgICAgZm9yICg7byA+IGw7ICsrbCkge1xuICAgICAgICAgICAgaCA9IG5bbF07XG4gICAgICAgICAgICBhID0gaC5uYW1lO1xuICAgICAgICAgICAgYyA9IGgudmFsdWU7XG4gICAgICAgICAgICB1ID0gZS5kZS5wYXJzZShhLCBjKTtcbiAgICAgICAgICAgIHggPSB1LnRhcmdldDtcbiAgICAgICAgICAgIHkgPSB1LnJhd1ZhbHVlO1xuICAgICAgICAgICAgaWYgKFVuW3hdKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3MDI6JHthfWApO1xuICAgICAgICAgICAgZyA9IGUuY2UodSk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZyAmJiAoMSAmIGcudHlwZSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgTW4ubm9kZSA9IHQ7XG4gICAgICAgICAgICAgICAgTW4uYXR0ciA9IHU7XG4gICAgICAgICAgICAgICAgTW4uYmluZGFibGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIE1uLmRlZiA9IG51bGw7XG4gICAgICAgICAgICAgICAgcy5wdXNoKGcuYnVpbGQoTW4pKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGYgPSBlLnVlKHgpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IGYpIHtcbiAgICAgICAgICAgICAgICBpZiAoZi5pc1RlbXBsYXRlQ29udHJvbGxlcikgdGhyb3cgbmV3IEVycm9yKGBBVVIwNzAzOiR7eH1gKTtcbiAgICAgICAgICAgICAgICB2ID0gQmluZGFibGVzSW5mby5mcm9tKGYsIHRydWUpO1xuICAgICAgICAgICAgICAgIGIgPSBmYWxzZSA9PT0gZi5ub011bHRpQmluZGluZ3MgJiYgbnVsbCA9PT0gZyAmJiBPbih5KTtcbiAgICAgICAgICAgICAgICBpZiAoYikgbSA9IHRoaXMuZmUodCwgeSwgZiwgZSk7IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBwID0gdi5wcmltYXJ5O1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdyA9IHIucGFyc2UoeSwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtID0gWyBudWxsID09PSB3ID8gbmV3IFNldFByb3BlcnR5SW5zdHJ1Y3Rpb24oeSwgcC5wcm9wZXJ0eSkgOiBuZXcgSW50ZXJwb2xhdGlvbkluc3RydWN0aW9uKHcsIHAucHJvcGVydHkpIF07XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBNbi5ub2RlID0gdDtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1uLmF0dHIgPSB1O1xuICAgICAgICAgICAgICAgICAgICAgICAgTW4uYmluZGFibGUgPSBwO1xuICAgICAgICAgICAgICAgICAgICAgICAgTW4uZGVmID0gZjtcbiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSBbIGcuYnVpbGQoTW4pIF07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdC5yZW1vdmVBdHRyaWJ1dGUoYSk7XG4gICAgICAgICAgICAgICAgLS1sO1xuICAgICAgICAgICAgICAgIC0tbztcbiAgICAgICAgICAgICAgICAobnVsbCAhPT0gZCAmJiB2b2lkIDAgIT09IGQgPyBkIDogZCA9IFtdKS5wdXNoKG5ldyBIeWRyYXRlQXR0cmlidXRlSW5zdHJ1Y3Rpb24odGhpcy5yZXNvbHZlUmVzb3VyY2VzID8gZiA6IGYubmFtZSwgbnVsbCAhPSBmLmFsaWFzZXMgJiYgZi5hbGlhc2VzLmluY2x1ZGVzKHgpID8geCA6IHZvaWQgMCwgbSkpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG51bGwgPT09IGcpIHtcbiAgICAgICAgICAgICAgICB3ID0gci5wYXJzZSh5LCAxKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSB3KSB7XG4gICAgICAgICAgICAgICAgICAgIHQucmVtb3ZlQXR0cmlidXRlKGEpO1xuICAgICAgICAgICAgICAgICAgICAtLWw7XG4gICAgICAgICAgICAgICAgICAgIC0tbztcbiAgICAgICAgICAgICAgICAgICAgcy5wdXNoKG5ldyBJbnRlcnBvbGF0aW9uSW5zdHJ1Y3Rpb24odywgbnVsbCAhPT0gKGkgPSBlLm0ubWFwKHQsIHgpKSAmJiB2b2lkIDAgIT09IGkgPyBpIDogUyh4KSkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBzd2l0Y2ggKGEpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgXCJjbGFzc1wiOlxuICAgICAgICAgICAgICAgICAgICBzLnB1c2gobmV3IFNldENsYXNzQXR0cmlidXRlSW5zdHJ1Y3Rpb24oeSkpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgY2FzZSBcInN0eWxlXCI6XG4gICAgICAgICAgICAgICAgICAgIHMucHVzaChuZXcgU2V0U3R5bGVBdHRyaWJ1dGVJbnN0cnVjdGlvbih5KSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBzLnB1c2gobmV3IFNldEF0dHJpYnV0ZUluc3RydWN0aW9uKHksIGEpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIE1uLm5vZGUgPSB0O1xuICAgICAgICAgICAgICAgIE1uLmF0dHIgPSB1O1xuICAgICAgICAgICAgICAgIE1uLmJpbmRhYmxlID0gbnVsbDtcbiAgICAgICAgICAgICAgICBNbi5kZWYgPSBudWxsO1xuICAgICAgICAgICAgICAgIHMucHVzaChnLmJ1aWxkKE1uKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgJG4oKTtcbiAgICAgICAgaWYgKG51bGwgIT0gZCkgcmV0dXJuIGQuY29uY2F0KHMpO1xuICAgICAgICByZXR1cm4gcztcbiAgICB9XG4gICAgbGUodCwgZSkge1xuICAgICAgICBzd2l0Y2ggKHQubm9kZVR5cGUpIHtcbiAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICBzd2l0Y2ggKHQubm9kZU5hbWUpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIkxFVFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm1lKHQsIGUpO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmUodCwgZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wZSh0LCBlKTtcblxuICAgICAgICAgIGNhc2UgMTE6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbGV0IGkgPSB0LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG51bGwgIT09IGkpIGkgPSB0aGlzLmxlKGksIGUpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0Lm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICBtZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0LmF0dHJpYnV0ZXM7XG4gICAgICAgIGNvbnN0IHMgPSBpLmxlbmd0aDtcbiAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICBjb25zdCByID0gZS5lcDtcbiAgICAgICAgbGV0IG8gPSBmYWxzZTtcbiAgICAgICAgbGV0IGwgPSAwO1xuICAgICAgICBsZXQgaDtcbiAgICAgICAgbGV0IGE7XG4gICAgICAgIGxldCBjO1xuICAgICAgICBsZXQgdTtcbiAgICAgICAgbGV0IGY7XG4gICAgICAgIGxldCBkO1xuICAgICAgICBsZXQgbTtcbiAgICAgICAgbGV0IHY7XG4gICAgICAgIGZvciAoO3MgPiBsOyArK2wpIHtcbiAgICAgICAgICAgIGggPSBpW2xdO1xuICAgICAgICAgICAgYyA9IGgubmFtZTtcbiAgICAgICAgICAgIHUgPSBoLnZhbHVlO1xuICAgICAgICAgICAgaWYgKFwidG8tYmluZGluZy1jb250ZXh0XCIgPT09IGMpIHtcbiAgICAgICAgICAgICAgICBvID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGEgPSBlLmRlLnBhcnNlKGMsIHUpO1xuICAgICAgICAgICAgZCA9IGEudGFyZ2V0O1xuICAgICAgICAgICAgbSA9IGEucmF3VmFsdWU7XG4gICAgICAgICAgICBmID0gZS5jZShhKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBmKSBzd2l0Y2ggKGYubmFtZSkge1xuICAgICAgICAgICAgICBjYXNlIFwidG8tdmlld1wiOlxuICAgICAgICAgICAgICBjYXNlIFwiYmluZFwiOlxuICAgICAgICAgICAgICAgIG4ucHVzaChuZXcgTGV0QmluZGluZ0luc3RydWN0aW9uKHIucGFyc2UobSwgOCksIFMoZCkpKTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcblxuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDcwNDoke2EuY29tbWFuZH1gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHYgPSByLnBhcnNlKG0sIDEpO1xuICAgICAgICAgICAgbi5wdXNoKG5ldyBMZXRCaW5kaW5nSW5zdHJ1Y3Rpb24obnVsbCA9PT0gdiA/IG5ldyB6KG0pIDogdiwgUyhkKSkpO1xuICAgICAgICB9XG4gICAgICAgIGUucm93cy5wdXNoKFsgbmV3IEh5ZHJhdGVMZXRFbGVtZW50SW5zdHJ1Y3Rpb24obiwgbykgXSk7XG4gICAgICAgIHJldHVybiB0aGlzLmdlKHQpLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICB2ZSh0LCBlKSB7XG4gICAgICAgIHZhciBpLCBzLCBuLCByLCBsLCBhO1xuICAgICAgICB2YXIgYywgdTtcbiAgICAgICAgY29uc3QgZiA9IHQubmV4dFNpYmxpbmc7XG4gICAgICAgIGNvbnN0IGQgPSAobnVsbCAhPT0gKGkgPSB0LmdldEF0dHJpYnV0ZShcImFzLWVsZW1lbnRcIikpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiB0Lm5vZGVOYW1lKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBjb25zdCBtID0gZS5hZShkKTtcbiAgICAgICAgY29uc3QgdiA9ICEhKG51bGwgPT09IG0gfHwgdm9pZCAwID09PSBtID8gdm9pZCAwIDogbS5jYXB0dXJlKTtcbiAgICAgICAgY29uc3QgcCA9IHYgPyBbXSA6IGg7XG4gICAgICAgIGNvbnN0IGcgPSBlLmVwO1xuICAgICAgICBjb25zdCB3ID0gdGhpcy5kZWJ1ZyA/IG8gOiAoKSA9PiB7XG4gICAgICAgICAgICB0LnJlbW92ZUF0dHJpYnV0ZShBKTtcbiAgICAgICAgICAgIC0taztcbiAgICAgICAgICAgIC0teTtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IGIgPSB0LmF0dHJpYnV0ZXM7XG4gICAgICAgIGxldCB4O1xuICAgICAgICBsZXQgeSA9IGIubGVuZ3RoO1xuICAgICAgICBsZXQgayA9IDA7XG4gICAgICAgIGxldCBDO1xuICAgICAgICBsZXQgQTtcbiAgICAgICAgbGV0IFI7XG4gICAgICAgIGxldCBFO1xuICAgICAgICBsZXQgQjtcbiAgICAgICAgbGV0IEk7XG4gICAgICAgIGxldCBUID0gbnVsbDtcbiAgICAgICAgbGV0IEQgPSBmYWxzZTtcbiAgICAgICAgbGV0IFA7XG4gICAgICAgIGxldCBPO1xuICAgICAgICBsZXQgJDtcbiAgICAgICAgbGV0IEw7XG4gICAgICAgIGxldCBxO1xuICAgICAgICBsZXQgTTtcbiAgICAgICAgbGV0IFU7XG4gICAgICAgIGxldCBGID0gbnVsbDtcbiAgICAgICAgbGV0IFY7XG4gICAgICAgIGxldCBfO1xuICAgICAgICBsZXQgajtcbiAgICAgICAgbGV0IE47XG4gICAgICAgIGxldCBXID0gdHJ1ZTtcbiAgICAgICAgbGV0IEggPSBmYWxzZTtcbiAgICAgICAgaWYgKFwic2xvdFwiID09PSBkKSBlLnJvb3QuaGFzU2xvdCA9IHRydWU7XG4gICAgICAgIGlmIChudWxsICE9PSBtKSB7XG4gICAgICAgICAgICBXID0gbnVsbCA9PT0gKHMgPSBtLnByb2Nlc3NDb250ZW50KSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmNhbGwobS5UeXBlLCB0LCBlLnApO1xuICAgICAgICAgICAgYiA9IHQuYXR0cmlidXRlcztcbiAgICAgICAgICAgIHkgPSBiLmxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZS5yb290LmRlZi5lbmhhbmNlICYmIHQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiYXVcIikpIHRocm93IG5ldyBFcnJvcihgQVVSMDcwNWApO1xuICAgICAgICBmb3IgKDt5ID4gazsgKytrKSB7XG4gICAgICAgICAgICBDID0gYltrXTtcbiAgICAgICAgICAgIEEgPSBDLm5hbWU7XG4gICAgICAgICAgICBSID0gQy52YWx1ZTtcbiAgICAgICAgICAgIHN3aXRjaCAoQSkge1xuICAgICAgICAgICAgICBjYXNlIFwiYXMtZWxlbWVudFwiOlxuICAgICAgICAgICAgICBjYXNlIFwiY29udGFpbmVybGVzc1wiOlxuICAgICAgICAgICAgICAgIHcoKTtcbiAgICAgICAgICAgICAgICBpZiAoIUgpIEggPSBcImNvbnRhaW5lcmxlc3NcIiA9PT0gQTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIEUgPSBlLmRlLnBhcnNlKEEsIFIpO1xuICAgICAgICAgICAgRiA9IGUuY2UoRSk7XG4gICAgICAgICAgICBqID0gRS50YXJnZXQ7XG4gICAgICAgICAgICBOID0gRS5yYXdWYWx1ZTtcbiAgICAgICAgICAgIGlmICh2KSB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gRiAmJiAxICYgRi50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHcoKTtcbiAgICAgICAgICAgICAgICAgICAgcC5wdXNoKEUpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKFwiYXUtc2xvdFwiICE9PSBqKSB7XG4gICAgICAgICAgICAgICAgICAgIFYgPSBCaW5kYWJsZXNJbmZvLmZyb20obSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSBWLmF0dHJzW2pdICYmICEobnVsbCA9PT0gKG4gPSBlLnVlKGopKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmlzVGVtcGxhdGVDb250cm9sbGVyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcC5wdXNoKEUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gRiAmJiAxICYgRi50eXBlKSB7XG4gICAgICAgICAgICAgICAgTW4ubm9kZSA9IHQ7XG4gICAgICAgICAgICAgICAgTW4uYXR0ciA9IEU7XG4gICAgICAgICAgICAgICAgTW4uYmluZGFibGUgPSBudWxsO1xuICAgICAgICAgICAgICAgIE1uLmRlZiA9IG51bGw7XG4gICAgICAgICAgICAgICAgKG51bGwgIT09IEIgJiYgdm9pZCAwICE9PSBCID8gQiA6IEIgPSBbXSkucHVzaChGLmJ1aWxkKE1uKSk7XG4gICAgICAgICAgICAgICAgdygpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgVCA9IGUudWUoaik7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gVCkge1xuICAgICAgICAgICAgICAgIFYgPSBCaW5kYWJsZXNJbmZvLmZyb20oVCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgRCA9IGZhbHNlID09PSBULm5vTXVsdGlCaW5kaW5ncyAmJiBudWxsID09PSBGICYmIE9uKFIpO1xuICAgICAgICAgICAgICAgIGlmIChEKSAkID0gdGhpcy5mZSh0LCBSLCBULCBlKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIF8gPSBWLnByaW1hcnk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBGKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBNID0gZy5wYXJzZShSLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQgPSBbIG51bGwgPT09IE0gPyBuZXcgU2V0UHJvcGVydHlJbnN0cnVjdGlvbihSLCBfLnByb3BlcnR5KSA6IG5ldyBJbnRlcnBvbGF0aW9uSW5zdHJ1Y3Rpb24oTSwgXy5wcm9wZXJ0eSkgXTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIE1uLm5vZGUgPSB0O1xuICAgICAgICAgICAgICAgICAgICAgICAgTW4uYXR0ciA9IEU7XG4gICAgICAgICAgICAgICAgICAgICAgICBNbi5iaW5kYWJsZSA9IF87XG4gICAgICAgICAgICAgICAgICAgICAgICBNbi5kZWYgPSBUO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCA9IFsgRi5idWlsZChNbikgXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB3KCk7XG4gICAgICAgICAgICAgICAgaWYgKFQuaXNUZW1wbGF0ZUNvbnRyb2xsZXIpIChudWxsICE9PSBMICYmIHZvaWQgMCAhPT0gTCA/IEwgOiBMID0gW10pLnB1c2gobmV3IEh5ZHJhdGVUZW1wbGF0ZUNvbnRyb2xsZXIocW4sIHRoaXMucmVzb2x2ZVJlc291cmNlcyA/IFQgOiBULm5hbWUsIHZvaWQgMCwgJCkpOyBlbHNlIChudWxsICE9PSBPICYmIHZvaWQgMCAhPT0gTyA/IE8gOiBPID0gW10pLnB1c2gobmV3IEh5ZHJhdGVBdHRyaWJ1dGVJbnN0cnVjdGlvbih0aGlzLnJlc29sdmVSZXNvdXJjZXMgPyBUIDogVC5uYW1lLCBudWxsICE9IFQuYWxpYXNlcyAmJiBULmFsaWFzZXMuaW5jbHVkZXMoaikgPyBqIDogdm9pZCAwLCAkKSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobnVsbCA9PT0gRikge1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBtKSB7XG4gICAgICAgICAgICAgICAgICAgIFYgPSBCaW5kYWJsZXNJbmZvLmZyb20obSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBQID0gVi5hdHRyc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gUCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgTSA9IGcucGFyc2UoTiwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAobnVsbCAhPT0gSSAmJiB2b2lkIDAgIT09IEkgPyBJIDogSSA9IFtdKS5wdXNoKG51bGwgPT0gTSA/IG5ldyBTZXRQcm9wZXJ0eUluc3RydWN0aW9uKE4sIFAucHJvcGVydHkpIDogbmV3IEludGVycG9sYXRpb25JbnN0cnVjdGlvbihNLCBQLnByb3BlcnR5KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBNID0gZy5wYXJzZShOLCAxKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPSBNKSB7XG4gICAgICAgICAgICAgICAgICAgIHcoKTtcbiAgICAgICAgICAgICAgICAgICAgKG51bGwgIT09IEIgJiYgdm9pZCAwICE9PSBCID8gQiA6IEIgPSBbXSkucHVzaChuZXcgSW50ZXJwb2xhdGlvbkluc3RydWN0aW9uKE0sIG51bGwgIT09IChyID0gZS5tLm1hcCh0LCBqKSkgJiYgdm9pZCAwICE9PSByID8gciA6IFMoaikpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB3KCk7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gbSkge1xuICAgICAgICAgICAgICAgIFYgPSBCaW5kYWJsZXNJbmZvLmZyb20obSwgZmFsc2UpO1xuICAgICAgICAgICAgICAgIFAgPSBWLmF0dHJzW2pdO1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IFApIHtcbiAgICAgICAgICAgICAgICAgICAgTW4ubm9kZSA9IHQ7XG4gICAgICAgICAgICAgICAgICAgIE1uLmF0dHIgPSBFO1xuICAgICAgICAgICAgICAgICAgICBNbi5iaW5kYWJsZSA9IFA7XG4gICAgICAgICAgICAgICAgICAgIE1uLmRlZiA9IG07XG4gICAgICAgICAgICAgICAgICAgIChudWxsICE9PSBJICYmIHZvaWQgMCAhPT0gSSA/IEkgOiBJID0gW10pLnB1c2goRi5idWlsZChNbikpO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBNbi5ub2RlID0gdDtcbiAgICAgICAgICAgIE1uLmF0dHIgPSBFO1xuICAgICAgICAgICAgTW4uYmluZGFibGUgPSBudWxsO1xuICAgICAgICAgICAgTW4uZGVmID0gbnVsbDtcbiAgICAgICAgICAgIChudWxsICE9PSBCICYmIHZvaWQgMCAhPT0gQiA/IEIgOiBCID0gW10pLnB1c2goRi5idWlsZChNbikpO1xuICAgICAgICB9XG4gICAgICAgICRuKCk7XG4gICAgICAgIGlmICh0aGlzLndlKHQpICYmIG51bGwgIT0gQiAmJiBCLmxlbmd0aCA+IDEpIHRoaXMuYmUodCwgQik7XG4gICAgICAgIGlmIChudWxsICE9PSBtKSB7XG4gICAgICAgICAgICBVID0gbmV3IEh5ZHJhdGVFbGVtZW50SW5zdHJ1Y3Rpb24odGhpcy5yZXNvbHZlUmVzb3VyY2VzID8gbSA6IG0ubmFtZSwgdm9pZCAwLCBudWxsICE9PSBJICYmIHZvaWQgMCAhPT0gSSA/IEkgOiBoLCBudWxsLCBILCBwKTtcbiAgICAgICAgICAgIGlmIChcImF1LXNsb3RcIiA9PT0gZCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0LmdldEF0dHJpYnV0ZShcIm5hbWVcIikgfHwgXCJkZWZhdWx0XCI7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGUuaChcInRlbXBsYXRlXCIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLnhlKCk7XG4gICAgICAgICAgICAgICAgbGV0IHIgPSB0LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG51bGwgIT09IHIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKDEgPT09IHIubm9kZVR5cGUgJiYgci5oYXNBdHRyaWJ1dGUoXCJhdS1zbG90XCIpKSB0LnJlbW92ZUNoaWxkKHIpOyBlbHNlIHMuY29udGVudC5hcHBlbmRDaGlsZChyKTtcbiAgICAgICAgICAgICAgICAgICAgciA9IHQuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5sZShzLmNvbnRlbnQsIG4pO1xuICAgICAgICAgICAgICAgIFUuYXVTbG90ID0ge1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiBpLFxuICAgICAgICAgICAgICAgICAgICBmYWxsYmFjazogQ3VzdG9tRWxlbWVudERlZmluaXRpb24uY3JlYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFFuKCksXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uczogbi5yb3dzLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmVlZHNDb21waWxlOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdCA9IHRoaXMueWUodCwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG51bGwgIT0gQiB8fCBudWxsICE9IFUgfHwgbnVsbCAhPSBPKSB7XG4gICAgICAgICAgICB4ID0gaC5jb25jYXQobnVsbCAhPT0gVSAmJiB2b2lkIDAgIT09IFUgPyBVIDogaCwgbnVsbCAhPT0gTyAmJiB2b2lkIDAgIT09IE8gPyBPIDogaCwgbnVsbCAhPT0gQiAmJiB2b2lkIDAgIT09IEIgPyBCIDogaCk7XG4gICAgICAgICAgICB0aGlzLmdlKHQpO1xuICAgICAgICB9XG4gICAgICAgIGxldCB6O1xuICAgICAgICBpZiAobnVsbCAhPSBMKSB7XG4gICAgICAgICAgICB5ID0gTC5sZW5ndGggLSAxO1xuICAgICAgICAgICAgayA9IHk7XG4gICAgICAgICAgICBxID0gTFtrXTtcbiAgICAgICAgICAgIGxldCBpO1xuICAgICAgICAgICAgdGhpcy55ZSh0LCBlKTtcbiAgICAgICAgICAgIGlmIChcIlRFTVBMQVRFXCIgPT09IHQubm9kZU5hbWUpIGkgPSB0OyBlbHNlIHtcbiAgICAgICAgICAgICAgICBpID0gZS5oKFwidGVtcGxhdGVcIik7XG4gICAgICAgICAgICAgICAgaS5jb250ZW50LmFwcGVuZENoaWxkKHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcyA9IGk7XG4gICAgICAgICAgICBjb25zdCBuID0gZS54ZShudWxsID09IHggPyBbXSA6IFsgeCBdKTtcbiAgICAgICAgICAgIGxldCByO1xuICAgICAgICAgICAgbGV0IG87XG4gICAgICAgICAgICBsZXQgaDtcbiAgICAgICAgICAgIGxldCBhO1xuICAgICAgICAgICAgbGV0IHU7XG4gICAgICAgICAgICBsZXQgZjtcbiAgICAgICAgICAgIGxldCB2O1xuICAgICAgICAgICAgbGV0IHA7XG4gICAgICAgICAgICBsZXQgZyA9IDAsIHcgPSAwO1xuICAgICAgICAgICAgbGV0IGIgPSB0LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICBpZiAoZmFsc2UgIT09IFcpIHdoaWxlIChudWxsICE9PSBiKSBpZiAoMSA9PT0gYi5ub2RlVHlwZSkge1xuICAgICAgICAgICAgICAgIHIgPSBiO1xuICAgICAgICAgICAgICAgIGIgPSBiLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgICAgIG8gPSByLmdldEF0dHJpYnV0ZShcImF1LXNsb3RcIik7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IG8pIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IG0pIHRocm93IG5ldyBFcnJvcihgQVVSMDcwNjoke2R9WyR7b31dYCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcIlwiID09PSBvKSBvID0gXCJkZWZhdWx0XCI7XG4gICAgICAgICAgICAgICAgICAgIHIucmVtb3ZlQXR0cmlidXRlKFwiYXUtc2xvdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgdC5yZW1vdmVDaGlsZChyKTtcbiAgICAgICAgICAgICAgICAgICAgKG51bGwgIT09IChsID0gKGMgPSBudWxsICE9PSBhICYmIHZvaWQgMCAhPT0gYSA/IGEgOiBhID0ge30pW29dKSAmJiB2b2lkIDAgIT09IGwgPyBsIDogY1tvXSA9IFtdKS5wdXNoKHIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSBiID0gYi5uZXh0U2libGluZztcbiAgICAgICAgICAgIGlmIChudWxsICE9IGEpIHtcbiAgICAgICAgICAgICAgICBoID0ge307XG4gICAgICAgICAgICAgICAgZm9yIChvIGluIGEpIHtcbiAgICAgICAgICAgICAgICAgICAgaSA9IGUuaChcInRlbXBsYXRlXCIpO1xuICAgICAgICAgICAgICAgICAgICB1ID0gYVtvXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChnID0gMCwgdyA9IHUubGVuZ3RoOyB3ID4gZzsgKytnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmID0gdVtnXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChcIlRFTVBMQVRFXCIgPT09IGYubm9kZU5hbWUpIGlmIChmLmF0dHJpYnV0ZXMubGVuZ3RoID4gMCkgaS5jb250ZW50LmFwcGVuZENoaWxkKGYpOyBlbHNlIGkuY29udGVudC5hcHBlbmRDaGlsZChmLmNvbnRlbnQpOyBlbHNlIGkuY29udGVudC5hcHBlbmRDaGlsZChmKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBwID0gZS54ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxlKGkuY29udGVudCwgcCk7XG4gICAgICAgICAgICAgICAgICAgIGhbb10gPSBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5jcmVhdGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogUW4oKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBpLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5zdHJ1Y3Rpb25zOiBwLnJvd3MsXG4gICAgICAgICAgICAgICAgICAgICAgICBuZWVkc0NvbXBpbGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgaXNTdHJpY3RCaW5kaW5nOiBlLnJvb3QuZGVmLmlzU3RyaWN0QmluZGluZ1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgVS5wcm9qZWN0aW9ucyA9IGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gbSAmJiBtLmNvbnRhaW5lcmxlc3MpIHRoaXMueWUodCwgZSk7XG4gICAgICAgICAgICB6ID0gbnVsbCA9PT0gbSB8fCAhbS5jb250YWluZXJsZXNzICYmICFIICYmIGZhbHNlICE9PSBXO1xuICAgICAgICAgICAgaWYgKHopIGlmIChcIlRFTVBMQVRFXCIgPT09IHQubm9kZU5hbWUpIHRoaXMubGUodC5jb250ZW50LCBuKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgYiA9IHQuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgICAgICB3aGlsZSAobnVsbCAhPT0gYikgYiA9IHRoaXMubGUoYiwgbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBxLmRlZiA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgbmFtZTogUW4oKSxcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogcyxcbiAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnM6IG4ucm93cyxcbiAgICAgICAgICAgICAgICBuZWVkc0NvbXBpbGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzU3RyaWN0QmluZGluZzogZS5yb290LmRlZi5pc1N0cmljdEJpbmRpbmdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgd2hpbGUgKGstLSA+IDApIHtcbiAgICAgICAgICAgICAgICBxID0gTFtrXTtcbiAgICAgICAgICAgICAgICBpID0gZS5oKFwidGVtcGxhdGVcIik7XG4gICAgICAgICAgICAgICAgdiA9IGUuaChcImF1LW1cIik7XG4gICAgICAgICAgICAgICAgdi5jbGFzc0xpc3QuYWRkKFwiYXVcIik7XG4gICAgICAgICAgICAgICAgaS5jb250ZW50LmFwcGVuZENoaWxkKHYpO1xuICAgICAgICAgICAgICAgIHEuZGVmID0gQ3VzdG9tRWxlbWVudERlZmluaXRpb24uY3JlYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogUW4oKSxcbiAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IGksXG4gICAgICAgICAgICAgICAgICAgIG5lZWRzQ29tcGlsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGluc3RydWN0aW9uczogWyBbIExbayArIDFdIF0gXSxcbiAgICAgICAgICAgICAgICAgICAgaXNTdHJpY3RCaW5kaW5nOiBlLnJvb3QuZGVmLmlzU3RyaWN0QmluZGluZ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS5yb3dzLnB1c2goWyBxIF0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKG51bGwgIT0geCkgZS5yb3dzLnB1c2goeCk7XG4gICAgICAgICAgICBsZXQgaSA9IHQuZmlyc3RDaGlsZDtcbiAgICAgICAgICAgIGxldCBzO1xuICAgICAgICAgICAgbGV0IG47XG4gICAgICAgICAgICBsZXQgciA9IG51bGw7XG4gICAgICAgICAgICBsZXQgbztcbiAgICAgICAgICAgIGxldCBsO1xuICAgICAgICAgICAgbGV0IGg7XG4gICAgICAgICAgICBsZXQgYztcbiAgICAgICAgICAgIGxldCBmO1xuICAgICAgICAgICAgbGV0IGQgPSAwLCB2ID0gMDtcbiAgICAgICAgICAgIGlmIChmYWxzZSAhPT0gVykgd2hpbGUgKG51bGwgIT09IGkpIGlmICgxID09PSBpLm5vZGVUeXBlKSB7XG4gICAgICAgICAgICAgICAgcyA9IGk7XG4gICAgICAgICAgICAgICAgaSA9IGkubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICAgICAgbiA9IHMuZ2V0QXR0cmlidXRlKFwiYXUtc2xvdFwiKTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gbikge1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gbSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwNzA2OiR7dC5ub2RlTmFtZX1bJHtufV1gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwiXCIgPT09IG4pIG4gPSBcImRlZmF1bHRcIjtcbiAgICAgICAgICAgICAgICAgICAgdC5yZW1vdmVDaGlsZChzKTtcbiAgICAgICAgICAgICAgICAgICAgcy5yZW1vdmVBdHRyaWJ1dGUoXCJhdS1zbG90XCIpO1xuICAgICAgICAgICAgICAgICAgICAobnVsbCAhPT0gKGEgPSAodSA9IG51bGwgIT09IG8gJiYgdm9pZCAwICE9PSBvID8gbyA6IG8gPSB7fSlbbl0pICYmIHZvaWQgMCAhPT0gYSA/IGEgOiB1W25dID0gW10pLnB1c2gocyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGkgPSBpLm5leHRTaWJsaW5nO1xuICAgICAgICAgICAgaWYgKG51bGwgIT0gbykge1xuICAgICAgICAgICAgICAgIHIgPSB7fTtcbiAgICAgICAgICAgICAgICBmb3IgKG4gaW4gbykge1xuICAgICAgICAgICAgICAgICAgICBjID0gZS5oKFwidGVtcGxhdGVcIik7XG4gICAgICAgICAgICAgICAgICAgIGwgPSBvW25dO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGQgPSAwLCB2ID0gbC5sZW5ndGg7IHYgPiBkOyArK2QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGggPSBsW2RdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFwiVEVNUExBVEVcIiA9PT0gaC5ub2RlTmFtZSkgaWYgKGguYXR0cmlidXRlcy5sZW5ndGggPiAwKSBjLmNvbnRlbnQuYXBwZW5kQ2hpbGQoaCk7IGVsc2UgYy5jb250ZW50LmFwcGVuZENoaWxkKGguY29udGVudCk7IGVsc2UgYy5jb250ZW50LmFwcGVuZENoaWxkKGgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGYgPSBlLnhlKCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGUoYy5jb250ZW50LCBmKTtcbiAgICAgICAgICAgICAgICAgICAgcltuXSA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBRbigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6IGMsXG4gICAgICAgICAgICAgICAgICAgICAgICBpbnN0cnVjdGlvbnM6IGYucm93cyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5lZWRzQ29tcGlsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1N0cmljdEJpbmRpbmc6IGUucm9vdC5kZWYuaXNTdHJpY3RCaW5kaW5nXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBVLnByb2plY3Rpb25zID0gcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChudWxsICE9PSBtICYmIG0uY29udGFpbmVybGVzcykgdGhpcy55ZSh0LCBlKTtcbiAgICAgICAgICAgIHogPSBudWxsID09PSBtIHx8ICFtLmNvbnRhaW5lcmxlc3MgJiYgIUggJiYgZmFsc2UgIT09IFc7XG4gICAgICAgICAgICBpZiAoeiAmJiB0LmNoaWxkTm9kZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGkgPSB0LmZpcnN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgd2hpbGUgKG51bGwgIT09IGkpIGkgPSB0aGlzLmxlKGksIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmO1xuICAgIH1cbiAgICBwZSh0LCBlKSB7XG4gICAgICAgIGxldCBpID0gXCJcIjtcbiAgICAgICAgbGV0IHMgPSB0O1xuICAgICAgICB3aGlsZSAobnVsbCAhPT0gcyAmJiAzID09PSBzLm5vZGVUeXBlKSB7XG4gICAgICAgICAgICBpICs9IHMudGV4dENvbnRlbnQ7XG4gICAgICAgICAgICBzID0gcy5uZXh0U2libGluZztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuID0gZS5lcC5wYXJzZShpLCAxKTtcbiAgICAgICAgaWYgKG51bGwgPT09IG4pIHJldHVybiBzO1xuICAgICAgICBjb25zdCByID0gdC5wYXJlbnROb2RlO1xuICAgICAgICByLmluc2VydEJlZm9yZSh0aGlzLmdlKGUuaChcImF1LW1cIikpLCB0KTtcbiAgICAgICAgZS5yb3dzLnB1c2goWyBuZXcgVGV4dEJpbmRpbmdJbnN0cnVjdGlvbihuLCAhIWUuZGVmLmlzU3RyaWN0QmluZGluZykgXSk7XG4gICAgICAgIHQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgICAgICBzID0gdC5uZXh0U2libGluZztcbiAgICAgICAgd2hpbGUgKG51bGwgIT09IHMgJiYgMyA9PT0gcy5ub2RlVHlwZSkge1xuICAgICAgICAgICAgci5yZW1vdmVDaGlsZChzKTtcbiAgICAgICAgICAgIHMgPSB0Lm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0Lm5leHRTaWJsaW5nO1xuICAgIH1cbiAgICBmZSh0LCBlLCBpLCBzKSB7XG4gICAgICAgIGNvbnN0IG4gPSBCaW5kYWJsZXNJbmZvLmZyb20oaSwgdHJ1ZSk7XG4gICAgICAgIGNvbnN0IHIgPSBlLmxlbmd0aDtcbiAgICAgICAgY29uc3QgbyA9IFtdO1xuICAgICAgICBsZXQgbDtcbiAgICAgICAgbGV0IGg7XG4gICAgICAgIGxldCBhID0gMDtcbiAgICAgICAgbGV0IGMgPSAwO1xuICAgICAgICBsZXQgdTtcbiAgICAgICAgbGV0IGY7XG4gICAgICAgIGxldCBkO1xuICAgICAgICBsZXQgbTtcbiAgICAgICAgZm9yIChsZXQgdiA9IDA7IHYgPCByOyArK3YpIHtcbiAgICAgICAgICAgIGMgPSBlLmNoYXJDb2RlQXQodik7XG4gICAgICAgICAgICBpZiAoOTIgPT09IGMpICsrdjsgZWxzZSBpZiAoNTggPT09IGMpIHtcbiAgICAgICAgICAgICAgICBsID0gZS5zbGljZShhLCB2KTtcbiAgICAgICAgICAgICAgICB3aGlsZSAoZS5jaGFyQ29kZUF0KCsrdikgPD0gMzIpIDtcbiAgICAgICAgICAgICAgICBhID0gdjtcbiAgICAgICAgICAgICAgICBmb3IgKDt2IDwgcjsgKyt2KSB7XG4gICAgICAgICAgICAgICAgICAgIGMgPSBlLmNoYXJDb2RlQXQodik7XG4gICAgICAgICAgICAgICAgICAgIGlmICg5MiA9PT0gYykgKyt2OyBlbHNlIGlmICg1OSA9PT0gYykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaCA9IGUuc2xpY2UoYSwgdik7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodm9pZCAwID09PSBoKSBoID0gZS5zbGljZShhKTtcbiAgICAgICAgICAgICAgICBmID0gcy5kZS5wYXJzZShsLCBoKTtcbiAgICAgICAgICAgICAgICBkID0gcy5jZShmKTtcbiAgICAgICAgICAgICAgICBtID0gbi5hdHRyc1tmLnRhcmdldF07XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gbSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwNzA3OiR7aS5uYW1lfS4ke2YudGFyZ2V0fWApO1xuICAgICAgICAgICAgICAgIGlmIChudWxsID09PSBkKSB7XG4gICAgICAgICAgICAgICAgICAgIHUgPSBzLmVwLnBhcnNlKGgsIDEpO1xuICAgICAgICAgICAgICAgICAgICBvLnB1c2gobnVsbCA9PT0gdSA/IG5ldyBTZXRQcm9wZXJ0eUluc3RydWN0aW9uKGgsIG0ucHJvcGVydHkpIDogbmV3IEludGVycG9sYXRpb25JbnN0cnVjdGlvbih1LCBtLnByb3BlcnR5KSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgTW4ubm9kZSA9IHQ7XG4gICAgICAgICAgICAgICAgICAgIE1uLmF0dHIgPSBmO1xuICAgICAgICAgICAgICAgICAgICBNbi5iaW5kYWJsZSA9IG07XG4gICAgICAgICAgICAgICAgICAgIE1uLmRlZiA9IGk7XG4gICAgICAgICAgICAgICAgICAgIG8ucHVzaChkLmJ1aWxkKE1uKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHdoaWxlICh2IDwgciAmJiBlLmNoYXJDb2RlQXQoKyt2KSA8PSAzMikgO1xuICAgICAgICAgICAgICAgIGEgPSB2O1xuICAgICAgICAgICAgICAgIGwgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgaCA9IHZvaWQgMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAkbigpO1xuICAgICAgICByZXR1cm4gbztcbiAgICB9XG4gICAgb2UodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdDtcbiAgICAgICAgY29uc3QgcyA9IFIoaS5xdWVyeVNlbGVjdG9yQWxsKFwidGVtcGxhdGVbYXMtY3VzdG9tLWVsZW1lbnRdXCIpKTtcbiAgICAgICAgY29uc3QgbiA9IHMubGVuZ3RoO1xuICAgICAgICBpZiAoMCA9PT0gbikgcmV0dXJuO1xuICAgICAgICBpZiAobiA9PT0gaS5jaGlsZEVsZW1lbnRDb3VudCkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDcwOFwiKTtcbiAgICAgICAgY29uc3QgciA9IG5ldyBTZXQ7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBzKSB7XG4gICAgICAgICAgICBpZiAodC5wYXJlbnROb2RlICE9PSBpKSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwNzA5XCIpO1xuICAgICAgICAgICAgY29uc3QgcyA9IFduKHQsIHIpO1xuICAgICAgICAgICAgY29uc3QgbiA9IGNsYXNzIExvY2FsVGVtcGxhdGUge307XG4gICAgICAgICAgICBjb25zdCBvID0gdC5jb250ZW50O1xuICAgICAgICAgICAgY29uc3QgbCA9IFIoby5xdWVyeVNlbGVjdG9yQWxsKFwiYmluZGFibGVcIikpO1xuICAgICAgICAgICAgY29uc3QgaCA9IEJ0LmZvcihuKTtcbiAgICAgICAgICAgIGNvbnN0IGEgPSBuZXcgU2V0O1xuICAgICAgICAgICAgY29uc3QgYyA9IG5ldyBTZXQ7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2YgbCkge1xuICAgICAgICAgICAgICAgIGlmICh0LnBhcmVudE5vZGUgIT09IG8pIHRocm93IG5ldyBFcnJvcihcIkFVUjA3MTBcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuZ2V0QXR0cmlidXRlKFwicHJvcGVydHlcIik7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IGUpIHRocm93IG5ldyBFcnJvcihcIkFVUjA3MTFcIik7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHQuZ2V0QXR0cmlidXRlKFwiYXR0cmlidXRlXCIpO1xuICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBpICYmIGMuaGFzKGkpIHx8IGEuaGFzKGUpKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3MTI6JHtlfSske2l9YCk7IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gaSkgYy5hZGQoaSk7XG4gICAgICAgICAgICAgICAgICAgIGEuYWRkKGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBoLmFkZCh7XG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnR5OiBlLFxuICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGU6IG51bGwgIT09IGkgJiYgdm9pZCAwICE9PSBpID8gaSA6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogSG4odClcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gdC5nZXRBdHRyaWJ1dGVOYW1lcygpLmZpbHRlcigodCA9PiAham4uaW5jbHVkZXModCkpKTtcbiAgICAgICAgICAgICAgICBpZiAocy5sZW5ndGggPiAwKSA7XG4gICAgICAgICAgICAgICAgby5yZW1vdmVDaGlsZCh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGUua2Uoc2kuZGVmaW5lKHtcbiAgICAgICAgICAgICAgICBuYW1lOiBzLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0XG4gICAgICAgICAgICB9LCBuKSk7XG4gICAgICAgICAgICBpLnJlbW92ZUNoaWxkKHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHdlKHQpIHtcbiAgICAgICAgcmV0dXJuIFwiSU5QVVRcIiA9PT0gdC5ub2RlTmFtZSAmJiAxID09PSBGblt0LnR5cGVdO1xuICAgIH1cbiAgICBiZSh0LCBlKSB7XG4gICAgICAgIHN3aXRjaCAodC5ub2RlTmFtZSkge1xuICAgICAgICAgIGNhc2UgXCJJTlBVVFwiOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBlO1xuICAgICAgICAgICAgICAgIGxldCBpO1xuICAgICAgICAgICAgICAgIGxldCBzO1xuICAgICAgICAgICAgICAgIGxldCBuID0gMDtcbiAgICAgICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQubGVuZ3RoICYmIG4gPCAzOyBlKyspIHtcbiAgICAgICAgICAgICAgICAgICAgciA9IHRbZV07XG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoci50bykge1xuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJtb2RlbFwiOlxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJ2YWx1ZVwiOlxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJtYXRjaGVyXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpID0gZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG4rKztcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImNoZWNrZWRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHMgPSBlO1xuICAgICAgICAgICAgICAgICAgICAgICAgbisrO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHZvaWQgMCAhPT0gcyAmJiB2b2lkIDAgIT09IGkgJiYgcyA8IGkpIFt0W2ldLCB0W3NdXSA9IFsgdFtzXSwgdFtpXSBdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGdlKHQpIHtcbiAgICAgICAgdC5jbGFzc0xpc3QuYWRkKFwiYXVcIik7XG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICB5ZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0LnBhcmVudE5vZGU7XG4gICAgICAgIGNvbnN0IHMgPSBlLmgoXCJhdS1tXCIpO1xuICAgICAgICB0aGlzLmdlKGkuaW5zZXJ0QmVmb3JlKHMsIHQpKTtcbiAgICAgICAgaS5yZW1vdmVDaGlsZCh0KTtcbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfVxufVxuXG5jbGFzcyBDb21waWxhdGlvbkNvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGksIHMsIG4sIHIpIHtcbiAgICAgICAgdGhpcy5oYXNTbG90ID0gZmFsc2U7XG4gICAgICAgIHRoaXMuQ2UgPSB3dCgpO1xuICAgICAgICBjb25zdCBvID0gbnVsbCAhPT0gcztcbiAgICAgICAgdGhpcy5jID0gZTtcbiAgICAgICAgdGhpcy5yb290ID0gbnVsbCA9PT0gbiA/IHRoaXMgOiBuO1xuICAgICAgICB0aGlzLmRlZiA9IHQ7XG4gICAgICAgIHRoaXMuY2kgPSBpO1xuICAgICAgICB0aGlzLnBhcmVudCA9IHM7XG4gICAgICAgIHRoaXMucmUgPSBvID8gcy5yZSA6IGUuZ2V0KFRuKTtcbiAgICAgICAgdGhpcy5kZSA9IG8gPyBzLmRlIDogZS5nZXQoVXQpO1xuICAgICAgICB0aGlzLmVwID0gbyA/IHMuZXAgOiBlLmdldChfKTtcbiAgICAgICAgdGhpcy5tID0gbyA/IHMubSA6IGUuZ2V0KFp0KTtcbiAgICAgICAgdGhpcy5GdCA9IG8gPyBzLkZ0IDogZS5nZXQoayk7XG4gICAgICAgIHRoaXMucCA9IG8gPyBzLnAgOiBlLmdldChLdCk7XG4gICAgICAgIHRoaXMubG9jYWxFbHMgPSBvID8gcy5sb2NhbEVscyA6IG5ldyBTZXQ7XG4gICAgICAgIHRoaXMucm93cyA9IG51bGwgIT09IHIgJiYgdm9pZCAwICE9PSByID8gciA6IFtdO1xuICAgIH1cbiAgICBrZSh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgKG51bGwgIT09IChlID0gKGkgPSB0aGlzLnJvb3QpLmRlcHMpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiBpLmRlcHMgPSBbXSkucHVzaCh0KTtcbiAgICAgICAgdGhpcy5yb290LmMucmVnaXN0ZXIodCk7XG4gICAgfVxuICAgIGgodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5wLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodCk7XG4gICAgICAgIGlmIChcInRlbXBsYXRlXCIgPT09IHQpIHRoaXMucC5kb2N1bWVudC5hZG9wdE5vZGUoZS5jb250ZW50KTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIGFlKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYy5maW5kKHNpLCB0KTtcbiAgICB9XG4gICAgdWUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jLmZpbmQoTWUsIHQpO1xuICAgIH1cbiAgICB4ZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29tcGlsYXRpb25Db250ZXh0KHRoaXMuZGVmLCB0aGlzLmMsIHRoaXMuY2ksIHRoaXMsIHRoaXMucm9vdCwgdCk7XG4gICAgfVxuICAgIGNlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMucm9vdCAhPT0gdGhpcykgcmV0dXJuIHRoaXMucm9vdC5jZSh0KTtcbiAgICAgICAgY29uc3QgZSA9IHQuY29tbWFuZDtcbiAgICAgICAgaWYgKG51bGwgPT09IGUpIHJldHVybiBudWxsO1xuICAgICAgICBsZXQgaSA9IHRoaXMuQ2VbZV07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGkpIHtcbiAgICAgICAgICAgIGkgPSB0aGlzLmMuY3JlYXRlKG1uLCBlKTtcbiAgICAgICAgICAgIGlmIChudWxsID09PSBpKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3MTM6JHtlfWApO1xuICAgICAgICAgICAgdGhpcy5DZVtlXSA9IGk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBPbih0KSB7XG4gICAgY29uc3QgZSA9IHQubGVuZ3RoO1xuICAgIGxldCBpID0gMDtcbiAgICBsZXQgcyA9IDA7XG4gICAgd2hpbGUgKGUgPiBzKSB7XG4gICAgICAgIGkgPSB0LmNoYXJDb2RlQXQocyk7XG4gICAgICAgIGlmICg5MiA9PT0gaSkgKytzOyBlbHNlIGlmICg1OCA9PT0gaSkgcmV0dXJuIHRydWU7IGVsc2UgaWYgKDM2ID09PSBpICYmIDEyMyA9PT0gdC5jaGFyQ29kZUF0KHMgKyAxKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICArK3M7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gJG4oKSB7XG4gICAgTW4ubm9kZSA9IE1uLmF0dHIgPSBNbi5iaW5kYWJsZSA9IE1uLmRlZiA9IG51bGw7XG59XG5cbmNvbnN0IExuID0ge1xuICAgIHByb2plY3Rpb25zOiBudWxsXG59O1xuXG5jb25zdCBxbiA9IHtcbiAgICBuYW1lOiBcInVubmFtZWRcIlxufTtcblxuY29uc3QgTW4gPSB7XG4gICAgbm9kZTogbnVsbCxcbiAgICBhdHRyOiBudWxsLFxuICAgIGJpbmRhYmxlOiBudWxsLFxuICAgIGRlZjogbnVsbFxufTtcblxuY29uc3QgVW4gPSBPYmplY3QuYXNzaWduKHd0KCksIHtcbiAgICBpZDogdHJ1ZSxcbiAgICBuYW1lOiB0cnVlLFxuICAgIFwiYXUtc2xvdFwiOiB0cnVlLFxuICAgIFwiYXMtZWxlbWVudFwiOiB0cnVlXG59KTtcblxuY29uc3QgRm4gPSB7XG4gICAgY2hlY2tib3g6IDEsXG4gICAgcmFkaW86IDFcbn07XG5cbmNvbnN0IFZuID0gbmV3IFdlYWtNYXA7XG5cbmNsYXNzIEJpbmRhYmxlc0luZm8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5hdHRycyA9IHQ7XG4gICAgICAgIHRoaXMuYmluZGFibGVzID0gZTtcbiAgICAgICAgdGhpcy5wcmltYXJ5ID0gaTtcbiAgICB9XG4gICAgc3RhdGljIGZyb20odCwgZSkge1xuICAgICAgICBsZXQgaSA9IFZuLmdldCh0KTtcbiAgICAgICAgaWYgKG51bGwgPT0gaSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IHQuYmluZGFibGVzO1xuICAgICAgICAgICAgY29uc3QgbiA9IHd0KCk7XG4gICAgICAgICAgICBjb25zdCByID0gZSA/IHZvaWQgMCA9PT0gdC5kZWZhdWx0QmluZGluZ01vZGUgPyBELmRlZmF1bHQgOiB0LmRlZmF1bHRCaW5kaW5nTW9kZSA6IEQuZGVmYXVsdDtcbiAgICAgICAgICAgIGxldCBvO1xuICAgICAgICAgICAgbGV0IGw7XG4gICAgICAgICAgICBsZXQgaCA9IGZhbHNlO1xuICAgICAgICAgICAgbGV0IGE7XG4gICAgICAgICAgICBsZXQgYztcbiAgICAgICAgICAgIGZvciAobCBpbiBzKSB7XG4gICAgICAgICAgICAgICAgbyA9IHNbbF07XG4gICAgICAgICAgICAgICAgYyA9IG8uYXR0cmlidXRlO1xuICAgICAgICAgICAgICAgIGlmICh0cnVlID09PSBvLnByaW1hcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGgpIHRocm93IG5ldyBFcnJvcihgQVVSMDcxNDoke3QubmFtZX1gKTtcbiAgICAgICAgICAgICAgICAgICAgaCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGEgPSBvO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIWggJiYgbnVsbCA9PSBhKSBhID0gbztcbiAgICAgICAgICAgICAgICBuW2NdID0gQmluZGFibGVEZWZpbml0aW9uLmNyZWF0ZShsLCB0LlR5cGUsIG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG51bGwgPT0gbyAmJiBlKSBhID0gbi52YWx1ZSA9IEJpbmRhYmxlRGVmaW5pdGlvbi5jcmVhdGUoXCJ2YWx1ZVwiLCB0LlR5cGUsIHtcbiAgICAgICAgICAgICAgICBtb2RlOiByXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFZuLnNldCh0LCBpID0gbmV3IEJpbmRhYmxlc0luZm8obiwgcywgYSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbn1cblxudmFyIF9uO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbXCJwcm9wZXJ0eVwiXSA9IFwicHJvcGVydHlcIjtcbiAgICB0W1wiYXR0cmlidXRlXCJdID0gXCJhdHRyaWJ1dGVcIjtcbiAgICB0W1wibW9kZVwiXSA9IFwibW9kZVwiO1xufSkoX24gfHwgKF9uID0ge30pKTtcblxuY29uc3Qgam4gPSBPYmplY3QuZnJlZXplKFsgXCJwcm9wZXJ0eVwiLCBcImF0dHJpYnV0ZVwiLCBcIm1vZGVcIiBdKTtcblxuY29uc3QgTm4gPSBcImFzLWN1c3RvbS1lbGVtZW50XCI7XG5cbmZ1bmN0aW9uIFduKHQsIGUpIHtcbiAgICBjb25zdCBpID0gdC5nZXRBdHRyaWJ1dGUoTm4pO1xuICAgIGlmIChudWxsID09PSBpIHx8IFwiXCIgPT09IGkpIHRocm93IG5ldyBFcnJvcihcIkFVUjA3MTVcIik7XG4gICAgaWYgKGUuaGFzKGkpKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA3MTY6JHtpfWApOyBlbHNlIHtcbiAgICAgICAgZS5hZGQoaSk7XG4gICAgICAgIHQucmVtb3ZlQXR0cmlidXRlKE5uKTtcbiAgICB9XG4gICAgcmV0dXJuIGk7XG59XG5cbmZ1bmN0aW9uIEhuKHQpIHtcbiAgICBzd2l0Y2ggKHQuZ2V0QXR0cmlidXRlKFwibW9kZVwiKSkge1xuICAgICAgY2FzZSBcIm9uZVRpbWVcIjpcbiAgICAgICAgcmV0dXJuIEQub25lVGltZTtcblxuICAgICAgY2FzZSBcInRvVmlld1wiOlxuICAgICAgICByZXR1cm4gRC50b1ZpZXc7XG5cbiAgICAgIGNhc2UgXCJmcm9tVmlld1wiOlxuICAgICAgICByZXR1cm4gRC5mcm9tVmlldztcblxuICAgICAgY2FzZSBcInR3b1dheVwiOlxuICAgICAgICByZXR1cm4gRC50d29XYXk7XG5cbiAgICAgIGNhc2UgXCJkZWZhdWx0XCI6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gRC5kZWZhdWx0O1xuICAgIH1cbn1cblxuY29uc3Qgem4gPSBsLmNyZWF0ZUludGVyZmFjZShcIklUZW1wbGF0ZUNvbXBpbGVySG9va3NcIik7XG5cbmNvbnN0IEduID0gbmV3IFdlYWtNYXA7XG5cbmNvbnN0IFhuID0gbXQoXCJjb21waWxlci1ob29rc1wiKTtcblxuY29uc3QgS24gPSBPYmplY3QuZnJlZXplKHtcbiAgICBuYW1lOiBYbixcbiAgICBkZWZpbmUodCkge1xuICAgICAgICBsZXQgZSA9IEduLmdldCh0KTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkge1xuICAgICAgICAgICAgR24uc2V0KHQsIGUgPSBuZXcgVGVtcGxhdGVDb21waWxlckhvb2tzRGVmaW5pdGlvbih0KSk7XG4gICAgICAgICAgICBjdChYbiwgZSwgdCk7XG4gICAgICAgICAgICB2dCh0LCBYbik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxufSk7XG5cbmNsYXNzIFRlbXBsYXRlQ29tcGlsZXJIb29rc0RlZmluaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5UeXBlID0gdDtcbiAgICB9XG4gICAgZ2V0IG5hbWUoKSB7XG4gICAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgICByZWdpc3Rlcih0KSB7XG4gICAgICAgIHQucmVnaXN0ZXIoYy5zaW5nbGV0b24oem4sIHRoaXMuVHlwZSkpO1xuICAgIH1cbn1cblxuY29uc3QgWW4gPSB0ID0+IHtcbiAgICByZXR1cm4gdm9pZCAwID09PSB0ID8gZSA6IGUodCk7XG4gICAgZnVuY3Rpb24gZSh0KSB7XG4gICAgICAgIHJldHVybiBLbi5kZWZpbmUodCk7XG4gICAgfVxufTtcblxuY29uc3QgUW4gPSBzaS5nZW5lcmF0ZU5hbWU7XG5cbmNsYXNzIEJpbmRpbmdNb2RlQmVoYXZpb3Ige1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5tb2RlID0gdDtcbiAgICAgICAgdGhpcy5BZSA9IG5ldyBNYXA7XG4gICAgfVxuICAgIGJpbmQodCwgZSwgaSkge1xuICAgICAgICB0aGlzLkFlLnNldChpLCBpLm1vZGUpO1xuICAgICAgICBpLm1vZGUgPSB0aGlzLm1vZGU7XG4gICAgfVxuICAgIHVuYmluZCh0LCBlLCBpKSB7XG4gICAgICAgIGkubW9kZSA9IHRoaXMuQWUuZ2V0KGkpO1xuICAgICAgICB0aGlzLkFlLmRlbGV0ZShpKTtcbiAgICB9XG59XG5cbmNsYXNzIE9uZVRpbWVCaW5kaW5nQmVoYXZpb3IgZXh0ZW5kcyBCaW5kaW5nTW9kZUJlaGF2aW9yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoRC5vbmVUaW1lKTtcbiAgICB9XG59XG5cbmNsYXNzIFRvVmlld0JpbmRpbmdCZWhhdmlvciBleHRlbmRzIEJpbmRpbmdNb2RlQmVoYXZpb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihELnRvVmlldyk7XG4gICAgfVxufVxuXG5jbGFzcyBGcm9tVmlld0JpbmRpbmdCZWhhdmlvciBleHRlbmRzIEJpbmRpbmdNb2RlQmVoYXZpb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihELmZyb21WaWV3KTtcbiAgICB9XG59XG5cbmNsYXNzIFR3b1dheUJpbmRpbmdCZWhhdmlvciBleHRlbmRzIEJpbmRpbmdNb2RlQmVoYXZpb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcihELnR3b1dheSk7XG4gICAgfVxufVxuXG5HKFwib25lVGltZVwiKShPbmVUaW1lQmluZGluZ0JlaGF2aW9yKTtcblxuRyhcInRvVmlld1wiKShUb1ZpZXdCaW5kaW5nQmVoYXZpb3IpO1xuXG5HKFwiZnJvbVZpZXdcIikoRnJvbVZpZXdCaW5kaW5nQmVoYXZpb3IpO1xuXG5HKFwidHdvV2F5XCIpKFR3b1dheUJpbmRpbmdCZWhhdmlvcik7XG5cbmNvbnN0IFpuID0gMjAwO1xuXG5jbGFzcyBEZWJvdW5jZUJpbmRpbmdCZWhhdmlvciBleHRlbmRzIFgge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgZSk7XG4gICAgICAgIHRoaXMub3B0cyA9IHtcbiAgICAgICAgICAgIGRlbGF5OiBablxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZpcnN0QXJnID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXNrUXVldWUgPSB0LmxvY2F0b3IuZ2V0KHUpLnRhc2tRdWV1ZTtcbiAgICAgICAgaWYgKGUuYXJncy5sZW5ndGggPiAwKSB0aGlzLmZpcnN0QXJnID0gZS5hcmdzWzBdO1xuICAgIH1cbiAgICBjYWxsU291cmNlKHQpIHtcbiAgICAgICAgdGhpcy5xdWV1ZVRhc2soKCgpID0+IHRoaXMuYmluZGluZy5jYWxsU291cmNlKHQpKSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKHQsIGUsIGkpIHtcbiAgICAgICAgaWYgKG51bGwgIT09IHRoaXMudGFzaykge1xuICAgICAgICAgICAgdGhpcy50YXNrLmNhbmNlbCgpO1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJpbmRpbmcuaGFuZGxlQ2hhbmdlKHQsIGUsIGkpO1xuICAgIH1cbiAgICB1cGRhdGVTb3VyY2UodCwgZSkge1xuICAgICAgICB0aGlzLnF1ZXVlVGFzaygoKCkgPT4gdGhpcy5iaW5kaW5nLnVwZGF0ZVNvdXJjZSh0LCBlKSkpO1xuICAgIH1cbiAgICBxdWV1ZVRhc2sodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy50YXNrO1xuICAgICAgICB0aGlzLnRhc2sgPSB0aGlzLnRhc2tRdWV1ZS5xdWV1ZVRhc2soKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgICAgICByZXR1cm4gdCgpO1xuICAgICAgICB9KSwgdGhpcy5vcHRzKTtcbiAgICAgICAgbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNhbmNlbCgpO1xuICAgIH1cbiAgICAkYmluZCh0LCBlKSB7XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLmZpcnN0QXJnKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gTnVtYmVyKHRoaXMuZmlyc3RBcmcuZXZhbHVhdGUodCwgZSwgdGhpcy5sb2NhdG9yLCBudWxsKSk7XG4gICAgICAgICAgICB0aGlzLm9wdHMuZGVsYXkgPSBpc05hTihpKSA/IFpuIDogaTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJpbmRpbmcuJGJpbmQodCwgZSk7XG4gICAgfVxuICAgICR1bmJpbmQodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgbnVsbCA9PT0gKGUgPSB0aGlzLnRhc2spIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuY2FuY2VsKCk7XG4gICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgIHRoaXMuYmluZGluZy4kdW5iaW5kKHQpO1xuICAgIH1cbn1cblxuRyhcImRlYm91bmNlXCIpKERlYm91bmNlQmluZGluZ0JlaGF2aW9yKTtcblxuY2xhc3MgU2lnbmFsQmluZGluZ0JlaGF2aW9yIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuWnQgPSBuZXcgTWFwO1xuICAgICAgICB0aGlzLlNlID0gdDtcbiAgICB9XG4gICAgYmluZCh0LCBlLCBpLCAuLi5zKSB7XG4gICAgICAgIGlmICghKFwiaGFuZGxlQ2hhbmdlXCIgaW4gaSkpIHRocm93IG5ldyBFcnJvcihcIkFVUjA4MTdcIik7XG4gICAgICAgIGlmICgwID09PSBzLmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDgxOFwiKTtcbiAgICAgICAgdGhpcy5adC5zZXQoaSwgcyk7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBmb3IgKG4gb2YgcykgdGhpcy5TZS5hZGRTaWduYWxMaXN0ZW5lcihuLCBpKTtcbiAgICB9XG4gICAgdW5iaW5kKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuWnQuZ2V0KGkpO1xuICAgICAgICB0aGlzLlp0LmRlbGV0ZShpKTtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGZvciAobiBvZiBzKSB0aGlzLlNlLnJlbW92ZVNpZ25hbExpc3RlbmVyKG4sIGkpO1xuICAgIH1cbn1cblxuU2lnbmFsQmluZGluZ0JlaGF2aW9yLmluamVjdCA9IFsgSyBdO1xuXG5HKFwic2lnbmFsXCIpKFNpZ25hbEJpbmRpbmdCZWhhdmlvcik7XG5cbmNvbnN0IEpuID0gMjAwO1xuXG5jbGFzcyBUaHJvdHRsZUJpbmRpbmdCZWhhdmlvciBleHRlbmRzIFgge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgZSk7XG4gICAgICAgIHRoaXMub3B0cyA9IHtcbiAgICAgICAgICAgIGRlbGF5OiBKblxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmZpcnN0QXJnID0gbnVsbDtcbiAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy5sYXN0Q2FsbCA9IDA7XG4gICAgICAgIHRoaXMuZGVsYXkgPSAwO1xuICAgICAgICB0aGlzLnAgPSB0LmxvY2F0b3IuZ2V0KHUpO1xuICAgICAgICB0aGlzLlJlID0gdGhpcy5wLnRhc2tRdWV1ZTtcbiAgICAgICAgaWYgKGUuYXJncy5sZW5ndGggPiAwKSB0aGlzLmZpcnN0QXJnID0gZS5hcmdzWzBdO1xuICAgIH1cbiAgICBjYWxsU291cmNlKHQpIHtcbiAgICAgICAgdGhpcy5FZSgoKCkgPT4gdGhpcy5iaW5kaW5nLmNhbGxTb3VyY2UodCkpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgaSkge1xuICAgICAgICBpZiAobnVsbCAhPT0gdGhpcy50YXNrKSB7XG4gICAgICAgICAgICB0aGlzLnRhc2suY2FuY2VsKCk7XG4gICAgICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5sYXN0Q2FsbCA9IHRoaXMucC5wZXJmb3JtYW5jZU5vdygpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYmluZGluZy5oYW5kbGVDaGFuZ2UodCwgZSwgaSk7XG4gICAgfVxuICAgIHVwZGF0ZVNvdXJjZSh0LCBlKSB7XG4gICAgICAgIHRoaXMuRWUoKCgpID0+IHRoaXMuYmluZGluZy51cGRhdGVTb3VyY2UodCwgZSkpKTtcbiAgICB9XG4gICAgRWUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5vcHRzO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5wO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5sYXN0Q2FsbCArIGUuZGVsYXkgLSBpLnBlcmZvcm1hbmNlTm93KCk7XG4gICAgICAgIGlmIChzID4gMCkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMudGFzaztcbiAgICAgICAgICAgIGUuZGVsYXkgPSBzO1xuICAgICAgICAgICAgdGhpcy50YXNrID0gdGhpcy5SZS5xdWV1ZVRhc2soKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmxhc3RDYWxsID0gaS5wZXJmb3JtYW5jZU5vdygpO1xuICAgICAgICAgICAgICAgIHRoaXMudGFzayA9IG51bGw7XG4gICAgICAgICAgICAgICAgZS5kZWxheSA9IHRoaXMuZGVsYXk7XG4gICAgICAgICAgICAgICAgdCgpO1xuICAgICAgICAgICAgfSksIGUpO1xuICAgICAgICAgICAgbnVsbCA9PT0gbiB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmNhbmNlbCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5sYXN0Q2FsbCA9IGkucGVyZm9ybWFuY2VOb3coKTtcbiAgICAgICAgICAgIHQoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAkYmluZCh0LCBlKSB7XG4gICAgICAgIGlmIChudWxsICE9PSB0aGlzLmZpcnN0QXJnKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gTnVtYmVyKHRoaXMuZmlyc3RBcmcuZXZhbHVhdGUodCwgZSwgdGhpcy5sb2NhdG9yLCBudWxsKSk7XG4gICAgICAgICAgICB0aGlzLm9wdHMuZGVsYXkgPSB0aGlzLmRlbGF5ID0gaXNOYU4oaSkgPyBKbiA6IGk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5iaW5kaW5nLiRiaW5kKHQsIGUpO1xuICAgIH1cbiAgICAkdW5iaW5kKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIG51bGwgPT09IChlID0gdGhpcy50YXNrKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNhbmNlbCgpO1xuICAgICAgICB0aGlzLnRhc2sgPSBudWxsO1xuICAgICAgICBzdXBlci4kdW5iaW5kKHQpO1xuICAgIH1cbn1cblxuRyhcInRocm90dGxlXCIpKFRocm90dGxlQmluZGluZ0JlaGF2aW9yKTtcblxuY2xhc3MgRGF0YUF0dHJpYnV0ZUFjY2Vzc29yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMiB8IDQ7XG4gICAgfVxuICAgIGdldFZhbHVlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHQuZ2V0QXR0cmlidXRlKGUpO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh0LCBlLCBpLCBzKSB7XG4gICAgICAgIGlmICh2b2lkIDAgPT0gdCkgaS5yZW1vdmVBdHRyaWJ1dGUocyk7IGVsc2UgaS5zZXRBdHRyaWJ1dGUocywgdCk7XG4gICAgfVxufVxuXG5jb25zdCB0ciA9IG5ldyBEYXRhQXR0cmlidXRlQWNjZXNzb3I7XG5cbmNsYXNzIEF0dHJCaW5kaW5nQmVoYXZpb3Ige1xuICAgIGJpbmQodCwgZSwgaSkge1xuICAgICAgICBpLnRhcmdldE9ic2VydmVyID0gdHI7XG4gICAgfVxuICAgIHVuYmluZCh0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG59XG5cbkcoXCJhdHRyXCIpKEF0dHJCaW5kaW5nQmVoYXZpb3IpO1xuXG5mdW5jdGlvbiBlcih0KSB7XG4gICAgY29uc3QgZSA9IHQuY29tcG9zZWRQYXRoKClbMF07XG4gICAgaWYgKHRoaXMudGFyZ2V0ICE9PSBlKSByZXR1cm47XG4gICAgcmV0dXJuIHRoaXMuc2VsZkV2ZW50Q2FsbFNvdXJjZSh0KTtcbn1cblxuY2xhc3MgU2VsZkJpbmRpbmdCZWhhdmlvciB7XG4gICAgYmluZCh0LCBlLCBpKSB7XG4gICAgICAgIGlmICghaS5jYWxsU291cmNlIHx8ICFpLnRhcmdldEV2ZW50KSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwODAxXCIpO1xuICAgICAgICBpLnNlbGZFdmVudENhbGxTb3VyY2UgPSBpLmNhbGxTb3VyY2U7XG4gICAgICAgIGkuY2FsbFNvdXJjZSA9IGVyO1xuICAgIH1cbiAgICB1bmJpbmQodCwgZSwgaSkge1xuICAgICAgICBpLmNhbGxTb3VyY2UgPSBpLnNlbGZFdmVudENhbGxTb3VyY2U7XG4gICAgICAgIGkuc2VsZkV2ZW50Q2FsbFNvdXJjZSA9IG51bGw7XG4gICAgfVxufVxuXG5HKFwic2VsZlwiKShTZWxmQmluZGluZ0JlaGF2aW9yKTtcblxuY29uc3QgaXIgPSB3dCgpO1xuXG5jbGFzcyBBdHRyaWJ1dGVOU0FjY2Vzc29yIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMubnMgPSB0O1xuICAgICAgICB0aGlzLnR5cGUgPSAyIHwgNDtcbiAgICB9XG4gICAgc3RhdGljIGZvck5zKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIHJldHVybiBudWxsICE9PSAoZSA9IGlyW3RdKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogaXJbdF0gPSBuZXcgQXR0cmlidXRlTlNBY2Nlc3Nvcih0KTtcbiAgICB9XG4gICAgZ2V0VmFsdWUodCwgZSkge1xuICAgICAgICByZXR1cm4gdC5nZXRBdHRyaWJ1dGVOUyh0aGlzLm5zLCBlKTtcbiAgICB9XG4gICAgc2V0VmFsdWUodCwgZSwgaSwgcykge1xuICAgICAgICBpZiAodm9pZCAwID09IHQpIGkucmVtb3ZlQXR0cmlidXRlTlModGhpcy5ucywgcyk7IGVsc2UgaS5zZXRBdHRyaWJ1dGVOUyh0aGlzLm5zLCBzLCB0KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHNyKHQsIGUpIHtcbiAgICByZXR1cm4gdCA9PT0gZTtcbn1cblxuY2xhc3MgQ2hlY2tlZE9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlciA9IGk7XG4gICAgICAgIHRoaXMudHlwZSA9IDIgfCAxIHwgNDtcbiAgICAgICAgdGhpcy52ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm92ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLkJlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLkllID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmYgPSAwO1xuICAgICAgICB0aGlzLm8gPSB0O1xuICAgICAgICB0aGlzLm9MID0gcztcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnY7XG4gICAgfVxuICAgIHNldFZhbHVlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudjtcbiAgICAgICAgaWYgKHQgPT09IGkpIHJldHVybjtcbiAgICAgICAgdGhpcy52ID0gdDtcbiAgICAgICAgdGhpcy5vdiA9IGk7XG4gICAgICAgIHRoaXMuZiA9IGU7XG4gICAgICAgIHRoaXMuVGUoKTtcbiAgICAgICAgdGhpcy5EZSgpO1xuICAgICAgICB0aGlzLnF1ZXVlLmFkZCh0aGlzKTtcbiAgICB9XG4gICAgaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSh0LCBlKSB7XG4gICAgICAgIHRoaXMuRGUoKTtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5EZSgpO1xuICAgIH1cbiAgICBEZSgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMudjtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubztcbiAgICAgICAgY29uc3QgaSA9IGJ0LmNhbGwoZSwgXCJtb2RlbFwiKSA/IGUubW9kZWwgOiBlLnZhbHVlO1xuICAgICAgICBjb25zdCBzID0gXCJyYWRpb1wiID09PSBlLnR5cGU7XG4gICAgICAgIGNvbnN0IG4gPSB2b2lkIDAgIT09IGUubWF0Y2hlciA/IGUubWF0Y2hlciA6IHNyO1xuICAgICAgICBpZiAocykgZS5jaGVja2VkID0gISFuKHQsIGkpOyBlbHNlIGlmICh0cnVlID09PSB0KSBlLmNoZWNrZWQgPSB0cnVlOyBlbHNlIHtcbiAgICAgICAgICAgIGxldCBzID0gZmFsc2U7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEFycmF5KSBzID0gLTEgIT09IHQuZmluZEluZGV4KCh0ID0+ICEhbih0LCBpKSkpOyBlbHNlIGlmICh0IGluc3RhbmNlb2YgU2V0KSB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIGlmIChuKGUsIGkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBNYXApIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGVbMF07XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IGVbMV07XG4gICAgICAgICAgICAgICAgaWYgKG4odCwgaSkgJiYgdHJ1ZSA9PT0gcikge1xuICAgICAgICAgICAgICAgICAgICBzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZS5jaGVja2VkID0gcztcbiAgICAgICAgfVxuICAgIH1cbiAgICBoYW5kbGVFdmVudCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzLm92ID0gdGhpcy52O1xuICAgICAgICBjb25zdCBlID0gdGhpcy5vO1xuICAgICAgICBjb25zdCBpID0gYnQuY2FsbChlLCBcIm1vZGVsXCIpID8gZS5tb2RlbCA6IGUudmFsdWU7XG4gICAgICAgIGNvbnN0IHMgPSBlLmNoZWNrZWQ7XG4gICAgICAgIGNvbnN0IG4gPSB2b2lkIDAgIT09IGUubWF0Y2hlciA/IGUubWF0Y2hlciA6IHNyO1xuICAgICAgICBpZiAoXCJjaGVja2JveFwiID09PSBlLnR5cGUpIHtcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdC5maW5kSW5kZXgoKHQgPT4gISFuKHQsIGkpKSk7XG4gICAgICAgICAgICAgICAgaWYgKHMgJiYgLTEgPT09IGUpIHQucHVzaChpKTsgZWxzZSBpZiAoIXMgJiYgLTEgIT09IGUpIHQuc3BsaWNlKGUsIDEpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodCBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB7fTtcbiAgICAgICAgICAgICAgICBsZXQgciA9IGU7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQpIGlmICh0cnVlID09PSBuKGUsIGkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHIgPSBlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHMgJiYgciA9PT0gZSkgdC5hZGQoaSk7IGVsc2UgaWYgKCFzICYmIHIgIT09IGUpIHQuZGVsZXRlKHIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodCBpbnN0YW5jZW9mIE1hcCkge1xuICAgICAgICAgICAgICAgIGxldCBlO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiB0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBzWzBdO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHJ1ZSA9PT0gbih0LCBpKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZSA9IHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0LnNldChlLCBzKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ID0gcztcbiAgICAgICAgfSBlbHNlIGlmIChzKSB0ID0gaTsgZWxzZSByZXR1cm47XG4gICAgICAgIHRoaXMudiA9IHQ7XG4gICAgICAgIHRoaXMucXVldWUuYWRkKHRoaXMpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVyLnN1YnNjcmliZSh0aGlzLm8sIHRoaXMpO1xuICAgICAgICB0aGlzLlRlKCk7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIHZhciB0LCBlO1xuICAgICAgICB0aGlzLmhhbmRsZXIuZGlzcG9zZSgpO1xuICAgICAgICBudWxsID09PSAodCA9IHRoaXMuQmUpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQudW5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgIHRoaXMuQmUgPSB2b2lkIDA7XG4gICAgICAgIG51bGwgPT09IChlID0gdGhpcy5JZSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS51bnN1YnNjcmliZSh0aGlzKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicy5hZGQodCkgJiYgMSA9PT0gdGhpcy5zdWJzLmNvdW50KSB0aGlzLnN0YXJ0KCk7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicy5yZW1vdmUodCkgJiYgMCA9PT0gdGhpcy5zdWJzLmNvdW50KSB0aGlzLnN0b3AoKTtcbiAgICB9XG4gICAgZmx1c2goKSB7XG4gICAgICAgIG5yID0gdGhpcy5vdjtcbiAgICAgICAgdGhpcy5vdiA9IHRoaXMudjtcbiAgICAgICAgdGhpcy5zdWJzLm5vdGlmeSh0aGlzLnYsIG5yLCB0aGlzLmYpO1xuICAgIH1cbiAgICBUZSgpIHtcbiAgICAgICAgdmFyIHQsIGUsIGksIHMsIG4sIHIsIG87XG4gICAgICAgIGNvbnN0IGwgPSB0aGlzLm87XG4gICAgICAgIG51bGwgPT09IChuID0gbnVsbCAhPT0gKHQgPSB0aGlzLkllKSAmJiB2b2lkIDAgIT09IHQgPyB0IDogdGhpcy5JZSA9IG51bGwgIT09IChpID0gbnVsbCA9PT0gKGUgPSBsLiRvYnNlcnZlcnMpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUubW9kZWwpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiBudWxsID09PSAocyA9IGwuJG9ic2VydmVycykgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy52YWx1ZSkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgIG51bGwgPT09IChyID0gdGhpcy5CZSkgfHwgdm9pZCAwID09PSByID8gdm9pZCAwIDogci51bnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgdGhpcy5CZSA9IHZvaWQgMDtcbiAgICAgICAgaWYgKFwiY2hlY2tib3hcIiA9PT0gbC50eXBlKSBudWxsID09PSAobyA9IHRoaXMuQmUgPSBncih0aGlzLnYsIHRoaXMub0wpKSB8fCB2b2lkIDAgPT09IG8gPyB2b2lkIDAgOiBvLnN1YnNjcmliZSh0aGlzKTtcbiAgICB9XG59XG5cblAoQ2hlY2tlZE9ic2VydmVyKTtcblxuTyhDaGVja2VkT2JzZXJ2ZXIpO1xuXG5sZXQgbnI7XG5cbmNvbnN0IHJyID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuY29uc3Qgb3IgPSB7XG4gICAgY2hpbGRMaXN0OiB0cnVlLFxuICAgIHN1YnRyZWU6IHRydWUsXG4gICAgY2hhcmFjdGVyRGF0YTogdHJ1ZVxufTtcblxuZnVuY3Rpb24gbHIodCwgZSkge1xuICAgIHJldHVybiB0ID09PSBlO1xufVxuXG5jbGFzcyBTZWxlY3RWYWx1ZU9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDIgfCAxIHwgNDtcbiAgICAgICAgdGhpcy52ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm92ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLkggPSBmYWxzZTtcbiAgICAgICAgdGhpcy5QZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5PZSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5pTyA9IGZhbHNlO1xuICAgICAgICB0aGlzLm8gPSB0O1xuICAgICAgICB0aGlzLm9MID0gcztcbiAgICAgICAgdGhpcy5oYW5kbGVyID0gaTtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlPID8gdGhpcy52IDogdGhpcy5vLm11bHRpcGxlID8gaHIodGhpcy5vLm9wdGlvbnMpIDogdGhpcy5vLnZhbHVlO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh0LCBlKSB7XG4gICAgICAgIHRoaXMub3YgPSB0aGlzLnY7XG4gICAgICAgIHRoaXMudiA9IHQ7XG4gICAgICAgIHRoaXMuSCA9IHQgIT09IHRoaXMub3Y7XG4gICAgICAgIHRoaXMuJGUodCBpbnN0YW5jZW9mIEFycmF5ID8gdCA6IG51bGwpO1xuICAgICAgICBpZiAoMCA9PT0gKDI1NiAmIGUpKSB0aGlzLksoKTtcbiAgICB9XG4gICAgSygpIHtcbiAgICAgICAgaWYgKHRoaXMuSCkge1xuICAgICAgICAgICAgdGhpcy5IID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnN5bmNPcHRpb25zKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5zeW5jT3B0aW9ucygpO1xuICAgIH1cbiAgICBzeW5jT3B0aW9ucygpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnY7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLm87XG4gICAgICAgIGNvbnN0IHMgPSBBcnJheS5pc0FycmF5KGUpO1xuICAgICAgICBjb25zdCBuID0gbnVsbCAhPT0gKHQgPSBpLm1hdGNoZXIpICYmIHZvaWQgMCAhPT0gdCA/IHQgOiBscjtcbiAgICAgICAgY29uc3QgciA9IGkub3B0aW9ucztcbiAgICAgICAgbGV0IG8gPSByLmxlbmd0aDtcbiAgICAgICAgd2hpbGUgKG8tLSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSByW29dO1xuICAgICAgICAgICAgY29uc3QgaSA9IHJyLmNhbGwodCwgXCJtb2RlbFwiKSA/IHQubW9kZWwgOiB0LnZhbHVlO1xuICAgICAgICAgICAgaWYgKHMpIHtcbiAgICAgICAgICAgICAgICB0LnNlbGVjdGVkID0gLTEgIT09IGUuZmluZEluZGV4KCh0ID0+ICEhbihpLCB0KSkpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdC5zZWxlY3RlZCA9ICEhbihpLCBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzeW5jVmFsdWUoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLm87XG4gICAgICAgIGNvbnN0IGUgPSB0Lm9wdGlvbnM7XG4gICAgICAgIGNvbnN0IGkgPSBlLmxlbmd0aDtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMudjtcbiAgICAgICAgbGV0IG4gPSAwO1xuICAgICAgICBpZiAodC5tdWx0aXBsZSkge1xuICAgICAgICAgICAgaWYgKCEocyBpbnN0YW5jZW9mIEFycmF5KSkgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgICAgIGNvbnN0IG8gPSB0Lm1hdGNoZXIgfHwgbHI7XG4gICAgICAgICAgICBjb25zdCBsID0gW107XG4gICAgICAgICAgICB3aGlsZSAobiA8IGkpIHtcbiAgICAgICAgICAgICAgICByID0gZVtuXTtcbiAgICAgICAgICAgICAgICBpZiAoci5zZWxlY3RlZCkgbC5wdXNoKHJyLmNhbGwociwgXCJtb2RlbFwiKSA/IHIubW9kZWwgOiByLnZhbHVlKTtcbiAgICAgICAgICAgICAgICArK247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBsZXQgaDtcbiAgICAgICAgICAgIG4gPSAwO1xuICAgICAgICAgICAgd2hpbGUgKG4gPCBzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGggPSBzW25dO1xuICAgICAgICAgICAgICAgIGlmICgtMSA9PT0gbC5maW5kSW5kZXgoKHQgPT4gISFvKGgsIHQpKSkpIHMuc3BsaWNlKG4sIDEpOyBlbHNlICsrbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG4gPSAwO1xuICAgICAgICAgICAgd2hpbGUgKG4gPCBsLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGggPSBsW25dO1xuICAgICAgICAgICAgICAgIGlmICgtMSA9PT0gcy5maW5kSW5kZXgoKHQgPT4gISFvKGgsIHQpKSkpIHMucHVzaChoKTtcbiAgICAgICAgICAgICAgICArK247XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IHIgPSBudWxsO1xuICAgICAgICBsZXQgbztcbiAgICAgICAgd2hpbGUgKG4gPCBpKSB7XG4gICAgICAgICAgICBvID0gZVtuXTtcbiAgICAgICAgICAgIGlmIChvLnNlbGVjdGVkKSB7XG4gICAgICAgICAgICAgICAgciA9IHJyLmNhbGwobywgXCJtb2RlbFwiKSA/IG8ubW9kZWwgOiBvLnZhbHVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKytuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3YgPSB0aGlzLnY7XG4gICAgICAgIHRoaXMudiA9IHI7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBMZSgpIHtcbiAgICAgICAgKHRoaXMuT2UgPSBuZXcgdGhpcy5vLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcuTXV0YXRpb25PYnNlcnZlcih0aGlzLnFlLmJpbmQodGhpcykpKS5vYnNlcnZlKHRoaXMubywgb3IpO1xuICAgICAgICB0aGlzLiRlKHRoaXMudiBpbnN0YW5jZW9mIEFycmF5ID8gdGhpcy52IDogbnVsbCk7XG4gICAgICAgIHRoaXMuaU8gPSB0cnVlO1xuICAgIH1cbiAgICBNZSgpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIHRoaXMuT2UuZGlzY29ubmVjdCgpO1xuICAgICAgICBudWxsID09PSAodCA9IHRoaXMuUGUpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQudW5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgIHRoaXMuT2UgPSB0aGlzLlBlID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmlPID0gZmFsc2U7XG4gICAgfVxuICAgICRlKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIG51bGwgPT09IChlID0gdGhpcy5QZSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS51bnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgdGhpcy5QZSA9IHZvaWQgMDtcbiAgICAgICAgaWYgKG51bGwgIT0gdCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLm8ubXVsdGlwbGUpIHRocm93IG5ldyBFcnJvcihcIkFVUjA2NTRcIik7XG4gICAgICAgICAgICAodGhpcy5QZSA9IHRoaXMub0wuZ2V0QXJyYXlPYnNlcnZlcih0KSkuc3Vic2NyaWJlKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUV2ZW50KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5zeW5jVmFsdWUoKTtcbiAgICAgICAgaWYgKHQpIHRoaXMucXVldWUuYWRkKHRoaXMpO1xuICAgIH1cbiAgICBxZSh0KSB7XG4gICAgICAgIHRoaXMuc3luY09wdGlvbnMoKTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc3luY1ZhbHVlKCk7XG4gICAgICAgIGlmIChlKSB0aGlzLnF1ZXVlLmFkZCh0aGlzKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicy5hZGQodCkgJiYgMSA9PT0gdGhpcy5zdWJzLmNvdW50KSB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZXIuc3Vic2NyaWJlKHRoaXMubywgdGhpcyk7XG4gICAgICAgICAgICB0aGlzLkxlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5zdWJzY3JpYmUodCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzLnJlbW92ZSh0KSAmJiAwID09PSB0aGlzLnN1YnMuY291bnQpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlci5kaXNwb3NlKCk7XG4gICAgICAgICAgICB0aGlzLk1lKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZmx1c2goKSB7XG4gICAgICAgIGFyID0gdGhpcy5vdjtcbiAgICAgICAgdGhpcy5vdiA9IHRoaXMudjtcbiAgICAgICAgdGhpcy5zdWJzLm5vdGlmeSh0aGlzLnYsIGFyLCAwKTtcbiAgICB9XG59XG5cblAoU2VsZWN0VmFsdWVPYnNlcnZlcik7XG5cbk8oU2VsZWN0VmFsdWVPYnNlcnZlcik7XG5cbmZ1bmN0aW9uIGhyKHQpIHtcbiAgICBjb25zdCBlID0gW107XG4gICAgaWYgKDAgPT09IHQubGVuZ3RoKSByZXR1cm4gZTtcbiAgICBjb25zdCBpID0gdC5sZW5ndGg7XG4gICAgbGV0IHMgPSAwO1xuICAgIGxldCBuO1xuICAgIHdoaWxlIChpID4gcykge1xuICAgICAgICBuID0gdFtzXTtcbiAgICAgICAgaWYgKG4uc2VsZWN0ZWQpIGVbZS5sZW5ndGhdID0gcnIuY2FsbChuLCBcIm1vZGVsXCIpID8gbi5tb2RlbCA6IG4udmFsdWU7XG4gICAgICAgICsrcztcbiAgICB9XG4gICAgcmV0dXJuIGU7XG59XG5cbmxldCBhcjtcblxuY29uc3QgY3IgPSBcIi0tXCI7XG5cbmNsYXNzIFN0eWxlQXR0cmlidXRlQWNjZXNzb3Ige1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5vYmogPSB0O1xuICAgICAgICB0aGlzLnR5cGUgPSAyIHwgNDtcbiAgICAgICAgdGhpcy52YWx1ZSA9IFwiXCI7XG4gICAgICAgIHRoaXMub3YgPSBcIlwiO1xuICAgICAgICB0aGlzLnN0eWxlcyA9IHt9O1xuICAgICAgICB0aGlzLnZlcnNpb24gPSAwO1xuICAgICAgICB0aGlzLkggPSBmYWxzZTtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9iai5zdHlsZS5jc3NUZXh0O1xuICAgIH1cbiAgICBzZXRWYWx1ZSh0LCBlKSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgICAgICB0aGlzLkggPSB0ICE9PSB0aGlzLm92O1xuICAgICAgICBpZiAoMCA9PT0gKDI1NiAmIGUpKSB0aGlzLksoKTtcbiAgICB9XG4gICAgVWUodCkge1xuICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgIGNvbnN0IGkgPSAvdXJsXFwoW14pXSskLztcbiAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICBsZXQgbiA9IFwiXCI7XG4gICAgICAgIGxldCByO1xuICAgICAgICBsZXQgbztcbiAgICAgICAgbGV0IGw7XG4gICAgICAgIGxldCBoO1xuICAgICAgICB3aGlsZSAocyA8IHQubGVuZ3RoKSB7XG4gICAgICAgICAgICByID0gdC5pbmRleE9mKFwiO1wiLCBzKTtcbiAgICAgICAgICAgIGlmICgtMSA9PT0gcikgciA9IHQubGVuZ3RoO1xuICAgICAgICAgICAgbiArPSB0LnN1YnN0cmluZyhzLCByKTtcbiAgICAgICAgICAgIHMgPSByICsgMTtcbiAgICAgICAgICAgIGlmIChpLnRlc3QobikpIHtcbiAgICAgICAgICAgICAgICBuICs9IFwiO1wiO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbyA9IG4uaW5kZXhPZihcIjpcIik7XG4gICAgICAgICAgICBsID0gbi5zdWJzdHJpbmcoMCwgbykudHJpbSgpO1xuICAgICAgICAgICAgaCA9IG4uc3Vic3RyaW5nKG8gKyAxKS50cmltKCk7XG4gICAgICAgICAgICBlLnB1c2goWyBsLCBoIF0pO1xuICAgICAgICAgICAgbiA9IFwiXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxuICAgIEZlKHQpIHtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIGZvciAoaSBpbiB0KSB7XG4gICAgICAgICAgICBlID0gdFtpXTtcbiAgICAgICAgICAgIGlmIChudWxsID09IGUpIGNvbnRpbnVlO1xuICAgICAgICAgICAgaWYgKEF0KGUpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGkuc3RhcnRzV2l0aChjcikpIHtcbiAgICAgICAgICAgICAgICAgICAgcy5wdXNoKFsgaSwgZSBdKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHMucHVzaChbIHIoaSksIGUgXSk7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzLnB1c2goLi4udGhpcy5WZShlKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfVxuICAgIF9lKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubGVuZ3RoO1xuICAgICAgICBpZiAoZSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgICAgIGZvciAoO2UgPiBzOyArK3MpIGkucHVzaCguLi50aGlzLlZlKHRbc10pKTtcbiAgICAgICAgICAgIHJldHVybiBpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBoO1xuICAgIH1cbiAgICBWZSh0KSB7XG4gICAgICAgIGlmIChBdCh0KSkgcmV0dXJuIHRoaXMuVWUodCk7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiB0aGlzLl9lKHQpO1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIE9iamVjdCkgcmV0dXJuIHRoaXMuRmUodCk7XG4gICAgICAgIHJldHVybiBoO1xuICAgIH1cbiAgICBLKCkge1xuICAgICAgICBpZiAodGhpcy5IKSB7XG4gICAgICAgICAgICB0aGlzLkggPSBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuc3R5bGVzO1xuICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMuVmUodCk7XG4gICAgICAgICAgICBsZXQgcztcbiAgICAgICAgICAgIGxldCBuID0gdGhpcy52ZXJzaW9uO1xuICAgICAgICAgICAgdGhpcy5vdiA9IHQ7XG4gICAgICAgICAgICBsZXQgcjtcbiAgICAgICAgICAgIGxldCBvO1xuICAgICAgICAgICAgbGV0IGw7XG4gICAgICAgICAgICBsZXQgaCA9IDA7XG4gICAgICAgICAgICBjb25zdCBhID0gaS5sZW5ndGg7XG4gICAgICAgICAgICBmb3IgKDtoIDwgYTsgKytoKSB7XG4gICAgICAgICAgICAgICAgciA9IGlbaF07XG4gICAgICAgICAgICAgICAgbyA9IHJbMF07XG4gICAgICAgICAgICAgICAgbCA9IHJbMV07XG4gICAgICAgICAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eShvLCBsKTtcbiAgICAgICAgICAgICAgICBlW29dID0gbjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3R5bGVzID0gZTtcbiAgICAgICAgICAgIHRoaXMudmVyc2lvbiArPSAxO1xuICAgICAgICAgICAgaWYgKDAgPT09IG4pIHJldHVybjtcbiAgICAgICAgICAgIG4gLT0gMTtcbiAgICAgICAgICAgIGZvciAocyBpbiBlKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSwgcykgfHwgZVtzXSAhPT0gbikgY29udGludWU7XG4gICAgICAgICAgICAgICAgdGhpcy5vYmouc3R5bGUucmVtb3ZlUHJvcGVydHkocyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0UHJvcGVydHkodCwgZSkge1xuICAgICAgICBsZXQgaSA9IFwiXCI7XG4gICAgICAgIGlmIChudWxsICE9IGUgJiYgQ3QoZS5pbmRleE9mKSAmJiBlLmluY2x1ZGVzKFwiIWltcG9ydGFudFwiKSkge1xuICAgICAgICAgICAgaSA9IFwiaW1wb3J0YW50XCI7XG4gICAgICAgICAgICBlID0gZS5yZXBsYWNlKFwiIWltcG9ydGFudFwiLCBcIlwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9iai5zdHlsZS5zZXRQcm9wZXJ0eSh0LCBlLCBpKTtcbiAgICB9XG4gICAgYmluZCh0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLm92ID0gdGhpcy5vYmouc3R5bGUuY3NzVGV4dDtcbiAgICB9XG59XG5cbmNsYXNzIFZhbHVlQXR0cmlidXRlT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVyID0gaTtcbiAgICAgICAgdGhpcy50eXBlID0gMiB8IDEgfCA0O1xuICAgICAgICB0aGlzLnYgPSBcIlwiO1xuICAgICAgICB0aGlzLm92ID0gXCJcIjtcbiAgICAgICAgdGhpcy5IID0gZmFsc2U7XG4gICAgICAgIHRoaXMubyA9IHQ7XG4gICAgICAgIHRoaXMuayA9IGU7XG4gICAgfVxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52O1xuICAgIH1cbiAgICBzZXRWYWx1ZSh0LCBlKSB7XG4gICAgICAgIGlmIChPYmplY3QuaXModCwgdGhpcy52KSkgcmV0dXJuO1xuICAgICAgICB0aGlzLm92ID0gdGhpcy52O1xuICAgICAgICB0aGlzLnYgPSB0O1xuICAgICAgICB0aGlzLkggPSB0cnVlO1xuICAgICAgICBpZiAoIXRoaXMuaGFuZGxlci5jb25maWcucmVhZG9ubHkgJiYgMCA9PT0gKDI1NiAmIGUpKSB0aGlzLksoZSk7XG4gICAgfVxuICAgIEsodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgaWYgKHRoaXMuSCkge1xuICAgICAgICAgICAgdGhpcy5IID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLm9bdGhpcy5rXSA9IG51bGwgIT09IChlID0gdGhpcy52KSAmJiB2b2lkIDAgIT09IGUgPyBlIDogdGhpcy5oYW5kbGVyLmNvbmZpZy5kZWZhdWx0O1xuICAgICAgICAgICAgaWYgKDAgPT09ICgyICYgdCkpIHRoaXMucXVldWUuYWRkKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUV2ZW50KCkge1xuICAgICAgICB0aGlzLm92ID0gdGhpcy52O1xuICAgICAgICB0aGlzLnYgPSB0aGlzLm9bdGhpcy5rXTtcbiAgICAgICAgaWYgKHRoaXMub3YgIT09IHRoaXMudikge1xuICAgICAgICAgICAgdGhpcy5IID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmFkZCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzdWJzY3JpYmUodCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzLmFkZCh0KSAmJiAxID09PSB0aGlzLnN1YnMuY291bnQpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlci5zdWJzY3JpYmUodGhpcy5vLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudiA9IHRoaXMub3YgPSB0aGlzLm9bdGhpcy5rXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1bnN1YnNjcmliZSh0KSB7XG4gICAgICAgIGlmICh0aGlzLnN1YnMucmVtb3ZlKHQpICYmIDAgPT09IHRoaXMuc3Vicy5jb3VudCkgdGhpcy5oYW5kbGVyLmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgZmx1c2goKSB7XG4gICAgICAgIHVyID0gdGhpcy5vdjtcbiAgICAgICAgdGhpcy5vdiA9IHRoaXMudjtcbiAgICAgICAgdGhpcy5zdWJzLm5vdGlmeSh0aGlzLnYsIHVyLCAwKTtcbiAgICB9XG59XG5cblAoVmFsdWVBdHRyaWJ1dGVPYnNlcnZlcik7XG5cbk8oVmFsdWVBdHRyaWJ1dGVPYnNlcnZlcik7XG5cbmxldCB1cjtcblxuY29uc3QgZnIgPSBcImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIjtcblxuY29uc3QgZHIgPSBcImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZVwiO1xuXG5jb25zdCBtciA9IFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC94bWxucy9cIjtcblxuY29uc3QgdnIgPSBPYmplY3QuYXNzaWduKHd0KCksIHtcbiAgICBcInhsaW5rOmFjdHVhdGVcIjogWyBcImFjdHVhdGVcIiwgZnIgXSxcbiAgICBcInhsaW5rOmFyY3JvbGVcIjogWyBcImFyY3JvbGVcIiwgZnIgXSxcbiAgICBcInhsaW5rOmhyZWZcIjogWyBcImhyZWZcIiwgZnIgXSxcbiAgICBcInhsaW5rOnJvbGVcIjogWyBcInJvbGVcIiwgZnIgXSxcbiAgICBcInhsaW5rOnNob3dcIjogWyBcInNob3dcIiwgZnIgXSxcbiAgICBcInhsaW5rOnRpdGxlXCI6IFsgXCJ0aXRsZVwiLCBmciBdLFxuICAgIFwieGxpbms6dHlwZVwiOiBbIFwidHlwZVwiLCBmciBdLFxuICAgIFwieG1sOmxhbmdcIjogWyBcImxhbmdcIiwgZHIgXSxcbiAgICBcInhtbDpzcGFjZVwiOiBbIFwic3BhY2VcIiwgZHIgXSxcbiAgICB4bWxuczogWyBcInhtbG5zXCIsIG1yIF0sXG4gICAgXCJ4bWxuczp4bGlua1wiOiBbIFwieGxpbmtcIiwgbXIgXVxufSk7XG5cbmNvbnN0IHByID0gbmV3IFk7XG5cbnByLnR5cGUgPSAyIHwgNDtcblxuY2xhc3MgTm9kZU9ic2VydmVyQ29uZmlnIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB0aGlzLnR5cGUgPSBudWxsICE9PSAoZSA9IHQudHlwZSkgJiYgdm9pZCAwICE9PSBlID8gZSA6IFZhbHVlQXR0cmlidXRlT2JzZXJ2ZXI7XG4gICAgICAgIHRoaXMuZXZlbnRzID0gdC5ldmVudHM7XG4gICAgICAgIHRoaXMucmVhZG9ubHkgPSB0LnJlYWRvbmx5O1xuICAgICAgICB0aGlzLmRlZmF1bHQgPSB0LmRlZmF1bHQ7XG4gICAgfVxufVxuXG5jbGFzcyBOb2RlT2JzZXJ2ZXJMb2NhdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzKSB7XG4gICAgICAgIHRoaXMubG9jYXRvciA9IHQ7XG4gICAgICAgIHRoaXMucGxhdGZvcm0gPSBlO1xuICAgICAgICB0aGlzLmRpcnR5Q2hlY2tlciA9IGk7XG4gICAgICAgIHRoaXMuc3ZnQW5hbHl6ZXIgPSBzO1xuICAgICAgICB0aGlzLmFsbG93RGlydHlDaGVjayA9IHRydWU7XG4gICAgICAgIHRoaXMuamUgPSB3dCgpO1xuICAgICAgICB0aGlzLk5lID0gd3QoKTtcbiAgICAgICAgdGhpcy5XZSA9IHd0KCk7XG4gICAgICAgIHRoaXMuSGUgPSB3dCgpO1xuICAgICAgICBjb25zdCBuID0gWyBcImNoYW5nZVwiLCBcImlucHV0XCIgXTtcbiAgICAgICAgY29uc3QgciA9IHtcbiAgICAgICAgICAgIGV2ZW50czogbixcbiAgICAgICAgICAgIGRlZmF1bHQ6IFwiXCJcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy51c2VDb25maWcoe1xuICAgICAgICAgICAgSU5QVVQ6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcixcbiAgICAgICAgICAgICAgICB2YWx1ZUFzTnVtYmVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50czogbixcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgY2hlY2tlZDoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBDaGVja2VkT2JzZXJ2ZXIsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50czogblxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZmlsZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnRzOiBuLFxuICAgICAgICAgICAgICAgICAgICByZWFkb25seTogdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBTRUxFQ1Q6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBTZWxlY3RWYWx1ZU9ic2VydmVyLFxuICAgICAgICAgICAgICAgICAgICBldmVudHM6IFsgXCJjaGFuZ2VcIiBdLFxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiBcIlwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFRFWFRBUkVBOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHJcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IG8gPSB7XG4gICAgICAgICAgICBldmVudHM6IFsgXCJjaGFuZ2VcIiwgXCJpbnB1dFwiLCBcImJsdXJcIiwgXCJrZXl1cFwiLCBcInBhc3RlXCIgXSxcbiAgICAgICAgICAgIGRlZmF1bHQ6IFwiXCJcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgbCA9IHtcbiAgICAgICAgICAgIGV2ZW50czogWyBcInNjcm9sbFwiIF0sXG4gICAgICAgICAgICBkZWZhdWx0OiAwXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMudXNlQ29uZmlnR2xvYmFsKHtcbiAgICAgICAgICAgIHNjcm9sbFRvcDogbCxcbiAgICAgICAgICAgIHNjcm9sbExlZnQ6IGwsXG4gICAgICAgICAgICB0ZXh0Q29udGVudDogbyxcbiAgICAgICAgICAgIGlubmVySFRNTDogb1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5vdmVycmlkZUFjY2Vzc29yR2xvYmFsKFwiY3NzXCIsIFwic3R5bGVcIiwgXCJjbGFzc1wiKTtcbiAgICAgICAgdGhpcy5vdmVycmlkZUFjY2Vzc29yKHtcbiAgICAgICAgICAgIElOUFVUOiBbIFwidmFsdWVcIiwgXCJjaGVja2VkXCIsIFwibW9kZWxcIiBdLFxuICAgICAgICAgICAgU0VMRUNUOiBbIFwidmFsdWVcIiBdLFxuICAgICAgICAgICAgVEVYVEFSRUE6IFsgXCJ2YWx1ZVwiIF1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHN0YXRpYyByZWdpc3Rlcih0KSB7XG4gICAgICAgIGMuYWxpYXNUbyhRLCBOb2RlT2JzZXJ2ZXJMb2NhdG9yKS5yZWdpc3Rlcih0KTtcbiAgICAgICAgYy5zaW5nbGV0b24oUSwgTm9kZU9ic2VydmVyTG9jYXRvcikucmVnaXN0ZXIodCk7XG4gICAgfVxuICAgIGhhbmRsZXModCwgZSkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIHRoaXMucGxhdGZvcm0uTm9kZTtcbiAgICB9XG4gICAgdXNlQ29uZmlnKHQsIGUsIGkpIHtcbiAgICAgICAgdmFyIHMsIG47XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmplO1xuICAgICAgICBsZXQgbztcbiAgICAgICAgaWYgKEF0KHQpKSB7XG4gICAgICAgICAgICBvID0gbnVsbCAhPT0gKHMgPSByW3RdKSAmJiB2b2lkIDAgIT09IHMgPyBzIDogclt0XSA9IHd0KCk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBvW2VdKSBvW2VdID0gbmV3IE5vZGVPYnNlcnZlckNvbmZpZyhpKTsgZWxzZSB3cih0LCBlKTtcbiAgICAgICAgfSBlbHNlIGZvciAoY29uc3QgaSBpbiB0KSB7XG4gICAgICAgICAgICBvID0gbnVsbCAhPT0gKG4gPSByW2ldKSAmJiB2b2lkIDAgIT09IG4gPyBuIDogcltpXSA9IHd0KCk7XG4gICAgICAgICAgICBjb25zdCBzID0gdFtpXTtcbiAgICAgICAgICAgIGZvciAoZSBpbiBzKSBpZiAobnVsbCA9PSBvW2VdKSBvW2VdID0gbmV3IE5vZGVPYnNlcnZlckNvbmZpZyhzW2VdKTsgZWxzZSB3cihpLCBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB1c2VDb25maWdHbG9iYWwodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5OZTtcbiAgICAgICAgaWYgKFwib2JqZWN0XCIgPT09IHR5cGVvZiB0KSBmb3IgKGNvbnN0IGUgaW4gdCkgaWYgKG51bGwgPT0gaVtlXSkgaVtlXSA9IG5ldyBOb2RlT2JzZXJ2ZXJDb25maWcodFtlXSk7IGVsc2Ugd3IoXCIqXCIsIGUpOyBlbHNlIGlmIChudWxsID09IGlbdF0pIGlbdF0gPSBuZXcgTm9kZU9ic2VydmVyQ29uZmlnKGUpOyBlbHNlIHdyKFwiKlwiLCB0KTtcbiAgICB9XG4gICAgZ2V0QWNjZXNzb3IodCwgZSwgaSkge1xuICAgICAgICB2YXIgcztcbiAgICAgICAgaWYgKGUgaW4gdGhpcy5IZSB8fCBlIGluIChudWxsICE9PSAocyA9IHRoaXMuV2VbdC50YWdOYW1lXSkgJiYgdm9pZCAwICE9PSBzID8gcyA6IEUpKSByZXR1cm4gdGhpcy5nZXRPYnNlcnZlcih0LCBlLCBpKTtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSBcInNyY1wiOlxuICAgICAgICAgIGNhc2UgXCJocmVmXCI6XG4gICAgICAgICAgY2FzZSBcInJvbGVcIjpcbiAgICAgICAgICAgIHJldHVybiB0cjtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHZyW2VdO1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGkpIHJldHVybiBBdHRyaWJ1dGVOU0FjY2Vzc29yLmZvck5zKGlbMV0pO1xuICAgICAgICAgICAgICAgIGlmICh5dCh0LCBlLCB0aGlzLnN2Z0FuYWx5emVyKSkgcmV0dXJuIHRyO1xuICAgICAgICAgICAgICAgIHJldHVybiBwcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBvdmVycmlkZUFjY2Vzc29yKHQsIGUpIHtcbiAgICAgICAgdmFyIGksIHM7XG4gICAgICAgIHZhciBuLCByO1xuICAgICAgICBsZXQgbztcbiAgICAgICAgaWYgKEF0KHQpKSB7XG4gICAgICAgICAgICBvID0gbnVsbCAhPT0gKGkgPSAobiA9IHRoaXMuV2UpW3RdKSAmJiB2b2lkIDAgIT09IGkgPyBpIDogblt0XSA9IHd0KCk7XG4gICAgICAgICAgICBvW2VdID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGZvciAoY29uc3QgZSBpbiB0KSBmb3IgKGNvbnN0IGkgb2YgdFtlXSkge1xuICAgICAgICAgICAgbyA9IG51bGwgIT09IChzID0gKHIgPSB0aGlzLldlKVtlXSkgJiYgdm9pZCAwICE9PSBzID8gcyA6IHJbZV0gPSB3dCgpO1xuICAgICAgICAgICAgb1tpXSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgb3ZlcnJpZGVBY2Nlc3Nvckdsb2JhbCguLi50KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSB0aGlzLkhlW2VdID0gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0T2JzZXJ2ZXIodCwgZSwgaSkge1xuICAgICAgICB2YXIgcywgbjtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSBcInJvbGVcIjpcbiAgICAgICAgICAgIHJldHVybiB0cjtcblxuICAgICAgICAgIGNhc2UgXCJjbGFzc1wiOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDbGFzc0F0dHJpYnV0ZUFjY2Vzc29yKHQpO1xuXG4gICAgICAgICAgY2FzZSBcImNzc1wiOlxuICAgICAgICAgIGNhc2UgXCJzdHlsZVwiOlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBTdHlsZUF0dHJpYnV0ZUFjY2Vzc29yKHQpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHIgPSBudWxsICE9PSAobiA9IG51bGwgPT09IChzID0gdGhpcy5qZVt0LnRhZ05hbWVdKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzW2VdKSAmJiB2b2lkIDAgIT09IG4gPyBuIDogdGhpcy5OZVtlXTtcbiAgICAgICAgaWYgKG51bGwgIT0gcikgcmV0dXJuIG5ldyByLnR5cGUodCwgZSwgbmV3IEV2ZW50U3Vic2NyaWJlcihyKSwgaSwgdGhpcy5sb2NhdG9yKTtcbiAgICAgICAgY29uc3QgbyA9IHZyW2VdO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBvKSByZXR1cm4gQXR0cmlidXRlTlNBY2Nlc3Nvci5mb3JOcyhvWzFdKTtcbiAgICAgICAgaWYgKHl0KHQsIGUsIHRoaXMuc3ZnQW5hbHl6ZXIpKSByZXR1cm4gdHI7XG4gICAgICAgIGlmIChlIGluIHQuY29uc3RydWN0b3IucHJvdG90eXBlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd0RpcnR5Q2hlY2spIHJldHVybiB0aGlzLmRpcnR5Q2hlY2tlci5jcmVhdGVQcm9wZXJ0eSh0LCBlKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDY1Mjoke1N0cmluZyhlKX1gKTtcbiAgICAgICAgfSBlbHNlIHJldHVybiBuZXcgWih0LCBlKTtcbiAgICB9XG59XG5cbk5vZGVPYnNlcnZlckxvY2F0b3IuaW5qZWN0ID0gWyBCLCBLdCwgSiwgWXQgXTtcblxuZnVuY3Rpb24gZ3IodCwgZSkge1xuICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiBlLmdldEFycmF5T2JzZXJ2ZXIodCk7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBNYXApIHJldHVybiBlLmdldE1hcE9ic2VydmVyKHQpO1xuICAgIGlmICh0IGluc3RhbmNlb2YgU2V0KSByZXR1cm4gZS5nZXRTZXRPYnNlcnZlcih0KTtcbn1cblxuZnVuY3Rpb24gd3IodCwgZSkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDY1Mzoke1N0cmluZyhlKX1AJHt0fWApO1xufVxuXG5jbGFzcyBVcGRhdGVUcmlnZ2VyQmluZGluZ0JlaGF2aW9yIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMub0wgPSB0O1xuICAgIH1cbiAgICBiaW5kKHQsIGUsIGksIC4uLnMpIHtcbiAgICAgICAgaWYgKDAgPT09IHMubGVuZ3RoKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA4MDJgKTtcbiAgICAgICAgaWYgKGkubW9kZSAhPT0gRC50d29XYXkgJiYgaS5tb2RlICE9PSBELmZyb21WaWV3KSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwODAzXCIpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5vTC5nZXRPYnNlcnZlcihpLnRhcmdldCwgaS50YXJnZXRQcm9wZXJ0eSk7XG4gICAgICAgIGlmICghbi5oYW5kbGVyKSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwODA0XCIpO1xuICAgICAgICBpLnRhcmdldE9ic2VydmVyID0gbjtcbiAgICAgICAgY29uc3QgciA9IG4uaGFuZGxlcjtcbiAgICAgICAgbi5vcmlnaW5hbEhhbmRsZXIgPSByO1xuICAgICAgICBuLmhhbmRsZXIgPSBuZXcgRXZlbnRTdWJzY3JpYmVyKG5ldyBOb2RlT2JzZXJ2ZXJDb25maWcoe1xuICAgICAgICAgICAgZGVmYXVsdDogci5jb25maWcuZGVmYXVsdCxcbiAgICAgICAgICAgIGV2ZW50czogcyxcbiAgICAgICAgICAgIHJlYWRvbmx5OiByLmNvbmZpZy5yZWFkb25seVxuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHVuYmluZCh0LCBlLCBpKSB7XG4gICAgICAgIGkudGFyZ2V0T2JzZXJ2ZXIuaGFuZGxlci5kaXNwb3NlKCk7XG4gICAgICAgIGkudGFyZ2V0T2JzZXJ2ZXIuaGFuZGxlciA9IGkudGFyZ2V0T2JzZXJ2ZXIub3JpZ2luYWxIYW5kbGVyO1xuICAgICAgICBpLnRhcmdldE9ic2VydmVyLm9yaWdpbmFsSGFuZGxlciA9IG51bGw7XG4gICAgfVxufVxuXG5VcGRhdGVUcmlnZ2VyQmluZGluZ0JlaGF2aW9yLmluamVjdCA9IFsgViBdO1xuXG5HKFwidXBkYXRlVHJpZ2dlclwiKShVcGRhdGVUcmlnZ2VyQmluZGluZ0JlaGF2aW9yKTtcblxuY2xhc3MgRm9jdXMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy56ZSA9IHQ7XG4gICAgICAgIHRoaXMucCA9IGU7XG4gICAgICAgIHRoaXMuR2UgPSBmYWxzZTtcbiAgICB9XG4gICAgYmluZGluZygpIHtcbiAgICAgICAgdGhpcy52YWx1ZUNoYW5nZWQoKTtcbiAgICB9XG4gICAgdmFsdWVDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy4kY29udHJvbGxlci5pc0FjdGl2ZSkgdGhpcy5YZSgpOyBlbHNlIHRoaXMuR2UgPSB0cnVlO1xuICAgIH1cbiAgICBhdHRhY2hlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuR2UpIHtcbiAgICAgICAgICAgIHRoaXMuR2UgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuWGUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnplLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c1wiLCB0aGlzKTtcbiAgICAgICAgdGhpcy56ZS5hZGRFdmVudExpc3RlbmVyKFwiYmx1clwiLCB0aGlzKTtcbiAgICB9XG4gICAgYWZ0ZXJEZXRhY2hDaGlsZHJlbigpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuemU7XG4gICAgICAgIHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsIHRoaXMpO1xuICAgICAgICB0LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJibHVyXCIsIHRoaXMpO1xuICAgIH1cbiAgICBoYW5kbGVFdmVudCh0KSB7XG4gICAgICAgIGlmIChcImZvY3VzXCIgPT09IHQudHlwZSkgdGhpcy52YWx1ZSA9IHRydWU7IGVsc2UgaWYgKCF0aGlzLktlKSB0aGlzLnZhbHVlID0gZmFsc2U7XG4gICAgfVxuICAgIFhlKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy56ZTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuS2U7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnZhbHVlO1xuICAgICAgICBpZiAoaSAmJiAhZSkgdC5mb2N1cygpOyBlbHNlIGlmICghaSAmJiBlKSB0LmJsdXIoKTtcbiAgICB9XG4gICAgZ2V0IEtlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy56ZSA9PT0gdGhpcy5wLmRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7XG4gICAgfVxufVxuXG5Gb2N1cy5pbmplY3QgPSBbIG5zLCBLdCBdO1xuXG5vdChbIFN0KHtcbiAgICBtb2RlOiBELnR3b1dheVxufSkgXSwgRm9jdXMucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG5cblBlKFwiZm9jdXNcIikoRm9jdXMpO1xuXG5sZXQgYnIgPSBjbGFzcyBTaG93IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuZWwgPSB0O1xuICAgICAgICB0aGlzLnAgPSBlO1xuICAgICAgICB0aGlzLlllID0gZmFsc2U7XG4gICAgICAgIHRoaXMuUWUgPSBudWxsO1xuICAgICAgICB0aGlzLiR2YWwgPSBcIlwiO1xuICAgICAgICB0aGlzLiRwcmlvID0gXCJcIjtcbiAgICAgICAgdGhpcy51cGRhdGUgPSAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLlFlID0gbnVsbDtcbiAgICAgICAgICAgIGlmIChCb29sZWFuKHRoaXMudmFsdWUpICE9PSB0aGlzLlplKSBpZiAodGhpcy5aZSA9PT0gdGhpcy5KZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuWmUgPSAhdGhpcy5KZTtcbiAgICAgICAgICAgICAgICB0aGlzLiR2YWwgPSB0aGlzLmVsLnN0eWxlLmdldFByb3BlcnR5VmFsdWUoXCJkaXNwbGF5XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuJHByaW8gPSB0aGlzLmVsLnN0eWxlLmdldFByb3BlcnR5UHJpb3JpdHkoXCJkaXNwbGF5XCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkoXCJkaXNwbGF5XCIsIFwibm9uZVwiLCBcImltcG9ydGFudFwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5aZSA9IHRoaXMuSmU7XG4gICAgICAgICAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eShcImRpc3BsYXlcIiwgdGhpcy4kdmFsLCB0aGlzLiRwcmlvKTtcbiAgICAgICAgICAgICAgICBpZiAoXCJcIiA9PT0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoXCJzdHlsZVwiKSkgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoXCJzdHlsZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5aZSA9IHRoaXMuSmUgPSBcImhpZGVcIiAhPT0gaS5hbGlhcztcbiAgICB9XG4gICAgYmluZGluZygpIHtcbiAgICAgICAgdGhpcy5ZZSA9IHRydWU7XG4gICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgfVxuICAgIGRldGFjaGluZygpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIHRoaXMuWWUgPSBmYWxzZTtcbiAgICAgICAgbnVsbCA9PT0gKHQgPSB0aGlzLlFlKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmNhbmNlbCgpO1xuICAgICAgICB0aGlzLlFlID0gbnVsbDtcbiAgICB9XG4gICAgdmFsdWVDaGFuZ2VkKCkge1xuICAgICAgICBpZiAodGhpcy5ZZSAmJiBudWxsID09PSB0aGlzLlFlKSB0aGlzLlFlID0gdGhpcy5wLmRvbVdyaXRlUXVldWUucXVldWVUYXNrKHRoaXMudXBkYXRlKTtcbiAgICB9XG59O1xuXG5vdChbIFN0IF0sIGJyLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuXG5iciA9IG90KFsgbHQoMCwgbnMpLCBsdCgxLCBLdCksIGx0KDIsIGtzKSBdLCBicik7XG5cbnR0KFwiaGlkZVwiKShicik7XG5cblBlKFwic2hvd1wiKShicik7XG5cbmNsYXNzIFBvcnRhbCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLmlkID0gdyhcImF1JGNvbXBvbmVudFwiKTtcbiAgICAgICAgdGhpcy5zdHJpY3QgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wID0gaTtcbiAgICAgICAgdGhpcy50aSA9IGkuZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgICAgdGhpcy52aWV3ID0gdC5jcmVhdGUoKTtcbiAgICAgICAgY3ModGhpcy52aWV3Lm5vZGVzLCBlKTtcbiAgICB9XG4gICAgYXR0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5jYWxsYmFja0NvbnRleHQpIHRoaXMuY2FsbGJhY2tDb250ZXh0ID0gdGhpcy4kY29udHJvbGxlci5zY29wZS5iaW5kaW5nQ29udGV4dDtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMudGkgPSB0aGlzLmVpKCk7XG4gICAgICAgIHRoaXMudmlldy5zZXRIb3N0KHMpO1xuICAgICAgICByZXR1cm4gdGhpcy5paSh0LCBzLCBpKTtcbiAgICB9XG4gICAgZGV0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2kodCwgdGhpcy50aSwgaSk7XG4gICAgfVxuICAgIHRhcmdldENoYW5nZWQoKSB7XG4gICAgICAgIGNvbnN0IHskY29udHJvbGxlcjogdH0gPSB0aGlzO1xuICAgICAgICBpZiAoIXQuaXNBY3RpdmUpIHJldHVybjtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMudGk7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnRpID0gdGhpcy5laSgpO1xuICAgICAgICBpZiAoZSA9PT0gaSkgcmV0dXJuO1xuICAgICAgICB0aGlzLnZpZXcuc2V0SG9zdChpKTtcbiAgICAgICAgY29uc3QgcyA9IEModGhpcy5zaShudWxsLCBpLCB0LmZsYWdzKSwgKCgpID0+IHRoaXMuaWkobnVsbCwgaSwgdC5mbGFncykpKTtcbiAgICAgICAgaWYgKHMgaW5zdGFuY2VvZiBQcm9taXNlKSBzLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRocm93IHQ7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgaWkodCwgZSwgaSkge1xuICAgICAgICBjb25zdCB7YWN0aXZhdGluZzogcywgY2FsbGJhY2tDb250ZXh0OiBuLCB2aWV3OiByfSA9IHRoaXM7XG4gICAgICAgIHIuc2V0SG9zdChlKTtcbiAgICAgICAgcmV0dXJuIEMobnVsbCA9PT0gcyB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmNhbGwobiwgZSwgciksICgoKSA9PiB0aGlzLm5pKHQsIGUsIGkpKSk7XG4gICAgfVxuICAgIG5pKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgeyRjb250cm9sbGVyOiBzLCB2aWV3OiBufSA9IHRoaXM7XG4gICAgICAgIGlmIChudWxsID09PSB0KSBuLm5vZGVzLmFwcGVuZFRvKGUpOyBlbHNlIHJldHVybiBDKG4uYWN0aXZhdGUobnVsbCAhPT0gdCAmJiB2b2lkIDAgIT09IHQgPyB0IDogbiwgcywgaSwgcy5zY29wZSksICgoKSA9PiB0aGlzLnJpKGUpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnJpKGUpO1xuICAgIH1cbiAgICByaSh0KSB7XG4gICAgICAgIGNvbnN0IHthY3RpdmF0ZWQ6IGUsIGNhbGxiYWNrQ29udGV4dDogaSwgdmlldzogc30gPSB0aGlzO1xuICAgICAgICByZXR1cm4gbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNhbGwoaSwgdCwgcyk7XG4gICAgfVxuICAgIHNpKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3Qge2RlYWN0aXZhdGluZzogcywgY2FsbGJhY2tDb250ZXh0OiBuLCB2aWV3OiByfSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBDKG51bGwgPT09IHMgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5jYWxsKG4sIGUsIHIpLCAoKCkgPT4gdGhpcy5vaSh0LCBlLCBpKSkpO1xuICAgIH1cbiAgICBvaSh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHskY29udHJvbGxlcjogcywgdmlldzogbn0gPSB0aGlzO1xuICAgICAgICBpZiAobnVsbCA9PT0gdCkgbi5ub2Rlcy5yZW1vdmUoKTsgZWxzZSByZXR1cm4gQyhuLmRlYWN0aXZhdGUodCwgcywgaSksICgoKSA9PiB0aGlzLmxpKGUpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmxpKGUpO1xuICAgIH1cbiAgICBsaSh0KSB7XG4gICAgICAgIGNvbnN0IHtkZWFjdGl2YXRlZDogZSwgY2FsbGJhY2tDb250ZXh0OiBpLCB2aWV3OiBzfSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBudWxsID09PSBlIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuY2FsbChpLCB0LCBzKTtcbiAgICB9XG4gICAgZWkoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnA7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRvY3VtZW50O1xuICAgICAgICBsZXQgaSA9IHRoaXMudGFyZ2V0O1xuICAgICAgICBsZXQgcyA9IHRoaXMucmVuZGVyQ29udGV4dDtcbiAgICAgICAgaWYgKFwiXCIgPT09IGkpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnN0cmljdCkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDgxMVwiKTtcbiAgICAgICAgICAgIHJldHVybiBlLmJvZHk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKEF0KGkpKSB7XG4gICAgICAgICAgICBsZXQgbiA9IGU7XG4gICAgICAgICAgICBpZiAoQXQocykpIHMgPSBlLnF1ZXJ5U2VsZWN0b3Iocyk7XG4gICAgICAgICAgICBpZiAocyBpbnN0YW5jZW9mIHQuTm9kZSkgbiA9IHM7XG4gICAgICAgICAgICBpID0gbi5xdWVyeVNlbGVjdG9yKGkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpIGluc3RhbmNlb2YgdC5Ob2RlKSByZXR1cm4gaTtcbiAgICAgICAgaWYgKG51bGwgPT0gaSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RyaWN0KSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwODEyXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGUuYm9keTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy52aWV3LmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy52aWV3ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmNhbGxiYWNrQ29udGV4dCA9IG51bGw7XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBpZiAodHJ1ZSA9PT0gKG51bGwgPT09IChlID0gdGhpcy52aWV3KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmFjY2VwdCh0KSkpIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxuUG9ydGFsLmluamVjdCA9IFsgQWksIG9zLCBLdCBdO1xuXG5vdChbIFN0KHtcbiAgICBwcmltYXJ5OiB0cnVlXG59KSBdLCBQb3J0YWwucHJvdG90eXBlLCBcInRhcmdldFwiLCB2b2lkIDApO1xuXG5vdChbIFN0KHtcbiAgICBjYWxsYmFjazogXCJ0YXJnZXRDaGFuZ2VkXCJcbn0pIF0sIFBvcnRhbC5wcm90b3R5cGUsIFwicmVuZGVyQ29udGV4dFwiLCB2b2lkIDApO1xuXG5vdChbIFN0KCkgXSwgUG9ydGFsLnByb3RvdHlwZSwgXCJzdHJpY3RcIiwgdm9pZCAwKTtcblxub3QoWyBTdCgpIF0sIFBvcnRhbC5wcm90b3R5cGUsIFwiZGVhY3RpdmF0aW5nXCIsIHZvaWQgMCk7XG5cbm90KFsgU3QoKSBdLCBQb3J0YWwucHJvdG90eXBlLCBcImFjdGl2YXRpbmdcIiwgdm9pZCAwKTtcblxub3QoWyBTdCgpIF0sIFBvcnRhbC5wcm90b3R5cGUsIFwiZGVhY3RpdmF0ZWRcIiwgdm9pZCAwKTtcblxub3QoWyBTdCgpIF0sIFBvcnRhbC5wcm90b3R5cGUsIFwiYWN0aXZhdGVkXCIsIHZvaWQgMCk7XG5cbm90KFsgU3QoKSBdLCBQb3J0YWwucHJvdG90eXBlLCBcImNhbGxiYWNrQ29udGV4dFwiLCB2b2lkIDApO1xuXG5PZShcInBvcnRhbFwiKShQb3J0YWwpO1xuXG5jbGFzcyBGbGFnc1RlbXBsYXRlQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLmZzID0gaTtcbiAgICAgICAgdGhpcy5pZCA9IHcoXCJhdSRjb21wb25lbnRcIik7XG4gICAgICAgIHRoaXMudmlldyA9IHQuY3JlYXRlKCkuc2V0TG9jYXRpb24oZSk7XG4gICAgfVxuICAgIGF0dGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHskY29udHJvbGxlcjogc30gPSB0aGlzO1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3LmFjdGl2YXRlKHQsIHMsIGkgfCB0aGlzLmZzLCBzLnNjb3BlKTtcbiAgICB9XG4gICAgZGV0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlldy5kZWFjdGl2YXRlKHQsIHRoaXMuJGNvbnRyb2xsZXIsIGkpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLnZpZXcuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLnZpZXcgPSB2b2lkIDA7XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBpZiAodHJ1ZSA9PT0gKG51bGwgPT09IChlID0gdGhpcy52aWV3KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmFjY2VwdCh0KSkpIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxuY2xhc3MgRnJlcXVlbnRNdXRhdGlvbnMgZXh0ZW5kcyBGbGFnc1RlbXBsYXRlQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBlLCA1MTIpO1xuICAgIH1cbn1cblxuRnJlcXVlbnRNdXRhdGlvbnMuaW5qZWN0ID0gWyBBaSwgb3MgXTtcblxuY2xhc3MgT2JzZXJ2ZVNoYWxsb3cgZXh0ZW5kcyBGbGFnc1RlbXBsYXRlQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBlLCAxMjgpO1xuICAgIH1cbn1cblxuT2JzZXJ2ZVNoYWxsb3cuaW5qZWN0ID0gWyBBaSwgb3MgXTtcblxuT2UoXCJmcmVxdWVudC1tdXRhdGlvbnNcIikoRnJlcXVlbnRNdXRhdGlvbnMpO1xuXG5PZShcIm9ic2VydmUtc2hhbGxvd1wiKShPYnNlcnZlU2hhbGxvdyk7XG5cbmNsYXNzIElmIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuaWZGYWN0b3J5ID0gdDtcbiAgICAgICAgdGhpcy5sb2NhdGlvbiA9IGU7XG4gICAgICAgIHRoaXMud29yayA9IGk7XG4gICAgICAgIHRoaXMuaWQgPSB3KFwiYXUkY29tcG9uZW50XCIpO1xuICAgICAgICB0aGlzLmVsc2VGYWN0b3J5ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmVsc2VWaWV3ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmlmVmlldyA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy52aWV3ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLnZhbHVlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuY2FjaGUgPSB0cnVlO1xuICAgICAgICB0aGlzLnBlbmRpbmcgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuaGkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5haSA9IDA7XG4gICAgfVxuICAgIGF0dGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIGxldCBzO1xuICAgICAgICBjb25zdCBuID0gdGhpcy4kY29udHJvbGxlcjtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuYWkrKztcbiAgICAgICAgY29uc3QgbyA9ICgpID0+ICF0aGlzLmhpICYmIHRoaXMuYWkgPT09IHIgKyAxO1xuICAgICAgICByZXR1cm4gQyh0aGlzLnBlbmRpbmcsICgoKSA9PiB7XG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIGlmICghbygpKSByZXR1cm47XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmcgPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAodGhpcy52YWx1ZSkgcyA9IHRoaXMudmlldyA9IHRoaXMuaWZWaWV3ID0gdGhpcy5jYWNoZSAmJiBudWxsICE9IHRoaXMuaWZWaWV3ID8gdGhpcy5pZlZpZXcgOiB0aGlzLmlmRmFjdG9yeS5jcmVhdGUoKTsgZWxzZSBzID0gdGhpcy52aWV3ID0gdGhpcy5lbHNlVmlldyA9IHRoaXMuY2FjaGUgJiYgbnVsbCAhPSB0aGlzLmVsc2VWaWV3ID8gdGhpcy5lbHNlVmlldyA6IG51bGwgPT09IChlID0gdGhpcy5lbHNlRmFjdG9yeSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5jcmVhdGUoKTtcbiAgICAgICAgICAgIGlmIChudWxsID09IHMpIHJldHVybjtcbiAgICAgICAgICAgIHMuc2V0TG9jYXRpb24odGhpcy5sb2NhdGlvbik7XG4gICAgICAgICAgICB0aGlzLnBlbmRpbmcgPSBDKHMuYWN0aXZhdGUodCwgbiwgaSwgbi5zY29wZSksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG8oKSkgdGhpcy5wZW5kaW5nID0gdm9pZCAwO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGRldGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuaGkgPSB0cnVlO1xuICAgICAgICByZXR1cm4gQyh0aGlzLnBlbmRpbmcsICgoKSA9PiB7XG4gICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgIHRoaXMuaGkgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucGVuZGluZyA9IHZvaWQgMDtcbiAgICAgICAgICAgIHZvaWQgKG51bGwgPT09IChlID0gdGhpcy52aWV3KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmRlYWN0aXZhdGUodCwgdGhpcy4kY29udHJvbGxlciwgaSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHZhbHVlQ2hhbmdlZCh0LCBlLCBpKSB7XG4gICAgICAgIGlmICghdGhpcy4kY29udHJvbGxlci5pc0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgICB0ID0gISF0O1xuICAgICAgICBlID0gISFlO1xuICAgICAgICBpZiAodCA9PT0gZSkgcmV0dXJuO1xuICAgICAgICB0aGlzLndvcmsuc3RhcnQoKTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMudmlldztcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuJGNvbnRyb2xsZXI7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmFpKys7XG4gICAgICAgIGNvbnN0IG8gPSAoKSA9PiAhdGhpcy5oaSAmJiB0aGlzLmFpID09PSByICsgMTtcbiAgICAgICAgbGV0IGw7XG4gICAgICAgIHJldHVybiBDKEModGhpcy5wZW5kaW5nLCAoKCkgPT4gdGhpcy5wZW5kaW5nID0gQyhudWxsID09PSBzIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuZGVhY3RpdmF0ZShzLCBuLCBpKSwgKCgpID0+IHtcbiAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgaWYgKCFvKCkpIHJldHVybjtcbiAgICAgICAgICAgIGlmICh0KSBsID0gdGhpcy52aWV3ID0gdGhpcy5pZlZpZXcgPSB0aGlzLmNhY2hlICYmIG51bGwgIT0gdGhpcy5pZlZpZXcgPyB0aGlzLmlmVmlldyA6IHRoaXMuaWZGYWN0b3J5LmNyZWF0ZSgpOyBlbHNlIGwgPSB0aGlzLnZpZXcgPSB0aGlzLmVsc2VWaWV3ID0gdGhpcy5jYWNoZSAmJiBudWxsICE9IHRoaXMuZWxzZVZpZXcgPyB0aGlzLmVsc2VWaWV3IDogbnVsbCA9PT0gKGUgPSB0aGlzLmVsc2VGYWN0b3J5KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmNyZWF0ZSgpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gbCkgcmV0dXJuO1xuICAgICAgICAgICAgbC5zZXRMb2NhdGlvbih0aGlzLmxvY2F0aW9uKTtcbiAgICAgICAgICAgIHJldHVybiBDKGwuYWN0aXZhdGUobCwgbiwgaSwgbi5zY29wZSksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG8oKSkgdGhpcy5wZW5kaW5nID0gdm9pZCAwO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkpKSwgKCgpID0+IHRoaXMud29yay5maW5pc2goKSkpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB2YXIgdCwgZTtcbiAgICAgICAgbnVsbCA9PT0gKHQgPSB0aGlzLmlmVmlldykgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5kaXNwb3NlKCk7XG4gICAgICAgIG51bGwgPT09IChlID0gdGhpcy5lbHNlVmlldykgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMuaWZWaWV3ID0gdGhpcy5lbHNlVmlldyA9IHRoaXMudmlldyA9IHZvaWQgMDtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGlmICh0cnVlID09PSAobnVsbCA9PT0gKGUgPSB0aGlzLnZpZXcpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuYWNjZXB0KHQpKSkgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuXG5JZi5pbmplY3QgPSBbIEFpLCBvcywgZXMgXTtcblxub3QoWyBTdCBdLCBJZi5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcblxub3QoWyBTdCh7XG4gICAgc2V0OiB0ID0+IFwiXCIgPT09IHQgfHwgISF0ICYmIFwiZmFsc2VcIiAhPT0gdFxufSkgXSwgSWYucHJvdG90eXBlLCBcImNhY2hlXCIsIHZvaWQgMCk7XG5cbk9lKFwiaWZcIikoSWYpO1xuXG5jbGFzcyBFbHNlIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IHQ7XG4gICAgICAgIHRoaXMuaWQgPSB3KFwiYXUkY29tcG9uZW50XCIpO1xuICAgIH1cbiAgICBsaW5rKHQsIGUsIGksIHMpIHtcbiAgICAgICAgY29uc3QgbiA9IHQuY2hpbGRyZW47XG4gICAgICAgIGNvbnN0IHIgPSBuW24ubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChyIGluc3RhbmNlb2YgSWYpIHIuZWxzZUZhY3RvcnkgPSB0aGlzLmZhY3Rvcnk7IGVsc2UgaWYgKHIudmlld01vZGVsIGluc3RhbmNlb2YgSWYpIHIudmlld01vZGVsLmVsc2VGYWN0b3J5ID0gdGhpcy5mYWN0b3J5OyBlbHNlIHRocm93IG5ldyBFcnJvcihcIkFVUjA4MTBcIik7XG4gICAgfVxufVxuXG5FbHNlLmluamVjdCA9IFsgQWkgXTtcblxuT2Uoe1xuICAgIG5hbWU6IFwiZWxzZVwiXG59KShFbHNlKTtcblxuZnVuY3Rpb24geHIodCkge1xuICAgIHQuZGlzcG9zZSgpO1xufVxuXG5jb25zdCB5ciA9IFsgMzg5NjIsIDM2OTEzIF07XG5cbmNsYXNzIFJlcGVhdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLmwgPSB0O1xuICAgICAgICB0aGlzLnVpID0gZTtcbiAgICAgICAgdGhpcy5mID0gaTtcbiAgICAgICAgdGhpcy5pZCA9IHcoXCJhdSRjb21wb25lbnRcIik7XG4gICAgICAgIHRoaXMudmlld3MgPSBbXTtcbiAgICAgICAgdGhpcy5rZXkgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuZmkgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuZGkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5taSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnZpID0gbnVsbDtcbiAgICAgICAgdGhpcy5waSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5naSA9IGZhbHNlO1xuICAgIH1cbiAgICBiaW5kaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMudWkuYmluZGluZ3M7XG4gICAgICAgIGNvbnN0IG4gPSBzLmxlbmd0aDtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIGxldCBvO1xuICAgICAgICBsZXQgbCA9IDA7XG4gICAgICAgIGZvciAoO24gPiBsOyArK2wpIHtcbiAgICAgICAgICAgIHIgPSBzW2xdO1xuICAgICAgICAgICAgaWYgKHIudGFyZ2V0ID09PSB0aGlzICYmIFwiaXRlbXNcIiA9PT0gci50YXJnZXRQcm9wZXJ0eSkge1xuICAgICAgICAgICAgICAgIG8gPSB0aGlzLmZvck9mID0gci5zb3VyY2VFeHByZXNzaW9uO1xuICAgICAgICAgICAgICAgIHRoaXMud2kgPSByO1xuICAgICAgICAgICAgICAgIGxldCB0ID0gby5pdGVyYWJsZTtcbiAgICAgICAgICAgICAgICB3aGlsZSAobnVsbCAhPSB0ICYmIHlyLmluY2x1ZGVzKHQuJGtpbmQpKSB7XG4gICAgICAgICAgICAgICAgICAgIHQgPSB0LmV4cHJlc3Npb247XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnZpID0gdDtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLmJpKGkpO1xuICAgICAgICBjb25zdCBoID0gby5kZWNsYXJhdGlvbjtcbiAgICAgICAgaWYgKCEodGhpcy5naSA9IDkwMTM3ID09PSBoLiRraW5kIHx8IDEwNjUyMSA9PT0gaC4ka2luZCkpIHRoaXMubG9jYWwgPSBoLmV2YWx1YXRlKGksIHRoaXMuJGNvbnRyb2xsZXIuc2NvcGUsIHIubG9jYXRvciwgbnVsbCk7XG4gICAgfVxuICAgIGF0dGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMueGkoaSk7XG4gICAgICAgIHJldHVybiB0aGlzLnlpKHQsIGkpO1xuICAgIH1cbiAgICBkZXRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICB0aGlzLmJpKGkpO1xuICAgICAgICByZXR1cm4gdGhpcy5raSh0LCBpKTtcbiAgICB9XG4gICAgaXRlbXNDaGFuZ2VkKHQpIHtcbiAgICAgICAgY29uc3QgeyRjb250cm9sbGVyOiBlfSA9IHRoaXM7XG4gICAgICAgIGlmICghZS5pc0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgICB0IHw9IGUuZmxhZ3M7XG4gICAgICAgIHRoaXMuYmkodCk7XG4gICAgICAgIHRoaXMueGkodCk7XG4gICAgICAgIGNvbnN0IGkgPSBDKHRoaXMua2kobnVsbCwgdCksICgoKSA9PiB0aGlzLnlpKG51bGwsIHQpKSk7XG4gICAgICAgIGlmIChpIGluc3RhbmNlb2YgUHJvbWlzZSkgaS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aHJvdyB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UodCwgZSkge1xuICAgICAgICBjb25zdCB7JGNvbnRyb2xsZXI6IGl9ID0gdGhpcztcbiAgICAgICAgaWYgKCFpLmlzQWN0aXZlKSByZXR1cm47XG4gICAgICAgIGlmICh0aGlzLmRpKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5taSkgcmV0dXJuO1xuICAgICAgICAgICAgdGhpcy5taSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLml0ZW1zID0gdGhpcy5mb3JPZi5pdGVyYWJsZS5ldmFsdWF0ZShlLCBpLnNjb3BlLCB0aGlzLndpLmxvY2F0b3IsIG51bGwpO1xuICAgICAgICAgICAgdGhpcy5taSA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGUgfD0gaS5mbGFncztcbiAgICAgICAgdGhpcy54aShlKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IEModGhpcy5raShudWxsLCBlKSwgKCgpID0+IHRoaXMueWkobnVsbCwgZSkpKTtcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgUHJvbWlzZSkgdC5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnZpZXdzLmxlbmd0aDtcbiAgICAgICAgICAgIGV0KHQpO1xuICAgICAgICAgICAgaWYgKHQuZGVsZXRlZEl0ZW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICB0LmRlbGV0ZWRJdGVtcy5zb3J0KEkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBDKHRoaXMuQ2kodCwgZSksICgoKSA9PiB0aGlzLkFpKGksIHQsIGUpKSk7XG4gICAgICAgICAgICAgICAgaWYgKHMgaW5zdGFuY2VvZiBQcm9taXNlKSBzLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9IGVsc2UgdGhpcy5BaShpLCB0LCBlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBiaSh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBjb25zdCBpID0gdGhpcy4kY29udHJvbGxlci5zY29wZTtcbiAgICAgICAgbGV0IHMgPSB0aGlzLlNpO1xuICAgICAgICBsZXQgbiA9IHRoaXMuZGk7XG4gICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICBzID0gdGhpcy5TaSA9IG51bGwgIT09IChlID0gdGhpcy52aS5ldmFsdWF0ZSh0LCBpLCB0aGlzLndpLmxvY2F0b3IsIG51bGwpKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogbnVsbDtcbiAgICAgICAgICAgIG4gPSB0aGlzLmRpID0gIU9iamVjdC5pcyh0aGlzLml0ZW1zLCBzKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByID0gdGhpcy5maTtcbiAgICAgICAgaWYgKDQgJiB0KSB7XG4gICAgICAgICAgICBpZiAodm9pZCAwICE9PSByKSByLnVuc3Vic2NyaWJlKHRoaXMpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuJGNvbnRyb2xsZXIuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmZpID0gaXQobiA/IHMgOiB0aGlzLml0ZW1zKTtcbiAgICAgICAgICAgIGlmIChyICE9PSB0ICYmIHIpIHIudW5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgICAgICBpZiAodCkgdC5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgeGkodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5pdGVtcztcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgdGhpcy5waSA9IGU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgaSA9IHRoaXMuZm9yT2Y7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGkpIHJldHVybjtcbiAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICB0aGlzLmZvck9mLml0ZXJhdGUodCwgZSwgKCh0LCBlLCBpKSA9PiB7XG4gICAgICAgICAgICBzW2VdID0gaTtcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLnBpID0gcztcbiAgICB9XG4gICAgeWkodCwgZSkge1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgY29uc3QgeyRjb250cm9sbGVyOiBvLCBmOiBsLCBsb2NhbDogaCwgbDogYSwgaXRlbXM6IGN9ID0gdGhpcztcbiAgICAgICAgY29uc3QgdSA9IG8uc2NvcGU7XG4gICAgICAgIGNvbnN0IGYgPSB0aGlzLmZvck9mO1xuICAgICAgICBjb25zdCBkID0gZi5jb3VudChlLCBjKTtcbiAgICAgICAgY29uc3QgbSA9IHRoaXMudmlld3MgPSBBcnJheShkKTtcbiAgICAgICAgZi5pdGVyYXRlKGUsIGMsICgoYywgdiwgcCkgPT4ge1xuICAgICAgICAgICAgbiA9IG1bdl0gPSBsLmNyZWF0ZSgpLnNldExvY2F0aW9uKGEpO1xuICAgICAgICAgICAgbi5ub2Rlcy51bmxpbmsoKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmdpKSBmLmRlY2xhcmF0aW9uLmFzc2lnbihlLCByID0gVS5mcm9tUGFyZW50KHUsIHN0LmNyZWF0ZSgpKSwgdGhpcy53aS5sb2NhdG9yLCBwKTsgZWxzZSByID0gVS5mcm9tUGFyZW50KHUsIHN0LmNyZWF0ZShoLCBwKSk7XG4gICAgICAgICAgICBScihyLm92ZXJyaWRlQ29udGV4dCwgdiwgZCk7XG4gICAgICAgICAgICBzID0gbi5hY3RpdmF0ZShudWxsICE9PSB0ICYmIHZvaWQgMCAhPT0gdCA/IHQgOiBuLCBvLCBlLCByKTtcbiAgICAgICAgICAgIGlmIChzIGluc3RhbmNlb2YgUHJvbWlzZSkgKG51bGwgIT09IGkgJiYgdm9pZCAwICE9PSBpID8gaSA6IGkgPSBbXSkucHVzaChzKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBpKSByZXR1cm4gMSA9PT0gaS5sZW5ndGggPyBpWzBdIDogUHJvbWlzZS5hbGwoaSk7XG4gICAgfVxuICAgIGtpKHQsIGUpIHtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGxldCBzO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbGV0IHIgPSAwO1xuICAgICAgICBjb25zdCB7dmlld3M6IG8sICRjb250cm9sbGVyOiBsfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGggPSBvLmxlbmd0aDtcbiAgICAgICAgZm9yICg7aCA+IHI7ICsrcikge1xuICAgICAgICAgICAgbiA9IG9bcl07XG4gICAgICAgICAgICBuLnJlbGVhc2UoKTtcbiAgICAgICAgICAgIHMgPSBuLmRlYWN0aXZhdGUobnVsbCAhPT0gdCAmJiB2b2lkIDAgIT09IHQgPyB0IDogbiwgbCwgZSk7XG4gICAgICAgICAgICBpZiAocyBpbnN0YW5jZW9mIFByb21pc2UpIChudWxsICE9PSBpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiBpID0gW10pLnB1c2gocyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gaSkgcmV0dXJuIDEgPT09IGkubGVuZ3RoID8gaVswXSA6IFByb21pc2UuYWxsKGkpO1xuICAgIH1cbiAgICBDaSh0LCBlKSB7XG4gICAgICAgIGxldCBpO1xuICAgICAgICBsZXQgcztcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGNvbnN0IHskY29udHJvbGxlcjogciwgdmlld3M6IG99ID0gdGhpcztcbiAgICAgICAgY29uc3QgbCA9IHQuZGVsZXRlZEl0ZW1zO1xuICAgICAgICBjb25zdCBoID0gbC5sZW5ndGg7XG4gICAgICAgIGxldCBhID0gMDtcbiAgICAgICAgZm9yICg7aCA+IGE7ICsrYSkge1xuICAgICAgICAgICAgbiA9IG9bbFthXV07XG4gICAgICAgICAgICBuLnJlbGVhc2UoKTtcbiAgICAgICAgICAgIHMgPSBuLmRlYWN0aXZhdGUobiwgciwgZSk7XG4gICAgICAgICAgICBpZiAocyBpbnN0YW5jZW9mIFByb21pc2UpIChudWxsICE9PSBpICYmIHZvaWQgMCAhPT0gaSA/IGkgOiBpID0gW10pLnB1c2gocyk7XG4gICAgICAgIH1cbiAgICAgICAgYSA9IDA7XG4gICAgICAgIGxldCBjID0gMDtcbiAgICAgICAgZm9yICg7aCA+IGE7ICsrYSkge1xuICAgICAgICAgICAgYyA9IGxbYV0gLSBhO1xuICAgICAgICAgICAgby5zcGxpY2UoYywgMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gaSkgcmV0dXJuIDEgPT09IGkubGVuZ3RoID8gaVswXSA6IFByb21pc2UuYWxsKGkpO1xuICAgIH1cbiAgICBBaSh0LCBlLCBpKSB7XG4gICAgICAgIHZhciBzO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIGxldCBvO1xuICAgICAgICBsZXQgbDtcbiAgICAgICAgbGV0IGggPSAwO1xuICAgICAgICBjb25zdCB7JGNvbnRyb2xsZXI6IGEsIGY6IGMsIGxvY2FsOiB1LCBwaTogZiwgbDogZCwgdmlld3M6IG19ID0gdGhpcztcbiAgICAgICAgY29uc3QgdiA9IGUubGVuZ3RoO1xuICAgICAgICBmb3IgKDt2ID4gaDsgKytoKSBpZiAoLTIgPT09IGVbaF0pIHtcbiAgICAgICAgICAgIG8gPSBjLmNyZWF0ZSgpO1xuICAgICAgICAgICAgbS5zcGxpY2UoaCwgMCwgbyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG0ubGVuZ3RoICE9PSB2KSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA4MTQ6JHttLmxlbmd0aH0hPSR7dn1gKTtcbiAgICAgICAgY29uc3QgcCA9IGEuc2NvcGU7XG4gICAgICAgIGNvbnN0IGcgPSBlLmxlbmd0aDtcbiAgICAgICAgbnQobSwgZSk7XG4gICAgICAgIGNvbnN0IHcgPSBTcihlKTtcbiAgICAgICAgY29uc3QgYiA9IHcubGVuZ3RoO1xuICAgICAgICBsZXQgeDtcbiAgICAgICAgbGV0IHkgPSBiIC0gMTtcbiAgICAgICAgaCA9IGcgLSAxO1xuICAgICAgICBmb3IgKDtoID49IDA7IC0taCkge1xuICAgICAgICAgICAgbyA9IG1baF07XG4gICAgICAgICAgICB4ID0gbVtoICsgMV07XG4gICAgICAgICAgICBvLm5vZGVzLmxpbmsobnVsbCAhPT0gKHMgPSBudWxsID09PSB4IHx8IHZvaWQgMCA9PT0geCA/IHZvaWQgMCA6IHgubm9kZXMpICYmIHZvaWQgMCAhPT0gcyA/IHMgOiBkKTtcbiAgICAgICAgICAgIGlmICgtMiA9PT0gZVtoXSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmdpKSB0aGlzLmZvck9mLmRlY2xhcmF0aW9uLmFzc2lnbihpLCBsID0gVS5mcm9tUGFyZW50KHAsIHN0LmNyZWF0ZSgpKSwgdGhpcy53aS5sb2NhdG9yLCBmW2hdKTsgZWxzZSBsID0gVS5mcm9tUGFyZW50KHAsIHN0LmNyZWF0ZSh1LCBmW2hdKSk7XG4gICAgICAgICAgICAgICAgUnIobC5vdmVycmlkZUNvbnRleHQsIGgsIGcpO1xuICAgICAgICAgICAgICAgIG8uc2V0TG9jYXRpb24oZCk7XG4gICAgICAgICAgICAgICAgciA9IG8uYWN0aXZhdGUobywgYSwgaSwgbCk7XG4gICAgICAgICAgICAgICAgaWYgKHIgaW5zdGFuY2VvZiBQcm9taXNlKSAobnVsbCAhPT0gbiAmJiB2b2lkIDAgIT09IG4gPyBuIDogbiA9IFtdKS5wdXNoKHIpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh5IDwgMCB8fCAxID09PSBiIHx8IGggIT09IHdbeV0pIHtcbiAgICAgICAgICAgICAgICBScihvLnNjb3BlLm92ZXJyaWRlQ29udGV4dCwgaCwgZyk7XG4gICAgICAgICAgICAgICAgby5ub2Rlcy5pbnNlcnRCZWZvcmUoby5sb2NhdGlvbik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICh0ICE9PSBnKSBScihvLnNjb3BlLm92ZXJyaWRlQ29udGV4dCwgaCwgZyk7XG4gICAgICAgICAgICAgICAgLS15O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG4pIHJldHVybiAxID09PSBuLmxlbmd0aCA/IG5bMF0gOiBQcm9taXNlLmFsbChuKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdGhpcy52aWV3cy5mb3JFYWNoKHhyKTtcbiAgICAgICAgdGhpcy52aWV3cyA9IHZvaWQgMDtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgY29uc3Qge3ZpZXdzOiBlfSA9IHRoaXM7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IGUpIGZvciAobGV0IGkgPSAwLCBzID0gZS5sZW5ndGg7IGkgPCBzOyArK2kpIGlmICh0cnVlID09PSBlW2ldLmFjY2VwdCh0KSkgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuXG5SZXBlYXQuaW5qZWN0ID0gWyBvcywgWGksIEFpIF07XG5cbm90KFsgU3QgXSwgUmVwZWF0LnByb3RvdHlwZSwgXCJpdGVtc1wiLCB2b2lkIDApO1xuXG5PZShcInJlcGVhdFwiKShSZXBlYXQpO1xuXG5sZXQga3IgPSAxNjtcblxubGV0IENyID0gbmV3IEludDMyQXJyYXkoa3IpO1xuXG5sZXQgQXIgPSBuZXcgSW50MzJBcnJheShrcik7XG5cbmZ1bmN0aW9uIFNyKHQpIHtcbiAgICBjb25zdCBlID0gdC5sZW5ndGg7XG4gICAgaWYgKGUgPiBrcikge1xuICAgICAgICBrciA9IGU7XG4gICAgICAgIENyID0gbmV3IEludDMyQXJyYXkoZSk7XG4gICAgICAgIEFyID0gbmV3IEludDMyQXJyYXkoZSk7XG4gICAgfVxuICAgIGxldCBpID0gMDtcbiAgICBsZXQgcyA9IDA7XG4gICAgbGV0IG4gPSAwO1xuICAgIGxldCByID0gMDtcbiAgICBsZXQgbyA9IDA7XG4gICAgbGV0IGwgPSAwO1xuICAgIGxldCBoID0gMDtcbiAgICBsZXQgYSA9IDA7XG4gICAgZm9yICg7ciA8IGU7IHIrKykge1xuICAgICAgICBzID0gdFtyXTtcbiAgICAgICAgaWYgKC0yICE9PSBzKSB7XG4gICAgICAgICAgICBvID0gQ3JbaV07XG4gICAgICAgICAgICBuID0gdFtvXTtcbiAgICAgICAgICAgIGlmICgtMiAhPT0gbiAmJiBuIDwgcykge1xuICAgICAgICAgICAgICAgIEFyW3JdID0gbztcbiAgICAgICAgICAgICAgICBDclsrK2ldID0gcjtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGwgPSAwO1xuICAgICAgICAgICAgaCA9IGk7XG4gICAgICAgICAgICB3aGlsZSAobCA8IGgpIHtcbiAgICAgICAgICAgICAgICBhID0gbCArIGggPj4gMTtcbiAgICAgICAgICAgICAgICBuID0gdFtDclthXV07XG4gICAgICAgICAgICAgICAgaWYgKC0yICE9PSBuICYmIG4gPCBzKSBsID0gYSArIDE7IGVsc2UgaCA9IGE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBuID0gdFtDcltsXV07XG4gICAgICAgICAgICBpZiAocyA8IG4gfHwgLTIgPT09IG4pIHtcbiAgICAgICAgICAgICAgICBpZiAobCA+IDApIEFyW3JdID0gQ3JbbCAtIDFdO1xuICAgICAgICAgICAgICAgIENyW2xdID0gcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByID0gKytpO1xuICAgIGNvbnN0IGMgPSBuZXcgSW50MzJBcnJheShyKTtcbiAgICBzID0gQ3JbaSAtIDFdO1xuICAgIHdoaWxlIChpLS0gPiAwKSB7XG4gICAgICAgIGNbaV0gPSBzO1xuICAgICAgICBzID0gQXJbc107XG4gICAgfVxuICAgIHdoaWxlIChyLS0gPiAwKSBDcltyXSA9IDA7XG4gICAgcmV0dXJuIGM7XG59XG5cbmZ1bmN0aW9uIFJyKHQsIGUsIGkpIHtcbiAgICBjb25zdCBzID0gMCA9PT0gZTtcbiAgICBjb25zdCBuID0gZSA9PT0gaSAtIDE7XG4gICAgY29uc3QgciA9IGUgJSAyID09PSAwO1xuICAgIHQuJGluZGV4ID0gZTtcbiAgICB0LiRmaXJzdCA9IHM7XG4gICAgdC4kbGFzdCA9IG47XG4gICAgdC4kbWlkZGxlID0gIXMgJiYgIW47XG4gICAgdC4kZXZlbiA9IHI7XG4gICAgdC4kb2RkID0gIXI7XG4gICAgdC4kbGVuZ3RoID0gaTtcbn1cblxuY2xhc3MgV2l0aCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmlkID0gdyhcImF1JGNvbXBvbmVudFwiKTtcbiAgICAgICAgdGhpcy5pZCA9IHcoXCJhdSRjb21wb25lbnRcIik7XG4gICAgICAgIHRoaXMudmlldyA9IHQuY3JlYXRlKCkuc2V0TG9jYXRpb24oZSk7XG4gICAgfVxuICAgIHZhbHVlQ2hhbmdlZCh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLiRjb250cm9sbGVyO1xuICAgICAgICBjb25zdCBuID0gdGhpcy52aWV3LmJpbmRpbmdzO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgbGV0IG8gPSAwLCBsID0gMDtcbiAgICAgICAgaWYgKHMuaXNBY3RpdmUgJiYgbnVsbCAhPSBuKSB7XG4gICAgICAgICAgICByID0gVS5mcm9tUGFyZW50KHMuc2NvcGUsIHZvaWQgMCA9PT0gdCA/IHt9IDogdCk7XG4gICAgICAgICAgICBmb3IgKGwgPSBuLmxlbmd0aDsgbCA+IG87ICsrbykgbltvXS4kYmluZCgyLCByKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhdHRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICBjb25zdCB7JGNvbnRyb2xsZXI6IHMsIHZhbHVlOiBufSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHIgPSBVLmZyb21QYXJlbnQocy5zY29wZSwgdm9pZCAwID09PSBuID8ge30gOiBuKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlldy5hY3RpdmF0ZSh0LCBzLCBpLCByKTtcbiAgICB9XG4gICAgZGV0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlldy5kZWFjdGl2YXRlKHQsIHRoaXMuJGNvbnRyb2xsZXIsIGkpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLnZpZXcuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLnZpZXcgPSB2b2lkIDA7XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBpZiAodHJ1ZSA9PT0gKG51bGwgPT09IChlID0gdGhpcy52aWV3KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmFjY2VwdCh0KSkpIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxuV2l0aC5pbmplY3QgPSBbIEFpLCBvcyBdO1xuXG5vdChbIFN0IF0sIFdpdGgucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG5cbk9lKFwid2l0aFwiKShXaXRoKTtcblxubGV0IEVyID0gY2xhc3MgU3dpdGNoIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZiA9IHQ7XG4gICAgICAgIHRoaXMubCA9IGU7XG4gICAgICAgIHRoaXMuaWQgPSB3KFwiYXUkY29tcG9uZW50XCIpO1xuICAgICAgICB0aGlzLmNhc2VzID0gW107XG4gICAgICAgIHRoaXMuYWN0aXZlQ2FzZXMgPSBbXTtcbiAgICAgICAgdGhpcy5wcm9taXNlID0gdm9pZCAwO1xuICAgIH1cbiAgICBsaW5rKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdGhpcy52aWV3ID0gdGhpcy5mLmNyZWF0ZSh0aGlzLiRjb250cm9sbGVyKS5zZXRMb2NhdGlvbih0aGlzLmwpO1xuICAgIH1cbiAgICBhdHRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy52aWV3O1xuICAgICAgICBjb25zdCBuID0gdGhpcy4kY29udHJvbGxlcjtcbiAgICAgICAgdGhpcy5xdWV1ZSgoKCkgPT4gcy5hY3RpdmF0ZSh0LCBuLCBpLCBuLnNjb3BlKSkpO1xuICAgICAgICB0aGlzLnF1ZXVlKCgoKSA9PiB0aGlzLnN3YXAodCwgaSwgdGhpcy52YWx1ZSkpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvbWlzZTtcbiAgICB9XG4gICAgZGV0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy5xdWV1ZSgoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMudmlldztcbiAgICAgICAgICAgIHJldHVybiBlLmRlYWN0aXZhdGUodCwgdGhpcy4kY29udHJvbGxlciwgaSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvbWlzZTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIG51bGwgPT09ICh0ID0gdGhpcy52aWV3KSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy52aWV3ID0gdm9pZCAwO1xuICAgIH1cbiAgICB2YWx1ZUNoYW5nZWQodCwgZSwgaSkge1xuICAgICAgICBpZiAoIXRoaXMuJGNvbnRyb2xsZXIuaXNBY3RpdmUpIHJldHVybjtcbiAgICAgICAgdGhpcy5xdWV1ZSgoKCkgPT4gdGhpcy5zd2FwKG51bGwsIGksIHRoaXMudmFsdWUpKSk7XG4gICAgfVxuICAgIGNhc2VDaGFuZ2VkKHQsIGUpIHtcbiAgICAgICAgdGhpcy5xdWV1ZSgoKCkgPT4gdGhpcy5SaSh0LCBlKSkpO1xuICAgIH1cbiAgICBSaSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0LmlzTWF0Y2godGhpcy52YWx1ZSwgZSk7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmFjdGl2ZUNhc2VzO1xuICAgICAgICBjb25zdCBuID0gcy5sZW5ndGg7XG4gICAgICAgIGlmICghaSkge1xuICAgICAgICAgICAgaWYgKG4gPiAwICYmIHNbMF0uaWQgPT09IHQuaWQpIHJldHVybiB0aGlzLkVpKG51bGwsIGUpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmIChuID4gMCAmJiBzWzBdLmlkIDwgdC5pZCkgcmV0dXJuO1xuICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgIGxldCBvID0gdC5mYWxsVGhyb3VnaDtcbiAgICAgICAgaWYgKCFvKSByLnB1c2godCk7IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuY2FzZXM7XG4gICAgICAgICAgICBjb25zdCBpID0gZS5pbmRleE9mKHQpO1xuICAgICAgICAgICAgZm9yIChsZXQgdCA9IGksIHMgPSBlLmxlbmd0aDsgdCA8IHMgJiYgbzsgdCsrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IGVbdF07XG4gICAgICAgICAgICAgICAgci5wdXNoKGkpO1xuICAgICAgICAgICAgICAgIG8gPSBpLmZhbGxUaHJvdWdoO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBDKHRoaXMuRWkobnVsbCwgZSwgciksICgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUNhc2VzID0gcjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkJpKG51bGwsIGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN3YXAodCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIGxldCBuID0gZmFsc2U7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLmNhc2VzKSB7XG4gICAgICAgICAgICBpZiAobiB8fCB0LmlzTWF0Y2goaSwgZSkpIHtcbiAgICAgICAgICAgICAgICBzLnB1c2godCk7XG4gICAgICAgICAgICAgICAgbiA9IHQuZmFsbFRocm91Z2g7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocy5sZW5ndGggPiAwICYmICFuKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByID0gdGhpcy5kZWZhdWx0Q2FzZTtcbiAgICAgICAgaWYgKDAgPT09IHMubGVuZ3RoICYmIHZvaWQgMCAhPT0gcikgcy5wdXNoKHIpO1xuICAgICAgICByZXR1cm4gQyh0aGlzLmFjdGl2ZUNhc2VzLmxlbmd0aCA+IDAgPyB0aGlzLkVpKHQsIGUsIHMpIDogdm9pZCAwLCAoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVDYXNlcyA9IHM7XG4gICAgICAgICAgICBpZiAoMCA9PT0gcy5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkJpKHQsIGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIEJpKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuJGNvbnRyb2xsZXI7XG4gICAgICAgIGlmICghaS5pc0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5hY3RpdmVDYXNlcztcbiAgICAgICAgY29uc3QgbiA9IHMubGVuZ3RoO1xuICAgICAgICBpZiAoMCA9PT0gbikgcmV0dXJuO1xuICAgICAgICBjb25zdCByID0gaS5zY29wZTtcbiAgICAgICAgaWYgKDEgPT09IG4pIHJldHVybiBzWzBdLmFjdGl2YXRlKHQsIGUsIHIpO1xuICAgICAgICByZXR1cm4gQSguLi5zLm1hcCgoaSA9PiBpLmFjdGl2YXRlKHQsIGUsIHIpKSkpO1xuICAgIH1cbiAgICBFaSh0LCBlLCBpID0gW10pIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuYWN0aXZlQ2FzZXM7XG4gICAgICAgIGNvbnN0IG4gPSBzLmxlbmd0aDtcbiAgICAgICAgaWYgKDAgPT09IG4pIHJldHVybjtcbiAgICAgICAgaWYgKDEgPT09IG4pIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBzWzBdO1xuICAgICAgICAgICAgaWYgKCFpLmluY2x1ZGVzKG4pKSB7XG4gICAgICAgICAgICAgICAgcy5sZW5ndGggPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLmRlYWN0aXZhdGUodCwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEMoQSguLi5zLnJlZHVjZSgoKHMsIG4pID0+IHtcbiAgICAgICAgICAgIGlmICghaS5pbmNsdWRlcyhuKSkgcy5wdXNoKG4uZGVhY3RpdmF0ZSh0LCBlKSk7XG4gICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgfSksIFtdKSksICgoKSA9PiB7XG4gICAgICAgICAgICBzLmxlbmd0aCA9IDA7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgcXVldWUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5wcm9taXNlO1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgaSA9IHRoaXMucHJvbWlzZSA9IEMoQyhlLCB0KSwgKCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb21pc2UgPT09IGkpIHRoaXMucHJvbWlzZSA9IHZvaWQgMDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICBpZiAodHJ1ZSA9PT0gdGhpcy4kY29udHJvbGxlci5hY2NlcHQodCkpIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAodGhpcy5hY3RpdmVDYXNlcy5zb21lKChlID0+IGUuYWNjZXB0KHQpKSkpIHJldHVybiB0cnVlO1xuICAgIH1cbn07XG5cbm90KFsgU3QgXSwgRXIucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG5cbkVyID0gb3QoWyBPZShcInN3aXRjaFwiKSwgbHQoMCwgQWkpLCBsdCgxLCBvcykgXSwgRXIpO1xuXG5sZXQgQnIgPSBjbGFzcyBDYXNlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzKSB7XG4gICAgICAgIHRoaXMuSWkgPSBlO1xuICAgICAgICB0aGlzLmlkID0gdyhcImF1JGNvbXBvbmVudFwiKTtcbiAgICAgICAgdGhpcy5mYWxsVGhyb3VnaCA9IGZhbHNlO1xuICAgICAgICB0aGlzLlRpID0gcy5jb25maWcubGV2ZWwgPD0gMTtcbiAgICAgICAgdGhpcy5GdCA9IHMuc2NvcGVUbyhgJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9LSMke3RoaXMuaWR9YCk7XG4gICAgICAgIHRoaXMudmlldyA9IHQuY3JlYXRlKCkuc2V0TG9jYXRpb24oaSk7XG4gICAgfVxuICAgIGxpbmsodCwgZSwgaSwgcykge1xuICAgICAgICBjb25zdCBuID0gdC5wYXJlbnQ7XG4gICAgICAgIGNvbnN0IHIgPSBudWxsID09PSBuIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4udmlld01vZGVsO1xuICAgICAgICBpZiAociBpbnN0YW5jZW9mIEVyKSB7XG4gICAgICAgICAgICB0aGlzLiRzd2l0Y2ggPSByO1xuICAgICAgICAgICAgdGhpcy5saW5rVG9Td2l0Y2gocik7XG4gICAgICAgIH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwODE1XCIpO1xuICAgIH1cbiAgICBkZXRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWFjdGl2YXRlKHQsIGkpO1xuICAgIH1cbiAgICBpc01hdGNoKHQsIGUpIHtcbiAgICAgICAgdGhpcy5GdC5kZWJ1ZyhcImlzTWF0Y2goKVwiKTtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudmFsdWU7XG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KGkpKSB7XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSB0aGlzLmZpKSB0aGlzLmZpID0gdGhpcy5EaShlLCBpKTtcbiAgICAgICAgICAgIHJldHVybiBpLmluY2x1ZGVzKHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpID09PSB0O1xuICAgIH1cbiAgICB2YWx1ZUNoYW5nZWQodCwgZSwgaSkge1xuICAgICAgICB2YXIgcztcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodCkpIHtcbiAgICAgICAgICAgIG51bGwgPT09IChzID0gdGhpcy5maSkgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy51bnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuZmkgPSB0aGlzLkRpKGksIHQpO1xuICAgICAgICB9IGVsc2UgaWYgKHZvaWQgMCAhPT0gdGhpcy5maSkgdGhpcy5maS51bnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgdGhpcy4kc3dpdGNoLmNhc2VDaGFuZ2VkKHRoaXMsIGkpO1xuICAgIH1cbiAgICBoYW5kbGVDb2xsZWN0aW9uQ2hhbmdlKHQsIGUpIHtcbiAgICAgICAgdGhpcy4kc3dpdGNoLmNhc2VDaGFuZ2VkKHRoaXMsIGUpO1xuICAgIH1cbiAgICBhY3RpdmF0ZSh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnZpZXc7XG4gICAgICAgIGlmIChzLmlzQWN0aXZlKSByZXR1cm47XG4gICAgICAgIHJldHVybiBzLmFjdGl2YXRlKG51bGwgIT09IHQgJiYgdm9pZCAwICE9PSB0ID8gdCA6IHMsIHRoaXMuJGNvbnRyb2xsZXIsIGUsIGkpO1xuICAgIH1cbiAgICBkZWFjdGl2YXRlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudmlldztcbiAgICAgICAgaWYgKCFpLmlzQWN0aXZlKSByZXR1cm47XG4gICAgICAgIHJldHVybiBpLmRlYWN0aXZhdGUobnVsbCAhPT0gdCAmJiB2b2lkIDAgIT09IHQgPyB0IDogaSwgdGhpcy4kY29udHJvbGxlciwgZSk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHZhciB0LCBlO1xuICAgICAgICBudWxsID09PSAodCA9IHRoaXMuZmkpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQudW5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgIG51bGwgPT09IChlID0gdGhpcy52aWV3KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy52aWV3ID0gdm9pZCAwO1xuICAgIH1cbiAgICBsaW5rVG9Td2l0Y2godCkge1xuICAgICAgICB0LmNhc2VzLnB1c2godGhpcyk7XG4gICAgfVxuICAgIERpKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuSWkuZ2V0QXJyYXlPYnNlcnZlcihlKTtcbiAgICAgICAgaS5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgaWYgKHRydWUgPT09IHRoaXMuJGNvbnRyb2xsZXIuYWNjZXB0KHQpKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgcmV0dXJuIG51bGwgPT09IChlID0gdGhpcy52aWV3KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmFjY2VwdCh0KTtcbiAgICB9XG59O1xuXG5Cci5pbmplY3QgPSBbIEFpLCBWLCBvcywgayBdO1xuXG5vdChbIFN0IF0sIEJyLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuXG5vdChbIFN0KHtcbiAgICBzZXQ6IHQgPT4ge1xuICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICBjYXNlIFwidHJ1ZVwiOlxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICAgICAgICBjYXNlIFwiZmFsc2VcIjpcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gISF0O1xuICAgICAgICB9XG4gICAgfSxcbiAgICBtb2RlOiBELm9uZVRpbWVcbn0pIF0sIEJyLnByb3RvdHlwZSwgXCJmYWxsVGhyb3VnaFwiLCB2b2lkIDApO1xuXG5CciA9IG90KFsgT2UoXCJjYXNlXCIpIF0sIEJyKTtcblxubGV0IElyID0gY2xhc3MgRGVmYXVsdENhc2UgZXh0ZW5kcyBCciB7XG4gICAgbGlua1RvU3dpdGNoKHQpIHtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gdC5kZWZhdWx0Q2FzZSkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDgxNlwiKTtcbiAgICAgICAgdC5kZWZhdWx0Q2FzZSA9IHRoaXM7XG4gICAgfVxufTtcblxuSXIgPSBvdChbIE9lKFwiZGVmYXVsdC1jYXNlXCIpIF0sIElyKTtcblxubGV0IFRyID0gY2xhc3MgUHJvbWlzZVRlbXBsYXRlQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcykge1xuICAgICAgICB0aGlzLmYgPSB0O1xuICAgICAgICB0aGlzLmwgPSBlO1xuICAgICAgICB0aGlzLnAgPSBpO1xuICAgICAgICB0aGlzLmlkID0gdyhcImF1JGNvbXBvbmVudFwiKTtcbiAgICAgICAgdGhpcy5wcmVTZXR0bGVkVGFzayA9IG51bGw7XG4gICAgICAgIHRoaXMucG9zdFNldHRsZWRUYXNrID0gbnVsbDtcbiAgICAgICAgdGhpcy5sb2dnZXIgPSBzLnNjb3BlVG8oXCJwcm9taXNlLnJlc29sdmVcIik7XG4gICAgfVxuICAgIGxpbmsodCwgZSwgaSwgcykge1xuICAgICAgICB0aGlzLnZpZXcgPSB0aGlzLmYuY3JlYXRlKHRoaXMuJGNvbnRyb2xsZXIpLnNldExvY2F0aW9uKHRoaXMubCk7XG4gICAgfVxuICAgIGF0dGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnZpZXc7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLiRjb250cm9sbGVyO1xuICAgICAgICByZXR1cm4gQyhzLmFjdGl2YXRlKHQsIG4sIGksIHRoaXMudmlld1Njb3BlID0gVS5mcm9tUGFyZW50KG4uc2NvcGUsIHt9KSksICgoKSA9PiB0aGlzLnN3YXAodCwgaSkpKTtcbiAgICB9XG4gICAgdmFsdWVDaGFuZ2VkKHQsIGUsIGkpIHtcbiAgICAgICAgaWYgKCF0aGlzLiRjb250cm9sbGVyLmlzQWN0aXZlKSByZXR1cm47XG4gICAgICAgIHRoaXMuc3dhcChudWxsLCBpKTtcbiAgICB9XG4gICAgc3dhcCh0LCBlKSB7XG4gICAgICAgIHZhciBpLCBzO1xuICAgICAgICBjb25zdCBuID0gdGhpcy52YWx1ZTtcbiAgICAgICAgaWYgKCEobiBpbnN0YW5jZW9mIFByb21pc2UpKSB7XG4gICAgICAgICAgICB0aGlzLmxvZ2dlci53YXJuKGBUaGUgdmFsdWUgJyR7U3RyaW5nKG4pfScgaXMgbm90IGEgcHJvbWlzZS4gTm8gY2hhbmdlIHdpbGwgYmUgZG9uZS5gKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByID0gdGhpcy5wLmRvbVdyaXRlUXVldWU7XG4gICAgICAgIGNvbnN0IG8gPSB0aGlzLmZ1bGZpbGxlZDtcbiAgICAgICAgY29uc3QgbCA9IHRoaXMucmVqZWN0ZWQ7XG4gICAgICAgIGNvbnN0IGggPSB0aGlzLnBlbmRpbmc7XG4gICAgICAgIGNvbnN0IGEgPSB0aGlzLnZpZXdTY29wZTtcbiAgICAgICAgbGV0IGM7XG4gICAgICAgIGNvbnN0IHUgPSB7XG4gICAgICAgICAgICByZXVzYWJsZTogZmFsc2VcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZiA9ICgpID0+IHtcbiAgICAgICAgICAgIHZvaWQgQShjID0gKHRoaXMucHJlU2V0dGxlZFRhc2sgPSByLnF1ZXVlVGFzaygoKCkgPT4gQShudWxsID09PSBvIHx8IHZvaWQgMCA9PT0gbyA/IHZvaWQgMCA6IG8uZGVhY3RpdmF0ZSh0LCBlKSwgbnVsbCA9PT0gbCB8fCB2b2lkIDAgPT09IGwgPyB2b2lkIDAgOiBsLmRlYWN0aXZhdGUodCwgZSksIG51bGwgPT09IGggfHwgdm9pZCAwID09PSBoID8gdm9pZCAwIDogaC5hY3RpdmF0ZSh0LCBlLCBhKSkpLCB1KSkucmVzdWx0LCBuLnRoZW4oKGkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZhbHVlICE9PSBuKSByZXR1cm47XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0U2V0dGxlUHJvbWlzZSA9ICh0aGlzLnBvc3RTZXR0bGVkVGFzayA9IHIucXVldWVUYXNrKCgoKSA9PiBBKG51bGwgPT09IGggfHwgdm9pZCAwID09PSBoID8gdm9pZCAwIDogaC5kZWFjdGl2YXRlKHQsIGUpLCBudWxsID09PSBsIHx8IHZvaWQgMCA9PT0gbCA/IHZvaWQgMCA6IGwuZGVhY3RpdmF0ZSh0LCBlKSwgbnVsbCA9PT0gbyB8fCB2b2lkIDAgPT09IG8gPyB2b2lkIDAgOiBvLmFjdGl2YXRlKHQsIGUsIGEsIGkpKSksIHUpKS5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpZiAoMSA9PT0gdGhpcy5wcmVTZXR0bGVkVGFzay5zdGF0dXMpIHZvaWQgYy50aGVuKHMpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVTZXR0bGVkVGFzay5jYW5jZWwoKTtcbiAgICAgICAgICAgICAgICAgICAgcygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLCAoaSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmFsdWUgIT09IG4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RTZXR0bGVQcm9taXNlID0gKHRoaXMucG9zdFNldHRsZWRUYXNrID0gci5xdWV1ZVRhc2soKCgpID0+IEEobnVsbCA9PT0gaCB8fCB2b2lkIDAgPT09IGggPyB2b2lkIDAgOiBoLmRlYWN0aXZhdGUodCwgZSksIG51bGwgPT09IG8gfHwgdm9pZCAwID09PSBvID8gdm9pZCAwIDogby5kZWFjdGl2YXRlKHQsIGUpLCBudWxsID09PSBsIHx8IHZvaWQgMCA9PT0gbCA/IHZvaWQgMCA6IGwuYWN0aXZhdGUodCwgZSwgYSwgaSkpKSwgdSkpLnJlc3VsdDtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIGlmICgxID09PSB0aGlzLnByZVNldHRsZWRUYXNrLnN0YXR1cykgdm9pZCBjLnRoZW4ocyk7IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZVNldHRsZWRUYXNrLmNhbmNlbCgpO1xuICAgICAgICAgICAgICAgICAgICBzKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKDEgPT09IChudWxsID09PSAoaSA9IHRoaXMucG9zdFNldHRsZWRUYXNrKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLnN0YXR1cykpIHZvaWQgdGhpcy5wb3N0U2V0dGxlUHJvbWlzZS50aGVuKGYpOyBlbHNlIHtcbiAgICAgICAgICAgIG51bGwgPT09IChzID0gdGhpcy5wb3N0U2V0dGxlZFRhc2spIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuY2FuY2VsKCk7XG4gICAgICAgICAgICBmKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZGV0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgdmFyIHMsIG47XG4gICAgICAgIG51bGwgPT09IChzID0gdGhpcy5wcmVTZXR0bGVkVGFzaykgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5jYW5jZWwoKTtcbiAgICAgICAgbnVsbCA9PT0gKG4gPSB0aGlzLnBvc3RTZXR0bGVkVGFzaykgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5jYW5jZWwoKTtcbiAgICAgICAgdGhpcy5wcmVTZXR0bGVkVGFzayA9IHRoaXMucG9zdFNldHRsZWRUYXNrID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMudmlldy5kZWFjdGl2YXRlKHQsIHRoaXMuJGNvbnRyb2xsZXIsIGkpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgbnVsbCA9PT0gKHQgPSB0aGlzLnZpZXcpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLnZpZXcgPSB2b2lkIDA7XG4gICAgfVxufTtcblxub3QoWyBTdCBdLCBUci5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcblxuVHIgPSBvdChbIE9lKFwicHJvbWlzZVwiKSwgbHQoMCwgQWkpLCBsdCgxLCBvcyksIGx0KDIsIEt0KSwgbHQoMywgaykgXSwgVHIpO1xuXG5sZXQgRHIgPSBjbGFzcyBQZW5kaW5nVGVtcGxhdGVDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IHQ7XG4gICAgICAgIHRoaXMuaWQgPSB3KFwiYXUkY29tcG9uZW50XCIpO1xuICAgICAgICB0aGlzLnZpZXcgPSB0aGlzLmZhY3RvcnkuY3JlYXRlKCkuc2V0TG9jYXRpb24oZSk7XG4gICAgfVxuICAgIGxpbmsodCwgZSwgaSwgcykge1xuICAgICAgICAkcih0KS5wZW5kaW5nID0gdGhpcztcbiAgICB9XG4gICAgYWN0aXZhdGUodCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy52aWV3O1xuICAgICAgICBpZiAocy5pc0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgICByZXR1cm4gcy5hY3RpdmF0ZShzLCB0aGlzLiRjb250cm9sbGVyLCBlLCBpKTtcbiAgICB9XG4gICAgZGVhY3RpdmF0ZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnZpZXc7XG4gICAgICAgIGlmICghaS5pc0FjdGl2ZSkgcmV0dXJuO1xuICAgICAgICByZXR1cm4gaS5kZWFjdGl2YXRlKGksIHRoaXMuJGNvbnRyb2xsZXIsIGUpO1xuICAgIH1cbiAgICBkZXRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWFjdGl2YXRlKHQsIGkpO1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB2YXIgdDtcbiAgICAgICAgbnVsbCA9PT0gKHQgPSB0aGlzLnZpZXcpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLnZpZXcgPSB2b2lkIDA7XG4gICAgfVxufTtcblxub3QoWyBTdCh7XG4gICAgbW9kZTogRC50b1ZpZXdcbn0pIF0sIERyLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuXG5EciA9IG90KFsgT2UoXCJwZW5kaW5nXCIpLCBsdCgwLCBBaSksIGx0KDEsIG9zKSBdLCBEcik7XG5cbmxldCBQciA9IGNsYXNzIEZ1bGZpbGxlZFRlbXBsYXRlQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmZhY3RvcnkgPSB0O1xuICAgICAgICB0aGlzLmlkID0gdyhcImF1JGNvbXBvbmVudFwiKTtcbiAgICAgICAgdGhpcy52aWV3ID0gdGhpcy5mYWN0b3J5LmNyZWF0ZSgpLnNldExvY2F0aW9uKGUpO1xuICAgIH1cbiAgICBsaW5rKHQsIGUsIGksIHMpIHtcbiAgICAgICAgJHIodCkuZnVsZmlsbGVkID0gdGhpcztcbiAgICB9XG4gICAgYWN0aXZhdGUodCwgZSwgaSwgcykge1xuICAgICAgICB0aGlzLnZhbHVlID0gcztcbiAgICAgICAgY29uc3QgbiA9IHRoaXMudmlldztcbiAgICAgICAgaWYgKG4uaXNBY3RpdmUpIHJldHVybjtcbiAgICAgICAgcmV0dXJuIG4uYWN0aXZhdGUobiwgdGhpcy4kY29udHJvbGxlciwgZSwgaSk7XG4gICAgfVxuICAgIGRlYWN0aXZhdGUodCwgZSkge1xuICAgICAgICBjb25zdCBpID0gdGhpcy52aWV3O1xuICAgICAgICBpZiAoIWkuaXNBY3RpdmUpIHJldHVybjtcbiAgICAgICAgcmV0dXJuIGkuZGVhY3RpdmF0ZShpLCB0aGlzLiRjb250cm9sbGVyLCBlKTtcbiAgICB9XG4gICAgZGV0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVhY3RpdmF0ZSh0LCBpKTtcbiAgICB9XG4gICAgZGlzcG9zZSgpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIG51bGwgPT09ICh0ID0gdGhpcy52aWV3KSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmRpc3Bvc2UoKTtcbiAgICAgICAgdGhpcy52aWV3ID0gdm9pZCAwO1xuICAgIH1cbn07XG5cbm90KFsgU3Qoe1xuICAgIG1vZGU6IEQuZnJvbVZpZXdcbn0pIF0sIFByLnByb3RvdHlwZSwgXCJ2YWx1ZVwiLCB2b2lkIDApO1xuXG5QciA9IG90KFsgT2UoXCJ0aGVuXCIpLCBsdCgwLCBBaSksIGx0KDEsIG9zKSBdLCBQcik7XG5cbmxldCBPciA9IGNsYXNzIFJlamVjdGVkVGVtcGxhdGVDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IHQ7XG4gICAgICAgIHRoaXMuaWQgPSB3KFwiYXUkY29tcG9uZW50XCIpO1xuICAgICAgICB0aGlzLnZpZXcgPSB0aGlzLmZhY3RvcnkuY3JlYXRlKCkuc2V0TG9jYXRpb24oZSk7XG4gICAgfVxuICAgIGxpbmsodCwgZSwgaSwgcykge1xuICAgICAgICAkcih0KS5yZWplY3RlZCA9IHRoaXM7XG4gICAgfVxuICAgIGFjdGl2YXRlKHQsIGUsIGksIHMpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHM7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnZpZXc7XG4gICAgICAgIGlmIChuLmlzQWN0aXZlKSByZXR1cm47XG4gICAgICAgIHJldHVybiBuLmFjdGl2YXRlKG4sIHRoaXMuJGNvbnRyb2xsZXIsIGUsIGkpO1xuICAgIH1cbiAgICBkZWFjdGl2YXRlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudmlldztcbiAgICAgICAgaWYgKCFpLmlzQWN0aXZlKSByZXR1cm47XG4gICAgICAgIHJldHVybiBpLmRlYWN0aXZhdGUoaSwgdGhpcy4kY29udHJvbGxlciwgZSk7XG4gICAgfVxuICAgIGRldGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRlYWN0aXZhdGUodCwgaSk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICBudWxsID09PSAodCA9IHRoaXMudmlldykgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMudmlldyA9IHZvaWQgMDtcbiAgICB9XG59O1xuXG5vdChbIFN0KHtcbiAgICBtb2RlOiBELmZyb21WaWV3XG59KSBdLCBPci5wcm90b3R5cGUsIFwidmFsdWVcIiwgdm9pZCAwKTtcblxuT3IgPSBvdChbIE9lKFwiY2F0Y2hcIiksIGx0KDAsIEFpKSwgbHQoMSwgb3MpIF0sIE9yKTtcblxuZnVuY3Rpb24gJHIodCkge1xuICAgIGNvbnN0IGUgPSB0LnBhcmVudDtcbiAgICBjb25zdCBpID0gbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLnZpZXdNb2RlbDtcbiAgICBpZiAoaSBpbnN0YW5jZW9mIFRyKSByZXR1cm4gaTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwODEzXCIpO1xufVxuXG5sZXQgTHIgPSBjbGFzcyBQcm9taXNlQXR0cmlidXRlUGF0dGVybiB7XG4gICAgXCJwcm9taXNlLnJlc29sdmVcIih0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybiBuZXcgQXR0clN5bnRheCh0LCBlLCBcInByb21pc2VcIiwgXCJiaW5kXCIpO1xuICAgIH1cbn07XG5cbkxyID0gb3QoWyBGdCh7XG4gICAgcGF0dGVybjogXCJwcm9taXNlLnJlc29sdmVcIixcbiAgICBzeW1ib2xzOiBcIlwiXG59KSBdLCBMcik7XG5cbmxldCBxciA9IGNsYXNzIEZ1bGZpbGxlZEF0dHJpYnV0ZVBhdHRlcm4ge1xuICAgIHRoZW4odCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gbmV3IEF0dHJTeW50YXgodCwgZSwgXCJ0aGVuXCIsIFwiZnJvbS12aWV3XCIpO1xuICAgIH1cbn07XG5cbnFyID0gb3QoWyBGdCh7XG4gICAgcGF0dGVybjogXCJ0aGVuXCIsXG4gICAgc3ltYm9sczogXCJcIlxufSkgXSwgcXIpO1xuXG5sZXQgTXIgPSBjbGFzcyBSZWplY3RlZEF0dHJpYnV0ZVBhdHRlcm4ge1xuICAgIGNhdGNoKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBBdHRyU3ludGF4KHQsIGUsIFwiY2F0Y2hcIiwgXCJmcm9tLXZpZXdcIik7XG4gICAgfVxufTtcblxuTXIgPSBvdChbIEZ0KHtcbiAgICBwYXR0ZXJuOiBcImNhdGNoXCIsXG4gICAgc3ltYm9sczogXCJcIlxufSkgXSwgTXIpO1xuXG5mdW5jdGlvbiBVcih0LCBlLCBpLCBzKSB7XG4gICAgaWYgKEF0KGUpKSByZXR1cm4gRnIodCwgZSwgaSwgcyk7XG4gICAgaWYgKHNpLmlzVHlwZShlKSkgcmV0dXJuIFZyKHQsIGUsIGksIHMpO1xuICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBUYWcgb3IgVHlwZS5gKTtcbn1cblxuY2xhc3MgUmVuZGVyUGxhbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSkge1xuICAgICAgICB0aGlzLm5vZGUgPSB0O1xuICAgICAgICB0aGlzLmluc3RydWN0aW9ucyA9IGU7XG4gICAgICAgIHRoaXMuUGkgPSBpO1xuICAgICAgICB0aGlzLk9pID0gdm9pZCAwO1xuICAgIH1cbiAgICBnZXQgZGVmaW5pdGlvbigpIHtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdGhpcy5PaSkgdGhpcy5PaSA9IEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZSh7XG4gICAgICAgICAgICBuYW1lOiBzaS5nZW5lcmF0ZU5hbWUoKSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiB0aGlzLm5vZGUsXG4gICAgICAgICAgICBuZWVkc0NvbXBpbGU6IEF0KHRoaXMubm9kZSksXG4gICAgICAgICAgICBpbnN0cnVjdGlvbnM6IHRoaXMuaW5zdHJ1Y3Rpb25zLFxuICAgICAgICAgICAgZGVwZW5kZW5jaWVzOiB0aGlzLlBpXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcy5PaTtcbiAgICB9XG4gICAgY3JlYXRlVmlldyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFZpZXdGYWN0b3J5KHQpLmNyZWF0ZSgpO1xuICAgIH1cbiAgICBnZXRWaWV3RmFjdG9yeSh0KSB7XG4gICAgICAgIHJldHVybiB0LnJvb3QuZ2V0KFBpKS5nZXRWaWV3RmFjdG9yeSh0aGlzLmRlZmluaXRpb24sIHQuY3JlYXRlQ2hpbGQoKS5yZWdpc3RlciguLi50aGlzLlBpKSk7XG4gICAgfVxuICAgIG1lcmdlSW50byh0LCBlLCBpKSB7XG4gICAgICAgIHQuYXBwZW5kQ2hpbGQodGhpcy5ub2RlKTtcbiAgICAgICAgZS5wdXNoKC4uLnRoaXMuaW5zdHJ1Y3Rpb25zKTtcbiAgICAgICAgaS5wdXNoKC4uLnRoaXMuUGkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gRnIodCwgZSwgaSwgcykge1xuICAgIGNvbnN0IG4gPSBbXTtcbiAgICBjb25zdCByID0gW107XG4gICAgY29uc3QgbyA9IFtdO1xuICAgIGNvbnN0IGwgPSB0LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZSk7XG4gICAgbGV0IGggPSBmYWxzZTtcbiAgICBpZiAoaSkgT2JqZWN0LmtleXMoaSkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgIGNvbnN0IGUgPSBpW3RdO1xuICAgICAgICBpZiAoQ3MoZSkpIHtcbiAgICAgICAgICAgIGggPSB0cnVlO1xuICAgICAgICAgICAgbi5wdXNoKGUpO1xuICAgICAgICB9IGVsc2UgbC5zZXRBdHRyaWJ1dGUodCwgZSk7XG4gICAgfSkpO1xuICAgIGlmIChoKSB7XG4gICAgICAgIGwuY2xhc3NOYW1lID0gXCJhdVwiO1xuICAgICAgICByLnB1c2gobik7XG4gICAgfVxuICAgIGlmIChzKSBfcih0LCBsLCBzLCByLCBvKTtcbiAgICByZXR1cm4gbmV3IFJlbmRlclBsYW4obCwgciwgbyk7XG59XG5cbmZ1bmN0aW9uIFZyKHQsIGUsIGksIHMpIHtcbiAgICBjb25zdCBuID0gc2kuZ2V0RGVmaW5pdGlvbihlKTtcbiAgICBjb25zdCByID0gW107XG4gICAgY29uc3QgbyA9IFsgciBdO1xuICAgIGNvbnN0IGwgPSBbXTtcbiAgICBjb25zdCBoID0gW107XG4gICAgY29uc3QgYSA9IG4uYmluZGFibGVzO1xuICAgIGNvbnN0IGMgPSB0LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQobi5uYW1lKTtcbiAgICBjLmNsYXNzTmFtZSA9IFwiYXVcIjtcbiAgICBpZiAoIWwuaW5jbHVkZXMoZSkpIGwucHVzaChlKTtcbiAgICByLnB1c2gobmV3IEh5ZHJhdGVFbGVtZW50SW5zdHJ1Y3Rpb24obiwgdm9pZCAwLCBoLCBudWxsLCBmYWxzZSwgdm9pZCAwKSk7XG4gICAgaWYgKGkpIE9iamVjdC5rZXlzKGkpLmZvckVhY2goKHQgPT4ge1xuICAgICAgICBjb25zdCBlID0gaVt0XTtcbiAgICAgICAgaWYgKENzKGUpKSBoLnB1c2goZSk7IGVsc2UgaWYgKHZvaWQgMCA9PT0gYVt0XSkgaC5wdXNoKG5ldyBTZXRBdHRyaWJ1dGVJbnN0cnVjdGlvbihlLCB0KSk7IGVsc2UgaC5wdXNoKG5ldyBTZXRQcm9wZXJ0eUluc3RydWN0aW9uKGUsIHQpKTtcbiAgICB9KSk7XG4gICAgaWYgKHMpIF9yKHQsIGMsIHMsIG8sIGwpO1xuICAgIHJldHVybiBuZXcgUmVuZGVyUGxhbihjLCBvLCBsKTtcbn1cblxuZnVuY3Rpb24gX3IodCwgZSwgaSwgcywgbikge1xuICAgIGZvciAobGV0IHIgPSAwLCBvID0gaS5sZW5ndGg7IHIgPCBvOyArK3IpIHtcbiAgICAgICAgY29uc3QgbyA9IGlbcl07XG4gICAgICAgIHN3aXRjaCAodHlwZW9mIG8pIHtcbiAgICAgICAgICBjYXNlIFwic3RyaW5nXCI6XG4gICAgICAgICAgICBlLmFwcGVuZENoaWxkKHQuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobykpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwib2JqZWN0XCI6XG4gICAgICAgICAgICBpZiAobyBpbnN0YW5jZW9mIHQuTm9kZSkgZS5hcHBlbmRDaGlsZChvKTsgZWxzZSBpZiAoXCJtZXJnZUludG9cIiBpbiBvKSBvLm1lcmdlSW50byhlLCBzLCBuKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24ganIodCwgZSkge1xuICAgIGNvbnN0IGkgPSBlLnRvO1xuICAgIGlmICh2b2lkIDAgIT09IGkgJiYgXCJzdWJqZWN0XCIgIT09IGkgJiYgXCJjb21wb3NpbmdcIiAhPT0gaSkgdFtpXSA9IGU7XG4gICAgcmV0dXJuIHQ7XG59XG5cbmNsYXNzIEF1UmVuZGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzKSB7XG4gICAgICAgIHRoaXMucCA9IHQ7XG4gICAgICAgIHRoaXMuJGkgPSBlO1xuICAgICAgICB0aGlzLkxpID0gaTtcbiAgICAgICAgdGhpcy5yID0gcztcbiAgICAgICAgdGhpcy5pZCA9IHcoXCJhdSRjb21wb25lbnRcIik7XG4gICAgICAgIHRoaXMuY29tcG9uZW50ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmNvbXBvc2luZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnZpZXcgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMucWkgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuTWkgPSBlLnByb3BzLnJlZHVjZShqciwge30pO1xuICAgIH1cbiAgICBhdHRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICBjb25zdCB7Y29tcG9uZW50OiBzLCB2aWV3OiBufSA9IHRoaXM7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IG4gfHwgdGhpcy5xaSAhPT0gcykge1xuICAgICAgICAgICAgdGhpcy5xaSA9IHM7XG4gICAgICAgICAgICB0aGlzLmNvbXBvc2luZyA9IHRydWU7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb21wb3NlKHZvaWQgMCwgcywgdCwgaSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9zZShuLCBzLCB0LCBpKTtcbiAgICB9XG4gICAgZGV0YWNoaW5nKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2kodGhpcy52aWV3LCB0LCBpKTtcbiAgICB9XG4gICAgY29tcG9uZW50Q2hhbmdlZCh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHskY29udHJvbGxlcjogc30gPSB0aGlzO1xuICAgICAgICBpZiAoIXMuaXNBY3RpdmUpIHJldHVybjtcbiAgICAgICAgaWYgKHRoaXMucWkgPT09IHQpIHJldHVybjtcbiAgICAgICAgdGhpcy5xaSA9IHQ7XG4gICAgICAgIHRoaXMuY29tcG9zaW5nID0gdHJ1ZTtcbiAgICAgICAgaSB8PSBzLmZsYWdzO1xuICAgICAgICBjb25zdCBuID0gQyh0aGlzLm9pKHRoaXMudmlldywgbnVsbCwgaSksICgoKSA9PiB0aGlzLmNvbXBvc2Uodm9pZCAwLCB0LCBudWxsLCBpKSkpO1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIFByb21pc2UpIG4uY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjb21wb3NlKHQsIGUsIGksIHMpIHtcbiAgICAgICAgcmV0dXJuIEModm9pZCAwID09PSB0ID8gQyhlLCAodCA9PiB0aGlzLlVpKHQsIHMpKSkgOiB0LCAodCA9PiB0aGlzLm5pKHRoaXMudmlldyA9IHQsIGksIHMpKSk7XG4gICAgfVxuICAgIG9pKHQsIGUsIGkpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgPT09IHQgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5kZWFjdGl2YXRlKG51bGwgIT09IGUgJiYgdm9pZCAwICE9PSBlID8gZSA6IHQsIHRoaXMuJGNvbnRyb2xsZXIsIGkpO1xuICAgIH1cbiAgICBuaSh0LCBlLCBpKSB7XG4gICAgICAgIGNvbnN0IHskY29udHJvbGxlcjogc30gPSB0aGlzO1xuICAgICAgICByZXR1cm4gQyhudWxsID09PSB0IHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuYWN0aXZhdGUobnVsbCAhPT0gZSAmJiB2b2lkIDAgIT09IGUgPyBlIDogdCwgcywgaSwgcy5zY29wZSksICgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmNvbXBvc2luZyA9IGZhbHNlO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFVpKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuRmkodCwgZSk7XG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICBpLnNldExvY2F0aW9uKHRoaXMuJGNvbnRyb2xsZXIubG9jYXRpb24pO1xuICAgICAgICAgICAgaS5sb2NrU2NvcGUodGhpcy4kY29udHJvbGxlci5zY29wZSk7XG4gICAgICAgICAgICByZXR1cm4gaTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIEZpKHQsIGUpIHtcbiAgICAgICAgaWYgKCF0KSByZXR1cm47XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLkxpLmNvbnRyb2xsZXIuY29udGFpbmVyO1xuICAgICAgICBpZiAoXCJvYmplY3RcIiA9PT0gdHlwZW9mIHQpIHtcbiAgICAgICAgICAgIGlmIChOcih0KSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoXCJjcmVhdGVWaWV3XCIgaW4gdCkgcmV0dXJuIHQuY3JlYXRlVmlldyhpKTtcbiAgICAgICAgICAgIGlmIChcImNyZWF0ZVwiIGluIHQpIHJldHVybiB0LmNyZWF0ZSgpO1xuICAgICAgICAgICAgaWYgKFwidGVtcGxhdGVcIiBpbiB0KSByZXR1cm4gdGhpcy5yLmdldFZpZXdGYWN0b3J5KEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmdldE9yQ3JlYXRlKHQpLCBpKS5jcmVhdGUoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXQodCkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBpLmZpbmQoc2ksIHQpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gZSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwODA5OiR7dH1gKTtcbiAgICAgICAgICAgIHQgPSBlLlR5cGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFVyKHRoaXMucCwgdCwgdGhpcy5NaSwgdGhpcy4kY29udHJvbGxlci5ob3N0LmNoaWxkTm9kZXMpLmNyZWF0ZVZpZXcoaSk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICBudWxsID09PSAodCA9IHRoaXMudmlldykgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5kaXNwb3NlKCk7XG4gICAgICAgIHRoaXMudmlldyA9IHZvaWQgMDtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGlmICh0cnVlID09PSAobnVsbCA9PT0gKGUgPSB0aGlzLnZpZXcpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuYWNjZXB0KHQpKSkgcmV0dXJuIHRydWU7XG4gICAgfVxufVxuXG5BdVJlbmRlci5pbmplY3QgPSBbIEt0LCBrcywgS2ksIFBpIF07XG5cbm90KFsgU3QgXSwgQXVSZW5kZXIucHJvdG90eXBlLCBcImNvbXBvbmVudFwiLCB2b2lkIDApO1xuXG5vdChbIFN0KHtcbiAgICBtb2RlOiBELmZyb21WaWV3XG59KSBdLCBBdVJlbmRlci5wcm90b3R5cGUsIFwiY29tcG9zaW5nXCIsIHZvaWQgMCk7XG5cbmplKHtcbiAgICBuYW1lOiBcImF1LXJlbmRlclwiLFxuICAgIHRlbXBsYXRlOiBudWxsLFxuICAgIGNvbnRhaW5lcmxlc3M6IHRydWUsXG4gICAgY2FwdHVyZTogdHJ1ZVxufSkoQXVSZW5kZXIpO1xuXG5mdW5jdGlvbiBOcih0KSB7XG4gICAgcmV0dXJuIFwibG9ja1Njb3BlXCIgaW4gdDtcbn1cblxuY2xhc3MgQXVDb21wb3NlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpLCBzLCBuLCByKSB7XG4gICAgICAgIHRoaXMuYyA9IHQ7XG4gICAgICAgIHRoaXMucGFyZW50ID0gZTtcbiAgICAgICAgdGhpcy5ob3N0ID0gaTtcbiAgICAgICAgdGhpcy5wID0gcztcbiAgICAgICAgdGhpcy5zY29wZUJlaGF2aW9yID0gXCJhdXRvXCI7XG4gICAgICAgIHRoaXMuVmkgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMubCA9IG4uY29udGFpbmVybGVzcyA/IHVzKHRoaXMuaG9zdCkgOiB2b2lkIDA7XG4gICAgICAgIHRoaXMuciA9IHQuZ2V0KFBpKTtcbiAgICAgICAgdGhpcy4kaSA9IG47XG4gICAgICAgIHRoaXMuX2kgPSByO1xuICAgIH1cbiAgICBzdGF0aWMgZ2V0IGluamVjdCgpIHtcbiAgICAgICAgcmV0dXJuIFsgZywgWGksIG5zLCBLdCwga3MsIFQoQ29tcG9zaXRpb25Db250ZXh0RmFjdG9yeSkgXTtcbiAgICB9XG4gICAgZ2V0IHBlbmRpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmppO1xuICAgIH1cbiAgICBnZXQgY29tcG9zaXRpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlZpO1xuICAgIH1cbiAgICBhdHRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gdGhpcy5qaSA9IEModGhpcy5xdWV1ZShuZXcgQ2hhbmdlSW5mbyh0aGlzLnZpZXcsIHRoaXMudmlld01vZGVsLCB0aGlzLm1vZGVsLCB2b2lkIDApLCB0KSwgKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2kuaXNDdXJyZW50KHQpKSB0aGlzLmppID0gdm9pZCAwO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGRldGFjaGluZyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLlZpO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5qaTtcbiAgICAgICAgdGhpcy5faS5pbnZhbGlkYXRlKCk7XG4gICAgICAgIHRoaXMuVmkgPSB0aGlzLmppID0gdm9pZCAwO1xuICAgICAgICByZXR1cm4gQyhpLCAoKCkgPT4gbnVsbCA9PT0gZSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmRlYWN0aXZhdGUodCkpKTtcbiAgICB9XG4gICAgcHJvcGVydHlDaGFuZ2VkKHQpIHtcbiAgICAgICAgaWYgKFwibW9kZWxcIiA9PT0gdCAmJiBudWxsICE9IHRoaXMuVmkpIHtcbiAgICAgICAgICAgIHRoaXMuVmkudXBkYXRlKHRoaXMubW9kZWwpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuamkgPSBDKHRoaXMuamksICgoKSA9PiBDKHRoaXMucXVldWUobmV3IENoYW5nZUluZm8odGhpcy52aWV3LCB0aGlzLnZpZXdNb2RlbCwgdGhpcy5tb2RlbCwgdCksIHZvaWQgMCksICh0ID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLl9pLmlzQ3VycmVudCh0KSkgdGhpcy5qaSA9IHZvaWQgMDtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIHF1ZXVlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuX2k7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLlZpO1xuICAgICAgICByZXR1cm4gQyhpLmNyZWF0ZSh0KSwgKHQgPT4ge1xuICAgICAgICAgICAgaWYgKGkuaXNDdXJyZW50KHQpKSByZXR1cm4gQyh0aGlzLmNvbXBvc2UodCksIChuID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaS5pc0N1cnJlbnQodCkpIHJldHVybiBDKG4uYWN0aXZhdGUoZSksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpLmlzQ3VycmVudCh0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5WaSA9IG47XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQyhudWxsID09PSBzIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuZGVhY3RpdmF0ZShlKSwgKCgpID0+IHQpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHJldHVybiBDKG4uY29udHJvbGxlci5kZWFjdGl2YXRlKG4uY29udHJvbGxlciwgdGhpcy4kY29udHJvbGxlciwgNCksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuLmNvbnRyb2xsZXIuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHQ7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgbi5jb250cm9sbGVyLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGNvbXBvc2UodCkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgbGV0IGk7XG4gICAgICAgIGxldCBzO1xuICAgICAgICBjb25zdCB7dmlldzogbiwgdmlld01vZGVsOiByLCBtb2RlbDogb30gPSB0LmNoYW5nZTtcbiAgICAgICAgY29uc3Qge2M6IGwsIGhvc3Q6IGgsICRjb250cm9sbGVyOiBhLCBsOiBjfSA9IHRoaXM7XG4gICAgICAgIGNvbnN0IHUgPSB0aGlzLmdldERlZihyKTtcbiAgICAgICAgY29uc3QgZiA9IGwuY3JlYXRlQ2hpbGQoKTtcbiAgICAgICAgY29uc3QgZCA9IG51bGwgPT0gYyA/IGgucGFyZW50Tm9kZSA6IGMucGFyZW50Tm9kZTtcbiAgICAgICAgaWYgKG51bGwgIT09IHUpIHtcbiAgICAgICAgICAgIGlmICh1LmNvbnRhaW5lcmxlc3MpIHRocm93IG5ldyBFcnJvcihcIkFVUjA4MDZcIik7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBjKSB7XG4gICAgICAgICAgICAgICAgaSA9IGg7XG4gICAgICAgICAgICAgICAgcyA9ICgpID0+IHt9O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpID0gZC5pbnNlcnRCZWZvcmUodGhpcy5wLmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodS5uYW1lKSwgYyk7XG4gICAgICAgICAgICAgICAgcyA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZSA9IHRoaXMuZ2V0Vm0oZiwgciwgaSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpID0gbnVsbCA9PSBjID8gaCA6IGM7XG4gICAgICAgICAgICBlID0gdGhpcy5nZXRWbShmLCByLCBpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBtID0gKCkgPT4ge1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuID0gQ29udHJvbGxlci4kZWwoZiwgZSwgaSwge1xuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0aW9uczogdGhpcy4kaS5wcm9qZWN0aW9uc1xuICAgICAgICAgICAgICAgIH0sIHUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29tcG9zaXRpb25Db250cm9sbGVyKG4sICh0ID0+IG4uYWN0aXZhdGUobnVsbCAhPT0gdCAmJiB2b2lkIDAgIT09IHQgPyB0IDogbiwgYSwgMiwgYS5zY29wZS5wYXJlbnRTY29wZSkpLCAodCA9PiBDKG4uZGVhY3RpdmF0ZShudWxsICE9PSB0ICYmIHZvaWQgMCAhPT0gdCA/IHQgOiBuLCBhLCA0KSwgcykpLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PT0gKGkgPSBlLmFjdGl2YXRlKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLmNhbGwoZSwgdCk7XG4gICAgICAgICAgICAgICAgfSksIHQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gQ3VzdG9tRWxlbWVudERlZmluaXRpb24uY3JlYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogc2kuZ2VuZXJhdGVOYW1lKCksXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IHRoaXMuci5nZXRWaWV3RmFjdG9yeShzLCBmKTtcbiAgICAgICAgICAgICAgICBjb25zdCBvID0gQ29udHJvbGxlci4kdmlldyhyLCBhKTtcbiAgICAgICAgICAgICAgICBjb25zdCBsID0gXCJhdXRvXCIgPT09IHRoaXMuc2NvcGVCZWhhdmlvciA/IFUuZnJvbVBhcmVudCh0aGlzLnBhcmVudC5zY29wZSwgZSkgOiBVLmNyZWF0ZShlKTtcbiAgICAgICAgICAgICAgICBpZiAoZnMoaSkpIG8uc2V0TG9jYXRpb24oaSk7IGVsc2Ugby5zZXRIb3N0KGkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgQ29tcG9zaXRpb25Db250cm9sbGVyKG8sICh0ID0+IG8uYWN0aXZhdGUobnVsbCAhPT0gdCAmJiB2b2lkIDAgIT09IHQgPyB0IDogbywgYSwgMiwgbCkpLCAodCA9PiBvLmRlYWN0aXZhdGUobnVsbCAhPT0gdCAmJiB2b2lkIDAgIT09IHQgPyB0IDogbywgYSwgNCkpLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbCA9PT0gKGkgPSBlLmFjdGl2YXRlKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLmNhbGwoZSwgdCk7XG4gICAgICAgICAgICAgICAgfSksIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAoXCJhY3RpdmF0ZVwiIGluIGUpIHJldHVybiBDKGUuYWN0aXZhdGUobyksICgoKSA9PiBtKCkpKTsgZWxzZSByZXR1cm4gbSgpO1xuICAgIH1cbiAgICBnZXRWbSh0LCBlLCBpKSB7XG4gICAgICAgIGlmIChudWxsID09IGUpIHJldHVybiBuZXcgRW1wdHlDb21wb25lbnQkMTtcbiAgICAgICAgaWYgKFwib2JqZWN0XCIgPT09IHR5cGVvZiBlKSByZXR1cm4gZTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMucDtcbiAgICAgICAgY29uc3QgbiA9IGZzKGkpO1xuICAgICAgICB0LnJlZ2lzdGVyUmVzb2x2ZXIocy5FbGVtZW50LCB0LnJlZ2lzdGVyUmVzb2x2ZXIobnMsIG5ldyB4KFwiRWxlbWVudFJlc29sdmVyXCIsIG4gPyBudWxsIDogaSkpKTtcbiAgICAgICAgdC5yZWdpc3RlclJlc29sdmVyKG9zLCBuZXcgeChcIklSZW5kZXJMb2NhdGlvblwiLCBuID8gaSA6IG51bGwpKTtcbiAgICAgICAgY29uc3QgciA9IHQuaW52b2tlKGUpO1xuICAgICAgICB0LnJlZ2lzdGVyUmVzb2x2ZXIoZSwgbmV3IHgoXCJhdS1jb21wb3NlLnZpZXdNb2RlbFwiLCByKSk7XG4gICAgICAgIHJldHVybiByO1xuICAgIH1cbiAgICBnZXREZWYodCkge1xuICAgICAgICBjb25zdCBlID0gQ3QodCkgPyB0IDogbnVsbCA9PT0gdCB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0LmNvbnN0cnVjdG9yO1xuICAgICAgICByZXR1cm4gc2kuaXNUeXBlKGUpID8gc2kuZ2V0RGVmaW5pdGlvbihlKSA6IG51bGw7XG4gICAgfVxufVxuXG5vdChbIFN0IF0sIEF1Q29tcG9zZS5wcm90b3R5cGUsIFwidmlld1wiLCB2b2lkIDApO1xuXG5vdChbIFN0IF0sIEF1Q29tcG9zZS5wcm90b3R5cGUsIFwidmlld01vZGVsXCIsIHZvaWQgMCk7XG5cbm90KFsgU3QgXSwgQXVDb21wb3NlLnByb3RvdHlwZSwgXCJtb2RlbFwiLCB2b2lkIDApO1xuXG5vdChbIFN0KHtcbiAgICBzZXQ6IHQgPT4ge1xuICAgICAgICBpZiAoXCJzY29wZWRcIiA9PT0gdCB8fCBcImF1dG9cIiA9PT0gdCkgcmV0dXJuIHQ7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFVUjA4MDVcIik7XG4gICAgfVxufSkgXSwgQXVDb21wb3NlLnByb3RvdHlwZSwgXCJzY29wZUJlaGF2aW9yXCIsIHZvaWQgMCk7XG5cbmplKFwiYXUtY29tcG9zZVwiKShBdUNvbXBvc2UpO1xuXG5jbGFzcyBFbXB0eUNvbXBvbmVudCQxIHt9XG5cbmNsYXNzIENvbXBvc2l0aW9uQ29udGV4dEZhY3Rvcnkge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmlkID0gMDtcbiAgICB9XG4gICAgaXNDdXJyZW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHQuaWQgPT09IHRoaXMuaWQ7XG4gICAgfVxuICAgIGNyZWF0ZSh0KSB7XG4gICAgICAgIHJldHVybiBDKHQubG9hZCgpLCAodCA9PiBuZXcgQ29tcG9zaXRpb25Db250ZXh0KCsrdGhpcy5pZCwgdCkpKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZSgpIHtcbiAgICAgICAgdGhpcy5pZCsrO1xuICAgIH1cbn1cblxuY2xhc3MgQ2hhbmdlSW5mbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcykge1xuICAgICAgICB0aGlzLnZpZXcgPSB0O1xuICAgICAgICB0aGlzLnZpZXdNb2RlbCA9IGU7XG4gICAgICAgIHRoaXMubW9kZWwgPSBpO1xuICAgICAgICB0aGlzLnNyYyA9IHM7XG4gICAgfVxuICAgIGxvYWQoKSB7XG4gICAgICAgIGlmIChrdCh0aGlzLnZpZXcpIHx8IGt0KHRoaXMudmlld01vZGVsKSkgcmV0dXJuIFByb21pc2UuYWxsKFsgdGhpcy52aWV3LCB0aGlzLnZpZXdNb2RlbCBdKS50aGVuKCgoW3QsIGVdKSA9PiBuZXcgTG9hZGVkQ2hhbmdlSW5mbyh0LCBlLCB0aGlzLm1vZGVsLCB0aGlzLnNyYykpKTsgZWxzZSByZXR1cm4gbmV3IExvYWRlZENoYW5nZUluZm8odGhpcy52aWV3LCB0aGlzLnZpZXdNb2RlbCwgdGhpcy5tb2RlbCwgdGhpcy5zcmMpO1xuICAgIH1cbn1cblxuY2xhc3MgTG9hZGVkQ2hhbmdlSW5mbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcykge1xuICAgICAgICB0aGlzLnZpZXcgPSB0O1xuICAgICAgICB0aGlzLnZpZXdNb2RlbCA9IGU7XG4gICAgICAgIHRoaXMubW9kZWwgPSBpO1xuICAgICAgICB0aGlzLnNyYyA9IHM7XG4gICAgfVxufVxuXG5jbGFzcyBDb21wb3NpdGlvbkNvbnRleHQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5pZCA9IHQ7XG4gICAgICAgIHRoaXMuY2hhbmdlID0gZTtcbiAgICB9XG59XG5cbmNsYXNzIENvbXBvc2l0aW9uQ29udHJvbGxlciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcywgbikge1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIgPSB0O1xuICAgICAgICB0aGlzLnN0YXJ0ID0gZTtcbiAgICAgICAgdGhpcy5zdG9wID0gaTtcbiAgICAgICAgdGhpcy51cGRhdGUgPSBzO1xuICAgICAgICB0aGlzLmNvbnRleHQgPSBuO1xuICAgICAgICB0aGlzLnN0YXRlID0gMDtcbiAgICB9XG4gICAgYWN0aXZhdGUodCkge1xuICAgICAgICBpZiAoMCAhPT0gdGhpcy5zdGF0ZSkgdGhyb3cgbmV3IEVycm9yKGBBVVIwODA3OiR7dGhpcy5jb250cm9sbGVyLm5hbWV9YCk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAxO1xuICAgICAgICByZXR1cm4gdGhpcy5zdGFydCh0KTtcbiAgICB9XG4gICAgZGVhY3RpdmF0ZSh0KSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5zdGF0ZSkge1xuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAtMTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnN0b3AodCk7XG5cbiAgICAgICAgICBjYXNlIC0xOlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDgwOFwiKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gLTE7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNsYXNzIEF1U2xvdCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgaSwgcykge1xuICAgICAgICB2YXIgbiwgcjtcbiAgICAgICAgdGhpcy5OaSA9IG51bGw7XG4gICAgICAgIHRoaXMuV2kgPSBudWxsO1xuICAgICAgICBsZXQgbztcbiAgICAgICAgY29uc3QgbCA9IGUuYXVTbG90O1xuICAgICAgICBjb25zdCBoID0gbnVsbCA9PT0gKHIgPSBudWxsID09PSAobiA9IGkuaW5zdHJ1Y3Rpb24pIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4ucHJvamVjdGlvbnMpIHx8IHZvaWQgMCA9PT0gciA/IHZvaWQgMCA6IHJbbC5uYW1lXTtcbiAgICAgICAgaWYgKG51bGwgPT0gaCkge1xuICAgICAgICAgICAgbyA9IHMuZ2V0Vmlld0ZhY3RvcnkobC5mYWxsYmFjaywgaS5jb250cm9sbGVyLmNvbnRhaW5lcik7XG4gICAgICAgICAgICB0aGlzLkhpID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBvID0gcy5nZXRWaWV3RmFjdG9yeShoLCBpLnBhcmVudC5jb250cm9sbGVyLmNvbnRhaW5lcik7XG4gICAgICAgICAgICB0aGlzLkhpID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLkxpID0gaTtcbiAgICAgICAgdGhpcy52aWV3ID0gby5jcmVhdGUoKS5zZXRMb2NhdGlvbih0KTtcbiAgICB9XG4gICAgc3RhdGljIGdldCBpbmplY3QoKSB7XG4gICAgICAgIHJldHVybiBbIG9zLCBrcywgS2ksIFBpIF07XG4gICAgfVxuICAgIGJpbmRpbmcodCwgZSwgaSkge1xuICAgICAgICB2YXIgcztcbiAgICAgICAgdGhpcy5OaSA9IHRoaXMuJGNvbnRyb2xsZXIuc2NvcGUucGFyZW50U2NvcGU7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBpZiAodGhpcy5IaSkge1xuICAgICAgICAgICAgbiA9IHRoaXMuTGkuY29udHJvbGxlci5zY29wZS5wYXJlbnRTY29wZTtcbiAgICAgICAgICAgICh0aGlzLldpID0gVS5mcm9tUGFyZW50KG4sIG4uYmluZGluZ0NvbnRleHQpKS5vdmVycmlkZUNvbnRleHQuJGhvc3QgPSBudWxsICE9PSAocyA9IHRoaXMuZXhwb3NlKSAmJiB2b2lkIDAgIT09IHMgPyBzIDogdGhpcy5OaS5iaW5kaW5nQ29udGV4dDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhdHRhY2hpbmcodCwgZSwgaSkge1xuICAgICAgICByZXR1cm4gdGhpcy52aWV3LmFjdGl2YXRlKHQsIHRoaXMuJGNvbnRyb2xsZXIsIGksIHRoaXMuSGkgPyB0aGlzLldpIDogdGhpcy5OaSk7XG4gICAgfVxuICAgIGRldGFjaGluZyh0LCBlLCBpKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnZpZXcuZGVhY3RpdmF0ZSh0LCB0aGlzLiRjb250cm9sbGVyLCBpKTtcbiAgICB9XG4gICAgZXhwb3NlQ2hhbmdlZCh0KSB7XG4gICAgICAgIGlmICh0aGlzLkhpICYmIG51bGwgIT0gdGhpcy5XaSkgdGhpcy5XaS5vdmVycmlkZUNvbnRleHQuJGhvc3QgPSB0O1xuICAgIH1cbiAgICBkaXNwb3NlKCkge1xuICAgICAgICB0aGlzLnZpZXcuZGlzcG9zZSgpO1xuICAgICAgICB0aGlzLnZpZXcgPSB2b2lkIDA7XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBpZiAodHJ1ZSA9PT0gKG51bGwgPT09IChlID0gdGhpcy52aWV3KSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLmFjY2VwdCh0KSkpIHJldHVybiB0cnVlO1xuICAgIH1cbn1cblxub3QoWyBTdCBdLCBBdVNsb3QucHJvdG90eXBlLCBcImV4cG9zZVwiLCB2b2lkIDApO1xuXG5qZSh7XG4gICAgbmFtZTogXCJhdS1zbG90XCIsXG4gICAgdGVtcGxhdGU6IG51bGwsXG4gICAgY29udGFpbmVybGVzczogdHJ1ZVxufSkoQXVTbG90KTtcblxuY29uc3QgV3IgPSAvPHNjcmlwdFxcYltePF0qKD86KD8hPFxcL3NjcmlwdD4pPFtePF0qKSo8XFwvc2NyaXB0Pi9naTtcblxuY29uc3QgSHIgPSBsLmNyZWF0ZUludGVyZmFjZShcIklTYW5pdGl6ZXJcIiwgKHQgPT4gdC5zaW5nbGV0b24oY2xhc3Mge1xuICAgIHNhbml0aXplKHQpIHtcbiAgICAgICAgcmV0dXJuIHQucmVwbGFjZShXciwgXCJcIik7XG4gICAgfVxufSkpKTtcblxubGV0IHpyID0gY2xhc3MgU2FuaXRpemVWYWx1ZUNvbnZlcnRlciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnppID0gdDtcbiAgICB9XG4gICAgdG9WaWV3KHQpIHtcbiAgICAgICAgaWYgKG51bGwgPT0gdCkgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLnppLnNhbml0aXplKHQpO1xuICAgIH1cbn07XG5cbnpyID0gb3QoWyBsdCgwLCBIcikgXSwgenIpO1xuXG5ydChcInNhbml0aXplXCIpKHpyKTtcblxubGV0IEdyID0gY2xhc3MgVmlld1ZhbHVlQ29udmVydGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuR2kgPSB0O1xuICAgIH1cbiAgICB0b1ZpZXcodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5HaS5nZXRWaWV3Q29tcG9uZW50Rm9yT2JqZWN0KHQsIGUpO1xuICAgIH1cbn07XG5cbkdyID0gb3QoWyBsdCgwLCBEaSkgXSwgR3IpO1xuXG5ydChcInZpZXdcIikoR3IpO1xuXG5jb25zdCBYciA9IERlYm91bmNlQmluZGluZ0JlaGF2aW9yO1xuXG5jb25zdCBLciA9IE9uZVRpbWVCaW5kaW5nQmVoYXZpb3I7XG5cbmNvbnN0IFlyID0gVG9WaWV3QmluZGluZ0JlaGF2aW9yO1xuXG5jb25zdCBRciA9IEZyb21WaWV3QmluZGluZ0JlaGF2aW9yO1xuXG5jb25zdCBaciA9IFNpZ25hbEJpbmRpbmdCZWhhdmlvcjtcblxuY29uc3QgSnIgPSBUaHJvdHRsZUJpbmRpbmdCZWhhdmlvcjtcblxuY29uc3QgdG8gPSBUd29XYXlCaW5kaW5nQmVoYXZpb3I7XG5cbmNvbnN0IGVvID0gVGVtcGxhdGVDb21waWxlcjtcblxuY29uc3QgaW8gPSBOb2RlT2JzZXJ2ZXJMb2NhdG9yO1xuXG5jb25zdCBzbyA9IFsgZW8sIGlvIF07XG5cbmNvbnN0IG5vID0gU1ZHQW5hbHl6ZXI7XG5cbmNvbnN0IHJvID0gR3Q7XG5cbmNvbnN0IG9vID0genQ7XG5cbmNvbnN0IGxvID0gSHQ7XG5cbmNvbnN0IGhvID0gV3Q7XG5cbmNvbnN0IGFvID0gWHQ7XG5cbmNvbnN0IGNvID0gWyBsbywgaG8sIGFvIF07XG5cbmNvbnN0IHVvID0gWyBybywgb28gXTtcblxuY29uc3QgZm8gPSB4bjtcblxuY29uc3QgbW8gPSBibjtcblxuY29uc3Qgdm8gPSB5bjtcblxuY29uc3QgcG8gPSBnbjtcblxuY29uc3QgZ28gPSB2bjtcblxuY29uc3Qgd28gPSBwbjtcblxuY29uc3QgYm8gPSB3bjtcblxuY29uc3QgeG8gPSBCbjtcblxuY29uc3QgeW8gPSBrbjtcblxuY29uc3Qga28gPSBDbjtcblxuY29uc3QgQ28gPSBBbjtcblxuY29uc3QgQW8gPSBTbjtcblxuY29uc3QgU28gPSBFbjtcblxuY29uc3QgUm8gPSBSbjtcblxuY29uc3QgRW8gPSBJbjtcblxuY29uc3QgQm8gPSBbIG1vLCBnbywgcG8sIHdvLCBibywgZm8sIHZvLCB4bywgeW8sIGtvLCBDbywgU28sIFJvLCBBbywgRW8gXTtcblxuY29uc3QgSW8gPSB6cjtcblxuY29uc3QgVG8gPSBHcjtcblxuY29uc3QgRG8gPSBGcmVxdWVudE11dGF0aW9ucztcblxuY29uc3QgUG8gPSBPYnNlcnZlU2hhbGxvdztcblxuY29uc3QgT28gPSBJZjtcblxuY29uc3QgJG8gPSBFbHNlO1xuXG5jb25zdCBMbyA9IFJlcGVhdDtcblxuY29uc3QgcW8gPSBXaXRoO1xuXG5jb25zdCBNbyA9IEVyO1xuXG5jb25zdCBVbyA9IEJyO1xuXG5jb25zdCBGbyA9IElyO1xuXG5jb25zdCBWbyA9IFRyO1xuXG5jb25zdCBfbyA9IERyO1xuXG5jb25zdCBqbyA9IFByO1xuXG5jb25zdCBObyA9IE9yO1xuXG5jb25zdCBXbyA9IExyO1xuXG5jb25zdCBIbyA9IHFyO1xuXG5jb25zdCB6byA9IE1yO1xuXG5jb25zdCBHbyA9IEF0dHJCaW5kaW5nQmVoYXZpb3I7XG5cbmNvbnN0IFhvID0gU2VsZkJpbmRpbmdCZWhhdmlvcjtcblxuY29uc3QgS28gPSBVcGRhdGVUcmlnZ2VyQmluZGluZ0JlaGF2aW9yO1xuXG5jb25zdCBZbyA9IEF1UmVuZGVyO1xuXG5jb25zdCBRbyA9IEF1Q29tcG9zZTtcblxuY29uc3QgWm8gPSBQb3J0YWw7XG5cbmNvbnN0IEpvID0gRm9jdXM7XG5cbmNvbnN0IHRsID0gYnI7XG5cbmNvbnN0IGVsID0gWyBYciwgS3IsIFlyLCBRciwgWnIsIEpyLCB0bywgSW8sIFRvLCBEbywgUG8sIE9vLCAkbywgTG8sIHFvLCBNbywgVW8sIEZvLCBWbywgX28sIGpvLCBObywgV28sIEhvLCB6bywgR28sIFhvLCBLbywgWW8sIFFvLCBabywgSm8sIHRsLCBBdVNsb3QgXTtcblxuY29uc3QgaWwgPSBMcztcblxuY29uc3Qgc2wgPSBQcztcblxuY29uc3QgbmwgPSBEcztcblxuY29uc3QgcmwgPSBNcztcblxuY29uc3Qgb2wgPSBGcztcblxuY29uc3QgbGwgPSAkcztcblxuY29uc3QgaGwgPSBVcztcblxuY29uc3QgYWwgPSBxcztcblxuY29uc3QgY2wgPSBUcztcblxuY29uc3QgdWwgPSBPcztcblxuY29uc3QgZmwgPSBXcztcblxuY29uc3QgZGwgPSBLcztcblxuY29uc3QgbWwgPSBIcztcblxuY29uc3QgdmwgPSB6cztcblxuY29uc3QgcGwgPSBHcztcblxuY29uc3QgZ2wgPSBYcztcblxuY29uc3Qgd2wgPSBOcztcblxuY29uc3QgYmwgPSBZcztcblxuY29uc3QgeGwgPSBbIGhsLCBvbCwgaWwsIGFsLCBybCwgY2wsIG5sLCBzbCwgdWwsIGxsLCBmbCwgZGwsIG1sLCB2bCwgcGwsIGdsLCB3bCwgYmwgXTtcblxuY29uc3QgeWwgPSBrbChvKTtcblxuZnVuY3Rpb24ga2wodCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIG9wdGlvbnNQcm92aWRlcjogdCxcbiAgICAgICAgcmVnaXN0ZXIoZSkge1xuICAgICAgICAgICAgY29uc3QgaSA9IHtcbiAgICAgICAgICAgICAgICBjb2VyY2luZ09wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgZW5hYmxlQ29lcmNpb246IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBjb2VyY2VOdWxsaXNoOiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0KGkpO1xuICAgICAgICAgICAgcmV0dXJuIGUucmVnaXN0ZXIoYy5pbnN0YW5jZShGLCBpLmNvZXJjaW5nT3B0aW9ucyksIC4uLnNvLCAuLi5lbCwgLi4uY28sIC4uLkJvLCAuLi54bCk7XG4gICAgICAgIH0sXG4gICAgICAgIGN1c3RvbWl6ZShlKSB7XG4gICAgICAgICAgICByZXR1cm4ga2wobnVsbCAhPT0gZSAmJiB2b2lkIDAgIT09IGUgPyBlIDogdCk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5jb25zdCBDbCA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSUF1cmVsaWFcIik7XG5cbmNsYXNzIEF1cmVsaWEge1xuICAgIGNvbnN0cnVjdG9yKHQgPSBsLmNyZWF0ZUNvbnRhaW5lcigpKSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gdDtcbiAgICAgICAgdGhpcy5pciA9IGZhbHNlO1xuICAgICAgICB0aGlzLlhpID0gZmFsc2U7XG4gICAgICAgIHRoaXMuS2kgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5ZaSA9IHZvaWQgMDtcbiAgICAgICAgdGhpcy5uZXh0ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLlFpID0gdm9pZCAwO1xuICAgICAgICB0aGlzLlppID0gdm9pZCAwO1xuICAgICAgICBpZiAodC5oYXMoQ2wsIHRydWUpKSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwNzY4XCIpO1xuICAgICAgICB0LnJlZ2lzdGVyUmVzb2x2ZXIoQ2wsIG5ldyB4KFwiSUF1cmVsaWFcIiwgdGhpcykpO1xuICAgICAgICB0LnJlZ2lzdGVyUmVzb2x2ZXIodHMsIHRoaXMuSmkgPSBuZXcgeChcIklBcHBSb290XCIpKTtcbiAgICB9XG4gICAgZ2V0IGlzUnVubmluZygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXI7XG4gICAgfVxuICAgIGdldCBpc1N0YXJ0aW5nKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5YaTtcbiAgICB9XG4gICAgZ2V0IGlzU3RvcHBpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLktpO1xuICAgIH1cbiAgICBnZXQgcm9vdCgpIHtcbiAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5ZaSkge1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gdGhpcy5uZXh0KSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwNzY3XCIpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubmV4dDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5ZaTtcbiAgICB9XG4gICAgcmVnaXN0ZXIoLi4udCkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlciguLi50KTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGFwcCh0KSB7XG4gICAgICAgIHRoaXMubmV4dCA9IG5ldyBBcHBSb290KHQsIHRoaXMudHModC5ob3N0KSwgdGhpcy5jb250YWluZXIsIHRoaXMuSmkpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgZW5oYW5jZSh0LCBlKSB7XG4gICAgICAgIHZhciBpO1xuICAgICAgICBjb25zdCBzID0gbnVsbCAhPT0gKGkgPSB0LmNvbnRhaW5lcikgJiYgdm9pZCAwICE9PSBpID8gaSA6IHRoaXMuY29udGFpbmVyLmNyZWF0ZUNoaWxkKCk7XG4gICAgICAgIGNvbnN0IG4gPSB0Lmhvc3Q7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLnRzKG4pO1xuICAgICAgICBjb25zdCBvID0gdC5jb21wb25lbnQ7XG4gICAgICAgIGxldCBsO1xuICAgICAgICBpZiAoQ3QobykpIHtcbiAgICAgICAgICAgIHMucmVnaXN0ZXJSZXNvbHZlcihyLkhUTUxFbGVtZW50LCBzLnJlZ2lzdGVyUmVzb2x2ZXIoci5FbGVtZW50LCBzLnJlZ2lzdGVyUmVzb2x2ZXIobnMsIG5ldyB4KFwiRWxlbWVudFJlc29sdmVyXCIsIG4pKSkpO1xuICAgICAgICAgICAgbCA9IHMuaW52b2tlKG8pO1xuICAgICAgICB9IGVsc2UgbCA9IG87XG4gICAgICAgIHMucmVnaXN0ZXJSZXNvbHZlcihycywgbmV3IHgoXCJJRXZlbnRUYXJnZXRcIiwgbikpO1xuICAgICAgICBlID0gbnVsbCAhPT0gZSAmJiB2b2lkIDAgIT09IGUgPyBlIDogbnVsbDtcbiAgICAgICAgY29uc3QgaCA9IENvbnRyb2xsZXIuJGVsKHMsIGwsIG4sIG51bGwsIEN1c3RvbUVsZW1lbnREZWZpbml0aW9uLmNyZWF0ZSh7XG4gICAgICAgICAgICBuYW1lOiBzaS5nZW5lcmF0ZU5hbWUoKSxcbiAgICAgICAgICAgIHRlbXBsYXRlOiBuLFxuICAgICAgICAgICAgZW5oYW5jZTogdHJ1ZVxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBDKGguYWN0aXZhdGUoaCwgZSwgMiksICgoKSA9PiBoKSk7XG4gICAgfVxuICAgIGFzeW5jIHdhaXRGb3JJZGxlKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5yb290LnBsYXRmb3JtO1xuICAgICAgICBhd2FpdCB0LmRvbVdyaXRlUXVldWUueWllbGQoKTtcbiAgICAgICAgYXdhaXQgdC5kb21SZWFkUXVldWUueWllbGQoKTtcbiAgICAgICAgYXdhaXQgdC50YXNrUXVldWUueWllbGQoKTtcbiAgICB9XG4gICAgdHMoZSkge1xuICAgICAgICBsZXQgaTtcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lci5oYXMoS3QsIGZhbHNlKSkge1xuICAgICAgICAgICAgaWYgKG51bGwgPT09IGUub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldykgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDc2OVwiKTtcbiAgICAgICAgICAgIGkgPSBuZXcgdChlLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXcpO1xuICAgICAgICAgICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXIoYy5pbnN0YW5jZShLdCwgaSkpO1xuICAgICAgICB9IGVsc2UgaSA9IHRoaXMuY29udGFpbmVyLmdldChLdCk7XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBzdGFydCh0ID0gdGhpcy5uZXh0KSB7XG4gICAgICAgIGlmIChudWxsID09IHQpIHRocm93IG5ldyBFcnJvcihcIkFVUjA3NzBcIik7XG4gICAgICAgIGlmICh0aGlzLlFpIGluc3RhbmNlb2YgUHJvbWlzZSkgcmV0dXJuIHRoaXMuUWk7XG4gICAgICAgIHJldHVybiB0aGlzLlFpID0gQyh0aGlzLnN0b3AoKSwgKCgpID0+IHtcbiAgICAgICAgICAgIFJlZmxlY3Quc2V0KHQuaG9zdCwgXCIkYXVyZWxpYVwiLCB0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuSmkucHJlcGFyZSh0aGlzLllpID0gdCk7XG4gICAgICAgICAgICB0aGlzLlhpID0gdHJ1ZTtcbiAgICAgICAgICAgIHJldHVybiBDKHQuYWN0aXZhdGUoKSwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmlyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLlhpID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5RaSA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgICB0aGlzLmVzKHQsIFwiYXUtc3RhcnRlZFwiLCB0Lmhvc3QpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN0b3AodCA9IGZhbHNlKSB7XG4gICAgICAgIGlmICh0aGlzLlppIGluc3RhbmNlb2YgUHJvbWlzZSkgcmV0dXJuIHRoaXMuWmk7XG4gICAgICAgIGlmICh0cnVlID09PSB0aGlzLmlyKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5ZaTtcbiAgICAgICAgICAgIHRoaXMuaXIgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuS2kgPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuWmkgPSBDKGUuZGVhY3RpdmF0ZSgpLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgIFJlZmxlY3QuZGVsZXRlUHJvcGVydHkoZS5ob3N0LCBcIiRhdXJlbGlhXCIpO1xuICAgICAgICAgICAgICAgIGlmICh0KSBlLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICB0aGlzLllpID0gdm9pZCAwO1xuICAgICAgICAgICAgICAgIHRoaXMuSmkuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuS2kgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB0aGlzLmVzKGUsIFwiYXUtc3RvcHBlZFwiLCBlLmhvc3QpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmlyIHx8IHRoaXMuS2kpIHRocm93IG5ldyBFcnJvcihcIkFVUjA3NzFcIik7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmRpc3Bvc2UoKTtcbiAgICB9XG4gICAgZXModCwgZSwgaSkge1xuICAgICAgICBjb25zdCBzID0gbmV3IHQucGxhdGZvcm0ud2luZG93LkN1c3RvbUV2ZW50KGUsIHtcbiAgICAgICAgICAgIGRldGFpbDogdGhpcyxcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgICBjYW5jZWxhYmxlOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBpLmRpc3BhdGNoRXZlbnQocyk7XG4gICAgfVxufVxuXG52YXIgQWw7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wiRWxlbWVudFwiXSA9IDFdID0gXCJFbGVtZW50XCI7XG4gICAgdFt0W1wiQXR0cmlidXRlXCJdID0gMl0gPSBcIkF0dHJpYnV0ZVwiO1xufSkoQWwgfHwgKEFsID0ge30pKTtcblxuY29uc3QgU2wgPSBsLmNyZWF0ZUludGVyZmFjZShcIklEaWFsb2dTZXJ2aWNlXCIpO1xuXG5jb25zdCBSbCA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSURpYWxvZ0NvbnRyb2xsZXJcIik7XG5cbmNvbnN0IEVsID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJRGlhbG9nRG9tUmVuZGVyZXJcIik7XG5cbmNvbnN0IEJsID0gbC5jcmVhdGVJbnRlcmZhY2UoXCJJRGlhbG9nRG9tXCIpO1xuXG5jb25zdCBJbCA9IGwuY3JlYXRlSW50ZXJmYWNlKFwiSURpYWxvZ0dsb2JhbFNldHRpbmdzXCIpO1xuXG5jbGFzcyBEaWFsb2dPcGVuUmVzdWx0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMud2FzQ2FuY2VsbGVkID0gdDtcbiAgICAgICAgdGhpcy5kaWFsb2cgPSBlO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEaWFsb2dPcGVuUmVzdWx0KHQsIGUpO1xuICAgIH1cbn1cblxuY2xhc3MgRGlhbG9nQ2xvc2VSZXN1bHQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5zdGF0dXMgPSB0O1xuICAgICAgICB0aGlzLnZhbHVlID0gZTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgRGlhbG9nQ2xvc2VSZXN1bHQodCwgZSk7XG4gICAgfVxufVxuXG52YXIgVGw7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFtcIk9rXCJdID0gXCJva1wiO1xuICAgIHRbXCJFcnJvclwiXSA9IFwiZXJyb3JcIjtcbiAgICB0W1wiQ2FuY2VsXCJdID0gXCJjYW5jZWxcIjtcbiAgICB0W1wiQWJvcnRcIl0gPSBcImFib3J0XCI7XG59KShUbCB8fCAoVGwgPSB7fSkpO1xuXG5jbGFzcyBEaWFsb2dDb250cm9sbGVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucCA9IHQ7XG4gICAgICAgIHRoaXMuY3RuID0gZTtcbiAgICAgICAgdGhpcy5jbG9zZWQgPSBuZXcgUHJvbWlzZSgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMuJHQgPSB0O1xuICAgICAgICAgICAgdGhpcy5CdCA9IGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc3RhdGljIGdldCBpbmplY3QoKSB7XG4gICAgICAgIHJldHVybiBbIEt0LCBnIF07XG4gICAgfVxuICAgIGFjdGl2YXRlKHQpIHtcbiAgICAgICAgdmFyIGU7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmN0bi5jcmVhdGVDaGlsZCgpO1xuICAgICAgICBjb25zdCB7bW9kZWw6IHMsIHRlbXBsYXRlOiBuLCByZWplY3RPbkNhbmNlbDogcn0gPSB0O1xuICAgICAgICBjb25zdCBvID0gaS5nZXQoRWwpO1xuICAgICAgICBjb25zdCBsID0gbnVsbCAhPT0gKGUgPSB0Lmhvc3QpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiB0aGlzLnAuZG9jdW1lbnQuYm9keTtcbiAgICAgICAgY29uc3QgaCA9IHRoaXMuZG9tID0gby5yZW5kZXIobCwgdCk7XG4gICAgICAgIGNvbnN0IGEgPSBpLmhhcyhycywgdHJ1ZSkgPyBpLmdldChycykgOiBudWxsO1xuICAgICAgICBjb25zdCB1ID0gaC5jb250ZW50SG9zdDtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHQ7XG4gICAgICAgIGlmIChudWxsID09IGEgfHwgIWEuY29udGFpbnMobCkpIGkucmVnaXN0ZXIoYy5pbnN0YW5jZShycywgbCkpO1xuICAgICAgICBpLnJlZ2lzdGVyKGMuaW5zdGFuY2UobnMsIHUpLCBjLmluc3RhbmNlKEJsLCBoKSk7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoZSA9PiB7XG4gICAgICAgICAgICB2YXIgbiwgcjtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBPYmplY3QuYXNzaWduKHRoaXMuY21wID0gdGhpcy5nZXRPckNyZWF0ZVZtKGksIHQsIHUpLCB7XG4gICAgICAgICAgICAgICAgJGRpYWxvZzogdGhpc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBlKG51bGwgIT09IChyID0gbnVsbCA9PT0gKG4gPSBvLmNhbkFjdGl2YXRlKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLmNhbGwobywgcykpICYmIHZvaWQgMCAhPT0gciA/IHIgOiB0cnVlKTtcbiAgICAgICAgfSkpLnRoZW4oKGUgPT4ge1xuICAgICAgICAgICAgdmFyIG87XG4gICAgICAgICAgICBpZiAodHJ1ZSAhPT0gZSkge1xuICAgICAgICAgICAgICAgIGguZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIGlmIChyKSB0aHJvdyBEbChudWxsLCBcIkRpYWxvZyBhY3RpdmF0aW9uIHJlamVjdGVkXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBEaWFsb2dPcGVuUmVzdWx0LmNyZWF0ZSh0cnVlLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGwgPSB0aGlzLmNtcDtcbiAgICAgICAgICAgIHJldHVybiBDKG51bGwgPT09IChvID0gbC5hY3RpdmF0ZSkgfHwgdm9pZCAwID09PSBvID8gdm9pZCAwIDogby5jYWxsKGwsIHMpLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLmNvbnRyb2xsZXIgPSBDb250cm9sbGVyLiRlbChpLCBsLCB1LCBudWxsLCBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5jcmVhdGUobnVsbCAhPT0gKGUgPSB0aGlzLmdldERlZmluaXRpb24obCkpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHNpLmdlbmVyYXRlTmFtZSgpLFxuICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogblxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gQyhzLmFjdGl2YXRlKHMsIG51bGwsIDIpLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZTtcbiAgICAgICAgICAgICAgICAgICAgaC5vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIobnVsbCAhPT0gKGUgPSB0Lm1vdXNlRXZlbnQpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiBcImNsaWNrXCIsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gRGlhbG9nT3BlblJlc3VsdC5jcmVhdGUoZmFsc2UsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSksICh0ID0+IHtcbiAgICAgICAgICAgIGguZGlzcG9zZSgpO1xuICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBkZWFjdGl2YXRlKHQsIGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc3MpIHJldHVybiB0aGlzLnNzO1xuICAgICAgICBsZXQgaSA9IHRydWU7XG4gICAgICAgIGNvbnN0IHtjb250cm9sbGVyOiBzLCBkb206IG4sIGNtcDogciwgc2V0dGluZ3M6IHttb3VzZUV2ZW50OiBvLCByZWplY3RPbkNhbmNlbDogbH19ID0gdGhpcztcbiAgICAgICAgY29uc3QgaCA9IERpYWxvZ0Nsb3NlUmVzdWx0LmNyZWF0ZSh0LCBlKTtcbiAgICAgICAgY29uc3QgYSA9IG5ldyBQcm9taXNlKChhID0+IHtcbiAgICAgICAgICAgIHZhciBjLCB1O1xuICAgICAgICAgICAgYShDKG51bGwgIT09ICh1ID0gbnVsbCA9PT0gKGMgPSByLmNhbkRlYWN0aXZhdGUpIHx8IHZvaWQgMCA9PT0gYyA/IHZvaWQgMCA6IGMuY2FsbChyLCBoKSkgJiYgdm9pZCAwICE9PSB1ID8gdSA6IHRydWUsIChhID0+IHtcbiAgICAgICAgICAgICAgICB2YXIgYztcbiAgICAgICAgICAgICAgICBpZiAodHJ1ZSAhPT0gYSkge1xuICAgICAgICAgICAgICAgICAgICBpID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3MgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgICAgIGlmIChsKSB0aHJvdyBEbChudWxsLCBcIkRpYWxvZyBjYW5jZWxsYXRpb24gcmVqZWN0ZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBEaWFsb2dDbG9zZVJlc3VsdC5jcmVhdGUoXCJhYm9ydFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIEMobnVsbCA9PT0gKGMgPSByLmRlYWN0aXZhdGUpIHx8IHZvaWQgMCA9PT0gYyA/IHZvaWQgMCA6IGMuY2FsbChyLCBoKSwgKCgpID0+IEMocy5kZWFjdGl2YXRlKHMsIG51bGwsIDQpLCAoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICBuLmRpc3Bvc2UoKTtcbiAgICAgICAgICAgICAgICAgICAgbi5vdmVybGF5LnJlbW92ZUV2ZW50TGlzdGVuZXIobnVsbCAhPT0gbyAmJiB2b2lkIDAgIT09IG8gPyBvIDogXCJjbGlja1wiLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFsICYmIFwiZXJyb3JcIiAhPT0gdCkgdGhpcy4kdChoKTsgZWxzZSB0aGlzLkJ0KERsKGUsIFwiRGlhbG9nIGNhbmNlbGxlZCB3aXRoIGEgcmVqZWN0aW9uIG9uIGNhbmNlbFwiKSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBoO1xuICAgICAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuc3MgPSB2b2lkIDA7XG4gICAgICAgICAgICB0aHJvdyB0O1xuICAgICAgICB9KSk7XG4gICAgICAgIHRoaXMuc3MgPSBpID8gYSA6IHZvaWQgMDtcbiAgICAgICAgcmV0dXJuIGE7XG4gICAgfVxuICAgIG9rKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVhY3RpdmF0ZShcIm9rXCIsIHQpO1xuICAgIH1cbiAgICBjYW5jZWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWFjdGl2YXRlKFwiY2FuY2VsXCIsIHQpO1xuICAgIH1cbiAgICBlcnJvcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBQbCh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCh0ID0+IHtcbiAgICAgICAgICAgIHZhciBpLCBzO1xuICAgICAgICAgICAgcmV0dXJuIHQoQyhudWxsID09PSAocyA9IChpID0gdGhpcy5jbXApLmRlYWN0aXZhdGUpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuY2FsbChpLCBEaWFsb2dDbG9zZVJlc3VsdC5jcmVhdGUoXCJlcnJvclwiLCBlKSksICgoKSA9PiBDKHRoaXMuY29udHJvbGxlci5kZWFjdGl2YXRlKHRoaXMuY29udHJvbGxlciwgbnVsbCwgNCksICgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kb20uZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuQnQoZSk7XG4gICAgICAgICAgICB9KSkpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgaGFuZGxlRXZlbnQodCkge1xuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5vdmVybGF5RGlzbWlzcyAmJiAhdGhpcy5kb20uY29udGVudEhvc3QuY29udGFpbnModC50YXJnZXQpKSB0aGlzLmNhbmNlbCgpO1xuICAgIH1cbiAgICBnZXRPckNyZWF0ZVZtKHQsIGUsIGkpIHtcbiAgICAgICAgY29uc3QgcyA9IGUuY29tcG9uZW50O1xuICAgICAgICBpZiAobnVsbCA9PSBzKSByZXR1cm4gbmV3IEVtcHR5Q29tcG9uZW50O1xuICAgICAgICBpZiAoXCJvYmplY3RcIiA9PT0gdHlwZW9mIHMpIHJldHVybiBzO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5wO1xuICAgICAgICB0LnJlZ2lzdGVyUmVzb2x2ZXIobi5IVE1MRWxlbWVudCwgdC5yZWdpc3RlclJlc29sdmVyKG4uRWxlbWVudCwgdC5yZWdpc3RlclJlc29sdmVyKG5zLCBuZXcgeChcIkVsZW1lbnRSZXNvbHZlclwiLCBpKSkpKTtcbiAgICAgICAgcmV0dXJuIHQuaW52b2tlKHMpO1xuICAgIH1cbiAgICBnZXREZWZpbml0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEN0KHQpID8gdCA6IG51bGwgPT09IHQgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5jb25zdHJ1Y3RvcjtcbiAgICAgICAgcmV0dXJuIHNpLmlzVHlwZShlKSA/IHNpLmdldERlZmluaXRpb24oZSkgOiBudWxsO1xuICAgIH1cbn1cblxuY2xhc3MgRW1wdHlDb21wb25lbnQge31cblxuZnVuY3Rpb24gRGwodCwgZSkge1xuICAgIGNvbnN0IGkgPSBuZXcgRXJyb3IoZSk7XG4gICAgaS53YXNDYW5jZWxsZWQgPSB0cnVlO1xuICAgIGkudmFsdWUgPSB0O1xuICAgIHJldHVybiBpO1xufVxuXG5mdW5jdGlvbiBQbCh0KSB7XG4gICAgY29uc3QgZSA9IG5ldyBFcnJvcjtcbiAgICBlLndhc0NhbmNlbGxlZCA9IGZhbHNlO1xuICAgIGUudmFsdWUgPSB0O1xuICAgIHJldHVybiBlO1xufVxuXG5jbGFzcyBEaWFsb2dTZXJ2aWNlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMudXQgPSB0O1xuICAgICAgICB0aGlzLnAgPSBlO1xuICAgICAgICB0aGlzLm9zID0gaTtcbiAgICAgICAgdGhpcy5kbGdzID0gW107XG4gICAgfVxuICAgIGdldCBjb250cm9sbGVycygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGxncy5zbGljZSgwKTtcbiAgICB9XG4gICAgZ2V0IHRvcCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZGxncztcbiAgICAgICAgcmV0dXJuIHQubGVuZ3RoID4gMCA/IHRbdC5sZW5ndGggLSAxXSA6IG51bGw7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgaW5qZWN0KCkge1xuICAgICAgICByZXR1cm4gWyBnLCBLdCwgSWwgXTtcbiAgICB9XG4gICAgc3RhdGljIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgdC5yZWdpc3RlcihjLnNpbmdsZXRvbihTbCwgdGhpcyksIHhlLmJlZm9yZURlYWN0aXZhdGUoU2wsICh0ID0+IEModC5jbG9zZUFsbCgpLCAodCA9PiB7XG4gICAgICAgICAgICBpZiAodC5sZW5ndGggPiAwKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjA5MDE6JHt0Lmxlbmd0aH1gKTtcbiAgICAgICAgfSkpKSkpO1xuICAgIH1cbiAgICBvcGVuKHQpIHtcbiAgICAgICAgcmV0dXJuICRsKG5ldyBQcm9taXNlKChlID0+IHtcbiAgICAgICAgICAgIHZhciBpO1xuICAgICAgICAgICAgY29uc3QgcyA9IERpYWxvZ1NldHRpbmdzLmZyb20odGhpcy5vcywgdCk7XG4gICAgICAgICAgICBjb25zdCBuID0gbnVsbCAhPT0gKGkgPSBzLmNvbnRhaW5lcikgJiYgdm9pZCAwICE9PSBpID8gaSA6IHRoaXMudXQuY3JlYXRlQ2hpbGQoKTtcbiAgICAgICAgICAgIGUoQyhzLmxvYWQoKSwgKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuLmludm9rZShEaWFsb2dDb250cm9sbGVyKTtcbiAgICAgICAgICAgICAgICBuLnJlZ2lzdGVyKGMuaW5zdGFuY2UoUmwsIGUpKTtcbiAgICAgICAgICAgICAgICBuLnJlZ2lzdGVyKGMuY2FsbGJhY2soRGlhbG9nQ29udHJvbGxlciwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDkwMlwiKTtcbiAgICAgICAgICAgICAgICB9KSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBDKGUuYWN0aXZhdGUodCksICh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0Lndhc0NhbmNlbGxlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKDEgPT09IHRoaXMuZGxncy5wdXNoKGUpKSB0aGlzLnAud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9ICgpID0+IHRoaXMucmVtb3ZlKGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5jbG9zZWQudGhlbih0LCB0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdDtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KSkpO1xuICAgIH1cbiAgICBjbG9zZUFsbCgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKEFycmF5LmZyb20odGhpcy5kbGdzKS5tYXAoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHQuc2V0dGluZ3MucmVqZWN0T25DYW5jZWwpIHJldHVybiB0LmNhbmNlbCgpLnRoZW4oKCgpID0+IG51bGwpKTtcbiAgICAgICAgICAgIHJldHVybiB0LmNhbmNlbCgpLnRoZW4oKGUgPT4gXCJjYW5jZWxcIiA9PT0gZS5zdGF0dXMgPyBudWxsIDogdCkpO1xuICAgICAgICB9KSkpLnRoZW4oKHQgPT4gdC5maWx0ZXIoKHQgPT4gISF0KSkpKTtcbiAgICB9XG4gICAgcmVtb3ZlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZGxncztcbiAgICAgICAgY29uc3QgaSA9IGUuaW5kZXhPZih0KTtcbiAgICAgICAgaWYgKGkgPiAtMSkgdGhpcy5kbGdzLnNwbGljZShpLCAxKTtcbiAgICAgICAgaWYgKDAgPT09IGUubGVuZ3RoKSB0aGlzLnAud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMpO1xuICAgIH1cbiAgICBoYW5kbGVFdmVudCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0O1xuICAgICAgICBjb25zdCBpID0gTGwoZSk7XG4gICAgICAgIGlmIChudWxsID09IGkpIHJldHVybjtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMudG9wO1xuICAgICAgICBpZiAobnVsbCA9PT0gcyB8fCAwID09PSBzLnNldHRpbmdzLmtleWJvYXJkLmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBuID0gcy5zZXR0aW5ncy5rZXlib2FyZDtcbiAgICAgICAgaWYgKFwiRXNjYXBlXCIgPT09IGkgJiYgbi5pbmNsdWRlcyhpKSkgdm9pZCBzLmNhbmNlbCgpOyBlbHNlIGlmIChcIkVudGVyXCIgPT09IGkgJiYgbi5pbmNsdWRlcyhpKSkgdm9pZCBzLm9rKCk7XG4gICAgfVxufVxuXG5jbGFzcyBEaWFsb2dTZXR0aW5ncyB7XG4gICAgc3RhdGljIGZyb20oLi4udCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihuZXcgRGlhbG9nU2V0dGluZ3MsIC4uLnQpLmNzKCkubHMoKTtcbiAgICB9XG4gICAgbG9hZCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXM7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvbXBvbmVudDtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMudGVtcGxhdGU7XG4gICAgICAgIGNvbnN0IHMgPSBBKG51bGwgPT0gZSA/IHZvaWQgMCA6IEMoZSgpLCAoZSA9PiB7XG4gICAgICAgICAgICB0LmNvbXBvbmVudCA9IGU7XG4gICAgICAgIH0pKSwgQ3QoaSkgPyBDKGkoKSwgKGUgPT4ge1xuICAgICAgICAgICAgdC50ZW1wbGF0ZSA9IGU7XG4gICAgICAgIH0pKSA6IHZvaWQgMCk7XG4gICAgICAgIHJldHVybiBzIGluc3RhbmNlb2YgUHJvbWlzZSA/IHMudGhlbigoKCkgPT4gdCkpIDogdDtcbiAgICB9XG4gICAgY3MoKSB7XG4gICAgICAgIGlmIChudWxsID09IHRoaXMuY29tcG9uZW50ICYmIG51bGwgPT0gdGhpcy50ZW1wbGF0ZSkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDkwM1wiKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGxzKCkge1xuICAgICAgICBpZiAobnVsbCA9PSB0aGlzLmtleWJvYXJkKSB0aGlzLmtleWJvYXJkID0gdGhpcy5sb2NrID8gW10gOiBbIFwiRW50ZXJcIiwgXCJFc2NhcGVcIiBdO1xuICAgICAgICBpZiAoXCJib29sZWFuXCIgIT09IHR5cGVvZiB0aGlzLm92ZXJsYXlEaXNtaXNzKSB0aGlzLm92ZXJsYXlEaXNtaXNzID0gIXRoaXMubG9jaztcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBPbCh0LCBlKSB7XG4gICAgcmV0dXJuIHRoaXMudGhlbigoaSA9PiBpLmRpYWxvZy5jbG9zZWQudGhlbih0LCBlKSksIGUpO1xufVxuXG5mdW5jdGlvbiAkbCh0KSB7XG4gICAgdC53aGVuQ2xvc2VkID0gT2w7XG4gICAgcmV0dXJuIHQ7XG59XG5cbmZ1bmN0aW9uIExsKHQpIHtcbiAgICBpZiAoXCJFc2NhcGVcIiA9PT0gKHQuY29kZSB8fCB0LmtleSkgfHwgMjcgPT09IHQua2V5Q29kZSkgcmV0dXJuIFwiRXNjYXBlXCI7XG4gICAgaWYgKFwiRW50ZXJcIiA9PT0gKHQuY29kZSB8fCB0LmtleSkgfHwgMTMgPT09IHQua2V5Q29kZSkgcmV0dXJuIFwiRW50ZXJcIjtcbiAgICByZXR1cm47XG59XG5cbmNsYXNzIERlZmF1bHREaWFsb2dHbG9iYWxTZXR0aW5ncyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubG9jayA9IHRydWU7XG4gICAgICAgIHRoaXMuc3RhcnRpbmdaSW5kZXggPSAxZTM7XG4gICAgICAgIHRoaXMucmVqZWN0T25DYW5jZWwgPSBmYWxzZTtcbiAgICB9XG4gICAgc3RhdGljIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgYy5zaW5nbGV0b24oSWwsIHRoaXMpLnJlZ2lzdGVyKHQpO1xuICAgIH1cbn1cblxuY29uc3QgcWwgPSBcInBvc2l0aW9uOmFic29sdXRlO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7dG9wOjA7bGVmdDowO1wiO1xuXG5jbGFzcyBEZWZhdWx0RGlhbG9nRG9tUmVuZGVyZXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wID0gdDtcbiAgICAgICAgdGhpcy53cmFwcGVyQ3NzID0gYCR7cWx9IGRpc3BsYXk6ZmxleDtgO1xuICAgICAgICB0aGlzLm92ZXJsYXlDc3MgPSBxbDtcbiAgICAgICAgdGhpcy5ob3N0Q3NzID0gXCJwb3NpdGlvbjpyZWxhdGl2ZTttYXJnaW46YXV0bztcIjtcbiAgICB9XG4gICAgc3RhdGljIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgYy5zaW5nbGV0b24oRWwsIHRoaXMpLnJlZ2lzdGVyKHQpO1xuICAgIH1cbiAgICByZW5kZXIodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5wLmRvY3VtZW50O1xuICAgICAgICBjb25zdCBpID0gKHQsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLmNyZWF0ZUVsZW1lbnQodCk7XG4gICAgICAgICAgICBzLnN0eWxlLmNzc1RleHQgPSBpO1xuICAgICAgICAgICAgcmV0dXJuIHM7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHMgPSB0LmFwcGVuZENoaWxkKGkoXCJhdS1kaWFsb2ctY29udGFpbmVyXCIsIHRoaXMud3JhcHBlckNzcykpO1xuICAgICAgICBjb25zdCBuID0gcy5hcHBlbmRDaGlsZChpKFwiYXUtZGlhbG9nLW92ZXJsYXlcIiwgdGhpcy5vdmVybGF5Q3NzKSk7XG4gICAgICAgIGNvbnN0IHIgPSBzLmFwcGVuZENoaWxkKGkoXCJkaXZcIiwgdGhpcy5ob3N0Q3NzKSk7XG4gICAgICAgIHJldHVybiBuZXcgRGVmYXVsdERpYWxvZ0RvbShzLCBuLCByKTtcbiAgICB9XG59XG5cbkRlZmF1bHREaWFsb2dEb21SZW5kZXJlci5pbmplY3QgPSBbIEt0IF07XG5cbmNsYXNzIERlZmF1bHREaWFsb2dEb20ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIGkpIHtcbiAgICAgICAgdGhpcy53cmFwcGVyID0gdDtcbiAgICAgICAgdGhpcy5vdmVybGF5ID0gZTtcbiAgICAgICAgdGhpcy5jb250ZW50SG9zdCA9IGk7XG4gICAgfVxuICAgIGRpc3Bvc2UoKSB7XG4gICAgICAgIHRoaXMud3JhcHBlci5yZW1vdmUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIE1sKHQsIGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzZXR0aW5nc1Byb3ZpZGVyOiB0LFxuICAgICAgICByZWdpc3RlcjogaSA9PiBpLnJlZ2lzdGVyKC4uLmUsIHhlLmJlZm9yZUNyZWF0ZSgoKCkgPT4gdChpLmdldChJbCkpKSkpLFxuICAgICAgICBjdXN0b21pemUodCwgaSkge1xuICAgICAgICAgICAgcmV0dXJuIE1sKHQsIG51bGwgIT09IGkgJiYgdm9pZCAwICE9PSBpID8gaSA6IGUpO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuY29uc3QgVWwgPSBNbCgoKCkgPT4ge1xuICAgIHRocm93IG5ldyBFcnJvcihcIkFVUjA5MDRcIik7XG59KSwgWyBjbGFzcyBOb29wRGlhbG9nR2xvYmFsU2V0dGluZ3Mge1xuICAgIHN0YXRpYyByZWdpc3Rlcih0KSB7XG4gICAgICAgIHQucmVnaXN0ZXIoYy5zaW5nbGV0b24oSWwsIHRoaXMpKTtcbiAgICB9XG59IF0pO1xuXG5jb25zdCBGbCA9IE1sKG8sIFsgRGlhbG9nU2VydmljZSwgRGVmYXVsdERpYWxvZ0dsb2JhbFNldHRpbmdzLCBEZWZhdWx0RGlhbG9nRG9tUmVuZGVyZXIgXSk7XG5cbmNvbnN0IFZsID0gbC5jcmVhdGVJbnRlcmZhY2UoKHQgPT4gdC5zaW5nbGV0b24oV2NDdXN0b21FbGVtZW50UmVnaXN0cnkpKSk7XG5cbmNsYXNzIFdjQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBpKSB7XG4gICAgICAgIHRoaXMuY3RuID0gdDtcbiAgICAgICAgdGhpcy5wID0gZTtcbiAgICAgICAgdGhpcy5yID0gaTtcbiAgICB9XG4gICAgZGVmaW5lKHQsIGUsIGkpIHtcbiAgICAgICAgaWYgKCF0LmluY2x1ZGVzKFwiLVwiKSkgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHdlYi1jb21wb25lbnRzIGN1c3RvbSBlbGVtZW50IG5hbWUuIEl0IG11c3QgaW5jbHVkZSBhIFwiLVwiJyk7XG4gICAgICAgIGxldCBzO1xuICAgICAgICBpZiAobnVsbCA9PSBlKSB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGN1c3RvbSBlbGVtZW50IGRlZmluaXRpb25cIik7XG4gICAgICAgIHN3aXRjaCAodHlwZW9mIGUpIHtcbiAgICAgICAgICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICAgICAgICAgIHMgPSBzaS5pc1R5cGUoZSkgPyBzaS5nZXREZWZpbml0aW9uKGUpIDogQ3VzdG9tRWxlbWVudERlZmluaXRpb24uY3JlYXRlKHNpLmdlbmVyYXRlTmFtZSgpLCBlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHMgPSBDdXN0b21FbGVtZW50RGVmaW5pdGlvbi5nZXRPckNyZWF0ZShlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGlmIChzLmNvbnRhaW5lcmxlc3MpIHRocm93IG5ldyBFcnJvcihcIkNvbnRhaW5lcmxlc3MgY3VzdG9tIGVsZW1lbnQgaXMgbm90IHN1cHBvcnRlZC4gQ29uc2lkZXIgdXNpbmcgYnVpdGwtaW4gZXh0ZW5kcyBpbnN0ZWFkXCIpO1xuICAgICAgICBjb25zdCBuID0gIShudWxsID09PSBpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuZXh0ZW5kcykgPyBIVE1MRWxlbWVudCA6IHRoaXMucC5kb2N1bWVudC5jcmVhdGVFbGVtZW50KGkuZXh0ZW5kcykuY29uc3RydWN0b3I7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmN0bjtcbiAgICAgICAgY29uc3QgbyA9IHRoaXMucjtcbiAgICAgICAgY29uc3QgbCA9IHMuYmluZGFibGVzO1xuICAgICAgICBjb25zdCBoID0gdGhpcy5wO1xuICAgICAgICBjbGFzcyBDdXN0b21FbGVtZW50Q2xhc3MgZXh0ZW5kcyBuIHtcbiAgICAgICAgICAgIGF1SW5pdCgpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hdUluaXRlZCkgcmV0dXJuO1xuICAgICAgICAgICAgICAgIHRoaXMuYXVJbml0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSByLmNyZWF0ZUNoaWxkKCk7XG4gICAgICAgICAgICAgICAgdC5yZWdpc3RlclJlc29sdmVyKGguSFRNTEVsZW1lbnQsIHQucmVnaXN0ZXJSZXNvbHZlcihoLkVsZW1lbnQsIHQucmVnaXN0ZXJSZXNvbHZlcihucywgbmV3IHgoXCJFbGVtZW50UHJvdmlkZXJcIiwgdGhpcykpKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG8uY29tcGlsZShzLCB0LCB7XG4gICAgICAgICAgICAgICAgICAgIHByb2plY3Rpb25zOiBudWxsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHQuaW52b2tlKGUuVHlwZSk7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuYXVDdHJsID0gQ29udHJvbGxlci4kZWwodCwgaSwgdGhpcywgbnVsbCwgZSk7XG4gICAgICAgICAgICAgICAgc3ModGhpcywgZS5rZXksIG4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hdUluaXQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmF1Q3RybC5hY3RpdmF0ZSh0aGlzLmF1Q3RybCwgbnVsbCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmF1Q3RybC5kZWFjdGl2YXRlKHRoaXMuYXVDdHJsLCBudWxsLCAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkb3B0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmF1SW5pdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKHQsIGUsIGkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmF1SW5pdCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuYXVDdHJsLnZpZXdNb2RlbFt0XSA9IGk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgQ3VzdG9tRWxlbWVudENsYXNzLm9ic2VydmVkQXR0cmlidXRlcyA9IE9iamVjdC5rZXlzKGwpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgaW4gbCkgT2JqZWN0LmRlZmluZVByb3BlcnR5KEN1c3RvbUVsZW1lbnRDbGFzcy5wcm90b3R5cGUsIHQsIHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzW1wiYXVDdHJsXCJdLnZpZXdNb2RlbFt0XTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQoZSkge1xuICAgICAgICAgICAgICAgIGlmICghdGhpc1tcImF1SW5pdGVkXCJdKSB0aGlzW1wiYXVJbml0XCJdKCk7XG4gICAgICAgICAgICAgICAgdGhpc1tcImF1Q3RybFwiXS52aWV3TW9kZWxbdF0gPSBlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5wLmN1c3RvbUVsZW1lbnRzLmRlZmluZSh0LCBDdXN0b21FbGVtZW50Q2xhc3MsIGkpO1xuICAgICAgICByZXR1cm4gQ3VzdG9tRWxlbWVudENsYXNzO1xuICAgIH1cbn1cblxuV2NDdXN0b21FbGVtZW50UmVnaXN0cnkuaW5qZWN0ID0gWyBnLCBLdCwgUGkgXTtcblxuZXhwb3J0IHsgQWRvcHRlZFN0eWxlU2hlZXRzU3R5bGVzLCBBcHBSb290LCB4ZSBhcyBBcHBUYXNrLCBHdCBhcyBBdFByZWZpeGVkVHJpZ2dlckF0dHJpYnV0ZVBhdHRlcm4sIHJvIGFzIEF0UHJlZml4ZWRUcmlnZ2VyQXR0cmlidXRlUGF0dGVyblJlZ2lzdHJhdGlvbiwgQXR0ckJpbmRpbmdCZWhhdmlvciwgR28gYXMgQXR0ckJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiwgU24gYXMgQXR0ckJpbmRpbmdDb21tYW5kLCBBbyBhcyBBdHRyQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIEF0dHJTeW50YXgsIEF0dHJpYnV0ZUJpbmRpbmcsIEF0dHJpYnV0ZUJpbmRpbmdJbnN0cnVjdGlvbiwgZGwgYXMgQXR0cmlidXRlQmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLCBBdHRyaWJ1dGVOU0FjY2Vzc29yLCBOdCBhcyBBdHRyaWJ1dGVQYXR0ZXJuLCBBdUNvbXBvc2UsIEF1UmVuZGVyLCBZbyBhcyBBdVJlbmRlclJlZ2lzdHJhdGlvbiwgQXVTbG90LCBBdVNsb3RzSW5mbywgQXVyZWxpYSwgQnQgYXMgQmluZGFibGUsIEJpbmRhYmxlRGVmaW5pdGlvbiwgQmluZGFibGVPYnNlcnZlciwgQmluZGFibGVzSW5mbywgbW4gYXMgQmluZGluZ0NvbW1hbmQsIEJpbmRpbmdDb21tYW5kRGVmaW5pdGlvbiwgQmluZGluZ01vZGVCZWhhdmlvciwgQ1NTTW9kdWxlc1Byb2Nlc3NvclJlZ2lzdHJ5LCBDYWxsQmluZGluZywgeG4gYXMgQ2FsbEJpbmRpbmdDb21tYW5kLCBmbyBhcyBDYWxsQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIENhbGxCaW5kaW5nSW5zdHJ1Y3Rpb24sIGlsIGFzIENhbGxCaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24sIEFuIGFzIENhcHR1cmVCaW5kaW5nQ29tbWFuZCwgQ28gYXMgQ2FwdHVyZUJpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uLCBCciBhcyBDYXNlLCBDaGVja2VkT2JzZXJ2ZXIsIFNlIGFzIENoaWxkcmVuLCBDaGlsZHJlbkRlZmluaXRpb24sIENoaWxkcmVuT2JzZXJ2ZXIsIENsYXNzQXR0cmlidXRlQWNjZXNzb3IsIEVuIGFzIENsYXNzQmluZGluZ0NvbW1hbmQsIFNvIGFzIENsYXNzQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIHp0IGFzIENvbG9uUHJlZml4ZWRCaW5kQXR0cmlidXRlUGF0dGVybiwgb28gYXMgQ29sb25QcmVmaXhlZEJpbmRBdHRyaWJ1dGVQYXR0ZXJuUmVnaXN0cmF0aW9uLCBhbiBhcyBDb21tYW5kVHlwZSwgQ29tcHV0ZWRXYXRjaGVyLCBDb250cm9sbGVyLCBNZSBhcyBDdXN0b21BdHRyaWJ1dGUsIEN1c3RvbUF0dHJpYnV0ZURlZmluaXRpb24sIHNsIGFzIEN1c3RvbUF0dHJpYnV0ZVJlbmRlcmVyUmVnaXN0cmF0aW9uLCBzaSBhcyBDdXN0b21FbGVtZW50LCBDdXN0b21FbGVtZW50RGVmaW5pdGlvbiwgbmwgYXMgQ3VzdG9tRWxlbWVudFJlbmRlcmVyUmVnaXN0cmF0aW9uLCBEYXRhQXR0cmlidXRlQWNjZXNzb3IsIERlYm91bmNlQmluZGluZ0JlaGF2aW9yLCBYciBhcyBEZWJvdW5jZUJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiwgYm4gYXMgRGVmYXVsdEJpbmRpbmdDb21tYW5kLCBtbyBhcyBEZWZhdWx0QmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIEJvIGFzIERlZmF1bHRCaW5kaW5nTGFuZ3VhZ2UsIGNvIGFzIERlZmF1bHRCaW5kaW5nU3ludGF4LCBJciBhcyBEZWZhdWx0Q2FzZSwgc28gYXMgRGVmYXVsdENvbXBvbmVudHMsIERlZmF1bHREaWFsb2dEb20sIERlZmF1bHREaWFsb2dEb21SZW5kZXJlciwgRGVmYXVsdERpYWxvZ0dsb2JhbFNldHRpbmdzLCB4bCBhcyBEZWZhdWx0UmVuZGVyZXJzLCBlbCBhcyBEZWZhdWx0UmVzb3VyY2VzLCBBbCBhcyBEZWZpbml0aW9uVHlwZSwgQ24gYXMgRGVsZWdhdGVCaW5kaW5nQ29tbWFuZCwga28gYXMgRGVsZWdhdGVCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbiwgRGlhbG9nQ2xvc2VSZXN1bHQsIFVsIGFzIERpYWxvZ0NvbmZpZ3VyYXRpb24sIERpYWxvZ0NvbnRyb2xsZXIsIFRsIGFzIERpYWxvZ0RlYWN0aXZhdGlvblN0YXR1c2VzLCBGbCBhcyBEaWFsb2dEZWZhdWx0Q29uZmlndXJhdGlvbiwgRGlhbG9nT3BlblJlc3VsdCwgRGlhbG9nU2VydmljZSwgV3QgYXMgRG90U2VwYXJhdGVkQXR0cmlidXRlUGF0dGVybiwgaG8gYXMgRG90U2VwYXJhdGVkQXR0cmlidXRlUGF0dGVyblJlZ2lzdHJhdGlvbiwgRWxzZSwgJG8gYXMgRWxzZVJlZ2lzdHJhdGlvbiwgRXZlbnREZWxlZ2F0b3IsIEV2ZW50U3Vic2NyaWJlciwgRXhwcmVzc2lvbldhdGNoZXIsIEZvY3VzLCB5biBhcyBGb3JCaW5kaW5nQ29tbWFuZCwgdm8gYXMgRm9yQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIEZyYWdtZW50Tm9kZVNlcXVlbmNlLCBGcmVxdWVudE11dGF0aW9ucywgRnJvbVZpZXdCaW5kaW5nQmVoYXZpb3IsIFFyIGFzIEZyb21WaWV3QmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLCBnbiBhcyBGcm9tVmlld0JpbmRpbmdDb21tYW5kLCBwbyBhcyBGcm9tVmlld0JpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uLCBQciBhcyBGdWxmaWxsZWRUZW1wbGF0ZUNvbnRyb2xsZXIsIEh5ZHJhdGVBdHRyaWJ1dGVJbnN0cnVjdGlvbiwgSHlkcmF0ZUVsZW1lbnRJbnN0cnVjdGlvbiwgSHlkcmF0ZUxldEVsZW1lbnRJbnN0cnVjdGlvbiwgSHlkcmF0ZVRlbXBsYXRlQ29udHJvbGxlciwgdHMgYXMgSUFwcFJvb3QsIGJlIGFzIElBcHBUYXNrLCBadCBhcyBJQXR0ck1hcHBlciwgVXQgYXMgSUF0dHJpYnV0ZVBhcnNlciwgTXQgYXMgSUF0dHJpYnV0ZVBhdHRlcm4sIHhzIGFzIElBdVNsb3RzSW5mbywgQ2wgYXMgSUF1cmVsaWEsIFhpIGFzIElDb250cm9sbGVyLCBSbCBhcyBJRGlhbG9nQ29udHJvbGxlciwgQmwgYXMgSURpYWxvZ0RvbSwgRWwgYXMgSURpYWxvZ0RvbVJlbmRlcmVyLCBJbCBhcyBJRGlhbG9nR2xvYmFsU2V0dGluZ3MsIFNsIGFzIElEaWFsb2dTZXJ2aWNlLCB3cyBhcyBJRXZlbnREZWxlZ2F0b3IsIHJzIGFzIElFdmVudFRhcmdldCwgdnMgYXMgSUhpc3RvcnksIEtpIGFzIElIeWRyYXRpb25Db250ZXh0LCBrcyBhcyBJSW5zdHJ1Y3Rpb24sIGJpIGFzIElMaWZlY3ljbGVIb29rcywgbXMgYXMgSUxvY2F0aW9uLCBucyBhcyBJTm9kZSwgaW8gYXMgSU5vZGVPYnNlcnZlckxvY2F0b3JSZWdpc3RyYXRpb24sIEt0IGFzIElQbGF0Zm9ybSwgYnMgYXMgSVByb2plY3Rpb25zLCBvcyBhcyBJUmVuZGVyTG9jYXRpb24sIFNzIGFzIElSZW5kZXJlciwgUGkgYXMgSVJlbmRlcmluZywgWXQgYXMgSVNWR0FuYWx5emVyLCBIciBhcyBJU2FuaXRpemVyLCBkaSBhcyBJU2hhZG93RE9NR2xvYmFsU3R5bGVzLCB1aSBhcyBJU2hhZG93RE9NU3R5bGVGYWN0b3J5LCBmaSBhcyBJU2hhZG93RE9NU3R5bGVzLCAkdCBhcyBJU3ludGF4SW50ZXJwcmV0ZXIsIEFzIGFzIElUZW1wbGF0ZUNvbXBpbGVyLCB6biBhcyBJVGVtcGxhdGVDb21waWxlckhvb2tzLCBlbyBhcyBJVGVtcGxhdGVDb21waWxlclJlZ2lzdHJhdGlvbiwgVG4gYXMgSVRlbXBsYXRlRWxlbWVudEZhY3RvcnksIEFpIGFzIElWaWV3RmFjdG9yeSwgRGkgYXMgSVZpZXdMb2NhdG9yLCBWbCBhcyBJV2NFbGVtZW50UmVnaXN0cnksIGRzIGFzIElXaW5kb3csIGVzIGFzIElXb3JrVHJhY2tlciwgSWYsIE9vIGFzIElmUmVnaXN0cmF0aW9uLCB5cyBhcyBJbnN0cnVjdGlvblR5cGUsIEludGVycG9sYXRpb25CaW5kaW5nLCBybCBhcyBJbnRlcnBvbGF0aW9uQmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLCBJbnRlcnBvbGF0aW9uSW5zdHJ1Y3Rpb24sIEludGVycHJldGF0aW9uLCBJdGVyYXRvckJpbmRpbmdJbnN0cnVjdGlvbiwgb2wgYXMgSXRlcmF0b3JCaW5kaW5nUmVuZGVyZXJSZWdpc3RyYXRpb24sIExldEJpbmRpbmcsIExldEJpbmRpbmdJbnN0cnVjdGlvbiwgbGwgYXMgTGV0RWxlbWVudFJlbmRlcmVyUmVnaXN0cmF0aW9uLCBraSBhcyBMaWZlY3ljbGVIb29rcywgTGlmZWN5Y2xlSG9va3NEZWZpbml0aW9uLCBMaWZlY3ljbGVIb29rc0VudHJ5LCBMaXN0ZW5lciwgTGlzdGVuZXJCaW5kaW5nSW5zdHJ1Y3Rpb24sIGZsIGFzIExpc3RlbmVyQmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLCBOb2RlT2JzZXJ2ZXJDb25maWcsIE5vZGVPYnNlcnZlckxvY2F0b3IsIGxzIGFzIE5vZGVUeXBlLCBOb29wU1ZHQW5hbHl6ZXIsIE9ic2VydmVTaGFsbG93LCBPbmVUaW1lQmluZGluZ0JlaGF2aW9yLCBLciBhcyBPbmVUaW1lQmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLCB2biBhcyBPbmVUaW1lQmluZGluZ0NvbW1hbmQsIGdvIGFzIE9uZVRpbWVCaW5kaW5nQ29tbWFuZFJlZ2lzdHJhdGlvbiwgRHIgYXMgUGVuZGluZ1RlbXBsYXRlQ29udHJvbGxlciwgUG9ydGFsLCBUciBhcyBQcm9taXNlVGVtcGxhdGVDb250cm9sbGVyLCBQcm9wZXJ0eUJpbmRpbmcsIFByb3BlcnR5QmluZGluZ0luc3RydWN0aW9uLCBobCBhcyBQcm9wZXJ0eUJpbmRpbmdSZW5kZXJlclJlZ2lzdHJhdGlvbiwgSHQgYXMgUmVmQXR0cmlidXRlUGF0dGVybiwgbG8gYXMgUmVmQXR0cmlidXRlUGF0dGVyblJlZ2lzdHJhdGlvbiwgUmVmQmluZGluZywgeG8gYXMgUmVmQmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIFJlZkJpbmRpbmdJbnN0cnVjdGlvbiwgYWwgYXMgUmVmQmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLCBPciBhcyBSZWplY3RlZFRlbXBsYXRlQ29udHJvbGxlciwgUmVuZGVyUGxhbiwgUmVuZGVyaW5nLCBSZXBlYXQsIExvIGFzIFJlcGVhdFJlZ2lzdHJhdGlvbiwgU1ZHQW5hbHl6ZXIsIG5vIGFzIFNWR0FuYWx5emVyUmVnaXN0cmF0aW9uLCB6ciBhcyBTYW5pdGl6ZVZhbHVlQ29udmVydGVyLCBJbyBhcyBTYW5pdGl6ZVZhbHVlQ29udmVydGVyUmVnaXN0cmF0aW9uLCBTZWxlY3RWYWx1ZU9ic2VydmVyLCBTZWxmQmluZGluZ0JlaGF2aW9yLCBYbyBhcyBTZWxmQmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLCBTZXRBdHRyaWJ1dGVJbnN0cnVjdGlvbiwgbWwgYXMgU2V0QXR0cmlidXRlUmVuZGVyZXJSZWdpc3RyYXRpb24sIFNldENsYXNzQXR0cmlidXRlSW5zdHJ1Y3Rpb24sIHZsIGFzIFNldENsYXNzQXR0cmlidXRlUmVuZGVyZXJSZWdpc3RyYXRpb24sIFNldFByb3BlcnR5SW5zdHJ1Y3Rpb24sIGNsIGFzIFNldFByb3BlcnR5UmVuZGVyZXJSZWdpc3RyYXRpb24sIFNldFN0eWxlQXR0cmlidXRlSW5zdHJ1Y3Rpb24sIHBsIGFzIFNldFN0eWxlQXR0cmlidXRlUmVuZGVyZXJSZWdpc3RyYXRpb24sIFNoYWRvd0RPTVJlZ2lzdHJ5LCB1byBhcyBTaG9ydEhhbmRCaW5kaW5nU3ludGF4LCBTaWduYWxCaW5kaW5nQmVoYXZpb3IsIFpyIGFzIFNpZ25hbEJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiwgeWwgYXMgU3RhbmRhcmRDb25maWd1cmF0aW9uLCBTdHlsZUF0dHJpYnV0ZUFjY2Vzc29yLCBSbiBhcyBTdHlsZUJpbmRpbmdDb21tYW5kLCBSbyBhcyBTdHlsZUJpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uLCBtaSBhcyBTdHlsZUNvbmZpZ3VyYXRpb24sIFN0eWxlRWxlbWVudFN0eWxlcywgU3R5bGVQcm9wZXJ0eUJpbmRpbmdJbnN0cnVjdGlvbiwgZ2wgYXMgU3R5bGVQcm9wZXJ0eUJpbmRpbmdSZW5kZXJlclJlZ2lzdHJhdGlvbiwgRXIgYXMgU3dpdGNoLCBUZW1wbGF0ZUNvbXBpbGVyLCBLbiBhcyBUZW1wbGF0ZUNvbXBpbGVySG9va3MsIHVsIGFzIFRlbXBsYXRlQ29udHJvbGxlclJlbmRlcmVyUmVnaXN0cmF0aW9uLCBUZXh0QmluZGluZ0luc3RydWN0aW9uLCB3bCBhcyBUZXh0QmluZGluZ1JlbmRlcmVyUmVnaXN0cmF0aW9uLCBUaHJvdHRsZUJpbmRpbmdCZWhhdmlvciwgSnIgYXMgVGhyb3R0bGVCaW5kaW5nQmVoYXZpb3JSZWdpc3RyYXRpb24sIFRvVmlld0JpbmRpbmdCZWhhdmlvciwgWXIgYXMgVG9WaWV3QmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLCBwbiBhcyBUb1ZpZXdCaW5kaW5nQ29tbWFuZCwgd28gYXMgVG9WaWV3QmluZGluZ0NvbW1hbmRSZWdpc3RyYXRpb24sIGtuIGFzIFRyaWdnZXJCaW5kaW5nQ29tbWFuZCwgeW8gYXMgVHJpZ2dlckJpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uLCBUd29XYXlCaW5kaW5nQmVoYXZpb3IsIHRvIGFzIFR3b1dheUJpbmRpbmdCZWhhdmlvclJlZ2lzdHJhdGlvbiwgd24gYXMgVHdvV2F5QmluZGluZ0NvbW1hbmQsIGJvIGFzIFR3b1dheUJpbmRpbmdDb21tYW5kUmVnaXN0cmF0aW9uLCBVcGRhdGVUcmlnZ2VyQmluZGluZ0JlaGF2aW9yLCBLbyBhcyBVcGRhdGVUcmlnZ2VyQmluZGluZ0JlaGF2aW9yUmVnaXN0cmF0aW9uLCBWYWx1ZUF0dHJpYnV0ZU9ic2VydmVyLCBWaWV3RmFjdG9yeSwgVmlld0xvY2F0b3IsIEhpIGFzIFZpZXdNb2RlbEtpbmQsIEdyIGFzIFZpZXdWYWx1ZUNvbnZlcnRlciwgVG8gYXMgVmlld1ZhbHVlQ29udmVydGVyUmVnaXN0cmF0aW9uLCBJaSBhcyBWaWV3cywgX2UgYXMgV2F0Y2gsIFdjQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5LCBXaXRoLCBxbyBhcyBXaXRoUmVnaXN0cmF0aW9uLCBQbiBhcyBhbGxSZXNvdXJjZXMsIEZ0IGFzIGF0dHJpYnV0ZVBhdHRlcm4sIFN0IGFzIGJpbmRhYmxlLCBjbiBhcyBiaW5kaW5nQ29tbWFuZCwga2UgYXMgY2hpbGRyZW4sIEl0IGFzIGNvZXJjZXIsIFdlIGFzIGNvbnRhaW5lcmxlc3MsIHVzIGFzIGNvbnZlcnRUb1JlbmRlckxvY2F0aW9uLCBVciBhcyBjcmVhdGVFbGVtZW50LCBhaSBhcyBjc3NNb2R1bGVzLCBQZSBhcyBjdXN0b21BdHRyaWJ1dGUsIGplIGFzIGN1c3RvbUVsZW1lbnQsIGFzIGFzIGdldEVmZmVjdGl2ZVBhcmVudE5vZGUsIGlzIGFzIGdldFJlZiwgamkgYXMgaXNDdXN0b21FbGVtZW50Q29udHJvbGxlciwgTmkgYXMgaXNDdXN0b21FbGVtZW50Vmlld01vZGVsLCBDcyBhcyBpc0luc3RydWN0aW9uLCBmcyBhcyBpc1JlbmRlckxvY2F0aW9uLCBDaSBhcyBsaWZlY3ljbGVIb29rcywgcmkgYXMgcHJvY2Vzc0NvbnRlbnQsIFJzIGFzIHJlbmRlcmVyLCBjcyBhcyBzZXRFZmZlY3RpdmVQYXJlbnROb2RlLCBzcyBhcyBzZXRSZWYsIGNpIGFzIHNoYWRvd0NTUywgWW4gYXMgdGVtcGxhdGVDb21waWxlckhvb2tzLCBPZSBhcyB0ZW1wbGF0ZUNvbnRyb2xsZXIsIE5lIGFzIHVzZVNoYWRvd0RPTSwgVGkgYXMgdmlldywgVWUgYXMgd2F0Y2ggfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcFxuIiwiaW1wb3J0IHsgTWV0YWRhdGEgYXMgdCwgUHJvdG9jb2wgYXMgZSwgUmVnaXN0cmF0aW9uIGFzIHMsIERJIGFzIHIsIGZpcnN0RGVmaW5lZCBhcyBpLCBtZXJnZUFycmF5cyBhcyBuLCBmcm9tQW5ub3RhdGlvbk9yRGVmaW5pdGlvbk9yVHlwZU9yRGVmYXVsdCBhcyBvLCBpc051bWJlck9yQmlnSW50IGFzIGgsIGlzU3RyaW5nT3JEYXRlIGFzIGMsIGVtcHR5QXJyYXkgYXMgdSwgaXNBcnJheUluZGV4IGFzIGEsIElQbGF0Zm9ybSBhcyBsLCBJTG9nZ2VyIGFzIGYgfSBmcm9tIFwiQGF1cmVsaWEva2VybmVsXCI7XG5cbmV4cG9ydCB7IElQbGF0Zm9ybSB9IGZyb20gXCJAYXVyZWxpYS9rZXJuZWxcIjtcblxuZXhwb3J0IHsgUGxhdGZvcm0sIFRhc2ssIFRhc2tBYm9ydEVycm9yLCBUYXNrUXVldWUsIFRhc2tRdWV1ZVByaW9yaXR5LCBUYXNrU3RhdHVzIH0gZnJvbSBcIkBhdXJlbGlhL3BsYXRmb3JtXCI7XG5cbmNvbnN0IGQgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG5jb25zdCB2ID0gUmVmbGVjdC5kZWZpbmVQcm9wZXJ0eTtcblxuY29uc3QgcCA9IHQgPT4gXCJmdW5jdGlvblwiID09PSB0eXBlb2YgdDtcblxuY29uc3QgZyA9IHQgPT4gXCJzdHJpbmdcIiA9PT0gdHlwZW9mIHQ7XG5cbmZ1bmN0aW9uIHcodCwgZSwgcykge1xuICAgIHYodCwgZSwge1xuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IHNcbiAgICB9KTtcbiAgICByZXR1cm4gcztcbn1cblxuZnVuY3Rpb24gYih0LCBlLCBzLCByID0gZmFsc2UpIHtcbiAgICBpZiAociB8fCAhZC5jYWxsKHQsIGUpKSB3KHQsIGUsIHMpO1xufVxuXG5jb25zdCBFID0gKCkgPT4gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuY29uc3QgQSA9IHQuZ2V0T3duO1xuXG5jb25zdCB5ID0gdC5oYXNPd247XG5cbmNvbnN0IG0gPSB0LmRlZmluZTtcblxuY29uc3QgVSA9IGUuYW5ub3RhdGlvbi5rZXlGb3I7XG5cbmNvbnN0IHggPSBlLnJlc291cmNlLmtleUZvcjtcblxuY29uc3QgUyA9IGUucmVzb3VyY2UuYXBwZW5kVG87XG5cbmZ1bmN0aW9uIE8oLi4udCkge1xuICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgIGNvbnN0IHMgPSBVKFwiYWxpYXNlc1wiKTtcbiAgICAgICAgY29uc3QgciA9IEEocywgZSk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHIpIG0ocywgdCwgZSk7IGVsc2Ugci5wdXNoKC4uLnQpO1xuICAgIH07XG59XG5cbmZ1bmN0aW9uIEModCwgZSwgciwgaSkge1xuICAgIGZvciAobGV0IG4gPSAwLCBvID0gdC5sZW5ndGg7IG4gPCBvOyArK24pIHMuYWxpYXNUbyhyLCBlLmtleUZyb20odFtuXSkpLnJlZ2lzdGVyKGkpO1xufVxuXG5jb25zdCBrID0gT2JqZWN0LmZyZWV6ZSh7fSk7XG5cbmNsYXNzIEJpbmRpbmdDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHQpIGlmICh2b2lkIDAgIT09IGUpIHRoaXNbdF0gPSBlOyBlbHNlIGZvciAoY29uc3QgZSBpbiB0KSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIGUpKSB0aGlzW2VdID0gdFtlXTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgQmluZGluZ0NvbnRleHQodCwgZSk7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQodCwgZSwgcywgcikge1xuICAgICAgICB2YXIgaSwgbjtcbiAgICAgICAgaWYgKG51bGwgPT0gdCkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMjAzOiR7dH1gKTtcbiAgICAgICAgbGV0IG8gPSB0Lm92ZXJyaWRlQ29udGV4dDtcbiAgICAgICAgbGV0IGggPSB0O1xuICAgICAgICBpZiAocyA+IDApIHtcbiAgICAgICAgICAgIHdoaWxlIChzID4gMCkge1xuICAgICAgICAgICAgICAgIHMtLTtcbiAgICAgICAgICAgICAgICBoID0gaC5wYXJlbnRTY29wZTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PSAobnVsbCA9PT0gaCB8fCB2b2lkIDAgPT09IGggPyB2b2lkIDAgOiBoLm92ZXJyaWRlQ29udGV4dCkpIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG8gPSBoLm92ZXJyaWRlQ29udGV4dDtcbiAgICAgICAgICAgIHJldHVybiBlIGluIG8gPyBvIDogby5iaW5kaW5nQ29udGV4dDtcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAoIShudWxsID09PSBoIHx8IHZvaWQgMCA9PT0gaCA/IHZvaWQgMCA6IGguaXNCb3VuZGFyeSkgJiYgbnVsbCAhPSBvICYmICEoZSBpbiBvKSAmJiAhKG8uYmluZGluZ0NvbnRleHQgJiYgZSBpbiBvLmJpbmRpbmdDb250ZXh0KSkge1xuICAgICAgICAgICAgaCA9IG51bGwgIT09IChpID0gaC5wYXJlbnRTY29wZSkgJiYgdm9pZCAwICE9PSBpID8gaSA6IG51bGw7XG4gICAgICAgICAgICBvID0gbnVsbCAhPT0gKG4gPSBudWxsID09PSBoIHx8IHZvaWQgMCA9PT0gaCA/IHZvaWQgMCA6IGgub3ZlcnJpZGVDb250ZXh0KSAmJiB2b2lkIDAgIT09IG4gPyBuIDogbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobykgcmV0dXJuIGUgaW4gbyA/IG8gOiBvLmJpbmRpbmdDb250ZXh0O1xuICAgICAgICBpZiAoMTYgJiByKSByZXR1cm4gaztcbiAgICAgICAgcmV0dXJuIHQuYmluZGluZ0NvbnRleHQgfHwgdC5vdmVycmlkZUNvbnRleHQ7XG4gICAgfVxufVxuXG5jbGFzcyBTY29wZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgcywgcikge1xuICAgICAgICB0aGlzLnBhcmVudFNjb3BlID0gdDtcbiAgICAgICAgdGhpcy5iaW5kaW5nQ29udGV4dCA9IGU7XG4gICAgICAgIHRoaXMub3ZlcnJpZGVDb250ZXh0ID0gcztcbiAgICAgICAgdGhpcy5pc0JvdW5kYXJ5ID0gcjtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0LCBlLCBzKSB7XG4gICAgICAgIHJldHVybiBuZXcgU2NvcGUobnVsbCwgdCwgbnVsbCA9PSBlID8gT3ZlcnJpZGVDb250ZXh0LmNyZWF0ZSh0KSA6IGUsIG51bGwgIT09IHMgJiYgdm9pZCAwICE9PSBzID8gcyA6IGZhbHNlKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21PdmVycmlkZSh0KSB7XG4gICAgICAgIGlmIChudWxsID09IHQpIHRocm93IG5ldyBFcnJvcihgQVVSMDIwNDoke3R9YCk7XG4gICAgICAgIHJldHVybiBuZXcgU2NvcGUobnVsbCwgdC5iaW5kaW5nQ29udGV4dCwgdCwgZmFsc2UpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVBhcmVudCh0LCBlKSB7XG4gICAgICAgIGlmIChudWxsID09IHQpIHRocm93IG5ldyBFcnJvcihgQVVSMDIwNToke3R9YCk7XG4gICAgICAgIHJldHVybiBuZXcgU2NvcGUodCwgZSwgT3ZlcnJpZGVDb250ZXh0LmNyZWF0ZShlKSwgZmFsc2UpO1xuICAgIH1cbn1cblxuY2xhc3MgT3ZlcnJpZGVDb250ZXh0IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuYmluZGluZ0NvbnRleHQgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPdmVycmlkZUNvbnRleHQodCk7XG4gICAgfVxufVxuXG5jb25zdCBCID0gci5jcmVhdGVJbnRlcmZhY2UoXCJJU2lnbmFsZXJcIiwgKHQgPT4gdC5zaW5nbGV0b24oU2lnbmFsZXIpKSk7XG5cbmNsYXNzIFNpZ25hbGVyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zaWduYWxzID0gRSgpO1xuICAgIH1cbiAgICBkaXNwYXRjaFNpZ25hbCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnNpZ25hbHNbdF07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHMpIHJldHVybjtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIGZvciAociBvZiBzLmtleXMoKSkgci5oYW5kbGVDaGFuZ2Uodm9pZCAwLCB2b2lkIDAsIGUpO1xuICAgIH1cbiAgICBhZGRTaWduYWxMaXN0ZW5lcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnNpZ25hbHM7XG4gICAgICAgIGNvbnN0IHIgPSBzW3RdO1xuICAgICAgICBpZiAodm9pZCAwID09PSByKSBzW3RdID0gbmV3IFNldChbIGUgXSk7IGVsc2Ugci5hZGQoZSk7XG4gICAgfVxuICAgIHJlbW92ZVNpZ25hbExpc3RlbmVyKHQsIGUpIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuc2lnbmFsc1t0XTtcbiAgICAgICAgaWYgKHMpIHMuZGVsZXRlKGUpO1xuICAgIH1cbn1cblxudmFyICQ7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wic2luZ2xldG9uXCJdID0gMV0gPSBcInNpbmdsZXRvblwiO1xuICAgIHRbdFtcImludGVyY2VwdG9yXCJdID0gMl0gPSBcImludGVyY2VwdG9yXCI7XG59KSgkIHx8ICgkID0ge30pKTtcblxuZnVuY3Rpb24gTCh0KSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgcmV0dXJuIFQuZGVmaW5lKHQsIGUpO1xuICAgIH07XG59XG5cbmNsYXNzIEJpbmRpbmdCZWhhdmlvckRlZmluaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIHMsIHIsIGkpIHtcbiAgICAgICAgdGhpcy5UeXBlID0gdDtcbiAgICAgICAgdGhpcy5uYW1lID0gZTtcbiAgICAgICAgdGhpcy5hbGlhc2VzID0gcztcbiAgICAgICAgdGhpcy5rZXkgPSByO1xuICAgICAgICB0aGlzLnN0cmF0ZWd5ID0gaTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZSh0LCBlKSB7XG4gICAgICAgIGxldCBzO1xuICAgICAgICBsZXQgcjtcbiAgICAgICAgaWYgKGcodCkpIHtcbiAgICAgICAgICAgIHMgPSB0O1xuICAgICAgICAgICAgciA9IHtcbiAgICAgICAgICAgICAgICBuYW1lOiBzXG4gICAgICAgICAgICB9O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcyA9IHQubmFtZTtcbiAgICAgICAgICAgIHIgPSB0O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGggPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSkgPT09IEJpbmRpbmdJbnRlcmNlcHRvcjtcbiAgICAgICAgcmV0dXJuIG5ldyBCaW5kaW5nQmVoYXZpb3JEZWZpbml0aW9uKGUsIGkoUChlLCBcIm5hbWVcIiksIHMpLCBuKFAoZSwgXCJhbGlhc2VzXCIpLCByLmFsaWFzZXMsIGUuYWxpYXNlcyksIFQua2V5RnJvbShzKSwgbyhcInN0cmF0ZWd5XCIsIHIsIGUsICgoKSA9PiBoID8gMiA6IDEpKSk7XG4gICAgfVxuICAgIHJlZ2lzdGVyKHQpIHtcbiAgICAgICAgY29uc3Qge1R5cGU6IGUsIGtleTogciwgYWxpYXNlczogaSwgc3RyYXRlZ3k6IG59ID0gdGhpcztcbiAgICAgICAgc3dpdGNoIChuKSB7XG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcy5zaW5nbGV0b24ociwgZSkucmVnaXN0ZXIodCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHMuaW5zdGFuY2UociwgbmV3IEJpbmRpbmdCZWhhdmlvckZhY3RvcnkodCwgZSkpLnJlZ2lzdGVyKHQpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcy5hbGlhc1RvKHIsIGUpLnJlZ2lzdGVyKHQpO1xuICAgICAgICBDKGksIFQsIHIsIHQpO1xuICAgIH1cbn1cblxuY2xhc3MgQmluZGluZ0JlaGF2aW9yRmFjdG9yeSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmN0biA9IHQ7XG4gICAgICAgIHRoaXMuVHlwZSA9IGU7XG4gICAgICAgIHRoaXMuZGVwcyA9IHIuZ2V0RGVwZW5kZW5jaWVzKGUpO1xuICAgIH1cbiAgICBjb25zdHJ1Y3QodCwgZSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy5jdG47XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmRlcHM7XG4gICAgICAgIHN3aXRjaCAoci5sZW5ndGgpIHtcbiAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICByZXR1cm4gbmV3IHRoaXMuVHlwZSh0LCBlKTtcblxuICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5UeXBlKHMuZ2V0KHJbMF0pLCB0LCBlKTtcblxuICAgICAgICAgIGNhc2UgMjpcbiAgICAgICAgICAgIHJldHVybiBuZXcgdGhpcy5UeXBlKHMuZ2V0KHJbMF0pLCBzLmdldChyWzFdKSwgdCwgZSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIG5ldyB0aGlzLlR5cGUoLi4uci5tYXAoKHQgPT4gcy5nZXQodCkpKSwgdCwgZSk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmNsYXNzIEJpbmRpbmdJbnRlcmNlcHRvciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmJpbmRpbmcgPSB0O1xuICAgICAgICB0aGlzLmV4cHIgPSBlO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIHdoaWxlICh0LmludGVyY2VwdG9yICE9PSB0aGlzKSB7XG4gICAgICAgICAgICBzID0gdC5pbnRlcmNlcHRvcjtcbiAgICAgICAgICAgIHQuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgICAgICAgICAgdCA9IHM7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0IG9MKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5kaW5nLm9MO1xuICAgIH1cbiAgICBnZXQgbG9jYXRvcigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmluZGluZy5sb2NhdG9yO1xuICAgIH1cbiAgICBnZXQgJHNjb3BlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5kaW5nLiRzY29wZTtcbiAgICB9XG4gICAgZ2V0IGlzQm91bmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmJpbmRpbmcuaXNCb3VuZDtcbiAgICB9XG4gICAgZ2V0IG9icygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmluZGluZy5vYnM7XG4gICAgfVxuICAgIGdldCBzb3VyY2VFeHByZXNzaW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5kaW5nLnNvdXJjZUV4cHJlc3Npb247XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldCh0LCBlKSB7XG4gICAgICAgIHRoaXMuYmluZGluZy51cGRhdGVUYXJnZXQodCwgZSk7XG4gICAgfVxuICAgIHVwZGF0ZVNvdXJjZSh0LCBlKSB7XG4gICAgICAgIHRoaXMuYmluZGluZy51cGRhdGVTb3VyY2UodCwgZSk7XG4gICAgfVxuICAgIGNhbGxTb3VyY2UodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5iaW5kaW5nLmNhbGxTb3VyY2UodCk7XG4gICAgfVxuICAgIGhhbmRsZUNoYW5nZSh0LCBlLCBzKSB7XG4gICAgICAgIHRoaXMuYmluZGluZy5oYW5kbGVDaGFuZ2UodCwgZSwgcyk7XG4gICAgfVxuICAgIGhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UodCwgZSkge1xuICAgICAgICB0aGlzLmJpbmRpbmcuaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSh0LCBlKTtcbiAgICB9XG4gICAgb2JzZXJ2ZSh0LCBlKSB7XG4gICAgICAgIHRoaXMuYmluZGluZy5vYnNlcnZlKHQsIGUpO1xuICAgIH1cbiAgICBvYnNlcnZlQ29sbGVjdGlvbih0KSB7XG4gICAgICAgIHRoaXMuYmluZGluZy5vYnNlcnZlQ29sbGVjdGlvbih0KTtcbiAgICB9XG4gICAgJGJpbmQodCwgZSkge1xuICAgICAgICB0aGlzLmJpbmRpbmcuJGJpbmQodCwgZSk7XG4gICAgfVxuICAgICR1bmJpbmQodCkge1xuICAgICAgICB0aGlzLmJpbmRpbmcuJHVuYmluZCh0KTtcbiAgICB9XG59XG5cbmNvbnN0IFIgPSB4KFwiYmluZGluZy1iZWhhdmlvclwiKTtcblxuY29uc3QgUCA9ICh0LCBlKSA9PiBBKFUoZSksIHQpO1xuXG5jb25zdCBUID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgbmFtZTogUixcbiAgICBrZXlGcm9tKHQpIHtcbiAgICAgICAgcmV0dXJuIGAke1J9OiR7dH1gO1xuICAgIH0sXG4gICAgaXNUeXBlKHQpIHtcbiAgICAgICAgcmV0dXJuIHAodCkgJiYgeShSLCB0KTtcbiAgICB9LFxuICAgIGRlZmluZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IHMgPSBCaW5kaW5nQmVoYXZpb3JEZWZpbml0aW9uLmNyZWF0ZSh0LCBlKTtcbiAgICAgICAgbShSLCBzLCBzLlR5cGUpO1xuICAgICAgICBtKFIsIHMsIHMpO1xuICAgICAgICBTKGUsIFIpO1xuICAgICAgICByZXR1cm4gcy5UeXBlO1xuICAgIH0sXG4gICAgZ2V0RGVmaW5pdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBBKFIsIHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNTE6JHt0Lm5hbWV9YCk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH0sXG4gICAgYW5ub3RhdGUodCwgZSwgcykge1xuICAgICAgICBtKFUoZSksIHMsIHQpO1xuICAgIH0sXG4gICAgZ2V0QW5ub3RhdGlvbjogUFxufSk7XG5cbmZ1bmN0aW9uIGoodCkge1xuICAgIHJldHVybiBmdW5jdGlvbihlKSB7XG4gICAgICAgIHJldHVybiBELmRlZmluZSh0LCBlKTtcbiAgICB9O1xufVxuXG5jbGFzcyBWYWx1ZUNvbnZlcnRlckRlZmluaXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgdGhpcy5UeXBlID0gdDtcbiAgICAgICAgdGhpcy5uYW1lID0gZTtcbiAgICAgICAgdGhpcy5hbGlhc2VzID0gcztcbiAgICAgICAgdGhpcy5rZXkgPSByO1xuICAgIH1cbiAgICBzdGF0aWMgY3JlYXRlKHQsIGUpIHtcbiAgICAgICAgbGV0IHM7XG4gICAgICAgIGxldCByO1xuICAgICAgICBpZiAoZyh0KSkge1xuICAgICAgICAgICAgcyA9IHQ7XG4gICAgICAgICAgICByID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IHNcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBzID0gdC5uYW1lO1xuICAgICAgICAgICAgciA9IHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBWYWx1ZUNvbnZlcnRlckRlZmluaXRpb24oZSwgaShNKGUsIFwibmFtZVwiKSwgcyksIG4oTShlLCBcImFsaWFzZXNcIiksIHIuYWxpYXNlcywgZS5hbGlhc2VzKSwgRC5rZXlGcm9tKHMpKTtcbiAgICB9XG4gICAgcmVnaXN0ZXIodCkge1xuICAgICAgICBjb25zdCB7VHlwZTogZSwga2V5OiByLCBhbGlhc2VzOiBpfSA9IHRoaXM7XG4gICAgICAgIHMuc2luZ2xldG9uKHIsIGUpLnJlZ2lzdGVyKHQpO1xuICAgICAgICBzLmFsaWFzVG8ociwgZSkucmVnaXN0ZXIodCk7XG4gICAgICAgIEMoaSwgRCwgciwgdCk7XG4gICAgfVxufVxuXG5jb25zdCBJID0geChcInZhbHVlLWNvbnZlcnRlclwiKTtcblxuY29uc3QgTSA9ICh0LCBlKSA9PiBBKFUoZSksIHQpO1xuXG5jb25zdCBEID0gT2JqZWN0LmZyZWV6ZSh7XG4gICAgbmFtZTogSSxcbiAgICBrZXlGcm9tOiB0ID0+IGAke0l9OiR7dH1gLFxuICAgIGlzVHlwZSh0KSB7XG4gICAgICAgIHJldHVybiBwKHQpICYmIHkoSSwgdCk7XG4gICAgfSxcbiAgICBkZWZpbmUodCwgZSkge1xuICAgICAgICBjb25zdCBzID0gVmFsdWVDb252ZXJ0ZXJEZWZpbml0aW9uLmNyZWF0ZSh0LCBlKTtcbiAgICAgICAgbShJLCBzLCBzLlR5cGUpO1xuICAgICAgICBtKEksIHMsIHMpO1xuICAgICAgICBTKGUsIEkpO1xuICAgICAgICByZXR1cm4gcy5UeXBlO1xuICAgIH0sXG4gICAgZ2V0RGVmaW5pdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBBKEksIHQpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNTI6JHt0Lm5hbWV9YCk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH0sXG4gICAgYW5ub3RhdGUodCwgZSwgcykge1xuICAgICAgICBtKFUoZSksIHMsIHQpO1xuICAgIH0sXG4gICAgZ2V0QW5ub3RhdGlvbjogTVxufSk7XG5cbnZhciBGO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIkNhbGxzRnVuY3Rpb25cIl0gPSAxMjhdID0gXCJDYWxsc0Z1bmN0aW9uXCI7XG4gICAgdFt0W1wiSGFzQW5jZXN0b3JcIl0gPSAyNTZdID0gXCJIYXNBbmNlc3RvclwiO1xuICAgIHRbdFtcIklzUHJpbWFyeVwiXSA9IDUxMl0gPSBcIklzUHJpbWFyeVwiO1xuICAgIHRbdFtcIklzTGVmdEhhbmRTaWRlXCJdID0gMTAyNF0gPSBcIklzTGVmdEhhbmRTaWRlXCI7XG4gICAgdFt0W1wiSGFzQmluZFwiXSA9IDIwNDhdID0gXCJIYXNCaW5kXCI7XG4gICAgdFt0W1wiSGFzVW5iaW5kXCJdID0gNDA5Nl0gPSBcIkhhc1VuYmluZFwiO1xuICAgIHRbdFtcIklzQXNzaWduYWJsZVwiXSA9IDgxOTJdID0gXCJJc0Fzc2lnbmFibGVcIjtcbiAgICB0W3RbXCJJc0xpdGVyYWxcIl0gPSAxNjM4NF0gPSBcIklzTGl0ZXJhbFwiO1xuICAgIHRbdFtcIklzUmVzb3VyY2VcIl0gPSAzMjc2OF0gPSBcIklzUmVzb3VyY2VcIjtcbiAgICB0W3RbXCJJc0ZvckRlY2xhcmF0aW9uXCJdID0gNjU1MzZdID0gXCJJc0ZvckRlY2xhcmF0aW9uXCI7XG4gICAgdFt0W1wiVHlwZVwiXSA9IDMxXSA9IFwiVHlwZVwiO1xuICAgIHRbdFtcIkFjY2Vzc1RoaXNcIl0gPSAxNzkzXSA9IFwiQWNjZXNzVGhpc1wiO1xuICAgIHRbdFtcIkFjY2Vzc1Njb3BlXCJdID0gMTAwODJdID0gXCJBY2Nlc3NTY29wZVwiO1xuICAgIHRbdFtcIkFycmF5TGl0ZXJhbFwiXSA9IDE3OTU1XSA9IFwiQXJyYXlMaXRlcmFsXCI7XG4gICAgdFt0W1wiT2JqZWN0TGl0ZXJhbFwiXSA9IDE3OTU2XSA9IFwiT2JqZWN0TGl0ZXJhbFwiO1xuICAgIHRbdFtcIlByaW1pdGl2ZUxpdGVyYWxcIl0gPSAxNzkyNV0gPSBcIlByaW1pdGl2ZUxpdGVyYWxcIjtcbiAgICB0W3RbXCJUZW1wbGF0ZVwiXSA9IDE3OTU4XSA9IFwiVGVtcGxhdGVcIjtcbiAgICB0W3RbXCJVbmFyeVwiXSA9IDM5XSA9IFwiVW5hcnlcIjtcbiAgICB0W3RbXCJDYWxsU2NvcGVcIl0gPSAxNDQ4XSA9IFwiQ2FsbFNjb3BlXCI7XG4gICAgdFt0W1wiQ2FsbE1lbWJlclwiXSA9IDExNjFdID0gXCJDYWxsTWVtYmVyXCI7XG4gICAgdFt0W1wiQ2FsbEZ1bmN0aW9uXCJdID0gMTE2Ml0gPSBcIkNhbGxGdW5jdGlvblwiO1xuICAgIHRbdFtcIkFjY2Vzc01lbWJlclwiXSA9IDkzMjNdID0gXCJBY2Nlc3NNZW1iZXJcIjtcbiAgICB0W3RbXCJBY2Nlc3NLZXllZFwiXSA9IDkzMjRdID0gXCJBY2Nlc3NLZXllZFwiO1xuICAgIHRbdFtcIlRhZ2dlZFRlbXBsYXRlXCJdID0gMTE5N10gPSBcIlRhZ2dlZFRlbXBsYXRlXCI7XG4gICAgdFt0W1wiQmluYXJ5XCJdID0gNDZdID0gXCJCaW5hcnlcIjtcbiAgICB0W3RbXCJDb25kaXRpb25hbFwiXSA9IDYzXSA9IFwiQ29uZGl0aW9uYWxcIjtcbiAgICB0W3RbXCJBc3NpZ25cIl0gPSA4MjA4XSA9IFwiQXNzaWduXCI7XG4gICAgdFt0W1wiVmFsdWVDb252ZXJ0ZXJcIl0gPSAzNjkxM10gPSBcIlZhbHVlQ29udmVydGVyXCI7XG4gICAgdFt0W1wiQmluZGluZ0JlaGF2aW9yXCJdID0gMzg5NjJdID0gXCJCaW5kaW5nQmVoYXZpb3JcIjtcbiAgICB0W3RbXCJIdG1sTGl0ZXJhbFwiXSA9IDUxXSA9IFwiSHRtbExpdGVyYWxcIjtcbiAgICB0W3RbXCJBcnJheUJpbmRpbmdQYXR0ZXJuXCJdID0gNjU1NTZdID0gXCJBcnJheUJpbmRpbmdQYXR0ZXJuXCI7XG4gICAgdFt0W1wiT2JqZWN0QmluZGluZ1BhdHRlcm5cIl0gPSA2NTU1N10gPSBcIk9iamVjdEJpbmRpbmdQYXR0ZXJuXCI7XG4gICAgdFt0W1wiQmluZGluZ0lkZW50aWZpZXJcIl0gPSA2NTU1OF0gPSBcIkJpbmRpbmdJZGVudGlmaWVyXCI7XG4gICAgdFt0W1wiRm9yT2ZTdGF0ZW1lbnRcIl0gPSA2MTk5XSA9IFwiRm9yT2ZTdGF0ZW1lbnRcIjtcbiAgICB0W3RbXCJJbnRlcnBvbGF0aW9uXCJdID0gMjRdID0gXCJJbnRlcnBvbGF0aW9uXCI7XG4gICAgdFt0W1wiQXJyYXlEZXN0cnVjdHVyaW5nXCJdID0gOTAxMzddID0gXCJBcnJheURlc3RydWN0dXJpbmdcIjtcbiAgICB0W3RbXCJPYmplY3REZXN0cnVjdHVyaW5nXCJdID0gMTA2NTIxXSA9IFwiT2JqZWN0RGVzdHJ1Y3R1cmluZ1wiO1xuICAgIHRbdFtcIkRlc3RydWN0dXJpbmdBc3NpZ25tZW50TGVhZlwiXSA9IDEzOTI4OV0gPSBcIkRlc3RydWN0dXJpbmdBc3NpZ25tZW50TGVhZlwiO1xufSkoRiB8fCAoRiA9IHt9KSk7XG5cbmNsYXNzIFVucGFyc2VyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50ZXh0ID0gXCJcIjtcbiAgICB9XG4gICAgc3RhdGljIHVucGFyc2UodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IFVucGFyc2VyO1xuICAgICAgICB0LmFjY2VwdChlKTtcbiAgICAgICAgcmV0dXJuIGUudGV4dDtcbiAgICB9XG4gICAgdmlzaXRBY2Nlc3NNZW1iZXIodCkge1xuICAgICAgICB0Lm9iamVjdC5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBgLiR7dC5uYW1lfWA7XG4gICAgfVxuICAgIHZpc2l0QWNjZXNzS2V5ZWQodCkge1xuICAgICAgICB0Lm9iamVjdC5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIltcIjtcbiAgICAgICAgdC5rZXkuYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCJdXCI7XG4gICAgfVxuICAgIHZpc2l0QWNjZXNzVGhpcyh0KSB7XG4gICAgICAgIGlmICgwID09PSB0LmFuY2VzdG9yKSB7XG4gICAgICAgICAgICB0aGlzLnRleHQgKz0gXCIkdGhpc1wiO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGV4dCArPSBcIiRwYXJlbnRcIjtcbiAgICAgICAgbGV0IGUgPSB0LmFuY2VzdG9yIC0gMTtcbiAgICAgICAgd2hpbGUgKGUtLSkgdGhpcy50ZXh0ICs9IFwiLiRwYXJlbnRcIjtcbiAgICB9XG4gICAgdmlzaXRBY2Nlc3NTY29wZSh0KSB7XG4gICAgICAgIGxldCBlID0gdC5hbmNlc3RvcjtcbiAgICAgICAgd2hpbGUgKGUtLSkgdGhpcy50ZXh0ICs9IFwiJHBhcmVudC5cIjtcbiAgICAgICAgdGhpcy50ZXh0ICs9IHQubmFtZTtcbiAgICB9XG4gICAgdmlzaXRBcnJheUxpdGVyYWwodCkge1xuICAgICAgICBjb25zdCBlID0gdC5lbGVtZW50cztcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiW1wiO1xuICAgICAgICBmb3IgKGxldCB0ID0gMCwgcyA9IGUubGVuZ3RoOyB0IDwgczsgKyt0KSB7XG4gICAgICAgICAgICBpZiAoMCAhPT0gdCkgdGhpcy50ZXh0ICs9IFwiLFwiO1xuICAgICAgICAgICAgZVt0XS5hY2NlcHQodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiXVwiO1xuICAgIH1cbiAgICB2aXNpdE9iamVjdExpdGVyYWwodCkge1xuICAgICAgICBjb25zdCBlID0gdC5rZXlzO1xuICAgICAgICBjb25zdCBzID0gdC52YWx1ZXM7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIntcIjtcbiAgICAgICAgZm9yIChsZXQgdCA9IDAsIHIgPSBlLmxlbmd0aDsgdCA8IHI7ICsrdCkge1xuICAgICAgICAgICAgaWYgKDAgIT09IHQpIHRoaXMudGV4dCArPSBcIixcIjtcbiAgICAgICAgICAgIHRoaXMudGV4dCArPSBgJyR7ZVt0XX0nOmA7XG4gICAgICAgICAgICBzW3RdLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHQgKz0gXCJ9XCI7XG4gICAgfVxuICAgIHZpc2l0UHJpbWl0aXZlTGl0ZXJhbCh0KSB7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIihcIjtcbiAgICAgICAgaWYgKGcodC52YWx1ZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LnZhbHVlLnJlcGxhY2UoLycvZywgXCJcXFxcJ1wiKTtcbiAgICAgICAgICAgIHRoaXMudGV4dCArPSBgJyR7ZX0nYDtcbiAgICAgICAgfSBlbHNlIHRoaXMudGV4dCArPSBgJHt0LnZhbHVlfWA7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIilcIjtcbiAgICB9XG4gICAgdmlzaXRDYWxsRnVuY3Rpb24odCkge1xuICAgICAgICB0aGlzLnRleHQgKz0gXCIoXCI7XG4gICAgICAgIHQuZnVuYy5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMud3JpdGVBcmdzKHQuYXJncyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIilcIjtcbiAgICB9XG4gICAgdmlzaXRDYWxsTWVtYmVyKHQpIHtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiKFwiO1xuICAgICAgICB0Lm9iamVjdC5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBgLiR7dC5uYW1lfWA7XG4gICAgICAgIHRoaXMud3JpdGVBcmdzKHQuYXJncyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIilcIjtcbiAgICB9XG4gICAgdmlzaXRDYWxsU2NvcGUodCkge1xuICAgICAgICB0aGlzLnRleHQgKz0gXCIoXCI7XG4gICAgICAgIGxldCBlID0gdC5hbmNlc3RvcjtcbiAgICAgICAgd2hpbGUgKGUtLSkgdGhpcy50ZXh0ICs9IFwiJHBhcmVudC5cIjtcbiAgICAgICAgdGhpcy50ZXh0ICs9IHQubmFtZTtcbiAgICAgICAgdGhpcy53cml0ZUFyZ3ModC5hcmdzKTtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiKVwiO1xuICAgIH1cbiAgICB2aXNpdFRlbXBsYXRlKHQpIHtcbiAgICAgICAgY29uc3Qge2Nvb2tlZDogZSwgZXhwcmVzc2lvbnM6IHN9ID0gdDtcbiAgICAgICAgY29uc3QgciA9IHMubGVuZ3RoO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCJgXCI7XG4gICAgICAgIHRoaXMudGV4dCArPSBlWzBdO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHI7IHQrKykge1xuICAgICAgICAgICAgc1t0XS5hY2NlcHQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnRleHQgKz0gZVt0ICsgMV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiYFwiO1xuICAgIH1cbiAgICB2aXNpdFRhZ2dlZFRlbXBsYXRlKHQpIHtcbiAgICAgICAgY29uc3Qge2Nvb2tlZDogZSwgZXhwcmVzc2lvbnM6IHN9ID0gdDtcbiAgICAgICAgY29uc3QgciA9IHMubGVuZ3RoO1xuICAgICAgICB0LmZ1bmMuYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCJgXCI7XG4gICAgICAgIHRoaXMudGV4dCArPSBlWzBdO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHI7IHQrKykge1xuICAgICAgICAgICAgc1t0XS5hY2NlcHQodGhpcyk7XG4gICAgICAgICAgICB0aGlzLnRleHQgKz0gZVt0ICsgMV07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiYFwiO1xuICAgIH1cbiAgICB2aXNpdFVuYXJ5KHQpIHtcbiAgICAgICAgdGhpcy50ZXh0ICs9IGAoJHt0Lm9wZXJhdGlvbn1gO1xuICAgICAgICBpZiAodC5vcGVyYXRpb24uY2hhckNvZGVBdCgwKSA+PSA5NykgdGhpcy50ZXh0ICs9IFwiIFwiO1xuICAgICAgICB0LmV4cHJlc3Npb24uYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCIpXCI7XG4gICAgfVxuICAgIHZpc2l0QmluYXJ5KHQpIHtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiKFwiO1xuICAgICAgICB0LmxlZnQuYWNjZXB0KHRoaXMpO1xuICAgICAgICBpZiAoMTA1ID09PSB0Lm9wZXJhdGlvbi5jaGFyQ29kZUF0KDApKSB0aGlzLnRleHQgKz0gYCAke3Qub3BlcmF0aW9ufSBgOyBlbHNlIHRoaXMudGV4dCArPSB0Lm9wZXJhdGlvbjtcbiAgICAgICAgdC5yaWdodC5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIilcIjtcbiAgICB9XG4gICAgdmlzaXRDb25kaXRpb25hbCh0KSB7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIihcIjtcbiAgICAgICAgdC5jb25kaXRpb24uYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCI/XCI7XG4gICAgICAgIHQueWVzLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiOlwiO1xuICAgICAgICB0Lm5vLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiKVwiO1xuICAgIH1cbiAgICB2aXNpdEFzc2lnbih0KSB7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIihcIjtcbiAgICAgICAgdC50YXJnZXQuYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCI9XCI7XG4gICAgICAgIHQudmFsdWUuYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCIpXCI7XG4gICAgfVxuICAgIHZpc2l0VmFsdWVDb252ZXJ0ZXIodCkge1xuICAgICAgICBjb25zdCBlID0gdC5hcmdzO1xuICAgICAgICB0LmV4cHJlc3Npb24uYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gYHwke3QubmFtZX1gO1xuICAgICAgICBmb3IgKGxldCB0ID0gMCwgcyA9IGUubGVuZ3RoOyB0IDwgczsgKyt0KSB7XG4gICAgICAgICAgICB0aGlzLnRleHQgKz0gXCI6XCI7XG4gICAgICAgICAgICBlW3RdLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB2aXNpdEJpbmRpbmdCZWhhdmlvcih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmFyZ3M7XG4gICAgICAgIHQuZXhwcmVzc2lvbi5hY2NlcHQodGhpcyk7XG4gICAgICAgIHRoaXMudGV4dCArPSBgJiR7dC5uYW1lfWA7XG4gICAgICAgIGZvciAobGV0IHQgPSAwLCBzID0gZS5sZW5ndGg7IHQgPCBzOyArK3QpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dCArPSBcIjpcIjtcbiAgICAgICAgICAgIGVbdF0uYWNjZXB0KHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZpc2l0QXJyYXlCaW5kaW5nUGF0dGVybih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmVsZW1lbnRzO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCJbXCI7XG4gICAgICAgIGZvciAobGV0IHQgPSAwLCBzID0gZS5sZW5ndGg7IHQgPCBzOyArK3QpIHtcbiAgICAgICAgICAgIGlmICgwICE9PSB0KSB0aGlzLnRleHQgKz0gXCIsXCI7XG4gICAgICAgICAgICBlW3RdLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHQgKz0gXCJdXCI7XG4gICAgfVxuICAgIHZpc2l0T2JqZWN0QmluZGluZ1BhdHRlcm4odCkge1xuICAgICAgICBjb25zdCBlID0gdC5rZXlzO1xuICAgICAgICBjb25zdCBzID0gdC52YWx1ZXM7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIntcIjtcbiAgICAgICAgZm9yIChsZXQgdCA9IDAsIHIgPSBlLmxlbmd0aDsgdCA8IHI7ICsrdCkge1xuICAgICAgICAgICAgaWYgKDAgIT09IHQpIHRoaXMudGV4dCArPSBcIixcIjtcbiAgICAgICAgICAgIHRoaXMudGV4dCArPSBgJyR7ZVt0XX0nOmA7XG4gICAgICAgICAgICBzW3RdLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHQgKz0gXCJ9XCI7XG4gICAgfVxuICAgIHZpc2l0QmluZGluZ0lkZW50aWZpZXIodCkge1xuICAgICAgICB0aGlzLnRleHQgKz0gdC5uYW1lO1xuICAgIH1cbiAgICB2aXNpdEh0bWxMaXRlcmFsKHQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidmlzaXRIdG1sTGl0ZXJhbFwiKTtcbiAgICB9XG4gICAgdmlzaXRGb3JPZlN0YXRlbWVudCh0KSB7XG4gICAgICAgIHQuZGVjbGFyYXRpb24uYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCIgb2YgXCI7XG4gICAgICAgIHQuaXRlcmFibGUuYWNjZXB0KHRoaXMpO1xuICAgIH1cbiAgICB2aXNpdEludGVycG9sYXRpb24odCkge1xuICAgICAgICBjb25zdCB7cGFydHM6IGUsIGV4cHJlc3Npb25zOiBzfSA9IHQ7XG4gICAgICAgIGNvbnN0IHIgPSBzLmxlbmd0aDtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiJHtcIjtcbiAgICAgICAgdGhpcy50ZXh0ICs9IGVbMF07XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgcjsgdCsrKSB7XG4gICAgICAgICAgICBzW3RdLmFjY2VwdCh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMudGV4dCArPSBlW3QgKyAxXTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHQgKz0gXCJ9XCI7XG4gICAgfVxuICAgIHZpc2l0RGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRFeHByZXNzaW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuJGtpbmQ7XG4gICAgICAgIGNvbnN0IHMgPSAxMDY1MjEgPT09IGU7XG4gICAgICAgIHRoaXMudGV4dCArPSBzID8gXCJ7XCIgOiBcIltcIjtcbiAgICAgICAgY29uc3QgciA9IHQubGlzdDtcbiAgICAgICAgY29uc3QgaSA9IHIubGVuZ3RoO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgbGV0IG87XG4gICAgICAgIGZvciAobiA9IDA7IG4gPCBpOyBuKyspIHtcbiAgICAgICAgICAgIG8gPSByW25dO1xuICAgICAgICAgICAgc3dpdGNoIChvLiRraW5kKSB7XG4gICAgICAgICAgICAgIGNhc2UgMTM5Mjg5OlxuICAgICAgICAgICAgICAgIG8uYWNjZXB0KHRoaXMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgOTAxMzc6XG4gICAgICAgICAgICAgIGNhc2UgMTA2NTIxOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IG8uc291cmNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdC5hY2NlcHQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRleHQgKz0gXCI6XCI7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgby5hY2NlcHQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnRleHQgKz0gcyA/IFwifVwiIDogXCJdXCI7XG4gICAgfVxuICAgIHZpc2l0RGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRTaW5nbGVFeHByZXNzaW9uKHQpIHtcbiAgICAgICAgdC5zb3VyY2UuYWNjZXB0KHRoaXMpO1xuICAgICAgICB0aGlzLnRleHQgKz0gXCI6XCI7XG4gICAgICAgIHQudGFyZ2V0LmFjY2VwdCh0aGlzKTtcbiAgICAgICAgY29uc3QgZSA9IHQuaW5pdGlhbGl6ZXI7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IGUpIHtcbiAgICAgICAgICAgIHRoaXMudGV4dCArPSBcIj1cIjtcbiAgICAgICAgICAgIGUuYWNjZXB0KHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHZpc2l0RGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRSZXN0RXhwcmVzc2lvbih0KSB7XG4gICAgICAgIHRoaXMudGV4dCArPSBcIi4uLlwiO1xuICAgICAgICB0LmFjY2VwdCh0aGlzKTtcbiAgICB9XG4gICAgd3JpdGVBcmdzKHQpIHtcbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiKFwiO1xuICAgICAgICBmb3IgKGxldCBlID0gMCwgcyA9IHQubGVuZ3RoOyBlIDwgczsgKytlKSB7XG4gICAgICAgICAgICBpZiAoMCAhPT0gZSkgdGhpcy50ZXh0ICs9IFwiLFwiO1xuICAgICAgICAgICAgdFtlXS5hY2NlcHQodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50ZXh0ICs9IFwiKVwiO1xuICAgIH1cbn1cblxuY2xhc3MgQ3VzdG9tRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdDtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTtcbiAgICB9XG59XG5cbmNsYXNzIEJpbmRpbmdCZWhhdmlvckV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIHMpIHtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uID0gdDtcbiAgICAgICAgdGhpcy5uYW1lID0gZTtcbiAgICAgICAgdGhpcy5hcmdzID0gcztcbiAgICAgICAgdGhpcy5iZWhhdmlvcktleSA9IFQua2V5RnJvbShlKTtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMzg5NjI7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwcmVzc2lvbi5ldmFsdWF0ZSh0LCBlLCBzLCByKTtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXhwcmVzc2lvbi5hc3NpZ24odCwgZSwgcywgcik7XG4gICAgfVxuICAgIGJpbmQodCwgZSwgcykge1xuICAgICAgICBpZiAodGhpcy5leHByZXNzaW9uLmhhc0JpbmQpIHRoaXMuZXhwcmVzc2lvbi5iaW5kKHQsIGUsIHMpO1xuICAgICAgICBjb25zdCByID0gcy5sb2NhdG9yLmdldCh0aGlzLmJlaGF2aW9yS2V5KTtcbiAgICAgICAgaWYgKG51bGwgPT0gcikgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTAxOiR7dGhpcy5uYW1lfWApO1xuICAgICAgICBpZiAoIShyIGluc3RhbmNlb2YgQmluZGluZ0JlaGF2aW9yRmFjdG9yeSkpIGlmICh2b2lkIDAgPT09IHNbdGhpcy5iZWhhdmlvcktleV0pIHtcbiAgICAgICAgICAgIHNbdGhpcy5iZWhhdmlvcktleV0gPSByO1xuICAgICAgICAgICAgci5iaW5kLmNhbGwociwgdCwgZSwgcywgLi4udGhpcy5hcmdzLm1hcCgociA9PiByLmV2YWx1YXRlKHQsIGUsIHMubG9jYXRvciwgbnVsbCkpKSk7XG4gICAgICAgIH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxMDI6JHt0aGlzLm5hbWV9YCk7XG4gICAgfVxuICAgIHVuYmluZCh0LCBlLCBzKSB7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLmJlaGF2aW9yS2V5O1xuICAgICAgICBjb25zdCBpID0gcztcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gaVtyXSkge1xuICAgICAgICAgICAgaWYgKHAoaVtyXS51bmJpbmQpKSBpW3JdLnVuYmluZCh0LCBlLCBzKTtcbiAgICAgICAgICAgIGlbcl0gPSB2b2lkIDA7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuZXhwcmVzc2lvbi5oYXNVbmJpbmQpIHRoaXMuZXhwcmVzc2lvbi51bmJpbmQodCwgZSwgcyk7XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0QmluZGluZ0JlaGF2aW9yKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBWYWx1ZUNvbnZlcnRlckV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIHMpIHtcbiAgICAgICAgdGhpcy5leHByZXNzaW9uID0gdDtcbiAgICAgICAgdGhpcy5uYW1lID0gZTtcbiAgICAgICAgdGhpcy5hcmdzID0gcztcbiAgICAgICAgdGhpcy5jb252ZXJ0ZXJLZXkgPSBELmtleUZyb20oZSk7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDM2OTEzO1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICBjb25zdCBpID0gcy5nZXQodGhpcy5jb252ZXJ0ZXJLZXkpO1xuICAgICAgICBpZiAobnVsbCA9PSBpKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxMDM6JHt0aGlzLm5hbWV9YCk7XG4gICAgICAgIGlmIChudWxsICE9PSByICYmIFwiaGFuZGxlQ2hhbmdlXCIgaW4gcikge1xuICAgICAgICAgICAgY29uc3QgdCA9IGkuc2lnbmFscztcbiAgICAgICAgICAgIGlmIChudWxsICE9IHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gcy5nZXQoQik7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgcyA9IDAsIGkgPSB0Lmxlbmd0aDsgcyA8IGk7ICsrcykgZS5hZGRTaWduYWxMaXN0ZW5lcih0W3NdLCByKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoXCJ0b1ZpZXdcIiBpbiBpKSByZXR1cm4gaS50b1ZpZXcodGhpcy5leHByZXNzaW9uLmV2YWx1YXRlKHQsIGUsIHMsIHIpLCAuLi50aGlzLmFyZ3MubWFwKChpID0+IGkuZXZhbHVhdGUodCwgZSwgcywgcikpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUodCwgZSwgcywgcik7XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSBzLmdldCh0aGlzLmNvbnZlcnRlcktleSk7XG4gICAgICAgIGlmIChudWxsID09IGkpIHRocm93IG5ldyBFcnJvcihgQVVSMDEwNDoke3RoaXMubmFtZX1gKTtcbiAgICAgICAgaWYgKFwiZnJvbVZpZXdcIiBpbiBpKSByID0gaS5mcm9tVmlldyhyLCAuLi50aGlzLmFyZ3MubWFwKChyID0+IHIuZXZhbHVhdGUodCwgZSwgcywgbnVsbCkpKSk7XG4gICAgICAgIHJldHVybiB0aGlzLmV4cHJlc3Npb24uYXNzaWduKHQsIGUsIHMsIHIpO1xuICAgIH1cbiAgICB1bmJpbmQodCwgZSwgcykge1xuICAgICAgICBjb25zdCByID0gcy5sb2NhdG9yLmdldCh0aGlzLmNvbnZlcnRlcktleSk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHIuc2lnbmFscykgcmV0dXJuO1xuICAgICAgICBjb25zdCBpID0gcy5sb2NhdG9yLmdldChCKTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCByLnNpZ25hbHMubGVuZ3RoOyArK3QpIGkucmVtb3ZlU2lnbmFsTGlzdGVuZXIoci5zaWduYWxzW3RdLCBzKTtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRWYWx1ZUNvbnZlcnRlcih0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgQXNzaWduRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnRhcmdldCA9IHQ7XG4gICAgICAgIHRoaXMudmFsdWUgPSBlO1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiA4MjA4O1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGFyZ2V0LmFzc2lnbih0LCBlLCBzLCB0aGlzLnZhbHVlLmV2YWx1YXRlKHQsIGUsIHMsIHIpKTtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgdGhpcy52YWx1ZS5hc3NpZ24odCwgZSwgcywgcik7XG4gICAgICAgIHJldHVybiB0aGlzLnRhcmdldC5hc3NpZ24odCwgZSwgcywgcik7XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0QXNzaWduKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBDb25kaXRpb25hbEV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIHMpIHtcbiAgICAgICAgdGhpcy5jb25kaXRpb24gPSB0O1xuICAgICAgICB0aGlzLnllcyA9IGU7XG4gICAgICAgIHRoaXMubm8gPSBzO1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiA2MztcbiAgICB9XG4gICAgZ2V0IGhhc0JpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbmRpdGlvbi5ldmFsdWF0ZSh0LCBlLCBzLCByKSA/IHRoaXMueWVzLmV2YWx1YXRlKHQsIGUsIHMsIHIpIDogdGhpcy5uby5ldmFsdWF0ZSh0LCBlLCBzLCByKTtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdENvbmRpdGlvbmFsKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBBY2Nlc3NUaGlzRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCA9IDApIHtcbiAgICAgICAgdGhpcy5hbmNlc3RvciA9IHQ7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDE3OTM7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgbGV0IG4gPSBlLm92ZXJyaWRlQ29udGV4dDtcbiAgICAgICAgbGV0IG8gPSBlO1xuICAgICAgICBsZXQgaCA9IHRoaXMuYW5jZXN0b3I7XG4gICAgICAgIHdoaWxlIChoLS0gJiYgbikge1xuICAgICAgICAgICAgbyA9IG8ucGFyZW50U2NvcGU7XG4gICAgICAgICAgICBuID0gbnVsbCAhPT0gKGkgPSBudWxsID09PSBvIHx8IHZvaWQgMCA9PT0gbyA/IHZvaWQgMCA6IG8ub3ZlcnJpZGVDb250ZXh0KSAmJiB2b2lkIDAgIT09IGkgPyBpIDogbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaCA8IDEgJiYgbiA/IG4uYmluZGluZ0NvbnRleHQgOiB2b2lkIDA7XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRBY2Nlc3NUaGlzKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5BY2Nlc3NUaGlzRXhwcmVzc2lvbi4kdGhpcyA9IG5ldyBBY2Nlc3NUaGlzRXhwcmVzc2lvbigwKTtcblxuQWNjZXNzVGhpc0V4cHJlc3Npb24uJHBhcmVudCA9IG5ldyBBY2Nlc3NUaGlzRXhwcmVzc2lvbigxKTtcblxuY2xhc3MgQWNjZXNzU2NvcGVFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlID0gMCkge1xuICAgICAgICB0aGlzLm5hbWUgPSB0O1xuICAgICAgICB0aGlzLmFuY2VzdG9yID0gZTtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMTAwODI7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICBjb25zdCBpID0gQmluZGluZ0NvbnRleHQuZ2V0KGUsIHRoaXMubmFtZSwgdGhpcy5hbmNlc3RvciwgdCk7XG4gICAgICAgIGlmIChudWxsICE9PSByKSByLm9ic2VydmUoaSwgdGhpcy5uYW1lKTtcbiAgICAgICAgY29uc3QgbiA9IGlbdGhpcy5uYW1lXTtcbiAgICAgICAgaWYgKG51bGwgPT0gbiAmJiBcIiRob3N0XCIgPT09IHRoaXMubmFtZSkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDEwNVwiKTtcbiAgICAgICAgaWYgKDEgJiB0KSByZXR1cm4gbjtcbiAgICAgICAgcmV0dXJuIG51bGwgPT0gbiA/IFwiXCIgOiBuO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgaWYgKFwiJGhvc3RcIiA9PT0gdGhpcy5uYW1lKSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwMTA2XCIpO1xuICAgICAgICBjb25zdCBuID0gQmluZGluZ0NvbnRleHQuZ2V0KGUsIHRoaXMubmFtZSwgdGhpcy5hbmNlc3RvciwgdCk7XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgT2JqZWN0KSBpZiAodm9pZCAwICE9PSAobnVsbCA9PT0gKGkgPSBuLiRvYnNlcnZlcnMpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGlbdGhpcy5uYW1lXSkpIHtcbiAgICAgICAgICAgIG4uJG9ic2VydmVyc1t0aGlzLm5hbWVdLnNldFZhbHVlKHIsIHQpO1xuICAgICAgICAgICAgcmV0dXJuIHI7XG4gICAgICAgIH0gZWxzZSByZXR1cm4gblt0aGlzLm5hbWVdID0gcjtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdEFjY2Vzc1Njb3BlKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBBY2Nlc3NNZW1iZXJFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMub2JqZWN0ID0gdDtcbiAgICAgICAgdGhpcy5uYW1lID0gZTtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gOTMyMztcbiAgICB9XG4gICAgZ2V0IGhhc0JpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLm9iamVjdC5ldmFsdWF0ZSh0LCBlLCBzLCAoMTI4ICYgdCkgPiAwID8gbnVsbCA6IHIpO1xuICAgICAgICBpZiAoMSAmIHQpIHtcbiAgICAgICAgICAgIGlmIChudWxsID09IGkpIHJldHVybiBpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHIpIHIub2JzZXJ2ZShpLCB0aGlzLm5hbWUpO1xuICAgICAgICAgICAgcmV0dXJuIGlbdGhpcy5uYW1lXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobnVsbCAhPT0gciAmJiBpIGluc3RhbmNlb2YgT2JqZWN0KSByLm9ic2VydmUoaSwgdGhpcy5uYW1lKTtcbiAgICAgICAgcmV0dXJuIGkgPyBpW3RoaXMubmFtZV0gOiBcIlwiO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5vYmplY3QuZXZhbHVhdGUodCwgZSwgcywgbnVsbCk7XG4gICAgICAgIGlmIChpIGluc3RhbmNlb2YgT2JqZWN0KSBpZiAodm9pZCAwICE9PSBpLiRvYnNlcnZlcnMgJiYgdm9pZCAwICE9PSBpLiRvYnNlcnZlcnNbdGhpcy5uYW1lXSkgaS4kb2JzZXJ2ZXJzW3RoaXMubmFtZV0uc2V0VmFsdWUociwgdCk7IGVsc2UgaVt0aGlzLm5hbWVdID0gcjsgZWxzZSB0aGlzLm9iamVjdC5hc3NpZ24odCwgZSwgcywge1xuICAgICAgICAgICAgW3RoaXMubmFtZV06IHJcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiByO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdEFjY2Vzc01lbWJlcih0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgQWNjZXNzS2V5ZWRFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMub2JqZWN0ID0gdDtcbiAgICAgICAgdGhpcy5rZXkgPSBlO1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiA5MzI0O1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMub2JqZWN0LmV2YWx1YXRlKHQsIGUsIHMsICgxMjggJiB0KSA+IDAgPyBudWxsIDogcik7XG4gICAgICAgIGlmIChpIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5rZXkuZXZhbHVhdGUodCwgZSwgcywgKDEyOCAmIHQpID4gMCA/IG51bGwgOiByKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSByKSByLm9ic2VydmUoaSwgbik7XG4gICAgICAgICAgICByZXR1cm4gaVtuXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLm9iamVjdC5ldmFsdWF0ZSh0LCBlLCBzLCBudWxsKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMua2V5LmV2YWx1YXRlKHQsIGUsIHMsIG51bGwpO1xuICAgICAgICByZXR1cm4gaVtuXSA9IHI7XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0QWNjZXNzS2V5ZWQodGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTtcbiAgICB9XG59XG5cbmNsYXNzIENhbGxTY29wZUV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIHMgPSAwKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHQ7XG4gICAgICAgIHRoaXMuYXJncyA9IGU7XG4gICAgICAgIHRoaXMuYW5jZXN0b3IgPSBzO1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiAxNDQ4O1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuYXJncy5tYXAoKGkgPT4gaS5ldmFsdWF0ZSh0LCBlLCBzLCByKSkpO1xuICAgICAgICBjb25zdCBuID0gQmluZGluZ0NvbnRleHQuZ2V0KGUsIHRoaXMubmFtZSwgdGhpcy5hbmNlc3RvciwgdCk7XG4gICAgICAgIGNvbnN0IG8gPSBOKHQsIG4sIHRoaXMubmFtZSk7XG4gICAgICAgIGlmIChvKSByZXR1cm4gby5hcHBseShuLCBpKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0Q2FsbFNjb3BlKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBDYWxsTWVtYmVyRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgcykge1xuICAgICAgICB0aGlzLm9iamVjdCA9IHQ7XG4gICAgICAgIHRoaXMubmFtZSA9IGU7XG4gICAgICAgIHRoaXMuYXJncyA9IHM7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDExNjE7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5vYmplY3QuZXZhbHVhdGUodCwgZSwgcywgKDEyOCAmIHQpID4gMCA/IG51bGwgOiByKTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuYXJncy5tYXAoKGkgPT4gaS5ldmFsdWF0ZSh0LCBlLCBzLCByKSkpO1xuICAgICAgICBjb25zdCBvID0gTih0LCBpLCB0aGlzLm5hbWUpO1xuICAgICAgICBpZiAobykgcmV0dXJuIG8uYXBwbHkoaSwgbik7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdENhbGxNZW1iZXIodGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTtcbiAgICB9XG59XG5cbmNsYXNzIENhbGxGdW5jdGlvbkV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5mdW5jID0gdDtcbiAgICAgICAgdGhpcy5hcmdzID0gZTtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMTE2MjtcbiAgICB9XG4gICAgZ2V0IGhhc0JpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmZ1bmMuZXZhbHVhdGUodCwgZSwgcywgcik7XG4gICAgICAgIGlmIChwKGkpKSByZXR1cm4gaSguLi50aGlzLmFyZ3MubWFwKChpID0+IGkuZXZhbHVhdGUodCwgZSwgcywgcikpKSk7XG4gICAgICAgIGlmICghKDggJiB0KSAmJiBudWxsID09IGkpIHJldHVybjtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDEwN1wiKTtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdENhbGxGdW5jdGlvbih0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgQmluYXJ5RXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgcykge1xuICAgICAgICB0aGlzLm9wZXJhdGlvbiA9IHQ7XG4gICAgICAgIHRoaXMubGVmdCA9IGU7XG4gICAgICAgIHRoaXMucmlnaHQgPSBzO1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiA0NjtcbiAgICB9XG4gICAgZ2V0IGhhc0JpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5vcGVyYXRpb24pIHtcbiAgICAgICAgICBjYXNlIFwiJiZcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgJiYgdGhpcy5yaWdodC5ldmFsdWF0ZSh0LCBlLCBzLCByKTtcblxuICAgICAgICAgIGNhc2UgXCJ8fFwiOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZSh0LCBlLCBzLCByKSB8fCB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIj09XCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmV2YWx1YXRlKHQsIGUsIHMsIHIpID09IHRoaXMucmlnaHQuZXZhbHVhdGUodCwgZSwgcywgcik7XG5cbiAgICAgICAgICBjYXNlIFwiPT09XCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmV2YWx1YXRlKHQsIGUsIHMsIHIpID09PSB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIiE9XCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmV2YWx1YXRlKHQsIGUsIHMsIHIpICE9IHRoaXMucmlnaHQuZXZhbHVhdGUodCwgZSwgcywgcik7XG5cbiAgICAgICAgICBjYXNlIFwiIT09XCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmV2YWx1YXRlKHQsIGUsIHMsIHIpICE9PSB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcImluc3RhbmNlb2ZcIjpcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdGhpcy5yaWdodC5ldmFsdWF0ZSh0LCBlLCBzLCByKTtcbiAgICAgICAgICAgICAgICBpZiAocChpKSkgcmV0dXJuIHRoaXMubGVmdC5ldmFsdWF0ZSh0LCBlLCBzLCByKSBpbnN0YW5jZW9mIGk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSBcImluXCI6XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IHRoaXMucmlnaHQuZXZhbHVhdGUodCwgZSwgcywgcik7XG4gICAgICAgICAgICAgICAgaWYgKGkgaW5zdGFuY2VvZiBPYmplY3QpIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgaW4gaTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICBjYXNlIFwiK1wiOlxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcik7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMucmlnaHQuZXZhbHVhdGUodCwgZSwgcywgcik7XG4gICAgICAgICAgICAgICAgaWYgKCgxICYgdCkgPiAwKSByZXR1cm4gaSArIG47XG4gICAgICAgICAgICAgICAgaWYgKCFpIHx8ICFuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChoKGkpIHx8IGgobikpIHJldHVybiAoaSB8fCAwKSArIChuIHx8IDApO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYyhpKSB8fCBjKG4pKSByZXR1cm4gKGkgfHwgXCJcIikgKyAobiB8fCBcIlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGkgKyBuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgY2FzZSBcIi1cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgLSB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIipcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgKiB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIi9cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgLyB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIiVcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgJSB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIjxcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgPCB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIj5cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgPiB0aGlzLnJpZ2h0LmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIjw9XCI6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sZWZ0LmV2YWx1YXRlKHQsIGUsIHMsIHIpIDw9IHRoaXMucmlnaHQuZXZhbHVhdGUodCwgZSwgcywgcik7XG5cbiAgICAgICAgICBjYXNlIFwiPj1cIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxlZnQuZXZhbHVhdGUodCwgZSwgcywgcikgPj0gdGhpcy5yaWdodC5ldmFsdWF0ZSh0LCBlLCBzLCByKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxMDg6JHt0aGlzLm9wZXJhdGlvbn1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0QmluYXJ5KHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBVbmFyeUV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5vcGVyYXRpb24gPSB0O1xuICAgICAgICB0aGlzLmV4cHJlc3Npb24gPSBlO1xuICAgIH1cbiAgICBnZXQgJGtpbmQoKSB7XG4gICAgICAgIHJldHVybiAzOTtcbiAgICB9XG4gICAgZ2V0IGhhc0JpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIHN3aXRjaCAodGhpcy5vcGVyYXRpb24pIHtcbiAgICAgICAgICBjYXNlIFwidm9pZFwiOlxuICAgICAgICAgICAgcmV0dXJuIHZvaWQgdGhpcy5leHByZXNzaW9uLmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcInR5cGVvZlwiOlxuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLmV4cHJlc3Npb24uZXZhbHVhdGUoMSB8IHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIiFcIjpcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5leHByZXNzaW9uLmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIi1cIjpcbiAgICAgICAgICAgIHJldHVybiAtdGhpcy5leHByZXNzaW9uLmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgY2FzZSBcIitcIjpcbiAgICAgICAgICAgIHJldHVybiArdGhpcy5leHByZXNzaW9uLmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDEwOToke3RoaXMub3BlcmF0aW9ufWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRVbmFyeSh0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHQ7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDE3OTI1O1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRQcmltaXRpdmVMaXRlcmFsKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5QcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbi4kdW5kZWZpbmVkID0gbmV3IFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uKHZvaWQgMCk7XG5cblByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uLiRudWxsID0gbmV3IFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uKG51bGwpO1xuXG5QcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbi4kdHJ1ZSA9IG5ldyBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbih0cnVlKTtcblxuUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24uJGZhbHNlID0gbmV3IFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uKGZhbHNlKTtcblxuUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24uJGVtcHR5ID0gbmV3IFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uKFwiXCIpO1xuXG5jbGFzcyBIdG1sTGl0ZXJhbEV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wYXJ0cyA9IHQ7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDUxO1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgbGV0IGkgPSBcIlwiO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHRoaXMucGFydHMubGVuZ3RoOyArK24pIHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSB0aGlzLnBhcnRzW25dLmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT0gbykgY29udGludWU7XG4gICAgICAgICAgICBpICs9IG87XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByLCBpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRIdG1sTGl0ZXJhbCh0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgQXJyYXlMaXRlcmFsRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmVsZW1lbnRzID0gdDtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMTc5NTU7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50cy5tYXAoKGkgPT4gaS5ldmFsdWF0ZSh0LCBlLCBzLCByKSkpO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0QXJyYXlMaXRlcmFsKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5BcnJheUxpdGVyYWxFeHByZXNzaW9uLiRlbXB0eSA9IG5ldyBBcnJheUxpdGVyYWxFeHByZXNzaW9uKHUpO1xuXG5jbGFzcyBPYmplY3RMaXRlcmFsRXhwcmVzc2lvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmtleXMgPSB0O1xuICAgICAgICB0aGlzLnZhbHVlcyA9IGU7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDE3OTU2O1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgY29uc3QgaSA9IHt9O1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHRoaXMua2V5cy5sZW5ndGg7ICsrbikgaVt0aGlzLmtleXNbbl1dID0gdGhpcy52YWx1ZXNbbl0uZXZhbHVhdGUodCwgZSwgcywgcik7XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0T2JqZWN0TGl0ZXJhbCh0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuT2JqZWN0TGl0ZXJhbEV4cHJlc3Npb24uJGVtcHR5ID0gbmV3IE9iamVjdExpdGVyYWxFeHByZXNzaW9uKHUsIHUpO1xuXG5jbGFzcyBUZW1wbGF0ZUV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUgPSB1KSB7XG4gICAgICAgIHRoaXMuY29va2VkID0gdDtcbiAgICAgICAgdGhpcy5leHByZXNzaW9ucyA9IGU7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDE3OTU4O1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgbGV0IGkgPSB0aGlzLmNvb2tlZFswXTtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0aGlzLmV4cHJlc3Npb25zLmxlbmd0aDsgKytuKSB7XG4gICAgICAgICAgICBpICs9IFN0cmluZyh0aGlzLmV4cHJlc3Npb25zW25dLmV2YWx1YXRlKHQsIGUsIHMsIHIpKTtcbiAgICAgICAgICAgIGkgKz0gdGhpcy5jb29rZWRbbiArIDFdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0VGVtcGxhdGUodGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTtcbiAgICB9XG59XG5cblRlbXBsYXRlRXhwcmVzc2lvbi4kZW1wdHkgPSBuZXcgVGVtcGxhdGVFeHByZXNzaW9uKFsgXCJcIiBdKTtcblxuY2xhc3MgVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBzLCByID0gdSkge1xuICAgICAgICB0aGlzLmNvb2tlZCA9IHQ7XG4gICAgICAgIHRoaXMuZnVuYyA9IHM7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnMgPSByO1xuICAgICAgICB0LnJhdyA9IGU7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDExOTc7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICBjb25zdCBpID0gdGhpcy5leHByZXNzaW9ucy5tYXAoKGkgPT4gaS5ldmFsdWF0ZSh0LCBlLCBzLCByKSkpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5mdW5jLmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuICAgICAgICBpZiAoIXAobikpIHRocm93IG5ldyBFcnJvcihgQVVSMDExMGApO1xuICAgICAgICByZXR1cm4gbih0aGlzLmNvb2tlZCwgLi4uaSk7XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRUYWdnZWRUZW1wbGF0ZSh0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgQXJyYXlCaW5kaW5nUGF0dGVybiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmVsZW1lbnRzID0gdDtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gNjU1NTY7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFzc2lnbih0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRBcnJheUJpbmRpbmdQYXR0ZXJuKHRoaXMpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIFVucGFyc2VyLnVucGFyc2UodGhpcyk7XG4gICAgfVxufVxuXG5jbGFzcyBPYmplY3RCaW5kaW5nUGF0dGVybiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmtleXMgPSB0O1xuICAgICAgICB0aGlzLnZhbHVlcyA9IGU7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDY1NTU3O1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0T2JqZWN0QmluZGluZ1BhdHRlcm4odGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTtcbiAgICB9XG59XG5cbmNsYXNzIEJpbmRpbmdJZGVudGlmaWVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMubmFtZSA9IHQ7XG4gICAgfVxuICAgIGdldCAka2luZCgpIHtcbiAgICAgICAgcmV0dXJuIDY1NTU4O1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubmFtZTtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRCaW5kaW5nSWRlbnRpZmllcih0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY29uc3QgViA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbmNsYXNzIEZvck9mU3RhdGVtZW50IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZGVjbGFyYXRpb24gPSB0O1xuICAgICAgICB0aGlzLml0ZXJhYmxlID0gZTtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gNjE5OTtcbiAgICB9XG4gICAgZ2V0IGhhc0JpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0IGhhc1VuYmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZXJhYmxlLmV2YWx1YXRlKHQsIGUsIHMsIHIpO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvdW50KHQsIGUpIHtcbiAgICAgICAgc3dpdGNoIChWLmNhbGwoZSkpIHtcbiAgICAgICAgICBjYXNlIFwiW29iamVjdCBBcnJheV1cIjpcbiAgICAgICAgICAgIHJldHVybiBlLmxlbmd0aDtcblxuICAgICAgICAgIGNhc2UgXCJbb2JqZWN0IE1hcF1cIjpcbiAgICAgICAgICAgIHJldHVybiBlLnNpemU7XG5cbiAgICAgICAgICBjYXNlIFwiW29iamVjdCBTZXRdXCI6XG4gICAgICAgICAgICByZXR1cm4gZS5zaXplO1xuXG4gICAgICAgICAgY2FzZSBcIltvYmplY3QgTnVtYmVyXVwiOlxuICAgICAgICAgICAgcmV0dXJuIGU7XG5cbiAgICAgICAgICBjYXNlIFwiW29iamVjdCBOdWxsXVwiOlxuICAgICAgICAgICAgcmV0dXJuIDA7XG5cbiAgICAgICAgICBjYXNlIFwiW29iamVjdCBVbmRlZmluZWRdXCI6XG4gICAgICAgICAgICByZXR1cm4gMDtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBjb3VudCAke1YuY2FsbChlKX1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpdGVyYXRlKHQsIGUsIHMpIHtcbiAgICAgICAgc3dpdGNoIChWLmNhbGwoZSkpIHtcbiAgICAgICAgICBjYXNlIFwiW29iamVjdCBBcnJheV1cIjpcbiAgICAgICAgICAgIHJldHVybiBLKGUsIHMpO1xuXG4gICAgICAgICAgY2FzZSBcIltvYmplY3QgTWFwXVwiOlxuICAgICAgICAgICAgcmV0dXJuIHEoZSwgcyk7XG5cbiAgICAgICAgICBjYXNlIFwiW29iamVjdCBTZXRdXCI6XG4gICAgICAgICAgICByZXR1cm4gSChlLCBzKTtcblxuICAgICAgICAgIGNhc2UgXCJbb2JqZWN0IE51bWJlcl1cIjpcbiAgICAgICAgICAgIHJldHVybiBRKGUsIHMpO1xuXG4gICAgICAgICAgY2FzZSBcIltvYmplY3QgTnVsbF1cIjpcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgIGNhc2UgXCJbb2JqZWN0IFVuZGVmaW5lZF1cIjpcbiAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYENhbm5vdCBpdGVyYXRlIG92ZXIgJHtWLmNhbGwoZSl9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYmluZCh0LCBlLCBzKSB7XG4gICAgICAgIGlmICh0aGlzLml0ZXJhYmxlLmhhc0JpbmQpIHRoaXMuaXRlcmFibGUuYmluZCh0LCBlLCBzKTtcbiAgICB9XG4gICAgdW5iaW5kKHQsIGUsIHMpIHtcbiAgICAgICAgaWYgKHRoaXMuaXRlcmFibGUuaGFzVW5iaW5kKSB0aGlzLml0ZXJhYmxlLnVuYmluZCh0LCBlLCBzKTtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXRGb3JPZlN0YXRlbWVudCh0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgSW50ZXJwb2xhdGlvbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSA9IHUpIHtcbiAgICAgICAgdGhpcy5wYXJ0cyA9IHQ7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbnMgPSBlO1xuICAgICAgICB0aGlzLmlzTXVsdGkgPSBlLmxlbmd0aCA+IDE7XG4gICAgICAgIHRoaXMuZmlyc3RFeHByZXNzaW9uID0gZVswXTtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMjQ7XG4gICAgfVxuICAgIGdldCBoYXNCaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGdldCBoYXNVbmJpbmQoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZXZhbHVhdGUodCwgZSwgcywgcikge1xuICAgICAgICBpZiAodGhpcy5pc011bHRpKSB7XG4gICAgICAgICAgICBsZXQgaSA9IHRoaXMucGFydHNbMF07XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHRoaXMuZXhwcmVzc2lvbnMubGVuZ3RoOyArK24pIHtcbiAgICAgICAgICAgICAgICBpICs9IFN0cmluZyh0aGlzLmV4cHJlc3Npb25zW25dLmV2YWx1YXRlKHQsIGUsIHMsIHIpKTtcbiAgICAgICAgICAgICAgICBpICs9IHRoaXMucGFydHNbbiArIDFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGk7XG4gICAgICAgIH0gZWxzZSByZXR1cm4gYCR7dGhpcy5wYXJ0c1swXX0ke3RoaXMuZmlyc3RFeHByZXNzaW9uLmV2YWx1YXRlKHQsIGUsIHMsIHIpfSR7dGhpcy5wYXJ0c1sxXX1gO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0SW50ZXJwb2xhdGlvbih0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgRGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBzLCByKSB7XG4gICAgICAgIHRoaXMuJGtpbmQgPSB0O1xuICAgICAgICB0aGlzLmxpc3QgPSBlO1xuICAgICAgICB0aGlzLnNvdXJjZSA9IHM7XG4gICAgICAgIHRoaXMuaW5pdGlhbGl6ZXIgPSByO1xuICAgIH1cbiAgICBnZXQgaGFzQmluZCgpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBnZXQgaGFzVW5iaW5kKCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGV2YWx1YXRlKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhc3NpZ24odCwgZSwgcywgcikge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMubGlzdDtcbiAgICAgICAgY29uc3QgbyA9IG4ubGVuZ3RoO1xuICAgICAgICBsZXQgaDtcbiAgICAgICAgbGV0IGM7XG4gICAgICAgIGZvciAoaCA9IDA7IGggPCBvOyBoKyspIHtcbiAgICAgICAgICAgIGMgPSBuW2hdO1xuICAgICAgICAgICAgc3dpdGNoIChjLiRraW5kKSB7XG4gICAgICAgICAgICAgIGNhc2UgMTM5Mjg5OlxuICAgICAgICAgICAgICAgIGMuYXNzaWduKHQsIGUsIHMsIHIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgOTAxMzc6XG4gICAgICAgICAgICAgIGNhc2UgMTA2NTIxOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKFwib2JqZWN0XCIgIT09IHR5cGVvZiByIHx8IG51bGwgPT09IHIpIHRocm93IG5ldyBFcnJvcihcIkFVUjAxMTJcIik7XG4gICAgICAgICAgICAgICAgICAgIGxldCBuID0gYy5zb3VyY2UuZXZhbHVhdGUodCwgU2NvcGUuY3JlYXRlKHIpLCBzLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZvaWQgMCA9PT0gbikgbiA9IG51bGwgPT09IChpID0gYy5pbml0aWFsaXplcikgfHwgdm9pZCAwID09PSBpID8gdm9pZCAwIDogaS5ldmFsdWF0ZSh0LCBlLCBzLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgYy5hc3NpZ24odCwgZSwgcywgbik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBhY2NlcHQodCkge1xuICAgICAgICByZXR1cm4gdC52aXNpdERlc3RydWN0dXJpbmdBc3NpZ25tZW50RXhwcmVzc2lvbih0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuY2xhc3MgRGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRTaW5nbGVFeHByZXNzaW9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBzKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdDtcbiAgICAgICAgdGhpcy5zb3VyY2UgPSBlO1xuICAgICAgICB0aGlzLmluaXRpYWxpemVyID0gcztcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMTM5Mjg5O1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIGlmIChudWxsID09IHIpIHJldHVybjtcbiAgICAgICAgaWYgKFwib2JqZWN0XCIgIT09IHR5cGVvZiByKSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwMTEyXCIpO1xuICAgICAgICBsZXQgbiA9IHRoaXMuc291cmNlLmV2YWx1YXRlKHQsIFNjb3BlLmNyZWF0ZShyKSwgcywgbnVsbCk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IG4pIG4gPSBudWxsID09PSAoaSA9IHRoaXMuaW5pdGlhbGl6ZXIpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuZXZhbHVhdGUodCwgZSwgcywgbnVsbCk7XG4gICAgICAgIHRoaXMudGFyZ2V0LmFzc2lnbih0LCBlLCBzLCBuKTtcbiAgICB9XG4gICAgYWNjZXB0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQudmlzaXREZXN0cnVjdHVyaW5nQXNzaWdubWVudFNpbmdsZUV4cHJlc3Npb24odGhpcyk7XG4gICAgfVxuICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gVW5wYXJzZXIudW5wYXJzZSh0aGlzKTtcbiAgICB9XG59XG5cbmNsYXNzIERlc3RydWN0dXJpbmdBc3NpZ25tZW50UmVzdEV4cHJlc3Npb24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0O1xuICAgICAgICB0aGlzLmluZGV4T3JQcm9wZXJ0aWVzID0gZTtcbiAgICB9XG4gICAgZ2V0ICRraW5kKCkge1xuICAgICAgICByZXR1cm4gMTM5Mjg5O1xuICAgIH1cbiAgICBldmFsdWF0ZSh0LCBlLCBzLCByKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgYXNzaWduKHQsIGUsIHMsIHIpIHtcbiAgICAgICAgaWYgKG51bGwgPT0gcikgcmV0dXJuO1xuICAgICAgICBpZiAoXCJvYmplY3RcIiAhPT0gdHlwZW9mIHIpIHRocm93IG5ldyBFcnJvcihcIkFVUjAxMTJcIik7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmluZGV4T3JQcm9wZXJ0aWVzO1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgaWYgKGEoaSkpIHtcbiAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheShyKSkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDExMlwiKTtcbiAgICAgICAgICAgIG4gPSByLnNsaWNlKGkpO1xuICAgICAgICB9IGVsc2UgbiA9IE9iamVjdC5lbnRyaWVzKHIpLnJlZHVjZSgoKHQsIFtlLCBzXSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFpLmluY2x1ZGVzKGUpKSB0W2VdID0gcztcbiAgICAgICAgICAgIHJldHVybiB0O1xuICAgICAgICB9KSwge30pO1xuICAgICAgICB0aGlzLnRhcmdldC5hc3NpZ24odCwgZSwgcywgbik7XG4gICAgfVxuICAgIGFjY2VwdCh0KSB7XG4gICAgICAgIHJldHVybiB0LnZpc2l0RGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRSZXN0RXhwcmVzc2lvbih0aGlzKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBVbnBhcnNlci51bnBhcnNlKHRoaXMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gTih0LCBlLCBzKSB7XG4gICAgY29uc3QgciA9IG51bGwgPT0gZSA/IG51bGwgOiBlW3NdO1xuICAgIGlmIChwKHIpKSByZXR1cm4gcjtcbiAgICBpZiAoISg4ICYgdCkgJiYgbnVsbCA9PSByKSByZXR1cm4gbnVsbDtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxMTE6JHtzfWApO1xufVxuXG5mdW5jdGlvbiBLKHQsIGUpIHtcbiAgICBmb3IgKGxldCBzID0gMCwgciA9IHQubGVuZ3RoOyBzIDwgcjsgKytzKSBlKHQsIHMsIHRbc10pO1xufVxuXG5mdW5jdGlvbiBxKHQsIGUpIHtcbiAgICBjb25zdCBzID0gQXJyYXkodC5zaXplKTtcbiAgICBsZXQgciA9IC0xO1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmVudHJpZXMoKSkgc1srK3JdID0gZTtcbiAgICBLKHMsIGUpO1xufVxuXG5mdW5jdGlvbiBIKHQsIGUpIHtcbiAgICBjb25zdCBzID0gQXJyYXkodC5zaXplKTtcbiAgICBsZXQgciA9IC0xO1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmtleXMoKSkgc1srK3JdID0gZTtcbiAgICBLKHMsIGUpO1xufVxuXG5mdW5jdGlvbiBRKHQsIGUpIHtcbiAgICBjb25zdCBzID0gQXJyYXkodCk7XG4gICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0OyArK2UpIHNbZV0gPSBlO1xuICAgIEsocywgZSk7XG59XG5cbmNvbnN0IF8gPSByLmNyZWF0ZUludGVyZmFjZShcIklDb2VyY2lvbkNvbmZpZ3VyYXRpb25cIik7XG5cbnZhciB6O1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIm9uZVRpbWVcIl0gPSAxXSA9IFwib25lVGltZVwiO1xuICAgIHRbdFtcInRvVmlld1wiXSA9IDJdID0gXCJ0b1ZpZXdcIjtcbiAgICB0W3RbXCJmcm9tVmlld1wiXSA9IDRdID0gXCJmcm9tVmlld1wiO1xuICAgIHRbdFtcInR3b1dheVwiXSA9IDZdID0gXCJ0d29XYXlcIjtcbiAgICB0W3RbXCJkZWZhdWx0XCJdID0gOF0gPSBcImRlZmF1bHRcIjtcbn0pKHogfHwgKHogPSB7fSkpO1xuXG52YXIgVztcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJub25lXCJdID0gMF0gPSBcIm5vbmVcIjtcbiAgICB0W3RbXCJwZXJzaXN0ZW50QmluZGluZ0ZsYWdzXCJdID0gOTYxXSA9IFwicGVyc2lzdGVudEJpbmRpbmdGbGFnc1wiO1xuICAgIHRbdFtcImFsbG93UGFyZW50U2NvcGVUcmF2ZXJzYWxcIl0gPSA2NF0gPSBcImFsbG93UGFyZW50U2NvcGVUcmF2ZXJzYWxcIjtcbiAgICB0W3RbXCJvYnNlcnZlTGVhZlByb3BlcnRpZXNPbmx5XCJdID0gMTI4XSA9IFwib2JzZXJ2ZUxlYWZQcm9wZXJ0aWVzT25seVwiO1xuICAgIHRbdFtcInRhcmdldE9ic2VydmVyRmxhZ3NcIl0gPSA3NjldID0gXCJ0YXJnZXRPYnNlcnZlckZsYWdzXCI7XG4gICAgdFt0W1wibm9GbHVzaFwiXSA9IDI1Nl0gPSBcIm5vRmx1c2hcIjtcbiAgICB0W3RbXCJwZXJzaXN0ZW50VGFyZ2V0T2JzZXJ2ZXJRdWV1ZVwiXSA9IDUxMl0gPSBcInBlcnNpc3RlbnRUYXJnZXRPYnNlcnZlclF1ZXVlXCI7XG4gICAgdFt0W1wiYmluZGluZ1N0cmF0ZWd5XCJdID0gMV0gPSBcImJpbmRpbmdTdHJhdGVneVwiO1xuICAgIHRbdFtcImlzU3RyaWN0QmluZGluZ1N0cmF0ZWd5XCJdID0gMV0gPSBcImlzU3RyaWN0QmluZGluZ1N0cmF0ZWd5XCI7XG4gICAgdFt0W1wiZnJvbUJpbmRcIl0gPSAyXSA9IFwiZnJvbUJpbmRcIjtcbiAgICB0W3RbXCJmcm9tVW5iaW5kXCJdID0gNF0gPSBcImZyb21VbmJpbmRcIjtcbiAgICB0W3RbXCJtdXN0RXZhbHVhdGVcIl0gPSA4XSA9IFwibXVzdEV2YWx1YXRlXCI7XG4gICAgdFt0W1wiaXNUcmF2ZXJzaW5nUGFyZW50U2NvcGVcIl0gPSAxNl0gPSBcImlzVHJhdmVyc2luZ1BhcmVudFNjb3BlXCI7XG4gICAgdFt0W1wiZGlzcG9zZVwiXSA9IDMyXSA9IFwiZGlzcG9zZVwiO1xufSkoVyB8fCAoVyA9IHt9KSk7XG5cbnZhciBHO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xuICAgIHRbdFtcIlN1YnNjcmliZXIwXCJdID0gMV0gPSBcIlN1YnNjcmliZXIwXCI7XG4gICAgdFt0W1wiU3Vic2NyaWJlcjFcIl0gPSAyXSA9IFwiU3Vic2NyaWJlcjFcIjtcbiAgICB0W3RbXCJTdWJzY3JpYmVyMlwiXSA9IDRdID0gXCJTdWJzY3JpYmVyMlwiO1xuICAgIHRbdFtcIlN1YnNjcmliZXJzUmVzdFwiXSA9IDhdID0gXCJTdWJzY3JpYmVyc1Jlc3RcIjtcbiAgICB0W3RbXCJBbnlcIl0gPSAxNV0gPSBcIkFueVwiO1xufSkoRyB8fCAoRyA9IHt9KSk7XG5cbnZhciBaO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIm5vbmVcIl0gPSAwXSA9IFwibm9uZVwiO1xuICAgIHRbdFtcImNhcHR1cmluZ1wiXSA9IDFdID0gXCJjYXB0dXJpbmdcIjtcbiAgICB0W3RbXCJidWJibGluZ1wiXSA9IDJdID0gXCJidWJibGluZ1wiO1xufSkoWiB8fCAoWiA9IHt9KSk7XG5cbnZhciBKO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcImluZGV4ZWRcIl0gPSA4XSA9IFwiaW5kZXhlZFwiO1xuICAgIHRbdFtcImtleWVkXCJdID0gNF0gPSBcImtleWVkXCI7XG4gICAgdFt0W1wiYXJyYXlcIl0gPSA5XSA9IFwiYXJyYXlcIjtcbiAgICB0W3RbXCJtYXBcIl0gPSA2XSA9IFwibWFwXCI7XG4gICAgdFt0W1wic2V0XCJdID0gN10gPSBcInNldFwiO1xufSkoSiB8fCAoSiA9IHt9KSk7XG5cbnZhciBYO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIk5vbmVcIl0gPSAwXSA9IFwiTm9uZVwiO1xuICAgIHRbdFtcIk9ic2VydmVyXCJdID0gMV0gPSBcIk9ic2VydmVyXCI7XG4gICAgdFt0W1wiTm9kZVwiXSA9IDJdID0gXCJOb2RlXCI7XG4gICAgdFt0W1wiTGF5b3V0XCJdID0gNF0gPSBcIkxheW91dFwiO1xuICAgIHRbdFtcIlByaW10aXZlXCJdID0gOF0gPSBcIlByaW10aXZlXCI7XG4gICAgdFt0W1wiQXJyYXlcIl0gPSAxOF0gPSBcIkFycmF5XCI7XG4gICAgdFt0W1wiU2V0XCJdID0gMzRdID0gXCJTZXRcIjtcbiAgICB0W3RbXCJNYXBcIl0gPSA2Nl0gPSBcIk1hcFwiO1xufSkoWCB8fCAoWCA9IHt9KSk7XG5cbmZ1bmN0aW9uIFkodCwgZSkge1xuICAgIGNvbnN0IHtsZW5ndGg6IHN9ID0gdDtcbiAgICBjb25zdCByID0gQXJyYXkocyk7XG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlIChpIDwgcykge1xuICAgICAgICByW2ldID0gdFtpXTtcbiAgICAgICAgKytpO1xuICAgIH1cbiAgICBpZiAodm9pZCAwICE9PSBlKSByLmRlbGV0ZWRJdGVtcyA9IGUuc2xpY2UoMCk7IGVsc2UgaWYgKHZvaWQgMCAhPT0gdC5kZWxldGVkSXRlbXMpIHIuZGVsZXRlZEl0ZW1zID0gdC5kZWxldGVkSXRlbXMuc2xpY2UoMCk7IGVsc2Ugci5kZWxldGVkSXRlbXMgPSBbXTtcbiAgICByLmlzSW5kZXhNYXAgPSB0cnVlO1xuICAgIHJldHVybiByO1xufVxuXG5mdW5jdGlvbiB0dCh0ID0gMCkge1xuICAgIGNvbnN0IGUgPSBBcnJheSh0KTtcbiAgICBsZXQgcyA9IDA7XG4gICAgd2hpbGUgKHMgPCB0KSBlW3NdID0gcysrO1xuICAgIGUuZGVsZXRlZEl0ZW1zID0gW107XG4gICAgZS5pc0luZGV4TWFwID0gdHJ1ZTtcbiAgICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gZXQodCkge1xuICAgIGNvbnN0IGUgPSB0LnNsaWNlKCk7XG4gICAgZS5kZWxldGVkSXRlbXMgPSB0LmRlbGV0ZWRJdGVtcy5zbGljZSgpO1xuICAgIGUuaXNJbmRleE1hcCA9IHRydWU7XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIHN0KHQpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIEFycmF5ICYmIHRydWUgPT09IHQuaXNJbmRleE1hcDtcbn1cblxuZnVuY3Rpb24gcnQodCkge1xuICAgIHJldHVybiBudWxsID09IHQgPyBpdCA6IGl0KHQpO1xufVxuXG5mdW5jdGlvbiBpdCh0KSB7XG4gICAgY29uc3QgZSA9IHQucHJvdG90eXBlO1xuICAgIHYoZSwgXCJzdWJzXCIsIHtcbiAgICAgICAgZ2V0OiBudFxuICAgIH0pO1xuICAgIGIoZSwgXCJzdWJzY3JpYmVcIiwgb3QpO1xuICAgIGIoZSwgXCJ1bnN1YnNjcmliZVwiLCBodCk7XG59XG5cbmNsYXNzIFN1YnNjcmliZXJSZWNvcmQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnNmID0gMDtcbiAgICAgICAgdGhpcy5jb3VudCA9IDA7XG4gICAgfVxuICAgIGFkZCh0KSB7XG4gICAgICAgIGlmICh0aGlzLmhhcyh0KSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zZjtcbiAgICAgICAgaWYgKDAgPT09ICgxICYgZSkpIHtcbiAgICAgICAgICAgIHRoaXMuczAgPSB0O1xuICAgICAgICAgICAgdGhpcy5zZiB8PSAxO1xuICAgICAgICB9IGVsc2UgaWYgKDAgPT09ICgyICYgZSkpIHtcbiAgICAgICAgICAgIHRoaXMuczEgPSB0O1xuICAgICAgICAgICAgdGhpcy5zZiB8PSAyO1xuICAgICAgICB9IGVsc2UgaWYgKDAgPT09ICg0ICYgZSkpIHtcbiAgICAgICAgICAgIHRoaXMuczIgPSB0O1xuICAgICAgICAgICAgdGhpcy5zZiB8PSA0O1xuICAgICAgICB9IGVsc2UgaWYgKDAgPT09ICg4ICYgZSkpIHtcbiAgICAgICAgICAgIHRoaXMuc3IgPSBbIHQgXTtcbiAgICAgICAgICAgIHRoaXMuc2YgfD0gODtcbiAgICAgICAgfSBlbHNlIHRoaXMuc3IucHVzaCh0KTtcbiAgICAgICAgKyt0aGlzLmNvdW50O1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc2Y7XG4gICAgICAgIGlmICgoMSAmIGUpID4gMCAmJiB0aGlzLnMwID09PSB0KSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgaWYgKCgyICYgZSkgPiAwICYmIHRoaXMuczEgPT09IHQpIHJldHVybiB0cnVlO1xuICAgICAgICBpZiAoKDQgJiBlKSA+IDAgJiYgdGhpcy5zMiA9PT0gdCkgcmV0dXJuIHRydWU7XG4gICAgICAgIGlmICgoOCAmIGUpID4gMCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuc3I7XG4gICAgICAgICAgICBjb25zdCBzID0gZS5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgICAgICBmb3IgKDtyIDwgczsgKytyKSBpZiAoZVtyXSA9PT0gdCkgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBhbnkoKSB7XG4gICAgICAgIHJldHVybiAwICE9PSB0aGlzLnNmO1xuICAgIH1cbiAgICByZW1vdmUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zZjtcbiAgICAgICAgaWYgKCgxICYgZSkgPiAwICYmIHRoaXMuczAgPT09IHQpIHtcbiAgICAgICAgICAgIHRoaXMuczAgPSB2b2lkIDA7XG4gICAgICAgICAgICB0aGlzLnNmID0gMSBeICgxIHwgdGhpcy5zZik7XG4gICAgICAgICAgICAtLXRoaXMuY291bnQ7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmICgoMiAmIGUpID4gMCAmJiB0aGlzLnMxID09PSB0KSB7XG4gICAgICAgICAgICB0aGlzLnMxID0gdm9pZCAwO1xuICAgICAgICAgICAgdGhpcy5zZiA9IDIgXiAoMiB8IHRoaXMuc2YpO1xuICAgICAgICAgICAgLS10aGlzLmNvdW50O1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH0gZWxzZSBpZiAoKDQgJiBlKSA+IDAgJiYgdGhpcy5zMiA9PT0gdCkge1xuICAgICAgICAgICAgdGhpcy5zMiA9IHZvaWQgMDtcbiAgICAgICAgICAgIHRoaXMuc2YgPSA0IF4gKDQgfCB0aGlzLnNmKTtcbiAgICAgICAgICAgIC0tdGhpcy5jb3VudDtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9IGVsc2UgaWYgKCg4ICYgZSkgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5zcjtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCByID0gMDtcbiAgICAgICAgICAgIGZvciAoO3IgPCBzOyArK3IpIGlmIChlW3JdID09PSB0KSB7XG4gICAgICAgICAgICAgICAgZS5zcGxpY2UociwgMSk7XG4gICAgICAgICAgICAgICAgaWYgKDEgPT09IHMpIHRoaXMuc2YgPSA4IF4gKDggfCB0aGlzLnNmKTtcbiAgICAgICAgICAgICAgICAtLXRoaXMuY291bnQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBub3RpZnkodCwgZSwgcykge1xuICAgICAgICBjb25zdCByID0gdGhpcy5zMDtcbiAgICAgICAgY29uc3QgaSA9IHRoaXMuczE7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnMyO1xuICAgICAgICBsZXQgbyA9IHRoaXMuc3I7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG8pIG8gPSBvLnNsaWNlKCk7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHIpIHIuaGFuZGxlQ2hhbmdlKHQsIGUsIHMpO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBpKSBpLmhhbmRsZUNoYW5nZSh0LCBlLCBzKTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gbikgbi5oYW5kbGVDaGFuZ2UodCwgZSwgcyk7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG8pIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBvLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCBpO1xuICAgICAgICAgICAgbGV0IG4gPSAwO1xuICAgICAgICAgICAgZm9yICg7biA8IHI7ICsrbikge1xuICAgICAgICAgICAgICAgIGkgPSBvW25dO1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IGkpIGkuaGFuZGxlQ2hhbmdlKHQsIGUsIHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIG5vdGlmeUNvbGxlY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy5zMDtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuczE7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnMyO1xuICAgICAgICBsZXQgbiA9IHRoaXMuc3I7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG4pIG4gPSBuLnNsaWNlKCk7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHMpIHMuaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSh0LCBlKTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gcikgci5oYW5kbGVDb2xsZWN0aW9uQ2hhbmdlKHQsIGUpO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBpKSBpLmhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UodCwgZSk7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IG4pIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBuLmxlbmd0aDtcbiAgICAgICAgICAgIGxldCByO1xuICAgICAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICAgICAgZm9yICg7aSA8IHM7ICsraSkge1xuICAgICAgICAgICAgICAgIHIgPSBuW2ldO1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHIpIHIuaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSh0LCBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn1cblxuZnVuY3Rpb24gbnQoKSB7XG4gICAgcmV0dXJuIHcodGhpcywgXCJzdWJzXCIsIG5ldyBTdWJzY3JpYmVyUmVjb3JkKTtcbn1cblxuZnVuY3Rpb24gb3QodCkge1xuICAgIHJldHVybiB0aGlzLnN1YnMuYWRkKHQpO1xufVxuXG5mdW5jdGlvbiBodCh0KSB7XG4gICAgcmV0dXJuIHRoaXMuc3Vicy5yZW1vdmUodCk7XG59XG5cbmZ1bmN0aW9uIGN0KHQpIHtcbiAgICByZXR1cm4gbnVsbCA9PSB0ID8gdXQgOiB1dCh0KTtcbn1cblxuZnVuY3Rpb24gdXQodCkge1xuICAgIGNvbnN0IGUgPSB0LnByb3RvdHlwZTtcbiAgICB2KGUsIFwicXVldWVcIiwge1xuICAgICAgICBnZXQ6IGF0XG4gICAgfSk7XG59XG5cbmNsYXNzIEZsdXNoUXVldWUge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pID0gbmV3IFNldDtcbiAgICB9XG4gICAgZ2V0IGNvdW50KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pLnNpemU7XG4gICAgfVxuICAgIGFkZCh0KSB7XG4gICAgICAgIHRoaXMuaS5hZGQodCk7XG4gICAgICAgIGlmICh0aGlzLnQpIHJldHVybjtcbiAgICAgICAgdGhpcy50ID0gdHJ1ZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHRoaXMuaS5mb3JFYWNoKGx0KTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMudCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLmkuY2xlYXIoKTtcbiAgICAgICAgdGhpcy50ID0gZmFsc2U7XG4gICAgfVxufVxuXG5GbHVzaFF1ZXVlLmluc3RhbmNlID0gbmV3IEZsdXNoUXVldWU7XG5cbmZ1bmN0aW9uIGF0KCkge1xuICAgIHJldHVybiBGbHVzaFF1ZXVlLmluc3RhbmNlO1xufVxuXG5mdW5jdGlvbiBsdCh0LCBlLCBzKSB7XG4gICAgcy5kZWxldGUodCk7XG4gICAgdC5mbHVzaCgpO1xufVxuXG5jbGFzcyBDb2xsZWN0aW9uTGVuZ3RoT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5vd25lciA9IHQ7XG4gICAgICAgIHRoaXMudHlwZSA9IDE4O1xuICAgICAgICB0aGlzLmYgPSAwO1xuICAgICAgICB0aGlzLnYgPSB0aGlzLmggPSAodGhpcy5vID0gdC5jb2xsZWN0aW9uKS5sZW5ndGg7XG4gICAgfVxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vLmxlbmd0aDtcbiAgICB9XG4gICAgc2V0VmFsdWUodCwgZSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy52O1xuICAgICAgICBpZiAodCAhPT0gcyAmJiBhKHQpKSB7XG4gICAgICAgICAgICBpZiAoMCA9PT0gKDI1NiAmIGUpKSB0aGlzLm8ubGVuZ3RoID0gdDtcbiAgICAgICAgICAgIHRoaXMudiA9IHQ7XG4gICAgICAgICAgICB0aGlzLmggPSBzO1xuICAgICAgICAgICAgdGhpcy5mID0gZTtcbiAgICAgICAgICAgIHRoaXMucXVldWUuYWRkKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UodCwgZSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy52O1xuICAgICAgICBjb25zdCByID0gdGhpcy5vLmxlbmd0aDtcbiAgICAgICAgaWYgKCh0aGlzLnYgPSByKSAhPT0gcykge1xuICAgICAgICAgICAgdGhpcy5oID0gcztcbiAgICAgICAgICAgIHRoaXMuZiA9IGU7XG4gICAgICAgICAgICB0aGlzLnF1ZXVlLmFkZCh0aGlzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmbHVzaCgpIHtcbiAgICAgICAgcHQgPSB0aGlzLmg7XG4gICAgICAgIHRoaXMuaCA9IHRoaXMudjtcbiAgICAgICAgdGhpcy5zdWJzLm5vdGlmeSh0aGlzLnYsIHB0LCB0aGlzLmYpO1xuICAgIH1cbn1cblxuY2xhc3MgQ29sbGVjdGlvblNpemVPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLm93bmVyID0gdDtcbiAgICAgICAgdGhpcy5mID0gMDtcbiAgICAgICAgdGhpcy52ID0gdGhpcy5oID0gKHRoaXMubyA9IHQuY29sbGVjdGlvbikuc2l6ZTtcbiAgICAgICAgdGhpcy50eXBlID0gdGhpcy5vIGluc3RhbmNlb2YgTWFwID8gNjYgOiAzNDtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm8uc2l6ZTtcbiAgICB9XG4gICAgc2V0VmFsdWUoKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkFVUjAyXCIpO1xuICAgIH1cbiAgICBoYW5kbGVDb2xsZWN0aW9uQ2hhbmdlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMudjtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuby5zaXplO1xuICAgICAgICBpZiAoKHRoaXMudiA9IHIpICE9PSBzKSB7XG4gICAgICAgICAgICB0aGlzLmggPSBzO1xuICAgICAgICAgICAgdGhpcy5mID0gZTtcbiAgICAgICAgICAgIHRoaXMucXVldWUuYWRkKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZsdXNoKCkge1xuICAgICAgICBwdCA9IHRoaXMuaDtcbiAgICAgICAgdGhpcy5oID0gdGhpcy52O1xuICAgICAgICB0aGlzLnN1YnMubm90aWZ5KHRoaXMudiwgcHQsIHRoaXMuZik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBmdCh0KSB7XG4gICAgY29uc3QgZSA9IHQucHJvdG90eXBlO1xuICAgIGIoZSwgXCJzdWJzY3JpYmVcIiwgZHQsIHRydWUpO1xuICAgIGIoZSwgXCJ1bnN1YnNjcmliZVwiLCB2dCwgdHJ1ZSk7XG4gICAgY3QodCk7XG4gICAgcnQodCk7XG59XG5cbmZ1bmN0aW9uIGR0KHQpIHtcbiAgICBpZiAodGhpcy5zdWJzLmFkZCh0KSAmJiAxID09PSB0aGlzLnN1YnMuY291bnQpIHRoaXMub3duZXIuc3Vic2NyaWJlKHRoaXMpO1xufVxuXG5mdW5jdGlvbiB2dCh0KSB7XG4gICAgaWYgKHRoaXMuc3Vicy5yZW1vdmUodCkgJiYgMCA9PT0gdGhpcy5zdWJzLmNvdW50KSB0aGlzLm93bmVyLnN1YnNjcmliZSh0aGlzKTtcbn1cblxuZnQoQ29sbGVjdGlvbkxlbmd0aE9ic2VydmVyKTtcblxuZnQoQ29sbGVjdGlvblNpemVPYnNlcnZlcik7XG5cbmxldCBwdDtcblxuY29uc3QgZ3QgPSBuZXcgV2Vha01hcDtcblxuZnVuY3Rpb24gd3QodCwgZSkge1xuICAgIGlmICh0ID09PSBlKSByZXR1cm4gMDtcbiAgICB0ID0gbnVsbCA9PT0gdCA/IFwibnVsbFwiIDogdC50b1N0cmluZygpO1xuICAgIGUgPSBudWxsID09PSBlID8gXCJudWxsXCIgOiBlLnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIHQgPCBlID8gLTEgOiAxO1xufVxuXG5mdW5jdGlvbiBidCh0LCBlKSB7XG4gICAgaWYgKHZvaWQgMCA9PT0gdCkgaWYgKHZvaWQgMCA9PT0gZSkgcmV0dXJuIDA7IGVsc2UgcmV0dXJuIDE7XG4gICAgaWYgKHZvaWQgMCA9PT0gZSkgcmV0dXJuIC0xO1xuICAgIHJldHVybiAwO1xufVxuXG5mdW5jdGlvbiBFdCh0LCBlLCBzLCByLCBpKSB7XG4gICAgbGV0IG4sIG8sIGgsIGMsIHU7XG4gICAgbGV0IGEsIGw7XG4gICAgZm9yIChhID0gcyArIDE7IGEgPCByOyBhKyspIHtcbiAgICAgICAgbiA9IHRbYV07XG4gICAgICAgIG8gPSBlW2FdO1xuICAgICAgICBmb3IgKGwgPSBhIC0gMTsgbCA+PSBzOyBsLS0pIHtcbiAgICAgICAgICAgIGggPSB0W2xdO1xuICAgICAgICAgICAgYyA9IGVbbF07XG4gICAgICAgICAgICB1ID0gaShoLCBuKTtcbiAgICAgICAgICAgIGlmICh1ID4gMCkge1xuICAgICAgICAgICAgICAgIHRbbCArIDFdID0gaDtcbiAgICAgICAgICAgICAgICBlW2wgKyAxXSA9IGM7XG4gICAgICAgICAgICB9IGVsc2UgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgdFtsICsgMV0gPSBuO1xuICAgICAgICBlW2wgKyAxXSA9IG87XG4gICAgfVxufVxuXG5mdW5jdGlvbiBBdCh0LCBlLCBzLCByLCBpKSB7XG4gICAgbGV0IG4gPSAwLCBvID0gMDtcbiAgICBsZXQgaCwgYywgdTtcbiAgICBsZXQgYSwgbCwgZjtcbiAgICBsZXQgZCwgdiwgcDtcbiAgICBsZXQgZywgdztcbiAgICBsZXQgYiwgRSwgQSwgeTtcbiAgICBsZXQgbSwgVSwgeCwgUztcbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICBpZiAociAtIHMgPD0gMTApIHtcbiAgICAgICAgICAgIEV0KHQsIGUsIHMsIHIsIGkpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIG4gPSBzICsgKHIgLSBzID4+IDEpO1xuICAgICAgICBoID0gdFtzXTtcbiAgICAgICAgYSA9IGVbc107XG4gICAgICAgIGMgPSB0W3IgLSAxXTtcbiAgICAgICAgbCA9IGVbciAtIDFdO1xuICAgICAgICB1ID0gdFtuXTtcbiAgICAgICAgZiA9IGVbbl07XG4gICAgICAgIGQgPSBpKGgsIGMpO1xuICAgICAgICBpZiAoZCA+IDApIHtcbiAgICAgICAgICAgIGcgPSBoO1xuICAgICAgICAgICAgdyA9IGE7XG4gICAgICAgICAgICBoID0gYztcbiAgICAgICAgICAgIGEgPSBsO1xuICAgICAgICAgICAgYyA9IGc7XG4gICAgICAgICAgICBsID0gdztcbiAgICAgICAgfVxuICAgICAgICB2ID0gaShoLCB1KTtcbiAgICAgICAgaWYgKHYgPj0gMCkge1xuICAgICAgICAgICAgZyA9IGg7XG4gICAgICAgICAgICB3ID0gYTtcbiAgICAgICAgICAgIGggPSB1O1xuICAgICAgICAgICAgYSA9IGY7XG4gICAgICAgICAgICB1ID0gYztcbiAgICAgICAgICAgIGYgPSBsO1xuICAgICAgICAgICAgYyA9IGc7XG4gICAgICAgICAgICBsID0gdztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHAgPSBpKGMsIHUpO1xuICAgICAgICAgICAgaWYgKHAgPiAwKSB7XG4gICAgICAgICAgICAgICAgZyA9IGM7XG4gICAgICAgICAgICAgICAgdyA9IGw7XG4gICAgICAgICAgICAgICAgYyA9IHU7XG4gICAgICAgICAgICAgICAgbCA9IGY7XG4gICAgICAgICAgICAgICAgdSA9IGc7XG4gICAgICAgICAgICAgICAgZiA9IHc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdFtzXSA9IGg7XG4gICAgICAgIGVbc10gPSBhO1xuICAgICAgICB0W3IgLSAxXSA9IHU7XG4gICAgICAgIGVbciAtIDFdID0gZjtcbiAgICAgICAgYiA9IGM7XG4gICAgICAgIEUgPSBsO1xuICAgICAgICBBID0gcyArIDE7XG4gICAgICAgIHkgPSByIC0gMTtcbiAgICAgICAgdFtuXSA9IHRbQV07XG4gICAgICAgIGVbbl0gPSBlW0FdO1xuICAgICAgICB0W0FdID0gYjtcbiAgICAgICAgZVtBXSA9IEU7XG4gICAgICAgIHQ6IGZvciAobyA9IEEgKyAxOyBvIDwgeTsgbysrKSB7XG4gICAgICAgICAgICBtID0gdFtvXTtcbiAgICAgICAgICAgIFUgPSBlW29dO1xuICAgICAgICAgICAgeCA9IGkobSwgYik7XG4gICAgICAgICAgICBpZiAoeCA8IDApIHtcbiAgICAgICAgICAgICAgICB0W29dID0gdFtBXTtcbiAgICAgICAgICAgICAgICBlW29dID0gZVtBXTtcbiAgICAgICAgICAgICAgICB0W0FdID0gbTtcbiAgICAgICAgICAgICAgICBlW0FdID0gVTtcbiAgICAgICAgICAgICAgICBBKys7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHggPiAwKSB7XG4gICAgICAgICAgICAgICAgZG8ge1xuICAgICAgICAgICAgICAgICAgICB5LS07XG4gICAgICAgICAgICAgICAgICAgIGlmICh5ID09IG8pIGJyZWFrIHQ7XG4gICAgICAgICAgICAgICAgICAgIFMgPSB0W3ldO1xuICAgICAgICAgICAgICAgICAgICB4ID0gaShTLCBiKTtcbiAgICAgICAgICAgICAgICB9IHdoaWxlICh4ID4gMCk7XG4gICAgICAgICAgICAgICAgdFtvXSA9IHRbeV07XG4gICAgICAgICAgICAgICAgZVtvXSA9IGVbeV07XG4gICAgICAgICAgICAgICAgdFt5XSA9IG07XG4gICAgICAgICAgICAgICAgZVt5XSA9IFU7XG4gICAgICAgICAgICAgICAgaWYgKHggPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG0gPSB0W29dO1xuICAgICAgICAgICAgICAgICAgICBVID0gZVtvXTtcbiAgICAgICAgICAgICAgICAgICAgdFtvXSA9IHRbQV07XG4gICAgICAgICAgICAgICAgICAgIGVbb10gPSBlW0FdO1xuICAgICAgICAgICAgICAgICAgICB0W0FdID0gbTtcbiAgICAgICAgICAgICAgICAgICAgZVtBXSA9IFU7XG4gICAgICAgICAgICAgICAgICAgIEErKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHIgLSB5IDwgQSAtIHMpIHtcbiAgICAgICAgICAgIEF0KHQsIGUsIHksIHIsIGkpO1xuICAgICAgICAgICAgciA9IEE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBBdCh0LCBlLCBzLCBBLCBpKTtcbiAgICAgICAgICAgIHMgPSB5O1xuICAgICAgICB9XG4gICAgfVxufVxuXG5jb25zdCB5dCA9IEFycmF5LnByb3RvdHlwZTtcblxuY29uc3QgbXQgPSB5dC5wdXNoO1xuXG5jb25zdCBVdCA9IHl0LnVuc2hpZnQ7XG5cbmNvbnN0IHh0ID0geXQucG9wO1xuXG5jb25zdCBTdCA9IHl0LnNoaWZ0O1xuXG5jb25zdCBPdCA9IHl0LnNwbGljZTtcblxuY29uc3QgQ3QgPSB5dC5yZXZlcnNlO1xuXG5jb25zdCBrdCA9IHl0LnNvcnQ7XG5cbmNvbnN0IEJ0ID0ge1xuICAgIHB1c2g6IG10LFxuICAgIHVuc2hpZnQ6IFV0LFxuICAgIHBvcDogeHQsXG4gICAgc2hpZnQ6IFN0LFxuICAgIHNwbGljZTogT3QsXG4gICAgcmV2ZXJzZTogQ3QsXG4gICAgc29ydDoga3Rcbn07XG5cbmNvbnN0ICR0ID0gWyBcInB1c2hcIiwgXCJ1bnNoaWZ0XCIsIFwicG9wXCIsIFwic2hpZnRcIiwgXCJzcGxpY2VcIiwgXCJyZXZlcnNlXCIsIFwic29ydFwiIF07XG5cbmNvbnN0IEx0ID0ge1xuICAgIHB1c2g6IGZ1bmN0aW9uKC4uLnQpIHtcbiAgICAgICAgY29uc3QgZSA9IGd0LmdldCh0aGlzKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgcmV0dXJuIG10LmFwcGx5KHRoaXMsIHQpO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHIgPSB0Lmxlbmd0aDtcbiAgICAgICAgaWYgKDAgPT09IHIpIHJldHVybiBzO1xuICAgICAgICB0aGlzLmxlbmd0aCA9IGUuaW5kZXhNYXAubGVuZ3RoID0gcyArIHI7XG4gICAgICAgIGxldCBpID0gcztcbiAgICAgICAgd2hpbGUgKGkgPCB0aGlzLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpc1tpXSA9IHRbaSAtIHNdO1xuICAgICAgICAgICAgZS5pbmRleE1hcFtpXSA9IC0yO1xuICAgICAgICAgICAgaSsrO1xuICAgICAgICB9XG4gICAgICAgIGUubm90aWZ5KCk7XG4gICAgICAgIHJldHVybiB0aGlzLmxlbmd0aDtcbiAgICB9LFxuICAgIHVuc2hpZnQ6IGZ1bmN0aW9uKC4uLnQpIHtcbiAgICAgICAgY29uc3QgZSA9IGd0LmdldCh0aGlzKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gZSkgcmV0dXJuIFV0LmFwcGx5KHRoaXMsIHQpO1xuICAgICAgICBjb25zdCBzID0gdC5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgQXJyYXkocyk7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgd2hpbGUgKGkgPCBzKSByW2krK10gPSAtMjtcbiAgICAgICAgVXQuYXBwbHkoZS5pbmRleE1hcCwgcik7XG4gICAgICAgIGNvbnN0IG4gPSBVdC5hcHBseSh0aGlzLCB0KTtcbiAgICAgICAgZS5ub3RpZnkoKTtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfSxcbiAgICBwb3A6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCB0ID0gZ3QuZ2V0KHRoaXMpO1xuICAgICAgICBpZiAodm9pZCAwID09PSB0KSByZXR1cm4geHQuY2FsbCh0aGlzKTtcbiAgICAgICAgY29uc3QgZSA9IHQuaW5kZXhNYXA7XG4gICAgICAgIGNvbnN0IHMgPSB4dC5jYWxsKHRoaXMpO1xuICAgICAgICBjb25zdCByID0gZS5sZW5ndGggLSAxO1xuICAgICAgICBpZiAoZVtyXSA+IC0xKSBlLmRlbGV0ZWRJdGVtcy5wdXNoKGVbcl0pO1xuICAgICAgICB4dC5jYWxsKGUpO1xuICAgICAgICB0Lm5vdGlmeSgpO1xuICAgICAgICByZXR1cm4gcztcbiAgICB9LFxuICAgIHNoaWZ0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc3QgdCA9IGd0LmdldCh0aGlzKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdCkgcmV0dXJuIFN0LmNhbGwodGhpcyk7XG4gICAgICAgIGNvbnN0IGUgPSB0LmluZGV4TWFwO1xuICAgICAgICBjb25zdCBzID0gU3QuY2FsbCh0aGlzKTtcbiAgICAgICAgaWYgKGVbMF0gPiAtMSkgZS5kZWxldGVkSXRlbXMucHVzaChlWzBdKTtcbiAgICAgICAgU3QuY2FsbChlKTtcbiAgICAgICAgdC5ub3RpZnkoKTtcbiAgICAgICAgcmV0dXJuIHM7XG4gICAgfSxcbiAgICBzcGxpY2U6IGZ1bmN0aW9uKC4uLnQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRbMF07XG4gICAgICAgIGNvbnN0IHMgPSB0WzFdO1xuICAgICAgICBjb25zdCByID0gZ3QuZ2V0KHRoaXMpO1xuICAgICAgICBpZiAodm9pZCAwID09PSByKSByZXR1cm4gT3QuYXBwbHkodGhpcywgdCk7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLmxlbmd0aDtcbiAgICAgICAgY29uc3QgbiA9IDAgfCBlO1xuICAgICAgICBjb25zdCBvID0gbiA8IDAgPyBNYXRoLm1heChpICsgbiwgMCkgOiBNYXRoLm1pbihuLCBpKTtcbiAgICAgICAgY29uc3QgaCA9IHIuaW5kZXhNYXA7XG4gICAgICAgIGNvbnN0IGMgPSB0Lmxlbmd0aDtcbiAgICAgICAgY29uc3QgdSA9IDAgPT09IGMgPyAwIDogMSA9PT0gYyA/IGkgLSBvIDogcztcbiAgICAgICAgaWYgKHUgPiAwKSB7XG4gICAgICAgICAgICBsZXQgdCA9IG87XG4gICAgICAgICAgICBjb25zdCBlID0gdCArIHU7XG4gICAgICAgICAgICB3aGlsZSAodCA8IGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoaFt0XSA+IC0xKSBoLmRlbGV0ZWRJdGVtcy5wdXNoKGhbdF0pO1xuICAgICAgICAgICAgICAgIHQrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoYyA+IDIpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBjIC0gMjtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgQXJyYXkodCk7XG4gICAgICAgICAgICBsZXQgaSA9IDA7XG4gICAgICAgICAgICB3aGlsZSAoaSA8IHQpIHJbaSsrXSA9IC0yO1xuICAgICAgICAgICAgT3QuY2FsbChoLCBlLCBzLCAuLi5yKTtcbiAgICAgICAgfSBlbHNlIE90LmFwcGx5KGgsIHQpO1xuICAgICAgICBjb25zdCBhID0gT3QuYXBwbHkodGhpcywgdCk7XG4gICAgICAgIHIubm90aWZ5KCk7XG4gICAgICAgIHJldHVybiBhO1xuICAgIH0sXG4gICAgcmV2ZXJzZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNvbnN0IHQgPSBndC5nZXQodGhpcyk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHQpIHtcbiAgICAgICAgICAgIEN0LmNhbGwodGhpcyk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlID0gdGhpcy5sZW5ndGg7XG4gICAgICAgIGNvbnN0IHMgPSBlIC8gMiB8IDA7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgd2hpbGUgKHIgIT09IHMpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlIC0gciAtIDE7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpc1tyXTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmluZGV4TWFwW3JdO1xuICAgICAgICAgICAgY29uc3QgbyA9IHRoaXNbc107XG4gICAgICAgICAgICBjb25zdCBoID0gdC5pbmRleE1hcFtzXTtcbiAgICAgICAgICAgIHRoaXNbcl0gPSBvO1xuICAgICAgICAgICAgdC5pbmRleE1hcFtyXSA9IGg7XG4gICAgICAgICAgICB0aGlzW3NdID0gaTtcbiAgICAgICAgICAgIHQuaW5kZXhNYXBbc10gPSBuO1xuICAgICAgICAgICAgcisrO1xuICAgICAgICB9XG4gICAgICAgIHQubm90aWZ5KCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgc29ydDogZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gZ3QuZ2V0KHRoaXMpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSB7XG4gICAgICAgICAgICBrdC5jYWxsKHRoaXMsIHQpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcyA9IHRoaXMubGVuZ3RoO1xuICAgICAgICBpZiAocyA8IDIpIHJldHVybiB0aGlzO1xuICAgICAgICBBdCh0aGlzLCBlLmluZGV4TWFwLCAwLCBzLCBidCk7XG4gICAgICAgIGxldCByID0gMDtcbiAgICAgICAgd2hpbGUgKHIgPCBzKSB7XG4gICAgICAgICAgICBpZiAodm9pZCAwID09PSB0aGlzW3JdKSBicmVhaztcbiAgICAgICAgICAgIHIrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAodm9pZCAwID09PSB0IHx8ICFwKHQpKSB0ID0gd3Q7XG4gICAgICAgIEF0KHRoaXMsIGUuaW5kZXhNYXAsIDAsIHIsIHQpO1xuICAgICAgICBlLm5vdGlmeSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59O1xuXG5mb3IgKGNvbnN0IHQgb2YgJHQpIHYoTHRbdF0sIFwib2JzZXJ2aW5nXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZSxcbiAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZVxufSk7XG5cbmxldCBSdCA9IGZhbHNlO1xuXG5mdW5jdGlvbiBQdCgpIHtcbiAgICBmb3IgKGNvbnN0IHQgb2YgJHQpIGlmICh0cnVlICE9PSB5dFt0XS5vYnNlcnZpbmcpIHcoeXQsIHQsIEx0W3RdKTtcbn1cblxuZnVuY3Rpb24gVHQoKSB7XG4gICAgZm9yIChjb25zdCB0IG9mICR0KSBpZiAodHJ1ZSA9PT0geXRbdF0ub2JzZXJ2aW5nKSB3KHl0LCB0LCBCdFt0XSk7XG59XG5cbmNsYXNzIEFycmF5T2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMTg7XG4gICAgICAgIGlmICghUnQpIHtcbiAgICAgICAgICAgIFJ0ID0gdHJ1ZTtcbiAgICAgICAgICAgIFB0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pbmRleE9ic2VydmVycyA9IHt9O1xuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSB0O1xuICAgICAgICB0aGlzLmluZGV4TWFwID0gdHQodC5sZW5ndGgpO1xuICAgICAgICB0aGlzLmxlbk9icyA9IHZvaWQgMDtcbiAgICAgICAgZ3Quc2V0KHQsIHRoaXMpO1xuICAgIH1cbiAgICBub3RpZnkoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmluZGV4TWFwO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jb2xsZWN0aW9uLmxlbmd0aDtcbiAgICAgICAgdGhpcy5pbmRleE1hcCA9IHR0KGUpO1xuICAgICAgICB0aGlzLnN1YnMubm90aWZ5Q29sbGVjdGlvbih0LCAwKTtcbiAgICB9XG4gICAgZ2V0TGVuZ3RoT2JzZXJ2ZXIoKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gKHQgPSB0aGlzLmxlbk9icykgJiYgdm9pZCAwICE9PSB0ID8gdCA6IHRoaXMubGVuT2JzID0gbmV3IENvbGxlY3Rpb25MZW5ndGhPYnNlcnZlcih0aGlzKTtcbiAgICB9XG4gICAgZ2V0SW5kZXhPYnNlcnZlcih0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB2YXIgcztcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IChlID0gKHMgPSB0aGlzLmluZGV4T2JzZXJ2ZXJzKVt0XSkgJiYgdm9pZCAwICE9PSBlID8gZSA6IHNbdF0gPSBuZXcgQXJyYXlJbmRleE9ic2VydmVyKHRoaXMsIHQpO1xuICAgIH1cbn1cblxuY2xhc3MgQXJyYXlJbmRleE9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMub3duZXIgPSB0O1xuICAgICAgICB0aGlzLmluZGV4ID0gZTtcbiAgICAgICAgdGhpcy5kb05vdENhY2hlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuZ2V0VmFsdWUoKTtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm93bmVyLmNvbGxlY3Rpb25bdGhpcy5pbmRleF07XG4gICAgfVxuICAgIHNldFZhbHVlKHQsIGUpIHtcbiAgICAgICAgaWYgKHQgPT09IHRoaXMuZ2V0VmFsdWUoKSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5vd25lcjtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuaW5kZXg7XG4gICAgICAgIGNvbnN0IGkgPSBzLmluZGV4TWFwO1xuICAgICAgICBpZiAoaVtyXSA+IC0xKSBpLmRlbGV0ZWRJdGVtcy5wdXNoKGlbcl0pO1xuICAgICAgICBpW3JdID0gLTI7XG4gICAgICAgIHMuY29sbGVjdGlvbltyXSA9IHQ7XG4gICAgICAgIHMubm90aWZ5KCk7XG4gICAgfVxuICAgIGhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UodCwgZSkge1xuICAgICAgICBjb25zdCBzID0gdGhpcy5pbmRleDtcbiAgICAgICAgY29uc3QgciA9IHRbc10gPT09IHM7XG4gICAgICAgIGlmIChyKSByZXR1cm47XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnZhbHVlO1xuICAgICAgICBjb25zdCBuID0gdGhpcy52YWx1ZSA9IHRoaXMuZ2V0VmFsdWUoKTtcbiAgICAgICAgaWYgKGkgIT09IG4pIHRoaXMuc3Vicy5ub3RpZnkobiwgaSwgZSk7XG4gICAgfVxuICAgIHN1YnNjcmliZSh0KSB7XG4gICAgICAgIGlmICh0aGlzLnN1YnMuYWRkKHQpICYmIDEgPT09IHRoaXMuc3Vicy5jb3VudCkgdGhpcy5vd25lci5zdWJzY3JpYmUodGhpcyk7XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicy5yZW1vdmUodCkgJiYgMCA9PT0gdGhpcy5zdWJzLmNvdW50KSB0aGlzLm93bmVyLnVuc3Vic2NyaWJlKHRoaXMpO1xuICAgIH1cbn1cblxucnQoQXJyYXlPYnNlcnZlcik7XG5cbnJ0KEFycmF5SW5kZXhPYnNlcnZlcik7XG5cbmZ1bmN0aW9uIGp0KHQpIHtcbiAgICBsZXQgZSA9IGd0LmdldCh0KTtcbiAgICBpZiAodm9pZCAwID09PSBlKSBlID0gbmV3IEFycmF5T2JzZXJ2ZXIodCk7XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIEl0KHQpIHtcbiAgICBsZXQgZSA9IDA7XG4gICAgbGV0IHMgPSAwO1xuICAgIGNvbnN0IHIgPSB0Lmxlbmd0aDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHI7ICsraSkge1xuICAgICAgICB3aGlsZSAodC5kZWxldGVkSXRlbXNbc10gPD0gaSAtIGUpIHtcbiAgICAgICAgICAgICsrcztcbiAgICAgICAgICAgIC0tZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoLTIgPT09IHRbaV0pICsrZTsgZWxzZSB0W2ldICs9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBNdCh0LCBlKSB7XG4gICAgY29uc3QgcyA9IHQuc2xpY2UoKTtcbiAgICBjb25zdCByID0gZS5sZW5ndGg7XG4gICAgbGV0IGkgPSAwO1xuICAgIGxldCBuID0gMDtcbiAgICB3aGlsZSAoaSA8IHIpIHtcbiAgICAgICAgbiA9IGVbaV07XG4gICAgICAgIGlmICgtMiAhPT0gbikgdFtpXSA9IHNbbl07XG4gICAgICAgICsraTtcbiAgICB9XG59XG5cbmNvbnN0IER0ID0gbmV3IFdlYWtNYXA7XG5cbmNvbnN0IEZ0ID0gU2V0LnByb3RvdHlwZTtcblxuY29uc3QgVnQgPSBGdC5hZGQ7XG5cbmNvbnN0IE50ID0gRnQuY2xlYXI7XG5cbmNvbnN0IEt0ID0gRnQuZGVsZXRlO1xuXG5jb25zdCBxdCA9IHtcbiAgICBhZGQ6IFZ0LFxuICAgIGNsZWFyOiBOdCxcbiAgICBkZWxldGU6IEt0XG59O1xuXG5jb25zdCBIdCA9IFsgXCJhZGRcIiwgXCJjbGVhclwiLCBcImRlbGV0ZVwiIF07XG5cbmNvbnN0IFF0ID0ge1xuICAgIGFkZDogZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gRHQuZ2V0KHRoaXMpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBlKSB7XG4gICAgICAgICAgICBWdC5jYWxsKHRoaXMsIHQpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcyA9IHRoaXMuc2l6ZTtcbiAgICAgICAgVnQuY2FsbCh0aGlzLCB0KTtcbiAgICAgICAgY29uc3QgciA9IHRoaXMuc2l6ZTtcbiAgICAgICAgaWYgKHIgPT09IHMpIHJldHVybiB0aGlzO1xuICAgICAgICBlLmluZGV4TWFwW3NdID0gLTI7XG4gICAgICAgIGUubm90aWZ5KCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgY2xlYXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCB0ID0gRHQuZ2V0KHRoaXMpO1xuICAgICAgICBpZiAodm9pZCAwID09PSB0KSByZXR1cm4gTnQuY2FsbCh0aGlzKTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc2l6ZTtcbiAgICAgICAgaWYgKGUgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5pbmRleE1hcDtcbiAgICAgICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLmtleXMoKSkge1xuICAgICAgICAgICAgICAgIGlmIChlW3NdID4gLTEpIGUuZGVsZXRlZEl0ZW1zLnB1c2goZVtzXSk7XG4gICAgICAgICAgICAgICAgcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgTnQuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIGUubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHQubm90aWZ5KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH0sXG4gICAgZGVsZXRlOiBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBEdC5nZXQodGhpcyk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHJldHVybiBLdC5jYWxsKHRoaXMsIHQpO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5zaXplO1xuICAgICAgICBpZiAoMCA9PT0gcykgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSBlLmluZGV4TWFwO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5rZXlzKCkpIHtcbiAgICAgICAgICAgIGlmIChzID09PSB0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGlbcl0gPiAtMSkgaS5kZWxldGVkSXRlbXMucHVzaChpW3JdKTtcbiAgICAgICAgICAgICAgICBpLnNwbGljZShyLCAxKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gS3QuY2FsbCh0aGlzLCB0KTtcbiAgICAgICAgICAgICAgICBpZiAodHJ1ZSA9PT0gcykgZS5ub3RpZnkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHIrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufTtcblxuY29uc3QgX3QgPSB7XG4gICAgd3JpdGFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG59O1xuXG5mb3IgKGNvbnN0IHQgb2YgSHQpIHYoUXRbdF0sIFwib2JzZXJ2aW5nXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZSxcbiAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZVxufSk7XG5cbmxldCB6dCA9IGZhbHNlO1xuXG5mdW5jdGlvbiBXdCgpIHtcbiAgICBmb3IgKGNvbnN0IHQgb2YgSHQpIGlmICh0cnVlICE9PSBGdFt0XS5vYnNlcnZpbmcpIHYoRnQsIHQsIHtcbiAgICAgICAgLi4uX3QsXG4gICAgICAgIHZhbHVlOiBRdFt0XVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBHdCgpIHtcbiAgICBmb3IgKGNvbnN0IHQgb2YgSHQpIGlmICh0cnVlID09PSBGdFt0XS5vYnNlcnZpbmcpIHYoRnQsIHQsIHtcbiAgICAgICAgLi4uX3QsXG4gICAgICAgIHZhbHVlOiBxdFt0XVxuICAgIH0pO1xufVxuXG5jbGFzcyBTZXRPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnR5cGUgPSAzNDtcbiAgICAgICAgaWYgKCF6dCkge1xuICAgICAgICAgICAgenQgPSB0cnVlO1xuICAgICAgICAgICAgV3QoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSB0O1xuICAgICAgICB0aGlzLmluZGV4TWFwID0gdHQodC5zaXplKTtcbiAgICAgICAgdGhpcy5sZW5PYnMgPSB2b2lkIDA7XG4gICAgICAgIER0LnNldCh0LCB0aGlzKTtcbiAgICB9XG4gICAgbm90aWZ5KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5pbmRleE1hcDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY29sbGVjdGlvbi5zaXplO1xuICAgICAgICB0aGlzLmluZGV4TWFwID0gdHQoZSk7XG4gICAgICAgIHRoaXMuc3Vicy5ub3RpZnlDb2xsZWN0aW9uKHQsIDApO1xuICAgIH1cbiAgICBnZXRMZW5ndGhPYnNlcnZlcigpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIHJldHVybiBudWxsICE9PSAodCA9IHRoaXMubGVuT2JzKSAmJiB2b2lkIDAgIT09IHQgPyB0IDogdGhpcy5sZW5PYnMgPSBuZXcgQ29sbGVjdGlvblNpemVPYnNlcnZlcih0aGlzKTtcbiAgICB9XG59XG5cbnJ0KFNldE9ic2VydmVyKTtcblxuZnVuY3Rpb24gWnQodCkge1xuICAgIGxldCBlID0gRHQuZ2V0KHQpO1xuICAgIGlmICh2b2lkIDAgPT09IGUpIGUgPSBuZXcgU2V0T2JzZXJ2ZXIodCk7XG4gICAgcmV0dXJuIGU7XG59XG5cbmNvbnN0IEp0ID0gbmV3IFdlYWtNYXA7XG5cbmNvbnN0IFh0ID0gTWFwLnByb3RvdHlwZTtcblxuY29uc3QgWXQgPSBYdC5zZXQ7XG5cbmNvbnN0IHRlID0gWHQuY2xlYXI7XG5cbmNvbnN0IGVlID0gWHQuZGVsZXRlO1xuXG5jb25zdCBzZSA9IHtcbiAgICBzZXQ6IFl0LFxuICAgIGNsZWFyOiB0ZSxcbiAgICBkZWxldGU6IGVlXG59O1xuXG5jb25zdCByZSA9IFsgXCJzZXRcIiwgXCJjbGVhclwiLCBcImRlbGV0ZVwiIF07XG5cbmNvbnN0IGllID0ge1xuICAgIHNldDogZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBzID0gSnQuZ2V0KHRoaXMpO1xuICAgICAgICBpZiAodm9pZCAwID09PSBzKSB7XG4gICAgICAgICAgICBZdC5jYWxsKHRoaXMsIHQsIGUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgciA9IHRoaXMuZ2V0KHQpO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5zaXplO1xuICAgICAgICBZdC5jYWxsKHRoaXMsIHQsIGUpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5zaXplO1xuICAgICAgICBpZiAobiA9PT0gaSkge1xuICAgICAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIHRoaXMuZW50cmllcygpKSB7XG4gICAgICAgICAgICAgICAgaWYgKGlbMF0gPT09IHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlbMV0gIT09IHIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHMuaW5kZXhNYXAuZGVsZXRlZEl0ZW1zLnB1c2gocy5pbmRleE1hcFtlXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzLmluZGV4TWFwW2VdID0gLTI7XG4gICAgICAgICAgICAgICAgICAgICAgICBzLm5vdGlmeSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICBzLmluZGV4TWFwW2ldID0gLTI7XG4gICAgICAgIHMubm90aWZ5KCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gICAgY2xlYXI6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCB0ID0gSnQuZ2V0KHRoaXMpO1xuICAgICAgICBpZiAodm9pZCAwID09PSB0KSByZXR1cm4gdGUuY2FsbCh0aGlzKTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc2l6ZTtcbiAgICAgICAgaWYgKGUgPiAwKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5pbmRleE1hcDtcbiAgICAgICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLmtleXMoKSkge1xuICAgICAgICAgICAgICAgIGlmIChlW3NdID4gLTEpIGUuZGVsZXRlZEl0ZW1zLnB1c2goZVtzXSk7XG4gICAgICAgICAgICAgICAgcysrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGUuY2FsbCh0aGlzKTtcbiAgICAgICAgICAgIGUubGVuZ3RoID0gMDtcbiAgICAgICAgICAgIHQubm90aWZ5KCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgIH0sXG4gICAgZGVsZXRlOiBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBKdC5nZXQodGhpcyk7XG4gICAgICAgIGlmICh2b2lkIDAgPT09IGUpIHJldHVybiBlZS5jYWxsKHRoaXMsIHQpO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5zaXplO1xuICAgICAgICBpZiAoMCA9PT0gcykgcmV0dXJuIGZhbHNlO1xuICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSBlLmluZGV4TWFwO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdGhpcy5rZXlzKCkpIHtcbiAgICAgICAgICAgIGlmIChzID09PSB0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGlbcl0gPiAtMSkgaS5kZWxldGVkSXRlbXMucHVzaChpW3JdKTtcbiAgICAgICAgICAgICAgICBpLnNwbGljZShyLCAxKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gZWUuY2FsbCh0aGlzLCB0KTtcbiAgICAgICAgICAgICAgICBpZiAodHJ1ZSA9PT0gcykgZS5ub3RpZnkoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICsrcjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufTtcblxuY29uc3QgbmUgPSB7XG4gICAgd3JpdGFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG59O1xuXG5mb3IgKGNvbnN0IHQgb2YgcmUpIHYoaWVbdF0sIFwib2JzZXJ2aW5nXCIsIHtcbiAgICB2YWx1ZTogdHJ1ZSxcbiAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgY29uZmlndXJhYmxlOiBmYWxzZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZVxufSk7XG5cbmxldCBvZSA9IGZhbHNlO1xuXG5mdW5jdGlvbiBoZSgpIHtcbiAgICBmb3IgKGNvbnN0IHQgb2YgcmUpIGlmICh0cnVlICE9PSBYdFt0XS5vYnNlcnZpbmcpIHYoWHQsIHQsIHtcbiAgICAgICAgLi4ubmUsXG4gICAgICAgIHZhbHVlOiBpZVt0XVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBjZSgpIHtcbiAgICBmb3IgKGNvbnN0IHQgb2YgcmUpIGlmICh0cnVlID09PSBYdFt0XS5vYnNlcnZpbmcpIHYoWHQsIHQsIHtcbiAgICAgICAgLi4ubmUsXG4gICAgICAgIHZhbHVlOiBzZVt0XVxuICAgIH0pO1xufVxuXG5jbGFzcyBNYXBPYnNlcnZlciB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnR5cGUgPSA2NjtcbiAgICAgICAgaWYgKCFvZSkge1xuICAgICAgICAgICAgb2UgPSB0cnVlO1xuICAgICAgICAgICAgaGUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmNvbGxlY3Rpb24gPSB0O1xuICAgICAgICB0aGlzLmluZGV4TWFwID0gdHQodC5zaXplKTtcbiAgICAgICAgdGhpcy5sZW5PYnMgPSB2b2lkIDA7XG4gICAgICAgIEp0LnNldCh0LCB0aGlzKTtcbiAgICB9XG4gICAgbm90aWZ5KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5pbmRleE1hcDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY29sbGVjdGlvbi5zaXplO1xuICAgICAgICB0aGlzLmluZGV4TWFwID0gdHQoZSk7XG4gICAgICAgIHRoaXMuc3Vicy5ub3RpZnlDb2xsZWN0aW9uKHQsIDApO1xuICAgIH1cbiAgICBnZXRMZW5ndGhPYnNlcnZlcigpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIHJldHVybiBudWxsICE9PSAodCA9IHRoaXMubGVuT2JzKSAmJiB2b2lkIDAgIT09IHQgPyB0IDogdGhpcy5sZW5PYnMgPSBuZXcgQ29sbGVjdGlvblNpemVPYnNlcnZlcih0aGlzKTtcbiAgICB9XG59XG5cbnJ0KE1hcE9ic2VydmVyKTtcblxuZnVuY3Rpb24gdWUodCkge1xuICAgIGxldCBlID0gSnQuZ2V0KHQpO1xuICAgIGlmICh2b2lkIDAgPT09IGUpIGUgPSBuZXcgTWFwT2JzZXJ2ZXIodCk7XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIGFlKHQsIGUpIHtcbiAgICBjb25zdCBzID0gdGhpcy5vTC5nZXRPYnNlcnZlcih0LCBlKTtcbiAgICB0aGlzLm9icy5hZGQocyk7XG59XG5cbmZ1bmN0aW9uIGxlKCkge1xuICAgIHJldHVybiB3KHRoaXMsIFwib2JzXCIsIG5ldyBCaW5kaW5nT2JzZXJ2ZXJSZWNvcmQodGhpcykpO1xufVxuXG5mdW5jdGlvbiBmZSh0KSB7XG4gICAgbGV0IGU7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBBcnJheSkgZSA9IGp0KHQpOyBlbHNlIGlmICh0IGluc3RhbmNlb2YgU2V0KSBlID0gWnQodCk7IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBNYXApIGUgPSB1ZSh0KTsgZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwMjEwXCIpO1xuICAgIHRoaXMub2JzLmFkZChlKTtcbn1cblxuZnVuY3Rpb24gZGUodCkge1xuICAgIHRoaXMub2JzLmFkZCh0KTtcbn1cblxuZnVuY3Rpb24gdmUoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBBVVIyMDExOmhhbmRsZUNoYW5nZWApO1xufVxuXG5mdW5jdGlvbiBwZSgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJBVVIyMDEyOmhhbmRsZUNvbGxlY3Rpb25DaGFuZ2VcIik7XG59XG5cbmNsYXNzIEJpbmRpbmdPYnNlcnZlclJlY29yZCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnZlcnNpb24gPSAwO1xuICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICAgICAgdGhpcy5vID0gbmV3IE1hcDtcbiAgICAgICAgdGhpcy5iID0gdDtcbiAgICB9XG4gICAgaGFuZGxlQ2hhbmdlKHQsIGUsIHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYi5pbnRlcmNlcHRvci5oYW5kbGVDaGFuZ2UodCwgZSwgcyk7XG4gICAgfVxuICAgIGhhbmRsZUNvbGxlY3Rpb25DaGFuZ2UodCwgZSkge1xuICAgICAgICB0aGlzLmIuaW50ZXJjZXB0b3IuaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSh0LCBlKTtcbiAgICB9XG4gICAgYWRkKHQpIHtcbiAgICAgICAgaWYgKCF0aGlzLm8uaGFzKHQpKSB7XG4gICAgICAgICAgICB0LnN1YnNjcmliZSh0aGlzKTtcbiAgICAgICAgICAgICsrdGhpcy5jb3VudDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm8uc2V0KHQsIHRoaXMudmVyc2lvbik7XG4gICAgfVxuICAgIGNsZWFyKCkge1xuICAgICAgICB0aGlzLm8uZm9yRWFjaCh3ZSwgdGhpcyk7XG4gICAgICAgIHRoaXMuY291bnQgPSB0aGlzLm8uc2l6ZTtcbiAgICB9XG4gICAgY2xlYXJBbGwoKSB7XG4gICAgICAgIHRoaXMuby5mb3JFYWNoKGdlLCB0aGlzKTtcbiAgICAgICAgdGhpcy5vLmNsZWFyKCk7XG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZ2UodCwgZSkge1xuICAgIGUudW5zdWJzY3JpYmUodGhpcyk7XG59XG5cbmZ1bmN0aW9uIHdlKHQsIGUpIHtcbiAgICBpZiAodGhpcy52ZXJzaW9uICE9PSB0KSB7XG4gICAgICAgIGUudW5zdWJzY3JpYmUodGhpcyk7XG4gICAgICAgIHRoaXMuby5kZWxldGUoZSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBiZSh0KSB7XG4gICAgY29uc3QgZSA9IHQucHJvdG90eXBlO1xuICAgIGIoZSwgXCJvYnNlcnZlXCIsIGFlLCB0cnVlKTtcbiAgICBiKGUsIFwib2JzZXJ2ZUNvbGxlY3Rpb25cIiwgZmUsIHRydWUpO1xuICAgIGIoZSwgXCJzdWJzY3JpYmVUb1wiLCBkZSwgdHJ1ZSk7XG4gICAgdihlLCBcIm9ic1wiLCB7XG4gICAgICAgIGdldDogbGVcbiAgICB9KTtcbiAgICBiKGUsIFwiaGFuZGxlQ2hhbmdlXCIsIHZlKTtcbiAgICBiKGUsIFwiaGFuZGxlQ29sbGVjdGlvbkNoYW5nZVwiLCBwZSk7XG4gICAgcmV0dXJuIHQ7XG59XG5cbmZ1bmN0aW9uIEVlKHQpIHtcbiAgICByZXR1cm4gbnVsbCA9PSB0ID8gYmUgOiBiZSh0KTtcbn1cblxuY2xhc3MgQmluZGluZ01lZGlhdG9yIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBzLCByKSB7XG4gICAgICAgIHRoaXMua2V5ID0gdDtcbiAgICAgICAgdGhpcy5iaW5kaW5nID0gZTtcbiAgICAgICAgdGhpcy5vTCA9IHM7XG4gICAgICAgIHRoaXMubG9jYXRvciA9IHI7XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgIH1cbiAgICAkYmluZCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDIxMzokYmluZFwiKTtcbiAgICB9XG4gICAgJHVuYmluZCgpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDIxNDokdW5iaW5kXCIpO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UodCwgZSwgcykge1xuICAgICAgICB0aGlzLmJpbmRpbmdbdGhpcy5rZXldKHQsIGUsIHMpO1xuICAgIH1cbn1cblxuYmUoQmluZGluZ01lZGlhdG9yKTtcblxuY29uc3QgQWUgPSByLmNyZWF0ZUludGVyZmFjZShcIklFeHByZXNzaW9uUGFyc2VyXCIsICh0ID0+IHQuc2luZ2xldG9uKEV4cHJlc3Npb25QYXJzZXIpKSk7XG5cbmNsYXNzIEV4cHJlc3Npb25QYXJzZXIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnUgPSBFKCk7XG4gICAgICAgIHRoaXMuQSA9IEUoKTtcbiAgICAgICAgdGhpcy5VID0gRSgpO1xuICAgIH1cbiAgICBwYXJzZSh0LCBlKSB7XG4gICAgICAgIGxldCBzO1xuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIDE2OlxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDdXN0b21FeHByZXNzaW9uKHQpO1xuXG4gICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgcyA9IHRoaXMuVVt0XTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHMpIHMgPSB0aGlzLlVbdF0gPSB0aGlzLiRwYXJzZSh0LCBlKTtcbiAgICAgICAgICAgIHJldHVybiBzO1xuXG4gICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgcyA9IHRoaXMuQVt0XTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHMpIHMgPSB0aGlzLkFbdF0gPSB0aGlzLiRwYXJzZSh0LCBlKTtcbiAgICAgICAgICAgIHJldHVybiBzO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICgoZSAmICg0IHwgOCkpID4gMCkgcmV0dXJuIFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uLiRlbXB0eTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwMTY5XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcyA9IHRoaXMudVt0XTtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IHMpIHMgPSB0aGlzLnVbdF0gPSB0aGlzLiRwYXJzZSh0LCBlKTtcbiAgICAgICAgICAgIHJldHVybiBzO1xuICAgICAgICB9XG4gICAgfVxuICAgICRwYXJzZSh0LCBlKSB7XG4gICAgICAgIFBlLmlwID0gdDtcbiAgICAgICAgUGUubGVuZ3RoID0gdC5sZW5ndGg7XG4gICAgICAgIFBlLmluZGV4ID0gMDtcbiAgICAgICAgUGUuTyA9IHQuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgcmV0dXJuIGplKFBlLCAwLCA2MSwgdm9pZCAwID09PSBlID8gOCA6IGUpO1xuICAgIH1cbn1cblxudmFyIHllO1xuXG4oZnVuY3Rpb24odCkge1xuICAgIHRbdFtcIk51bGxcIl0gPSAwXSA9IFwiTnVsbFwiO1xuICAgIHRbdFtcIkJhY2tzcGFjZVwiXSA9IDhdID0gXCJCYWNrc3BhY2VcIjtcbiAgICB0W3RbXCJUYWJcIl0gPSA5XSA9IFwiVGFiXCI7XG4gICAgdFt0W1wiTGluZUZlZWRcIl0gPSAxMF0gPSBcIkxpbmVGZWVkXCI7XG4gICAgdFt0W1wiVmVydGljYWxUYWJcIl0gPSAxMV0gPSBcIlZlcnRpY2FsVGFiXCI7XG4gICAgdFt0W1wiRm9ybUZlZWRcIl0gPSAxMl0gPSBcIkZvcm1GZWVkXCI7XG4gICAgdFt0W1wiQ2FycmlhZ2VSZXR1cm5cIl0gPSAxM10gPSBcIkNhcnJpYWdlUmV0dXJuXCI7XG4gICAgdFt0W1wiU3BhY2VcIl0gPSAzMl0gPSBcIlNwYWNlXCI7XG4gICAgdFt0W1wiRXhjbGFtYXRpb25cIl0gPSAzM10gPSBcIkV4Y2xhbWF0aW9uXCI7XG4gICAgdFt0W1wiRG91YmxlUXVvdGVcIl0gPSAzNF0gPSBcIkRvdWJsZVF1b3RlXCI7XG4gICAgdFt0W1wiRG9sbGFyXCJdID0gMzZdID0gXCJEb2xsYXJcIjtcbiAgICB0W3RbXCJQZXJjZW50XCJdID0gMzddID0gXCJQZXJjZW50XCI7XG4gICAgdFt0W1wiQW1wZXJzYW5kXCJdID0gMzhdID0gXCJBbXBlcnNhbmRcIjtcbiAgICB0W3RbXCJTaW5nbGVRdW90ZVwiXSA9IDM5XSA9IFwiU2luZ2xlUXVvdGVcIjtcbiAgICB0W3RbXCJPcGVuUGFyZW5cIl0gPSA0MF0gPSBcIk9wZW5QYXJlblwiO1xuICAgIHRbdFtcIkNsb3NlUGFyZW5cIl0gPSA0MV0gPSBcIkNsb3NlUGFyZW5cIjtcbiAgICB0W3RbXCJBc3Rlcmlza1wiXSA9IDQyXSA9IFwiQXN0ZXJpc2tcIjtcbiAgICB0W3RbXCJQbHVzXCJdID0gNDNdID0gXCJQbHVzXCI7XG4gICAgdFt0W1wiQ29tbWFcIl0gPSA0NF0gPSBcIkNvbW1hXCI7XG4gICAgdFt0W1wiTWludXNcIl0gPSA0NV0gPSBcIk1pbnVzXCI7XG4gICAgdFt0W1wiRG90XCJdID0gNDZdID0gXCJEb3RcIjtcbiAgICB0W3RbXCJTbGFzaFwiXSA9IDQ3XSA9IFwiU2xhc2hcIjtcbiAgICB0W3RbXCJTZW1pY29sb25cIl0gPSA1OV0gPSBcIlNlbWljb2xvblwiO1xuICAgIHRbdFtcIkJhY2t0aWNrXCJdID0gOTZdID0gXCJCYWNrdGlja1wiO1xuICAgIHRbdFtcIk9wZW5CcmFja2V0XCJdID0gOTFdID0gXCJPcGVuQnJhY2tldFwiO1xuICAgIHRbdFtcIkJhY2tzbGFzaFwiXSA9IDkyXSA9IFwiQmFja3NsYXNoXCI7XG4gICAgdFt0W1wiQ2xvc2VCcmFja2V0XCJdID0gOTNdID0gXCJDbG9zZUJyYWNrZXRcIjtcbiAgICB0W3RbXCJDYXJldFwiXSA9IDk0XSA9IFwiQ2FyZXRcIjtcbiAgICB0W3RbXCJVbmRlcnNjb3JlXCJdID0gOTVdID0gXCJVbmRlcnNjb3JlXCI7XG4gICAgdFt0W1wiT3BlbkJyYWNlXCJdID0gMTIzXSA9IFwiT3BlbkJyYWNlXCI7XG4gICAgdFt0W1wiQmFyXCJdID0gMTI0XSA9IFwiQmFyXCI7XG4gICAgdFt0W1wiQ2xvc2VCcmFjZVwiXSA9IDEyNV0gPSBcIkNsb3NlQnJhY2VcIjtcbiAgICB0W3RbXCJDb2xvblwiXSA9IDU4XSA9IFwiQ29sb25cIjtcbiAgICB0W3RbXCJMZXNzVGhhblwiXSA9IDYwXSA9IFwiTGVzc1RoYW5cIjtcbiAgICB0W3RbXCJFcXVhbHNcIl0gPSA2MV0gPSBcIkVxdWFsc1wiO1xuICAgIHRbdFtcIkdyZWF0ZXJUaGFuXCJdID0gNjJdID0gXCJHcmVhdGVyVGhhblwiO1xuICAgIHRbdFtcIlF1ZXN0aW9uXCJdID0gNjNdID0gXCJRdWVzdGlvblwiO1xuICAgIHRbdFtcIlplcm9cIl0gPSA0OF0gPSBcIlplcm9cIjtcbiAgICB0W3RbXCJPbmVcIl0gPSA0OV0gPSBcIk9uZVwiO1xuICAgIHRbdFtcIlR3b1wiXSA9IDUwXSA9IFwiVHdvXCI7XG4gICAgdFt0W1wiVGhyZWVcIl0gPSA1MV0gPSBcIlRocmVlXCI7XG4gICAgdFt0W1wiRm91clwiXSA9IDUyXSA9IFwiRm91clwiO1xuICAgIHRbdFtcIkZpdmVcIl0gPSA1M10gPSBcIkZpdmVcIjtcbiAgICB0W3RbXCJTaXhcIl0gPSA1NF0gPSBcIlNpeFwiO1xuICAgIHRbdFtcIlNldmVuXCJdID0gNTVdID0gXCJTZXZlblwiO1xuICAgIHRbdFtcIkVpZ2h0XCJdID0gNTZdID0gXCJFaWdodFwiO1xuICAgIHRbdFtcIk5pbmVcIl0gPSA1N10gPSBcIk5pbmVcIjtcbiAgICB0W3RbXCJVcHBlckFcIl0gPSA2NV0gPSBcIlVwcGVyQVwiO1xuICAgIHRbdFtcIlVwcGVyQlwiXSA9IDY2XSA9IFwiVXBwZXJCXCI7XG4gICAgdFt0W1wiVXBwZXJDXCJdID0gNjddID0gXCJVcHBlckNcIjtcbiAgICB0W3RbXCJVcHBlckRcIl0gPSA2OF0gPSBcIlVwcGVyRFwiO1xuICAgIHRbdFtcIlVwcGVyRVwiXSA9IDY5XSA9IFwiVXBwZXJFXCI7XG4gICAgdFt0W1wiVXBwZXJGXCJdID0gNzBdID0gXCJVcHBlckZcIjtcbiAgICB0W3RbXCJVcHBlckdcIl0gPSA3MV0gPSBcIlVwcGVyR1wiO1xuICAgIHRbdFtcIlVwcGVySFwiXSA9IDcyXSA9IFwiVXBwZXJIXCI7XG4gICAgdFt0W1wiVXBwZXJJXCJdID0gNzNdID0gXCJVcHBlcklcIjtcbiAgICB0W3RbXCJVcHBlckpcIl0gPSA3NF0gPSBcIlVwcGVySlwiO1xuICAgIHRbdFtcIlVwcGVyS1wiXSA9IDc1XSA9IFwiVXBwZXJLXCI7XG4gICAgdFt0W1wiVXBwZXJMXCJdID0gNzZdID0gXCJVcHBlckxcIjtcbiAgICB0W3RbXCJVcHBlck1cIl0gPSA3N10gPSBcIlVwcGVyTVwiO1xuICAgIHRbdFtcIlVwcGVyTlwiXSA9IDc4XSA9IFwiVXBwZXJOXCI7XG4gICAgdFt0W1wiVXBwZXJPXCJdID0gNzldID0gXCJVcHBlck9cIjtcbiAgICB0W3RbXCJVcHBlclBcIl0gPSA4MF0gPSBcIlVwcGVyUFwiO1xuICAgIHRbdFtcIlVwcGVyUVwiXSA9IDgxXSA9IFwiVXBwZXJRXCI7XG4gICAgdFt0W1wiVXBwZXJSXCJdID0gODJdID0gXCJVcHBlclJcIjtcbiAgICB0W3RbXCJVcHBlclNcIl0gPSA4M10gPSBcIlVwcGVyU1wiO1xuICAgIHRbdFtcIlVwcGVyVFwiXSA9IDg0XSA9IFwiVXBwZXJUXCI7XG4gICAgdFt0W1wiVXBwZXJVXCJdID0gODVdID0gXCJVcHBlclVcIjtcbiAgICB0W3RbXCJVcHBlclZcIl0gPSA4Nl0gPSBcIlVwcGVyVlwiO1xuICAgIHRbdFtcIlVwcGVyV1wiXSA9IDg3XSA9IFwiVXBwZXJXXCI7XG4gICAgdFt0W1wiVXBwZXJYXCJdID0gODhdID0gXCJVcHBlclhcIjtcbiAgICB0W3RbXCJVcHBlcllcIl0gPSA4OV0gPSBcIlVwcGVyWVwiO1xuICAgIHRbdFtcIlVwcGVyWlwiXSA9IDkwXSA9IFwiVXBwZXJaXCI7XG4gICAgdFt0W1wiTG93ZXJBXCJdID0gOTddID0gXCJMb3dlckFcIjtcbiAgICB0W3RbXCJMb3dlckJcIl0gPSA5OF0gPSBcIkxvd2VyQlwiO1xuICAgIHRbdFtcIkxvd2VyQ1wiXSA9IDk5XSA9IFwiTG93ZXJDXCI7XG4gICAgdFt0W1wiTG93ZXJEXCJdID0gMTAwXSA9IFwiTG93ZXJEXCI7XG4gICAgdFt0W1wiTG93ZXJFXCJdID0gMTAxXSA9IFwiTG93ZXJFXCI7XG4gICAgdFt0W1wiTG93ZXJGXCJdID0gMTAyXSA9IFwiTG93ZXJGXCI7XG4gICAgdFt0W1wiTG93ZXJHXCJdID0gMTAzXSA9IFwiTG93ZXJHXCI7XG4gICAgdFt0W1wiTG93ZXJIXCJdID0gMTA0XSA9IFwiTG93ZXJIXCI7XG4gICAgdFt0W1wiTG93ZXJJXCJdID0gMTA1XSA9IFwiTG93ZXJJXCI7XG4gICAgdFt0W1wiTG93ZXJKXCJdID0gMTA2XSA9IFwiTG93ZXJKXCI7XG4gICAgdFt0W1wiTG93ZXJLXCJdID0gMTA3XSA9IFwiTG93ZXJLXCI7XG4gICAgdFt0W1wiTG93ZXJMXCJdID0gMTA4XSA9IFwiTG93ZXJMXCI7XG4gICAgdFt0W1wiTG93ZXJNXCJdID0gMTA5XSA9IFwiTG93ZXJNXCI7XG4gICAgdFt0W1wiTG93ZXJOXCJdID0gMTEwXSA9IFwiTG93ZXJOXCI7XG4gICAgdFt0W1wiTG93ZXJPXCJdID0gMTExXSA9IFwiTG93ZXJPXCI7XG4gICAgdFt0W1wiTG93ZXJQXCJdID0gMTEyXSA9IFwiTG93ZXJQXCI7XG4gICAgdFt0W1wiTG93ZXJRXCJdID0gMTEzXSA9IFwiTG93ZXJRXCI7XG4gICAgdFt0W1wiTG93ZXJSXCJdID0gMTE0XSA9IFwiTG93ZXJSXCI7XG4gICAgdFt0W1wiTG93ZXJTXCJdID0gMTE1XSA9IFwiTG93ZXJTXCI7XG4gICAgdFt0W1wiTG93ZXJUXCJdID0gMTE2XSA9IFwiTG93ZXJUXCI7XG4gICAgdFt0W1wiTG93ZXJVXCJdID0gMTE3XSA9IFwiTG93ZXJVXCI7XG4gICAgdFt0W1wiTG93ZXJWXCJdID0gMTE4XSA9IFwiTG93ZXJWXCI7XG4gICAgdFt0W1wiTG93ZXJXXCJdID0gMTE5XSA9IFwiTG93ZXJXXCI7XG4gICAgdFt0W1wiTG93ZXJYXCJdID0gMTIwXSA9IFwiTG93ZXJYXCI7XG4gICAgdFt0W1wiTG93ZXJZXCJdID0gMTIxXSA9IFwiTG93ZXJZXCI7XG4gICAgdFt0W1wiTG93ZXJaXCJdID0gMTIyXSA9IFwiTG93ZXJaXCI7XG59KSh5ZSB8fCAoeWUgPSB7fSkpO1xuXG5mdW5jdGlvbiBtZSh0KSB7XG4gICAgc3dpdGNoICh0KSB7XG4gICAgICBjYXNlIDk4OlxuICAgICAgICByZXR1cm4gODtcblxuICAgICAgY2FzZSAxMTY6XG4gICAgICAgIHJldHVybiA5O1xuXG4gICAgICBjYXNlIDExMDpcbiAgICAgICAgcmV0dXJuIDEwO1xuXG4gICAgICBjYXNlIDExODpcbiAgICAgICAgcmV0dXJuIDExO1xuXG4gICAgICBjYXNlIDEwMjpcbiAgICAgICAgcmV0dXJuIDEyO1xuXG4gICAgICBjYXNlIDExNDpcbiAgICAgICAgcmV0dXJuIDEzO1xuXG4gICAgICBjYXNlIDM0OlxuICAgICAgICByZXR1cm4gMzQ7XG5cbiAgICAgIGNhc2UgMzk6XG4gICAgICAgIHJldHVybiAzOTtcblxuICAgICAgY2FzZSA5MjpcbiAgICAgICAgcmV0dXJuIDkyO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdDtcbiAgICB9XG59XG5cbnZhciBVZTtcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJSZXNldFwiXSA9IDBdID0gXCJSZXNldFwiO1xuICAgIHRbdFtcIkFuY2VzdG9yXCJdID0gNTExXSA9IFwiQW5jZXN0b3JcIjtcbiAgICB0W3RbXCJUaGlzXCJdID0gNTEyXSA9IFwiVGhpc1wiO1xuICAgIHRbdFtcIlNjb3BlXCJdID0gMTAyNF0gPSBcIlNjb3BlXCI7XG4gICAgdFt0W1wiTWVtYmVyXCJdID0gMjA0OF0gPSBcIk1lbWJlclwiO1xuICAgIHRbdFtcIktleWVkXCJdID0gNDA5Nl0gPSBcIktleWVkXCI7XG59KShVZSB8fCAoVWUgPSB7fSkpO1xuXG52YXIgeGU7XG5cbihmdW5jdGlvbih0KSB7XG4gICAgdFt0W1wiVmFyaWFkaWNcIl0gPSA2MV0gPSBcIlZhcmlhZGljXCI7XG4gICAgdFt0W1wiQXNzaWduXCJdID0gNjJdID0gXCJBc3NpZ25cIjtcbiAgICB0W3RbXCJDb25kaXRpb25hbFwiXSA9IDYzXSA9IFwiQ29uZGl0aW9uYWxcIjtcbiAgICB0W3RbXCJMb2dpY2FsT1JcIl0gPSA2NF0gPSBcIkxvZ2ljYWxPUlwiO1xuICAgIHRbdFtcIkxvZ2ljYWxBTkRcIl0gPSAxMjhdID0gXCJMb2dpY2FsQU5EXCI7XG4gICAgdFt0W1wiRXF1YWxpdHlcIl0gPSAxOTJdID0gXCJFcXVhbGl0eVwiO1xuICAgIHRbdFtcIlJlbGF0aW9uYWxcIl0gPSAyNTZdID0gXCJSZWxhdGlvbmFsXCI7XG4gICAgdFt0W1wiQWRkaXRpdmVcIl0gPSAzMjBdID0gXCJBZGRpdGl2ZVwiO1xuICAgIHRbdFtcIk11bHRpcGxpY2F0aXZlXCJdID0gMzg0XSA9IFwiTXVsdGlwbGljYXRpdmVcIjtcbiAgICB0W3RbXCJCaW5hcnlcIl0gPSA0NDhdID0gXCJCaW5hcnlcIjtcbiAgICB0W3RbXCJMZWZ0SGFuZFNpZGVcIl0gPSA0NDldID0gXCJMZWZ0SGFuZFNpZGVcIjtcbiAgICB0W3RbXCJQcmltYXJ5XCJdID0gNDUwXSA9IFwiUHJpbWFyeVwiO1xuICAgIHRbdFtcIlVuYXJ5XCJdID0gNDUxXSA9IFwiVW5hcnlcIjtcbn0pKHhlIHx8ICh4ZSA9IHt9KSk7XG5cbnZhciBTZTtcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJFT0ZcIl0gPSAxNTcyODY0XSA9IFwiRU9GXCI7XG4gICAgdFt0W1wiRXhwcmVzc2lvblRlcm1pbmFsXCJdID0gMTA0ODU3Nl0gPSBcIkV4cHJlc3Npb25UZXJtaW5hbFwiO1xuICAgIHRbdFtcIkFjY2Vzc1Njb3BlVGVybWluYWxcIl0gPSA1MjQyODhdID0gXCJBY2Nlc3NTY29wZVRlcm1pbmFsXCI7XG4gICAgdFt0W1wiQ2xvc2luZ1Rva2VuXCJdID0gMjYyMTQ0XSA9IFwiQ2xvc2luZ1Rva2VuXCI7XG4gICAgdFt0W1wiT3BlbmluZ1Rva2VuXCJdID0gMTMxMDcyXSA9IFwiT3BlbmluZ1Rva2VuXCI7XG4gICAgdFt0W1wiQmluYXJ5T3BcIl0gPSA2NTUzNl0gPSBcIkJpbmFyeU9wXCI7XG4gICAgdFt0W1wiVW5hcnlPcFwiXSA9IDMyNzY4XSA9IFwiVW5hcnlPcFwiO1xuICAgIHRbdFtcIkxlZnRIYW5kU2lkZVwiXSA9IDE2Mzg0XSA9IFwiTGVmdEhhbmRTaWRlXCI7XG4gICAgdFt0W1wiU3RyaW5nT3JOdW1lcmljTGl0ZXJhbFwiXSA9IDEyMjg4XSA9IFwiU3RyaW5nT3JOdW1lcmljTGl0ZXJhbFwiO1xuICAgIHRbdFtcIk51bWVyaWNMaXRlcmFsXCJdID0gODE5Ml0gPSBcIk51bWVyaWNMaXRlcmFsXCI7XG4gICAgdFt0W1wiU3RyaW5nTGl0ZXJhbFwiXSA9IDQwOTZdID0gXCJTdHJpbmdMaXRlcmFsXCI7XG4gICAgdFt0W1wiSWRlbnRpZmllck5hbWVcIl0gPSAzMDcyXSA9IFwiSWRlbnRpZmllck5hbWVcIjtcbiAgICB0W3RbXCJLZXl3b3JkXCJdID0gMjA0OF0gPSBcIktleXdvcmRcIjtcbiAgICB0W3RbXCJJZGVudGlmaWVyXCJdID0gMTAyNF0gPSBcIklkZW50aWZpZXJcIjtcbiAgICB0W3RbXCJDb250ZXh0dWFsXCJdID0gNTEyXSA9IFwiQ29udGV4dHVhbFwiO1xuICAgIHRbdFtcIlByZWNlZGVuY2VcIl0gPSA0NDhdID0gXCJQcmVjZWRlbmNlXCI7XG4gICAgdFt0W1wiVHlwZVwiXSA9IDYzXSA9IFwiVHlwZVwiO1xuICAgIHRbdFtcIkZhbHNlS2V5d29yZFwiXSA9IDIwNDhdID0gXCJGYWxzZUtleXdvcmRcIjtcbiAgICB0W3RbXCJUcnVlS2V5d29yZFwiXSA9IDIwNDldID0gXCJUcnVlS2V5d29yZFwiO1xuICAgIHRbdFtcIk51bGxLZXl3b3JkXCJdID0gMjA1MF0gPSBcIk51bGxLZXl3b3JkXCI7XG4gICAgdFt0W1wiVW5kZWZpbmVkS2V5d29yZFwiXSA9IDIwNTFdID0gXCJVbmRlZmluZWRLZXl3b3JkXCI7XG4gICAgdFt0W1wiVGhpc1Njb3BlXCJdID0gMzA3Nl0gPSBcIlRoaXNTY29wZVwiO1xuICAgIHRbdFtcIlBhcmVudFNjb3BlXCJdID0gMzA3OF0gPSBcIlBhcmVudFNjb3BlXCI7XG4gICAgdFt0W1wiT3BlblBhcmVuXCJdID0gNjcxNzUxXSA9IFwiT3BlblBhcmVuXCI7XG4gICAgdFt0W1wiT3BlbkJyYWNlXCJdID0gMTMxMDgwXSA9IFwiT3BlbkJyYWNlXCI7XG4gICAgdFt0W1wiRG90XCJdID0gMTYzOTNdID0gXCJEb3RcIjtcbiAgICB0W3RbXCJDbG9zZUJyYWNlXCJdID0gMTgzNTAxOF0gPSBcIkNsb3NlQnJhY2VcIjtcbiAgICB0W3RbXCJDbG9zZVBhcmVuXCJdID0gMTgzNTAxOV0gPSBcIkNsb3NlUGFyZW5cIjtcbiAgICB0W3RbXCJDb21tYVwiXSA9IDE1NzI4NzZdID0gXCJDb21tYVwiO1xuICAgIHRbdFtcIk9wZW5CcmFja2V0XCJdID0gNjcxNzU3XSA9IFwiT3BlbkJyYWNrZXRcIjtcbiAgICB0W3RbXCJDbG9zZUJyYWNrZXRcIl0gPSAxODM1MDIyXSA9IFwiQ2xvc2VCcmFja2V0XCI7XG4gICAgdFt0W1wiQ29sb25cIl0gPSAxNTcyODc5XSA9IFwiQ29sb25cIjtcbiAgICB0W3RbXCJRdWVzdGlvblwiXSA9IDE1NzI4ODBdID0gXCJRdWVzdGlvblwiO1xuICAgIHRbdFtcIkFtcGVyc2FuZFwiXSA9IDE1NzI4ODNdID0gXCJBbXBlcnNhbmRcIjtcbiAgICB0W3RbXCJCYXJcIl0gPSAxNTcyODg0XSA9IFwiQmFyXCI7XG4gICAgdFt0W1wiQmFyQmFyXCJdID0gMTYzODU0OV0gPSBcIkJhckJhclwiO1xuICAgIHRbdFtcIkFtcGVyc2FuZEFtcGVyc2FuZFwiXSA9IDE2Mzg2MTRdID0gXCJBbXBlcnNhbmRBbXBlcnNhbmRcIjtcbiAgICB0W3RbXCJFcXVhbHNFcXVhbHNcIl0gPSAxNjM4Njc5XSA9IFwiRXF1YWxzRXF1YWxzXCI7XG4gICAgdFt0W1wiRXhjbGFtYXRpb25FcXVhbHNcIl0gPSAxNjM4NjgwXSA9IFwiRXhjbGFtYXRpb25FcXVhbHNcIjtcbiAgICB0W3RbXCJFcXVhbHNFcXVhbHNFcXVhbHNcIl0gPSAxNjM4NjgxXSA9IFwiRXF1YWxzRXF1YWxzRXF1YWxzXCI7XG4gICAgdFt0W1wiRXhjbGFtYXRpb25FcXVhbHNFcXVhbHNcIl0gPSAxNjM4NjgyXSA9IFwiRXhjbGFtYXRpb25FcXVhbHNFcXVhbHNcIjtcbiAgICB0W3RbXCJMZXNzVGhhblwiXSA9IDE2Mzg3NDddID0gXCJMZXNzVGhhblwiO1xuICAgIHRbdFtcIkdyZWF0ZXJUaGFuXCJdID0gMTYzODc0OF0gPSBcIkdyZWF0ZXJUaGFuXCI7XG4gICAgdFt0W1wiTGVzc1RoYW5FcXVhbHNcIl0gPSAxNjM4NzQ5XSA9IFwiTGVzc1RoYW5FcXVhbHNcIjtcbiAgICB0W3RbXCJHcmVhdGVyVGhhbkVxdWFsc1wiXSA9IDE2Mzg3NTBdID0gXCJHcmVhdGVyVGhhbkVxdWFsc1wiO1xuICAgIHRbdFtcIkluS2V5d29yZFwiXSA9IDE2NDA3OTldID0gXCJJbktleXdvcmRcIjtcbiAgICB0W3RbXCJJbnN0YW5jZU9mS2V5d29yZFwiXSA9IDE2NDA4MDBdID0gXCJJbnN0YW5jZU9mS2V5d29yZFwiO1xuICAgIHRbdFtcIlBsdXNcIl0gPSA2MjMwMDldID0gXCJQbHVzXCI7XG4gICAgdFt0W1wiTWludXNcIl0gPSA2MjMwMTBdID0gXCJNaW51c1wiO1xuICAgIHRbdFtcIlR5cGVvZktleXdvcmRcIl0gPSAzNDg1MV0gPSBcIlR5cGVvZktleXdvcmRcIjtcbiAgICB0W3RbXCJWb2lkS2V5d29yZFwiXSA9IDM0ODUyXSA9IFwiVm9pZEtleXdvcmRcIjtcbiAgICB0W3RbXCJBc3Rlcmlza1wiXSA9IDE2Mzg4ODVdID0gXCJBc3Rlcmlza1wiO1xuICAgIHRbdFtcIlBlcmNlbnRcIl0gPSAxNjM4ODg2XSA9IFwiUGVyY2VudFwiO1xuICAgIHRbdFtcIlNsYXNoXCJdID0gMTYzODg4N10gPSBcIlNsYXNoXCI7XG4gICAgdFt0W1wiRXF1YWxzXCJdID0gMTA0ODYxNl0gPSBcIkVxdWFsc1wiO1xuICAgIHRbdFtcIkV4Y2xhbWF0aW9uXCJdID0gMzI4MDldID0gXCJFeGNsYW1hdGlvblwiO1xuICAgIHRbdFtcIlRlbXBsYXRlVGFpbFwiXSA9IDU0MDcxNF0gPSBcIlRlbXBsYXRlVGFpbFwiO1xuICAgIHRbdFtcIlRlbXBsYXRlQ29udGludWF0aW9uXCJdID0gNTQwNzE1XSA9IFwiVGVtcGxhdGVDb250aW51YXRpb25cIjtcbiAgICB0W3RbXCJPZktleXdvcmRcIl0gPSAxMDUxMTgwXSA9IFwiT2ZLZXl3b3JkXCI7XG59KShTZSB8fCAoU2UgPSB7fSkpO1xuXG5jb25zdCBPZSA9IFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uLiRmYWxzZTtcblxuY29uc3QgQ2UgPSBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbi4kdHJ1ZTtcblxuY29uc3Qga2UgPSBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbi4kbnVsbDtcblxuY29uc3QgQmUgPSBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbi4kdW5kZWZpbmVkO1xuXG5jb25zdCAkZSA9IEFjY2Vzc1RoaXNFeHByZXNzaW9uLiR0aGlzO1xuXG5jb25zdCBMZSA9IEFjY2Vzc1RoaXNFeHByZXNzaW9uLiRwYXJlbnQ7XG5cbnZhciBSZTtcblxuKGZ1bmN0aW9uKHQpIHtcbiAgICB0W3RbXCJOb25lXCJdID0gMF0gPSBcIk5vbmVcIjtcbiAgICB0W3RbXCJJbnRlcnBvbGF0aW9uXCJdID0gMV0gPSBcIkludGVycG9sYXRpb25cIjtcbiAgICB0W3RbXCJJc0l0ZXJhdG9yXCJdID0gMl0gPSBcIklzSXRlcmF0b3JcIjtcbiAgICB0W3RbXCJJc0Z1bmN0aW9uXCJdID0gNF0gPSBcIklzRnVuY3Rpb25cIjtcbiAgICB0W3RbXCJJc1Byb3BlcnR5XCJdID0gOF0gPSBcIklzUHJvcGVydHlcIjtcbiAgICB0W3RbXCJJc0N1c3RvbVwiXSA9IDE2XSA9IFwiSXNDdXN0b21cIjtcbn0pKFJlIHx8IChSZSA9IHt9KSk7XG5cbmNsYXNzIFBhcnNlclN0YXRlIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuaXAgPSB0O1xuICAgICAgICB0aGlzLmluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5DID0gMDtcbiAgICAgICAgdGhpcy5CID0gMDtcbiAgICAgICAgdGhpcy4kID0gMTU3Mjg2NDtcbiAgICAgICAgdGhpcy5MID0gXCJcIjtcbiAgICAgICAgdGhpcy5SID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSB0Lmxlbmd0aDtcbiAgICAgICAgdGhpcy5PID0gdC5jaGFyQ29kZUF0KDApO1xuICAgIH1cbiAgICBnZXQgUCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXAuc2xpY2UodGhpcy5DLCB0aGlzLmluZGV4KTtcbiAgICB9XG59XG5cbmNvbnN0IFBlID0gbmV3IFBhcnNlclN0YXRlKFwiXCIpO1xuXG5mdW5jdGlvbiBUZSh0LCBlKSB7XG4gICAgUGUuaXAgPSB0O1xuICAgIFBlLmxlbmd0aCA9IHQubGVuZ3RoO1xuICAgIFBlLmluZGV4ID0gMDtcbiAgICBQZS5PID0gdC5jaGFyQ29kZUF0KDApO1xuICAgIHJldHVybiBqZShQZSwgMCwgNjEsIHZvaWQgMCA9PT0gZSA/IDggOiBlKTtcbn1cblxuZnVuY3Rpb24gamUodCwgZSwgcywgcikge1xuICAgIGlmICgxNiA9PT0gcikgcmV0dXJuIG5ldyBDdXN0b21FeHByZXNzaW9uKHQuaXApO1xuICAgIGlmICgwID09PSB0LmluZGV4KSB7XG4gICAgICAgIGlmICgxICYgcikgcmV0dXJuIFZlKHQpO1xuICAgICAgICBLZSh0KTtcbiAgICAgICAgaWYgKDEwNDg1NzYgJiB0LiQpIHRocm93IG5ldyBFcnJvcihgQVVSMDE1MToke3QuaXB9YCk7XG4gICAgfVxuICAgIHQuUiA9IDQ0OCA+IHM7XG4gICAgbGV0IGk7XG4gICAgaWYgKDMyNzY4ICYgdC4kKSB7XG4gICAgICAgIGNvbnN0IHMgPSBKZVs2MyAmIHQuJF07XG4gICAgICAgIEtlKHQpO1xuICAgICAgICBpID0gbmV3IFVuYXJ5RXhwcmVzc2lvbihzLCBqZSh0LCBlLCA0NDksIHIpKTtcbiAgICAgICAgdC5SID0gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdDogc3dpdGNoICh0LiQpIHtcbiAgICAgICAgICBjYXNlIDMwNzg6XG4gICAgICAgICAgICB0LlIgPSBmYWxzZTtcbiAgICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgICAgICBLZSh0KTtcbiAgICAgICAgICAgICAgICBlKys7XG4gICAgICAgICAgICAgICAgaWYgKEdlKHQsIDE2MzkzKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoMTYzOTMgPT09IHQuJCkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTUyOiR7dC5pcH1gKTsgZWxzZSBpZiAoMTU3Mjg2NCA9PT0gdC4kKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNTM6JHt0LmlwfWApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoNTI0Mjg4ICYgdC4kKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSA1MTEgJiBlO1xuICAgICAgICAgICAgICAgICAgICBpID0gMCA9PT0gdCA/ICRlIDogMSA9PT0gdCA/IExlIDogbmV3IEFjY2Vzc1RoaXNFeHByZXNzaW9uKHQpO1xuICAgICAgICAgICAgICAgICAgICBlID0gNTEyO1xuICAgICAgICAgICAgICAgICAgICBicmVhayB0O1xuICAgICAgICAgICAgICAgIH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNTQ6JHt0LmlwfWApO1xuICAgICAgICAgICAgfSB3aGlsZSAoMzA3OCA9PT0gdC4kKTtcblxuICAgICAgICAgIGNhc2UgMTAyNDpcbiAgICAgICAgICAgIGlmICgyICYgcikgaSA9IG5ldyBCaW5kaW5nSWRlbnRpZmllcih0LkwpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBpID0gbmV3IEFjY2Vzc1Njb3BlRXhwcmVzc2lvbih0LkwsIDUxMSAmIGUpO1xuICAgICAgICAgICAgICAgIGUgPSAxMDI0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdC5SID0gdHJ1ZTtcbiAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDMwNzY6XG4gICAgICAgICAgICB0LlIgPSBmYWxzZTtcbiAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgaSA9ICRlO1xuICAgICAgICAgICAgZSA9IDUxMjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSA2NzE3NTE6XG4gICAgICAgICAgICBLZSh0KTtcbiAgICAgICAgICAgIGkgPSBqZSh0LCAwLCA2Miwgcik7XG4gICAgICAgICAgICBaZSh0LCAxODM1MDE5KTtcbiAgICAgICAgICAgIGUgPSAwO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDY3MTc1NzpcbiAgICAgICAgICAgIGkgPSB0LmlwLnNlYXJjaCgvXFxzK29mXFxzKy8pID4gdC5pbmRleCA/IEllKHQpIDogTWUodCwgZSwgcik7XG4gICAgICAgICAgICBlID0gMDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAxMzEwODA6XG4gICAgICAgICAgICBpID0gRmUodCwgcik7XG4gICAgICAgICAgICBlID0gMDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSA1NDA3MTQ6XG4gICAgICAgICAgICBpID0gbmV3IFRlbXBsYXRlRXhwcmVzc2lvbihbIHQuTCBdKTtcbiAgICAgICAgICAgIHQuUiA9IGZhbHNlO1xuICAgICAgICAgICAgS2UodCk7XG4gICAgICAgICAgICBlID0gMDtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSA1NDA3MTU6XG4gICAgICAgICAgICBpID0gTmUodCwgZSwgciwgaSwgZmFsc2UpO1xuICAgICAgICAgICAgZSA9IDA7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgNDA5NjpcbiAgICAgICAgICBjYXNlIDgxOTI6XG4gICAgICAgICAgICBpID0gbmV3IFByaW1pdGl2ZUxpdGVyYWxFeHByZXNzaW9uKHQuTCk7XG4gICAgICAgICAgICB0LlIgPSBmYWxzZTtcbiAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgZSA9IDA7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMjA1MDpcbiAgICAgICAgICBjYXNlIDIwNTE6XG4gICAgICAgICAgY2FzZSAyMDQ5OlxuICAgICAgICAgIGNhc2UgMjA0ODpcbiAgICAgICAgICAgIGkgPSBKZVs2MyAmIHQuJF07XG4gICAgICAgICAgICB0LlIgPSBmYWxzZTtcbiAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgZSA9IDA7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBpZiAodC5pbmRleCA+PSB0Lmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTU1OiR7dC5pcH1gKTsgZWxzZSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNTY6JHt0LmlwfWApO1xuICAgICAgICB9XG4gICAgICAgIGlmICgyICYgcikgcmV0dXJuIERlKHQsIGkpO1xuICAgICAgICBpZiAoNDQ5IDwgcykgcmV0dXJuIGk7XG4gICAgICAgIGxldCBuID0gdC5MO1xuICAgICAgICB3aGlsZSAoKDE2Mzg0ICYgdC4kKSA+IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgICAgIGxldCBvO1xuICAgICAgICAgICAgc3dpdGNoICh0LiQpIHtcbiAgICAgICAgICAgICAgY2FzZSAxNjM5MzpcbiAgICAgICAgICAgICAgICB0LlIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgICAgIGlmICgwID09PSAoMzA3MiAmIHQuJCkpIHRocm93IG5ldyBFcnJvcihgQVVSMDE1Mzoke3QuaXB9YCk7XG4gICAgICAgICAgICAgICAgbiA9IHQuTDtcbiAgICAgICAgICAgICAgICBLZSh0KTtcbiAgICAgICAgICAgICAgICBlID0gKGUgJiAoNTEyIHwgMTAyNCkpIDw8IDEgfCAyMDQ4ICYgZSB8ICg0MDk2ICYgZSkgPj4gMTtcbiAgICAgICAgICAgICAgICBpZiAoNjcxNzUxID09PSB0LiQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT09IGUpIGUgPSAyMDQ4O1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKDEwMjQgJiBlKSBpID0gbmV3IEFjY2Vzc1Njb3BlRXhwcmVzc2lvbihuLCBpLmFuY2VzdG9yKTsgZWxzZSBpID0gbmV3IEFjY2Vzc01lbWJlckV4cHJlc3Npb24oaSwgbik7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgICAgY2FzZSA2NzE3NTc6XG4gICAgICAgICAgICAgICAgdC5SID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBLZSh0KTtcbiAgICAgICAgICAgICAgICBlID0gNDA5NjtcbiAgICAgICAgICAgICAgICBpID0gbmV3IEFjY2Vzc0tleWVkRXhwcmVzc2lvbihpLCBqZSh0LCAwLCA2MiwgcikpO1xuICAgICAgICAgICAgICAgIFplKHQsIDE4MzUwMjIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgNjcxNzUxOlxuICAgICAgICAgICAgICAgIHQuUiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgICAgIHdoaWxlICgxODM1MDE5ICE9PSB0LiQpIHtcbiAgICAgICAgICAgICAgICAgICAgcy5wdXNoKGplKHQsIDAsIDYyLCByKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghR2UodCwgMTU3Mjg3NikpIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBaZSh0LCAxODM1MDE5KTtcbiAgICAgICAgICAgICAgICBpZiAoMTAyNCAmIGUpIGkgPSBuZXcgQ2FsbFNjb3BlRXhwcmVzc2lvbihuLCBzLCBpLmFuY2VzdG9yKTsgZWxzZSBpZiAoMjA0OCAmIGUpIGkgPSBuZXcgQ2FsbE1lbWJlckV4cHJlc3Npb24oaSwgbiwgcyk7IGVsc2UgaSA9IG5ldyBDYWxsRnVuY3Rpb25FeHByZXNzaW9uKGksIHMpO1xuICAgICAgICAgICAgICAgIGUgPSAwO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgNTQwNzE0OlxuICAgICAgICAgICAgICAgIHQuUiA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIG8gPSBbIHQuTCBdO1xuICAgICAgICAgICAgICAgIGkgPSBuZXcgVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uKG8sIG8sIGkpO1xuICAgICAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgNTQwNzE1OlxuICAgICAgICAgICAgICAgIGkgPSBOZSh0LCBlLCByLCBpLCB0cnVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoNDQ4IDwgcykgcmV0dXJuIGk7XG4gICAgd2hpbGUgKCg2NTUzNiAmIHQuJCkgPiAwKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LiQ7XG4gICAgICAgIGlmICgoNDQ4ICYgbikgPD0gcykgYnJlYWs7XG4gICAgICAgIEtlKHQpO1xuICAgICAgICBpID0gbmV3IEJpbmFyeUV4cHJlc3Npb24oSmVbNjMgJiBuXSwgaSwgamUodCwgZSwgNDQ4ICYgbiwgcikpO1xuICAgICAgICB0LlIgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKDYzIDwgcykgcmV0dXJuIGk7XG4gICAgaWYgKEdlKHQsIDE1NzI4ODApKSB7XG4gICAgICAgIGNvbnN0IHMgPSBqZSh0LCBlLCA2Miwgcik7XG4gICAgICAgIFplKHQsIDE1NzI4NzkpO1xuICAgICAgICBpID0gbmV3IENvbmRpdGlvbmFsRXhwcmVzc2lvbihpLCBzLCBqZSh0LCBlLCA2MiwgcikpO1xuICAgICAgICB0LlIgPSBmYWxzZTtcbiAgICB9XG4gICAgaWYgKDYyIDwgcykgcmV0dXJuIGk7XG4gICAgaWYgKEdlKHQsIDEwNDg2MTYpKSB7XG4gICAgICAgIGlmICghdC5SKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNTg6JHt0LmlwfWApO1xuICAgICAgICBpID0gbmV3IEFzc2lnbkV4cHJlc3Npb24oaSwgamUodCwgZSwgNjIsIHIpKTtcbiAgICB9XG4gICAgaWYgKDYxIDwgcykgcmV0dXJuIGk7XG4gICAgd2hpbGUgKEdlKHQsIDE1NzI4ODQpKSB7XG4gICAgICAgIGlmICgxNTcyODY0ID09PSB0LiQpIHRocm93IG5ldyBFcnJvcihgQVVSMDE1OToke3QuaXB9YCk7XG4gICAgICAgIGNvbnN0IHMgPSB0Lkw7XG4gICAgICAgIEtlKHQpO1xuICAgICAgICBjb25zdCBuID0gbmV3IEFycmF5O1xuICAgICAgICB3aGlsZSAoR2UodCwgMTU3Mjg3OSkpIG4ucHVzaChqZSh0LCBlLCA2MiwgcikpO1xuICAgICAgICBpID0gbmV3IFZhbHVlQ29udmVydGVyRXhwcmVzc2lvbihpLCBzLCBuKTtcbiAgICB9XG4gICAgd2hpbGUgKEdlKHQsIDE1NzI4ODMpKSB7XG4gICAgICAgIGlmICgxNTcyODY0ID09PSB0LiQpIHRocm93IG5ldyBFcnJvcihgQVVSMDE2MDoke3QuaXB9YCk7XG4gICAgICAgIGNvbnN0IHMgPSB0Lkw7XG4gICAgICAgIEtlKHQpO1xuICAgICAgICBjb25zdCBuID0gbmV3IEFycmF5O1xuICAgICAgICB3aGlsZSAoR2UodCwgMTU3Mjg3OSkpIG4ucHVzaChqZSh0LCBlLCA2MiwgcikpO1xuICAgICAgICBpID0gbmV3IEJpbmRpbmdCZWhhdmlvckV4cHJlc3Npb24oaSwgcywgbik7XG4gICAgfVxuICAgIGlmICgxNTcyODY0ICE9PSB0LiQpIHtcbiAgICAgICAgaWYgKDEgJiByKSByZXR1cm4gaTtcbiAgICAgICAgaWYgKFwib2ZcIiA9PT0gdC5QKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNjE6JHt0LmlwfWApO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNjI6JHt0LmlwfWApO1xuICAgIH1cbiAgICByZXR1cm4gaTtcbn1cblxuZnVuY3Rpb24gSWUodCkge1xuICAgIGNvbnN0IGUgPSBbXTtcbiAgICBjb25zdCBzID0gbmV3IERlc3RydWN0dXJpbmdBc3NpZ25tZW50RXhwcmVzc2lvbig5MDEzNywgZSwgdm9pZCAwLCB2b2lkIDApO1xuICAgIGxldCByID0gXCJcIjtcbiAgICBsZXQgaSA9IHRydWU7XG4gICAgbGV0IG4gPSAwO1xuICAgIHdoaWxlIChpKSB7XG4gICAgICAgIEtlKHQpO1xuICAgICAgICBzd2l0Y2ggKHQuJCkge1xuICAgICAgICAgIGNhc2UgMTgzNTAyMjpcbiAgICAgICAgICAgIGkgPSBmYWxzZTtcbiAgICAgICAgICAgIG8oKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSAxNTcyODc2OlxuICAgICAgICAgICAgbygpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIDEwMjQ6XG4gICAgICAgICAgICByID0gdC5QO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTcwOiR7dC5pcH1gKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBaZSh0LCAxODM1MDIyKTtcbiAgICByZXR1cm4gcztcbiAgICBmdW5jdGlvbiBvKCkge1xuICAgICAgICBpZiAoXCJcIiAhPT0gcikge1xuICAgICAgICAgICAgZS5wdXNoKG5ldyBEZXN0cnVjdHVyaW5nQXNzaWdubWVudFNpbmdsZUV4cHJlc3Npb24obmV3IEFjY2Vzc01lbWJlckV4cHJlc3Npb24oJGUsIHIpLCBuZXcgQWNjZXNzS2V5ZWRFeHByZXNzaW9uKCRlLCBuZXcgUHJpbWl0aXZlTGl0ZXJhbEV4cHJlc3Npb24obisrKSksIHZvaWQgMCkpO1xuICAgICAgICAgICAgciA9IFwiXCI7XG4gICAgICAgIH0gZWxzZSBuKys7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBNZSh0LCBlLCBzKSB7XG4gICAgS2UodCk7XG4gICAgY29uc3QgciA9IG5ldyBBcnJheTtcbiAgICB3aGlsZSAoMTgzNTAyMiAhPT0gdC4kKSBpZiAoR2UodCwgMTU3Mjg3NikpIHtcbiAgICAgICAgci5wdXNoKEJlKTtcbiAgICAgICAgaWYgKDE4MzUwMjIgPT09IHQuJCkgYnJlYWs7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgci5wdXNoKGplKHQsIGUsIDYyLCB+MiAmIHMpKTtcbiAgICAgICAgaWYgKEdlKHQsIDE1NzI4NzYpKSB7XG4gICAgICAgICAgICBpZiAoMTgzNTAyMiA9PT0gdC4kKSBicmVhaztcbiAgICAgICAgfSBlbHNlIGJyZWFrO1xuICAgIH1cbiAgICBaZSh0LCAxODM1MDIyKTtcbiAgICBpZiAoMiAmIHMpIHJldHVybiBuZXcgQXJyYXlCaW5kaW5nUGF0dGVybihyKTsgZWxzZSB7XG4gICAgICAgIHQuUiA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gbmV3IEFycmF5TGl0ZXJhbEV4cHJlc3Npb24ocik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBEZSh0LCBlKSB7XG4gICAgaWYgKDAgPT09ICg2NTUzNiAmIGUuJGtpbmQpKSB0aHJvdyBuZXcgRXJyb3IoYEFVUjAxNjM6JHt0LmlwfWApO1xuICAgIGlmICgxMDUxMTgwICE9PSB0LiQpIHRocm93IG5ldyBFcnJvcihgQVVSMDE2Mzoke3QuaXB9YCk7XG4gICAgS2UodCk7XG4gICAgY29uc3QgcyA9IGU7XG4gICAgY29uc3QgciA9IGplKHQsIDAsIDYxLCAwKTtcbiAgICByZXR1cm4gbmV3IEZvck9mU3RhdGVtZW50KHMsIHIpO1xufVxuXG5mdW5jdGlvbiBGZSh0LCBlKSB7XG4gICAgY29uc3QgcyA9IG5ldyBBcnJheTtcbiAgICBjb25zdCByID0gbmV3IEFycmF5O1xuICAgIEtlKHQpO1xuICAgIHdoaWxlICgxODM1MDE4ICE9PSB0LiQpIHtcbiAgICAgICAgcy5wdXNoKHQuTCk7XG4gICAgICAgIGlmICgxMjI4OCAmIHQuJCkge1xuICAgICAgICAgICAgS2UodCk7XG4gICAgICAgICAgICBaZSh0LCAxNTcyODc5KTtcbiAgICAgICAgICAgIHIucHVzaChqZSh0LCAwLCA2MiwgfjIgJiBlKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoMzA3MiAmIHQuJCkge1xuICAgICAgICAgICAgY29uc3Qge086IHMsICQ6IGksIGluZGV4OiBufSA9IHQ7XG4gICAgICAgICAgICBLZSh0KTtcbiAgICAgICAgICAgIGlmIChHZSh0LCAxNTcyODc5KSkgci5wdXNoKGplKHQsIDAsIDYyLCB+MiAmIGUpKTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgdC5PID0gcztcbiAgICAgICAgICAgICAgICB0LiQgPSBpO1xuICAgICAgICAgICAgICAgIHQuaW5kZXggPSBuO1xuICAgICAgICAgICAgICAgIHIucHVzaChqZSh0LCAwLCA0NTAsIH4yICYgZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTY0OiR7dC5pcH1gKTtcbiAgICAgICAgaWYgKDE4MzUwMTggIT09IHQuJCkgWmUodCwgMTU3Mjg3Nik7XG4gICAgfVxuICAgIFplKHQsIDE4MzUwMTgpO1xuICAgIGlmICgyICYgZSkgcmV0dXJuIG5ldyBPYmplY3RCaW5kaW5nUGF0dGVybihzLCByKTsgZWxzZSB7XG4gICAgICAgIHQuUiA9IGZhbHNlO1xuICAgICAgICByZXR1cm4gbmV3IE9iamVjdExpdGVyYWxFeHByZXNzaW9uKHMsIHIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gVmUodCkge1xuICAgIGNvbnN0IGUgPSBbXTtcbiAgICBjb25zdCBzID0gW107XG4gICAgY29uc3QgciA9IHQubGVuZ3RoO1xuICAgIGxldCBpID0gXCJcIjtcbiAgICB3aGlsZSAodC5pbmRleCA8IHIpIHtcbiAgICAgICAgc3dpdGNoICh0Lk8pIHtcbiAgICAgICAgICBjYXNlIDM2OlxuICAgICAgICAgICAgaWYgKDEyMyA9PT0gdC5pcC5jaGFyQ29kZUF0KHQuaW5kZXggKyAxKSkge1xuICAgICAgICAgICAgICAgIGUucHVzaChpKTtcbiAgICAgICAgICAgICAgICBpID0gXCJcIjtcbiAgICAgICAgICAgICAgICB0LmluZGV4ICs9IDI7XG4gICAgICAgICAgICAgICAgdC5PID0gdC5pcC5jaGFyQ29kZUF0KHQuaW5kZXgpO1xuICAgICAgICAgICAgICAgIEtlKHQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBqZSh0LCAwLCA2MSwgMSk7XG4gICAgICAgICAgICAgICAgcy5wdXNoKHIpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfSBlbHNlIGkgKz0gXCIkXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgOTI6XG4gICAgICAgICAgICBpICs9IFN0cmluZy5mcm9tQ2hhckNvZGUobWUocWUodCkpKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGkgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh0Lk8pO1xuICAgICAgICB9XG4gICAgICAgIHFlKHQpO1xuICAgIH1cbiAgICBpZiAocy5sZW5ndGgpIHtcbiAgICAgICAgZS5wdXNoKGkpO1xuICAgICAgICByZXR1cm4gbmV3IEludGVycG9sYXRpb24oZSwgcyk7XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xufVxuXG5mdW5jdGlvbiBOZSh0LCBlLCBzLCByLCBpKSB7XG4gICAgY29uc3QgbiA9IFsgdC5MIF07XG4gICAgWmUodCwgNTQwNzE1KTtcbiAgICBjb25zdCBvID0gWyBqZSh0LCBlLCA2MiwgcykgXTtcbiAgICB3aGlsZSAoNTQwNzE0ICE9PSAodC4kID0gV2UodCkpKSB7XG4gICAgICAgIG4ucHVzaCh0LkwpO1xuICAgICAgICBaZSh0LCA1NDA3MTUpO1xuICAgICAgICBvLnB1c2goamUodCwgZSwgNjIsIHMpKTtcbiAgICB9XG4gICAgbi5wdXNoKHQuTCk7XG4gICAgdC5SID0gZmFsc2U7XG4gICAgaWYgKGkpIHtcbiAgICAgICAgS2UodCk7XG4gICAgICAgIHJldHVybiBuZXcgVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uKG4sIG4sIHIsIG8pO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIEtlKHQpO1xuICAgICAgICByZXR1cm4gbmV3IFRlbXBsYXRlRXhwcmVzc2lvbihuLCBvKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEtlKHQpIHtcbiAgICB3aGlsZSAodC5pbmRleCA8IHQubGVuZ3RoKSB7XG4gICAgICAgIHQuQyA9IHQuaW5kZXg7XG4gICAgICAgIGlmIChudWxsICE9ICh0LiQgPSBuc1t0Lk9dKHQpKSkgcmV0dXJuO1xuICAgIH1cbiAgICB0LiQgPSAxNTcyODY0O1xufVxuXG5mdW5jdGlvbiBxZSh0KSB7XG4gICAgcmV0dXJuIHQuTyA9IHQuaXAuY2hhckNvZGVBdCgrK3QuaW5kZXgpO1xufVxuXG5mdW5jdGlvbiBIZSh0KSB7XG4gICAgd2hpbGUgKGlzW3FlKHQpXSkgO1xuICAgIGNvbnN0IGUgPSBYZVt0LkwgPSB0LlBdO1xuICAgIHJldHVybiB2b2lkIDAgPT09IGUgPyAxMDI0IDogZTtcbn1cblxuZnVuY3Rpb24gUWUodCwgZSkge1xuICAgIGxldCBzID0gdC5PO1xuICAgIGlmIChmYWxzZSA9PT0gZSkge1xuICAgICAgICBkbyB7XG4gICAgICAgICAgICBzID0gcWUodCk7XG4gICAgICAgIH0gd2hpbGUgKHMgPD0gNTcgJiYgcyA+PSA0OCk7XG4gICAgICAgIGlmICg0NiAhPT0gcykge1xuICAgICAgICAgICAgdC5MID0gcGFyc2VJbnQodC5QLCAxMCk7XG4gICAgICAgICAgICByZXR1cm4gODE5MjtcbiAgICAgICAgfVxuICAgICAgICBzID0gcWUodCk7XG4gICAgICAgIGlmICh0LmluZGV4ID49IHQubGVuZ3RoKSB7XG4gICAgICAgICAgICB0LkwgPSBwYXJzZUludCh0LlAuc2xpY2UoMCwgLTEpLCAxMCk7XG4gICAgICAgICAgICByZXR1cm4gODE5MjtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAocyA8PSA1NyAmJiBzID49IDQ4KSBkbyB7XG4gICAgICAgIHMgPSBxZSh0KTtcbiAgICB9IHdoaWxlIChzIDw9IDU3ICYmIHMgPj0gNDgpOyBlbHNlIHQuTyA9IHQuaXAuY2hhckNvZGVBdCgtLXQuaW5kZXgpO1xuICAgIHQuTCA9IHBhcnNlRmxvYXQodC5QKTtcbiAgICByZXR1cm4gODE5Mjtcbn1cblxuZnVuY3Rpb24gX2UodCkge1xuICAgIGNvbnN0IGUgPSB0Lk87XG4gICAgcWUodCk7XG4gICAgbGV0IHMgPSAwO1xuICAgIGNvbnN0IHIgPSBuZXcgQXJyYXk7XG4gICAgbGV0IGkgPSB0LmluZGV4O1xuICAgIHdoaWxlICh0Lk8gIT09IGUpIGlmICg5MiA9PT0gdC5PKSB7XG4gICAgICAgIHIucHVzaCh0LmlwLnNsaWNlKGksIHQuaW5kZXgpKTtcbiAgICAgICAgcWUodCk7XG4gICAgICAgIHMgPSBtZSh0Lk8pO1xuICAgICAgICBxZSh0KTtcbiAgICAgICAgci5wdXNoKFN0cmluZy5mcm9tQ2hhckNvZGUocykpO1xuICAgICAgICBpID0gdC5pbmRleDtcbiAgICB9IGVsc2UgaWYgKHQuaW5kZXggPj0gdC5sZW5ndGgpIHRocm93IG5ldyBFcnJvcihgQVVSMDE2NToke3QuaXB9YCk7IGVsc2UgcWUodCk7XG4gICAgY29uc3QgbiA9IHQuaXAuc2xpY2UoaSwgdC5pbmRleCk7XG4gICAgcWUodCk7XG4gICAgci5wdXNoKG4pO1xuICAgIGNvbnN0IG8gPSByLmpvaW4oXCJcIik7XG4gICAgdC5MID0gbztcbiAgICByZXR1cm4gNDA5Njtcbn1cblxuZnVuY3Rpb24gemUodCkge1xuICAgIGxldCBlID0gdHJ1ZTtcbiAgICBsZXQgcyA9IFwiXCI7XG4gICAgd2hpbGUgKDk2ICE9PSBxZSh0KSkgaWYgKDM2ID09PSB0Lk8pIGlmICh0LmluZGV4ICsgMSA8IHQubGVuZ3RoICYmIDEyMyA9PT0gdC5pcC5jaGFyQ29kZUF0KHQuaW5kZXggKyAxKSkge1xuICAgICAgICB0LmluZGV4Kys7XG4gICAgICAgIGUgPSBmYWxzZTtcbiAgICAgICAgYnJlYWs7XG4gICAgfSBlbHNlIHMgKz0gXCIkXCI7IGVsc2UgaWYgKDkyID09PSB0Lk8pIHMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShtZShxZSh0KSkpOyBlbHNlIHtcbiAgICAgICAgaWYgKHQuaW5kZXggPj0gdC5sZW5ndGgpIHRocm93IG5ldyBFcnJvcihgQVVSMDE2Njoke3QuaXB9YCk7XG4gICAgICAgIHMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh0Lk8pO1xuICAgIH1cbiAgICBxZSh0KTtcbiAgICB0LkwgPSBzO1xuICAgIGlmIChlKSByZXR1cm4gNTQwNzE0O1xuICAgIHJldHVybiA1NDA3MTU7XG59XG5cbmZ1bmN0aW9uIFdlKHQpIHtcbiAgICBpZiAodC5pbmRleCA+PSB0Lmxlbmd0aCkgdGhyb3cgbmV3IEVycm9yKGBBVVIwMTY2OiR7dC5pcH1gKTtcbiAgICB0LmluZGV4LS07XG4gICAgcmV0dXJuIHplKHQpO1xufVxuXG5mdW5jdGlvbiBHZSh0LCBlKSB7XG4gICAgaWYgKHQuJCA9PT0gZSkge1xuICAgICAgICBLZSh0KTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gWmUodCwgZSkge1xuICAgIGlmICh0LiQgPT09IGUpIEtlKHQpOyBlbHNlIHRocm93IG5ldyBFcnJvcihgQVVSMDE2Nzoke3QuaXB9PCR7ZX1gKTtcbn1cblxuY29uc3QgSmUgPSBbIE9lLCBDZSwga2UsIEJlLCBcIiR0aGlzXCIsIG51bGwsIFwiJHBhcmVudFwiLCBcIihcIiwgXCJ7XCIsIFwiLlwiLCBcIn1cIiwgXCIpXCIsIFwiLFwiLCBcIltcIiwgXCJdXCIsIFwiOlwiLCBcIj9cIiwgXCInXCIsICdcIicsIFwiJlwiLCBcInxcIiwgXCJ8fFwiLCBcIiYmXCIsIFwiPT1cIiwgXCIhPVwiLCBcIj09PVwiLCBcIiE9PVwiLCBcIjxcIiwgXCI+XCIsIFwiPD1cIiwgXCI+PVwiLCBcImluXCIsIFwiaW5zdGFuY2VvZlwiLCBcIitcIiwgXCItXCIsIFwidHlwZW9mXCIsIFwidm9pZFwiLCBcIipcIiwgXCIlXCIsIFwiL1wiLCBcIj1cIiwgXCIhXCIsIDU0MDcxNCwgNTQwNzE1LCBcIm9mXCIgXTtcblxuY29uc3QgWGUgPSBFKCk7XG5cblhlLnRydWUgPSAyMDQ5O1xuXG5YZS5udWxsID0gMjA1MDtcblxuWGUuZmFsc2UgPSAyMDQ4O1xuXG5YZS51bmRlZmluZWQgPSAyMDUxO1xuXG5YZS4kdGhpcyA9IDMwNzY7XG5cblhlLiRwYXJlbnQgPSAzMDc4O1xuXG5YZS5pbiA9IDE2NDA3OTk7XG5cblhlLmluc3RhbmNlb2YgPSAxNjQwODAwO1xuXG5YZS50eXBlb2YgPSAzNDg1MTtcblxuWGUudm9pZCA9IDM0ODUyO1xuXG5YZS5vZiA9IDEwNTExODA7XG5cbmNvbnN0IFllID0ge1xuICAgIEFzY2lpSWRQYXJ0OiBbIDM2LCAwLCA0OCwgNTgsIDY1LCA5MSwgOTUsIDAsIDk3LCAxMjMgXSxcbiAgICBJZFN0YXJ0OiBbIDM2LCAwLCA2NSwgOTEsIDk1LCAwLCA5NywgMTIzLCAxNzAsIDAsIDE4NiwgMCwgMTkyLCAyMTUsIDIxNiwgMjQ3LCAyNDgsIDY5NywgNzM2LCA3NDEsIDc0MjQsIDc0NjIsIDc0NjgsIDc1MTcsIDc1MjIsIDc1MjYsIDc1MzEsIDc1NDQsIDc1NDUsIDc2MTUsIDc2ODAsIDc5MzYsIDgzMDUsIDAsIDgzMTksIDAsIDgzMzYsIDgzNDksIDg0OTAsIDg0OTIsIDg0OTgsIDAsIDg1MjYsIDAsIDg1NDQsIDg1ODUsIDExMzYwLCAxMTM5MiwgNDI3ODYsIDQyODg4LCA0Mjg5MSwgNDI5MjcsIDQyOTI4LCA0MjkzNiwgNDI5OTksIDQzMDA4LCA0MzgyNCwgNDM4NjcsIDQzODY4LCA0Mzg3NywgNjQyNTYsIDY0MjYzLCA2NTMxMywgNjUzMzksIDY1MzQ1LCA2NTM3MSBdLFxuICAgIERpZ2l0OiBbIDQ4LCA1OCBdLFxuICAgIFNraXA6IFsgMCwgMzMsIDEyNywgMTYxIF1cbn07XG5cbmZ1bmN0aW9uIHRzKHQsIGUsIHMsIHIpIHtcbiAgICBjb25zdCBpID0gcy5sZW5ndGg7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCBpOyBuICs9IDIpIHtcbiAgICAgICAgY29uc3QgaSA9IHNbbl07XG4gICAgICAgIGxldCBvID0gc1tuICsgMV07XG4gICAgICAgIG8gPSBvID4gMCA/IG8gOiBpICsgMTtcbiAgICAgICAgaWYgKHQpIHQuZmlsbChyLCBpLCBvKTtcbiAgICAgICAgaWYgKGUpIGZvciAobGV0IHQgPSBpOyB0IDwgbzsgdCsrKSBlLmFkZCh0KTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGVzKHQpIHtcbiAgICByZXR1cm4gZSA9PiB7XG4gICAgICAgIHFlKGUpO1xuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xufVxuXG5jb25zdCBzcyA9IHQgPT4ge1xuICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDE2ODoke3QuaXB9YCk7XG59O1xuXG5zcy5ub3RNYXBwZWQgPSB0cnVlO1xuXG5jb25zdCBycyA9IG5ldyBTZXQ7XG5cbnRzKG51bGwsIHJzLCBZZS5Bc2NpaUlkUGFydCwgdHJ1ZSk7XG5cbmNvbnN0IGlzID0gbmV3IFVpbnQ4QXJyYXkoNjU1MzUpO1xuXG50cyhpcywgbnVsbCwgWWUuSWRTdGFydCwgMSk7XG5cbnRzKGlzLCBudWxsLCBZZS5EaWdpdCwgMSk7XG5cbmNvbnN0IG5zID0gbmV3IEFycmF5KDY1NTM1KTtcblxubnMuZmlsbChzcywgMCwgNjU1MzUpO1xuXG50cyhucywgbnVsbCwgWWUuU2tpcCwgKHQgPT4ge1xuICAgIHFlKHQpO1xuICAgIHJldHVybiBudWxsO1xufSkpO1xuXG50cyhucywgbnVsbCwgWWUuSWRTdGFydCwgSGUpO1xuXG50cyhucywgbnVsbCwgWWUuRGlnaXQsICh0ID0+IFFlKHQsIGZhbHNlKSkpO1xuXG5uc1szNF0gPSBuc1szOV0gPSB0ID0+IF9lKHQpO1xuXG5uc1s5Nl0gPSB0ID0+IHplKHQpO1xuXG5uc1szM10gPSB0ID0+IHtcbiAgICBpZiAoNjEgIT09IHFlKHQpKSByZXR1cm4gMzI4MDk7XG4gICAgaWYgKDYxICE9PSBxZSh0KSkgcmV0dXJuIDE2Mzg2ODA7XG4gICAgcWUodCk7XG4gICAgcmV0dXJuIDE2Mzg2ODI7XG59O1xuXG5uc1s2MV0gPSB0ID0+IHtcbiAgICBpZiAoNjEgIT09IHFlKHQpKSByZXR1cm4gMTA0ODYxNjtcbiAgICBpZiAoNjEgIT09IHFlKHQpKSByZXR1cm4gMTYzODY3OTtcbiAgICBxZSh0KTtcbiAgICByZXR1cm4gMTYzODY4MTtcbn07XG5cbm5zWzM4XSA9IHQgPT4ge1xuICAgIGlmICgzOCAhPT0gcWUodCkpIHJldHVybiAxNTcyODgzO1xuICAgIHFlKHQpO1xuICAgIHJldHVybiAxNjM4NjE0O1xufTtcblxubnNbMTI0XSA9IHQgPT4ge1xuICAgIGlmICgxMjQgIT09IHFlKHQpKSByZXR1cm4gMTU3Mjg4NDtcbiAgICBxZSh0KTtcbiAgICByZXR1cm4gMTYzODU0OTtcbn07XG5cbm5zWzQ2XSA9IHQgPT4ge1xuICAgIGlmIChxZSh0KSA8PSA1NyAmJiB0Lk8gPj0gNDgpIHJldHVybiBRZSh0LCB0cnVlKTtcbiAgICByZXR1cm4gMTYzOTM7XG59O1xuXG5uc1s2MF0gPSB0ID0+IHtcbiAgICBpZiAoNjEgIT09IHFlKHQpKSByZXR1cm4gMTYzODc0NztcbiAgICBxZSh0KTtcbiAgICByZXR1cm4gMTYzODc0OTtcbn07XG5cbm5zWzYyXSA9IHQgPT4ge1xuICAgIGlmICg2MSAhPT0gcWUodCkpIHJldHVybiAxNjM4NzQ4O1xuICAgIHFlKHQpO1xuICAgIHJldHVybiAxNjM4NzUwO1xufTtcblxubnNbMzddID0gZXMoMTYzODg4Nik7XG5cbm5zWzQwXSA9IGVzKDY3MTc1MSk7XG5cbm5zWzQxXSA9IGVzKDE4MzUwMTkpO1xuXG5uc1s0Ml0gPSBlcygxNjM4ODg1KTtcblxubnNbNDNdID0gZXMoNjIzMDA5KTtcblxubnNbNDRdID0gZXMoMTU3Mjg3Nik7XG5cbm5zWzQ1XSA9IGVzKDYyMzAxMCk7XG5cbm5zWzQ3XSA9IGVzKDE2Mzg4ODcpO1xuXG5uc1s1OF0gPSBlcygxNTcyODc5KTtcblxubnNbNjNdID0gZXMoMTU3Mjg4MCk7XG5cbm5zWzkxXSA9IGVzKDY3MTc1Nyk7XG5cbm5zWzkzXSA9IGVzKDE4MzUwMjIpO1xuXG5uc1sxMjNdID0gZXMoMTMxMDgwKTtcblxubnNbMTI1XSA9IGVzKDE4MzUwMTgpO1xuXG5sZXQgb3MgPSBudWxsO1xuXG5jb25zdCBocyA9IFtdO1xuXG5sZXQgY3MgPSBmYWxzZTtcblxuZnVuY3Rpb24gdXMoKSB7XG4gICAgY3MgPSBmYWxzZTtcbn1cblxuZnVuY3Rpb24gYXMoKSB7XG4gICAgY3MgPSB0cnVlO1xufVxuXG5mdW5jdGlvbiBscygpIHtcbiAgICByZXR1cm4gb3M7XG59XG5cbmZ1bmN0aW9uIGZzKHQpIHtcbiAgICBpZiAobnVsbCA9PSB0KSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwMjA2XCIpO1xuICAgIGlmIChudWxsID09IG9zKSB7XG4gICAgICAgIG9zID0gdDtcbiAgICAgICAgaHNbMF0gPSBvcztcbiAgICAgICAgY3MgPSB0cnVlO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChvcyA9PT0gdCkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDIwN1wiKTtcbiAgICBocy5wdXNoKG9zKTtcbiAgICBvcyA9IHQ7XG4gICAgY3MgPSB0cnVlO1xufVxuXG5mdW5jdGlvbiBkcyh0KSB7XG4gICAgaWYgKG51bGwgPT0gdCkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDIwOFwiKTtcbiAgICBpZiAob3MgIT09IHQpIHRocm93IG5ldyBFcnJvcihcIkFVUjAyMDlcIik7XG4gICAgaHMucG9wKCk7XG4gICAgb3MgPSBocy5sZW5ndGggPiAwID8gaHNbaHMubGVuZ3RoIC0gMV0gOiBudWxsO1xuICAgIGNzID0gbnVsbCAhPSBvcztcbn1cblxuY29uc3QgdnMgPSBPYmplY3QuZnJlZXplKHtcbiAgICBnZXQgY3VycmVudCgpIHtcbiAgICAgICAgcmV0dXJuIG9zO1xuICAgIH0sXG4gICAgZ2V0IGNvbm5lY3RpbmcoKSB7XG4gICAgICAgIHJldHVybiBjcztcbiAgICB9LFxuICAgIGVudGVyOiBmcyxcbiAgICBleGl0OiBkcyxcbiAgICBwYXVzZTogdXMsXG4gICAgcmVzdW1lOiBhc1xufSk7XG5cbmNvbnN0IHBzID0gUmVmbGVjdC5nZXQ7XG5cbmNvbnN0IGdzID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuY29uc3Qgd3MgPSBuZXcgV2Vha01hcDtcblxuZnVuY3Rpb24gYnModCkge1xuICAgIHN3aXRjaCAoZ3MuY2FsbCh0KSkge1xuICAgICAgY2FzZSBcIltvYmplY3QgT2JqZWN0XVwiOlxuICAgICAgY2FzZSBcIltvYmplY3QgQXJyYXldXCI6XG4gICAgICBjYXNlIFwiW29iamVjdCBNYXBdXCI6XG4gICAgICBjYXNlIFwiW29iamVjdCBTZXRdXCI6XG4gICAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxufVxuXG5jb25zdCBFcyA9IFwiX19yYXdfX1wiO1xuXG5mdW5jdGlvbiBBcyh0KSB7XG4gICAgcmV0dXJuIGJzKHQpID8geXModCkgOiB0O1xufVxuXG5mdW5jdGlvbiB5cyh0KSB7XG4gICAgdmFyIGU7XG4gICAgcmV0dXJuIG51bGwgIT09IChlID0gd3MuZ2V0KHQpKSAmJiB2b2lkIDAgIT09IGUgPyBlIDogU3ModCk7XG59XG5cbmZ1bmN0aW9uIG1zKHQpIHtcbiAgICB2YXIgZTtcbiAgICByZXR1cm4gbnVsbCAhPT0gKGUgPSB0W0VzXSkgJiYgdm9pZCAwICE9PSBlID8gZSA6IHQ7XG59XG5cbmZ1bmN0aW9uIFVzKHQpIHtcbiAgICByZXR1cm4gYnModCkgJiYgdFtFc10gfHwgdDtcbn1cblxuZnVuY3Rpb24geHModCkge1xuICAgIHJldHVybiBcImNvbnN0cnVjdG9yXCIgPT09IHQgfHwgXCJfX3Byb3RvX19cIiA9PT0gdCB8fCBcIiRvYnNlcnZlcnNcIiA9PT0gdCB8fCB0ID09PSBTeW1ib2wudG9QcmltaXRpdmUgfHwgdCA9PT0gU3ltYm9sLnRvU3RyaW5nVGFnO1xufVxuXG5mdW5jdGlvbiBTcyh0KSB7XG4gICAgY29uc3QgZSA9IHQgaW5zdGFuY2VvZiBBcnJheSA/IENzIDogdCBpbnN0YW5jZW9mIE1hcCB8fCB0IGluc3RhbmNlb2YgU2V0ID8gWnMgOiBPcztcbiAgICBjb25zdCBzID0gbmV3IFByb3h5KHQsIGUpO1xuICAgIHdzLnNldCh0LCBzKTtcbiAgICByZXR1cm4gcztcbn1cblxuY29uc3QgT3MgPSB7XG4gICAgZ2V0KHQsIGUsIHMpIHtcbiAgICAgICAgaWYgKGUgPT09IEVzKSByZXR1cm4gdDtcbiAgICAgICAgY29uc3QgciA9IGxzKCk7XG4gICAgICAgIGlmICghY3MgfHwgeHMoZSkgfHwgbnVsbCA9PSByKSByZXR1cm4gcHModCwgZSwgcyk7XG4gICAgICAgIHIub2JzZXJ2ZSh0LCBlKTtcbiAgICAgICAgcmV0dXJuIEFzKHBzKHQsIGUsIHMpKTtcbiAgICB9XG59O1xuXG5jb25zdCBDcyA9IHtcbiAgICBnZXQodCwgZSwgcykge1xuICAgICAgICBpZiAoZSA9PT0gRXMpIHJldHVybiB0O1xuICAgICAgICBjb25zdCByID0gbHMoKTtcbiAgICAgICAgaWYgKCFjcyB8fCB4cyhlKSB8fCBudWxsID09IHIpIHJldHVybiBwcyh0LCBlLCBzKTtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSBcImxlbmd0aFwiOlxuICAgICAgICAgICAgci5vYnNlcnZlKHQsIFwibGVuZ3RoXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHQubGVuZ3RoO1xuXG4gICAgICAgICAgY2FzZSBcIm1hcFwiOlxuICAgICAgICAgICAgcmV0dXJuIGtzO1xuXG4gICAgICAgICAgY2FzZSBcImluY2x1ZGVzXCI6XG4gICAgICAgICAgICByZXR1cm4gTHM7XG5cbiAgICAgICAgICBjYXNlIFwiaW5kZXhPZlwiOlxuICAgICAgICAgICAgcmV0dXJuIFJzO1xuXG4gICAgICAgICAgY2FzZSBcImxhc3RJbmRleE9mXCI6XG4gICAgICAgICAgICByZXR1cm4gUHM7XG5cbiAgICAgICAgICBjYXNlIFwiZXZlcnlcIjpcbiAgICAgICAgICAgIHJldHVybiBCcztcblxuICAgICAgICAgIGNhc2UgXCJmaWx0ZXJcIjpcbiAgICAgICAgICAgIHJldHVybiAkcztcblxuICAgICAgICAgIGNhc2UgXCJmaW5kXCI6XG4gICAgICAgICAgICByZXR1cm4ganM7XG5cbiAgICAgICAgICBjYXNlIFwiZmluZEluZGV4XCI6XG4gICAgICAgICAgICByZXR1cm4gVHM7XG5cbiAgICAgICAgICBjYXNlIFwiZmxhdFwiOlxuICAgICAgICAgICAgcmV0dXJuIElzO1xuXG4gICAgICAgICAgY2FzZSBcImZsYXRNYXBcIjpcbiAgICAgICAgICAgIHJldHVybiBNcztcblxuICAgICAgICAgIGNhc2UgXCJqb2luXCI6XG4gICAgICAgICAgICByZXR1cm4gRHM7XG5cbiAgICAgICAgICBjYXNlIFwicHVzaFwiOlxuICAgICAgICAgICAgcmV0dXJuIFZzO1xuXG4gICAgICAgICAgY2FzZSBcInBvcFwiOlxuICAgICAgICAgICAgcmV0dXJuIEZzO1xuXG4gICAgICAgICAgY2FzZSBcInJlZHVjZVwiOlxuICAgICAgICAgICAgcmV0dXJuIFdzO1xuXG4gICAgICAgICAgY2FzZSBcInJlZHVjZVJpZ2h0XCI6XG4gICAgICAgICAgICByZXR1cm4gR3M7XG5cbiAgICAgICAgICBjYXNlIFwicmV2ZXJzZVwiOlxuICAgICAgICAgICAgcmV0dXJuIEhzO1xuXG4gICAgICAgICAgY2FzZSBcInNoaWZ0XCI6XG4gICAgICAgICAgICByZXR1cm4gTnM7XG5cbiAgICAgICAgICBjYXNlIFwidW5zaGlmdFwiOlxuICAgICAgICAgICAgcmV0dXJuIEtzO1xuXG4gICAgICAgICAgY2FzZSBcInNsaWNlXCI6XG4gICAgICAgICAgICByZXR1cm4genM7XG5cbiAgICAgICAgICBjYXNlIFwic3BsaWNlXCI6XG4gICAgICAgICAgICByZXR1cm4gcXM7XG5cbiAgICAgICAgICBjYXNlIFwic29tZVwiOlxuICAgICAgICAgICAgcmV0dXJuIFFzO1xuXG4gICAgICAgICAgY2FzZSBcInNvcnRcIjpcbiAgICAgICAgICAgIHJldHVybiBfcztcblxuICAgICAgICAgIGNhc2UgXCJrZXlzXCI6XG4gICAgICAgICAgICByZXR1cm4gaXI7XG5cbiAgICAgICAgICBjYXNlIFwidmFsdWVzXCI6XG4gICAgICAgICAgY2FzZSBTeW1ib2wuaXRlcmF0b3I6XG4gICAgICAgICAgICByZXR1cm4gbnI7XG5cbiAgICAgICAgICBjYXNlIFwiZW50cmllc1wiOlxuICAgICAgICAgICAgcmV0dXJuIG9yO1xuICAgICAgICB9XG4gICAgICAgIHIub2JzZXJ2ZSh0LCBlKTtcbiAgICAgICAgcmV0dXJuIEFzKHBzKHQsIGUsIHMpKTtcbiAgICB9LFxuICAgIG93bktleXModCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgbnVsbCA9PT0gKGUgPSBscygpKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm9ic2VydmUodCwgXCJsZW5ndGhcIik7XG4gICAgICAgIHJldHVybiBSZWZsZWN0Lm93bktleXModCk7XG4gICAgfVxufTtcblxuZnVuY3Rpb24ga3ModCwgZSkge1xuICAgIHZhciBzO1xuICAgIGNvbnN0IHIgPSBtcyh0aGlzKTtcbiAgICBjb25zdCBpID0gci5tYXAoKChzLCByKSA9PiBVcyh0LmNhbGwoZSwgQXMocyksIHIsIHRoaXMpKSkpO1xuICAgIG51bGwgPT09IChzID0gbHMoKSkgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5vYnNlcnZlQ29sbGVjdGlvbihyKTtcbiAgICByZXR1cm4gQXMoaSk7XG59XG5cbmZ1bmN0aW9uIEJzKHQsIGUpIHtcbiAgICB2YXIgcztcbiAgICBjb25zdCByID0gbXModGhpcyk7XG4gICAgY29uc3QgaSA9IHIuZXZlcnkoKChzLCByKSA9PiB0LmNhbGwoZSwgQXMocyksIHIsIHRoaXMpKSk7XG4gICAgbnVsbCA9PT0gKHMgPSBscygpKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLm9ic2VydmVDb2xsZWN0aW9uKHIpO1xuICAgIHJldHVybiBpO1xufVxuXG5mdW5jdGlvbiAkcyh0LCBlKSB7XG4gICAgdmFyIHM7XG4gICAgY29uc3QgciA9IG1zKHRoaXMpO1xuICAgIGNvbnN0IGkgPSByLmZpbHRlcigoKHMsIHIpID0+IFVzKHQuY2FsbChlLCBBcyhzKSwgciwgdGhpcykpKSk7XG4gICAgbnVsbCA9PT0gKHMgPSBscygpKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLm9ic2VydmVDb2xsZWN0aW9uKHIpO1xuICAgIHJldHVybiBBcyhpKTtcbn1cblxuZnVuY3Rpb24gTHModCkge1xuICAgIHZhciBlO1xuICAgIGNvbnN0IHMgPSBtcyh0aGlzKTtcbiAgICBjb25zdCByID0gcy5pbmNsdWRlcyhVcyh0KSk7XG4gICAgbnVsbCA9PT0gKGUgPSBscygpKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm9ic2VydmVDb2xsZWN0aW9uKHMpO1xuICAgIHJldHVybiByO1xufVxuXG5mdW5jdGlvbiBScyh0KSB7XG4gICAgdmFyIGU7XG4gICAgY29uc3QgcyA9IG1zKHRoaXMpO1xuICAgIGNvbnN0IHIgPSBzLmluZGV4T2YoVXModCkpO1xuICAgIG51bGwgPT09IChlID0gbHMoKSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5vYnNlcnZlQ29sbGVjdGlvbihzKTtcbiAgICByZXR1cm4gcjtcbn1cblxuZnVuY3Rpb24gUHModCkge1xuICAgIHZhciBlO1xuICAgIGNvbnN0IHMgPSBtcyh0aGlzKTtcbiAgICBjb25zdCByID0gcy5sYXN0SW5kZXhPZihVcyh0KSk7XG4gICAgbnVsbCA9PT0gKGUgPSBscygpKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm9ic2VydmVDb2xsZWN0aW9uKHMpO1xuICAgIHJldHVybiByO1xufVxuXG5mdW5jdGlvbiBUcyh0LCBlKSB7XG4gICAgdmFyIHM7XG4gICAgY29uc3QgciA9IG1zKHRoaXMpO1xuICAgIGNvbnN0IGkgPSByLmZpbmRJbmRleCgoKHMsIHIpID0+IFVzKHQuY2FsbChlLCBBcyhzKSwgciwgdGhpcykpKSk7XG4gICAgbnVsbCA9PT0gKHMgPSBscygpKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLm9ic2VydmVDb2xsZWN0aW9uKHIpO1xuICAgIHJldHVybiBpO1xufVxuXG5mdW5jdGlvbiBqcyh0LCBlKSB7XG4gICAgdmFyIHM7XG4gICAgY29uc3QgciA9IG1zKHRoaXMpO1xuICAgIGNvbnN0IGkgPSByLmZpbmQoKChlLCBzKSA9PiB0KEFzKGUpLCBzLCB0aGlzKSksIGUpO1xuICAgIG51bGwgPT09IChzID0gbHMoKSkgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5vYnNlcnZlQ29sbGVjdGlvbihyKTtcbiAgICByZXR1cm4gQXMoaSk7XG59XG5cbmZ1bmN0aW9uIElzKCkge1xuICAgIHZhciB0O1xuICAgIGNvbnN0IGUgPSBtcyh0aGlzKTtcbiAgICBudWxsID09PSAodCA9IGxzKCkpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQub2JzZXJ2ZUNvbGxlY3Rpb24oZSk7XG4gICAgcmV0dXJuIEFzKGUuZmxhdCgpKTtcbn1cblxuZnVuY3Rpb24gTXModCwgZSkge1xuICAgIHZhciBzO1xuICAgIGNvbnN0IHIgPSBtcyh0aGlzKTtcbiAgICBudWxsID09PSAocyA9IGxzKCkpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMub2JzZXJ2ZUNvbGxlY3Rpb24ocik7XG4gICAgcmV0dXJuIHlzKHIuZmxhdE1hcCgoKHMsIHIpID0+IEFzKHQuY2FsbChlLCBBcyhzKSwgciwgdGhpcykpKSkpO1xufVxuXG5mdW5jdGlvbiBEcyh0KSB7XG4gICAgdmFyIGU7XG4gICAgY29uc3QgcyA9IG1zKHRoaXMpO1xuICAgIG51bGwgPT09IChlID0gbHMoKSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5vYnNlcnZlQ29sbGVjdGlvbihzKTtcbiAgICByZXR1cm4gcy5qb2luKHQpO1xufVxuXG5mdW5jdGlvbiBGcygpIHtcbiAgICByZXR1cm4gQXMobXModGhpcykucG9wKCkpO1xufVxuXG5mdW5jdGlvbiBWcyguLi50KSB7XG4gICAgcmV0dXJuIG1zKHRoaXMpLnB1c2goLi4udCk7XG59XG5cbmZ1bmN0aW9uIE5zKCkge1xuICAgIHJldHVybiBBcyhtcyh0aGlzKS5zaGlmdCgpKTtcbn1cblxuZnVuY3Rpb24gS3MoLi4udCkge1xuICAgIHJldHVybiBtcyh0aGlzKS51bnNoaWZ0KC4uLnQpO1xufVxuXG5mdW5jdGlvbiBxcyguLi50KSB7XG4gICAgcmV0dXJuIEFzKG1zKHRoaXMpLnNwbGljZSguLi50KSk7XG59XG5cbmZ1bmN0aW9uIEhzKC4uLnQpIHtcbiAgICB2YXIgZTtcbiAgICBjb25zdCBzID0gbXModGhpcyk7XG4gICAgY29uc3QgciA9IHMucmV2ZXJzZSgpO1xuICAgIG51bGwgPT09IChlID0gbHMoKSkgfHwgdm9pZCAwID09PSBlID8gdm9pZCAwIDogZS5vYnNlcnZlQ29sbGVjdGlvbihzKTtcbiAgICByZXR1cm4gQXMocik7XG59XG5cbmZ1bmN0aW9uIFFzKHQsIGUpIHtcbiAgICB2YXIgcztcbiAgICBjb25zdCByID0gbXModGhpcyk7XG4gICAgY29uc3QgaSA9IHIuc29tZSgoKHMsIHIpID0+IFVzKHQuY2FsbChlLCBBcyhzKSwgciwgdGhpcykpKSk7XG4gICAgbnVsbCA9PT0gKHMgPSBscygpKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLm9ic2VydmVDb2xsZWN0aW9uKHIpO1xuICAgIHJldHVybiBpO1xufVxuXG5mdW5jdGlvbiBfcyh0KSB7XG4gICAgdmFyIGU7XG4gICAgY29uc3QgcyA9IG1zKHRoaXMpO1xuICAgIGNvbnN0IHIgPSBzLnNvcnQodCk7XG4gICAgbnVsbCA9PT0gKGUgPSBscygpKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm9ic2VydmVDb2xsZWN0aW9uKHMpO1xuICAgIHJldHVybiBBcyhyKTtcbn1cblxuZnVuY3Rpb24genModCwgZSkge1xuICAgIHZhciBzO1xuICAgIGNvbnN0IHIgPSBtcyh0aGlzKTtcbiAgICBudWxsID09PSAocyA9IGxzKCkpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMub2JzZXJ2ZUNvbGxlY3Rpb24ocik7XG4gICAgcmV0dXJuIHlzKHIuc2xpY2UodCwgZSkpO1xufVxuXG5mdW5jdGlvbiBXcyh0LCBlKSB7XG4gICAgdmFyIHM7XG4gICAgY29uc3QgciA9IG1zKHRoaXMpO1xuICAgIGNvbnN0IGkgPSByLnJlZHVjZSgoKGUsIHMsIHIpID0+IHQoZSwgQXMocyksIHIsIHRoaXMpKSwgZSk7XG4gICAgbnVsbCA9PT0gKHMgPSBscygpKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLm9ic2VydmVDb2xsZWN0aW9uKHIpO1xuICAgIHJldHVybiBBcyhpKTtcbn1cblxuZnVuY3Rpb24gR3ModCwgZSkge1xuICAgIHZhciBzO1xuICAgIGNvbnN0IHIgPSBtcyh0aGlzKTtcbiAgICBjb25zdCBpID0gci5yZWR1Y2VSaWdodCgoKGUsIHMsIHIpID0+IHQoZSwgQXMocyksIHIsIHRoaXMpKSwgZSk7XG4gICAgbnVsbCA9PT0gKHMgPSBscygpKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLm9ic2VydmVDb2xsZWN0aW9uKHIpO1xuICAgIHJldHVybiBBcyhpKTtcbn1cblxuY29uc3QgWnMgPSB7XG4gICAgZ2V0KHQsIGUsIHMpIHtcbiAgICAgICAgaWYgKGUgPT09IEVzKSByZXR1cm4gdDtcbiAgICAgICAgY29uc3QgciA9IGxzKCk7XG4gICAgICAgIGlmICghY3MgfHwgeHMoZSkgfHwgbnVsbCA9PSByKSByZXR1cm4gcHModCwgZSwgcyk7XG4gICAgICAgIHN3aXRjaCAoZSkge1xuICAgICAgICAgIGNhc2UgXCJzaXplXCI6XG4gICAgICAgICAgICByLm9ic2VydmUodCwgXCJzaXplXCIpO1xuICAgICAgICAgICAgcmV0dXJuIHQuc2l6ZTtcblxuICAgICAgICAgIGNhc2UgXCJjbGVhclwiOlxuICAgICAgICAgICAgcmV0dXJuIHNyO1xuXG4gICAgICAgICAgY2FzZSBcImRlbGV0ZVwiOlxuICAgICAgICAgICAgcmV0dXJuIHJyO1xuXG4gICAgICAgICAgY2FzZSBcImZvckVhY2hcIjpcbiAgICAgICAgICAgIHJldHVybiBKcztcblxuICAgICAgICAgIGNhc2UgXCJhZGRcIjpcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgU2V0KSByZXR1cm4gZXI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJnZXRcIjpcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgTWFwKSByZXR1cm4gWXM7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJzZXRcIjpcbiAgICAgICAgICAgIGlmICh0IGluc3RhbmNlb2YgTWFwKSByZXR1cm4gdHI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJoYXNcIjpcbiAgICAgICAgICAgIHJldHVybiBYcztcblxuICAgICAgICAgIGNhc2UgXCJrZXlzXCI6XG4gICAgICAgICAgICByZXR1cm4gaXI7XG5cbiAgICAgICAgICBjYXNlIFwidmFsdWVzXCI6XG4gICAgICAgICAgICByZXR1cm4gbnI7XG5cbiAgICAgICAgICBjYXNlIFwiZW50cmllc1wiOlxuICAgICAgICAgICAgcmV0dXJuIG9yO1xuXG4gICAgICAgICAgY2FzZSBTeW1ib2wuaXRlcmF0b3I6XG4gICAgICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIE1hcCA/IG9yIDogbnI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEFzKHBzKHQsIGUsIHMpKTtcbiAgICB9XG59O1xuXG5mdW5jdGlvbiBKcyh0LCBlKSB7XG4gICAgdmFyIHM7XG4gICAgY29uc3QgciA9IG1zKHRoaXMpO1xuICAgIG51bGwgPT09IChzID0gbHMoKSkgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5vYnNlcnZlQ29sbGVjdGlvbihyKTtcbiAgICByZXR1cm4gci5mb3JFYWNoKCgocywgcikgPT4ge1xuICAgICAgICB0LmNhbGwoZSwgQXMocyksIEFzKHIpLCB0aGlzKTtcbiAgICB9KSk7XG59XG5cbmZ1bmN0aW9uIFhzKHQpIHtcbiAgICB2YXIgZTtcbiAgICBjb25zdCBzID0gbXModGhpcyk7XG4gICAgbnVsbCA9PT0gKGUgPSBscygpKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm9ic2VydmVDb2xsZWN0aW9uKHMpO1xuICAgIHJldHVybiBzLmhhcyhVcyh0KSk7XG59XG5cbmZ1bmN0aW9uIFlzKHQpIHtcbiAgICB2YXIgZTtcbiAgICBjb25zdCBzID0gbXModGhpcyk7XG4gICAgbnVsbCA9PT0gKGUgPSBscygpKSB8fCB2b2lkIDAgPT09IGUgPyB2b2lkIDAgOiBlLm9ic2VydmVDb2xsZWN0aW9uKHMpO1xuICAgIHJldHVybiBBcyhzLmdldChVcyh0KSkpO1xufVxuXG5mdW5jdGlvbiB0cih0LCBlKSB7XG4gICAgcmV0dXJuIEFzKG1zKHRoaXMpLnNldChVcyh0KSwgVXMoZSkpKTtcbn1cblxuZnVuY3Rpb24gZXIodCkge1xuICAgIHJldHVybiBBcyhtcyh0aGlzKS5hZGQoVXModCkpKTtcbn1cblxuZnVuY3Rpb24gc3IoKSB7XG4gICAgcmV0dXJuIEFzKG1zKHRoaXMpLmNsZWFyKCkpO1xufVxuXG5mdW5jdGlvbiBycih0KSB7XG4gICAgcmV0dXJuIEFzKG1zKHRoaXMpLmRlbGV0ZShVcyh0KSkpO1xufVxuXG5mdW5jdGlvbiBpcigpIHtcbiAgICB2YXIgdDtcbiAgICBjb25zdCBlID0gbXModGhpcyk7XG4gICAgbnVsbCA9PT0gKHQgPSBscygpKSB8fCB2b2lkIDAgPT09IHQgPyB2b2lkIDAgOiB0Lm9ic2VydmVDb2xsZWN0aW9uKGUpO1xuICAgIGNvbnN0IHMgPSBlLmtleXMoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBuZXh0KCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHMubmV4dCgpO1xuICAgICAgICAgICAgY29uc3QgZSA9IHQudmFsdWU7XG4gICAgICAgICAgICBjb25zdCByID0gdC5kb25lO1xuICAgICAgICAgICAgcmV0dXJuIHIgPyB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBkb25lOiByXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBBcyhlKSxcbiAgICAgICAgICAgICAgICBkb25lOiByXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gbnIoKSB7XG4gICAgdmFyIHQ7XG4gICAgY29uc3QgZSA9IG1zKHRoaXMpO1xuICAgIG51bGwgPT09ICh0ID0gbHMoKSkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5vYnNlcnZlQ29sbGVjdGlvbihlKTtcbiAgICBjb25zdCBzID0gZS52YWx1ZXMoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBuZXh0KCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHMubmV4dCgpO1xuICAgICAgICAgICAgY29uc3QgZSA9IHQudmFsdWU7XG4gICAgICAgICAgICBjb25zdCByID0gdC5kb25lO1xuICAgICAgICAgICAgcmV0dXJuIHIgPyB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBkb25lOiByXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBBcyhlKSxcbiAgICAgICAgICAgICAgICBkb25lOiByXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuZnVuY3Rpb24gb3IoKSB7XG4gICAgdmFyIHQ7XG4gICAgY29uc3QgZSA9IG1zKHRoaXMpO1xuICAgIG51bGwgPT09ICh0ID0gbHMoKSkgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5vYnNlcnZlQ29sbGVjdGlvbihlKTtcbiAgICBjb25zdCBzID0gZS5lbnRyaWVzKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmV4dCgpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBzLm5leHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0LnZhbHVlO1xuICAgICAgICAgICAgY29uc3QgciA9IHQuZG9uZTtcbiAgICAgICAgICAgIHJldHVybiByID8ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB2b2lkIDAsXG4gICAgICAgICAgICAgICAgZG9uZTogclxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogWyBBcyhlWzBdKSwgQXMoZVsxXSkgXSxcbiAgICAgICAgICAgICAgICBkb25lOiByXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9XG4gICAgfTtcbn1cblxuY29uc3QgaHIgPSBPYmplY3QuZnJlZXplKHtcbiAgICBnZXRQcm94eTogeXMsXG4gICAgZ2V0UmF3OiBtcyxcbiAgICB3cmFwOiBBcyxcbiAgICB1bndyYXA6IFVzLFxuICAgIHJhd0tleTogRXNcbn0pO1xuXG5jbGFzcyBDb21wdXRlZE9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBzLCByLCBpKSB7XG4gICAgICAgIHRoaXMuaW50ZXJjZXB0b3IgPSB0aGlzO1xuICAgICAgICB0aGlzLnR5cGUgPSAxO1xuICAgICAgICB0aGlzLnYgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMub3YgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuaXIgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5EID0gZmFsc2U7XG4gICAgICAgIHRoaXMubyA9IHQ7XG4gICAgICAgIHRoaXMuZ2V0ID0gZTtcbiAgICAgICAgdGhpcy5zZXQgPSBzO1xuICAgICAgICB0aGlzLnVwID0gcjtcbiAgICAgICAgdGhpcy5vTCA9IGk7XG4gICAgfVxuICAgIHN0YXRpYyBjcmVhdGUodCwgZSwgcywgciwgaSkge1xuICAgICAgICBjb25zdCBuID0gcy5nZXQ7XG4gICAgICAgIGNvbnN0IG8gPSBzLnNldDtcbiAgICAgICAgY29uc3QgaCA9IG5ldyBDb21wdXRlZE9ic2VydmVyKHQsIG4sIG8sIGksIHIpO1xuICAgICAgICBjb25zdCBjID0gKCkgPT4gaC5nZXRWYWx1ZSgpO1xuICAgICAgICBjLmdldE9ic2VydmVyID0gKCkgPT4gaDtcbiAgICAgICAgdih0LCBlLCB7XG4gICAgICAgICAgICBlbnVtZXJhYmxlOiBzLmVudW1lcmFibGUsXG4gICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICBnZXQ6IGMsXG4gICAgICAgICAgICBzZXQ6IHQgPT4ge1xuICAgICAgICAgICAgICAgIGguc2V0VmFsdWUodCwgMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gaDtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLnN1YnMuY291bnQpIHJldHVybiB0aGlzLmdldC5jYWxsKHRoaXMubywgdGhpcyk7XG4gICAgICAgIGlmICh0aGlzLkQpIHtcbiAgICAgICAgICAgIHRoaXMuY29tcHV0ZSgpO1xuICAgICAgICAgICAgdGhpcy5EID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudjtcbiAgICB9XG4gICAgc2V0VmFsdWUodCwgZSkge1xuICAgICAgICBpZiAocCh0aGlzLnNldCkpIHtcbiAgICAgICAgICAgIGlmICh0ICE9PSB0aGlzLnYpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlyID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldC5jYWxsKHRoaXMubywgdCk7XG4gICAgICAgICAgICAgICAgdGhpcy5pciA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB0aHJvdyBuZXcgRXJyb3IoXCJBVVIwMjIxXCIpO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMuRCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLnN1YnMuY291bnQgPiAwKSB0aGlzLnJ1bigpO1xuICAgIH1cbiAgICBoYW5kbGVDb2xsZWN0aW9uQ2hhbmdlKCkge1xuICAgICAgICB0aGlzLkQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5zdWJzLmNvdW50ID4gMCkgdGhpcy5ydW4oKTtcbiAgICB9XG4gICAgc3Vic2NyaWJlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicy5hZGQodCkgJiYgMSA9PT0gdGhpcy5zdWJzLmNvdW50KSB7XG4gICAgICAgICAgICB0aGlzLmNvbXB1dGUoKTtcbiAgICAgICAgICAgIHRoaXMuRCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIHVuc3Vic2NyaWJlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuc3Vicy5yZW1vdmUodCkgJiYgMCA9PT0gdGhpcy5zdWJzLmNvdW50KSB7XG4gICAgICAgICAgICB0aGlzLkQgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5vYnMuY2xlYXJBbGwoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmbHVzaCgpIHtcbiAgICAgICAgY3IgPSB0aGlzLm92O1xuICAgICAgICB0aGlzLm92ID0gdGhpcy52O1xuICAgICAgICB0aGlzLnN1YnMubm90aWZ5KHRoaXMudiwgY3IsIDApO1xuICAgIH1cbiAgICBydW4oKSB7XG4gICAgICAgIGlmICh0aGlzLmlyKSByZXR1cm47XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLnY7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvbXB1dGUoKTtcbiAgICAgICAgdGhpcy5EID0gZmFsc2U7XG4gICAgICAgIGlmICghT2JqZWN0LmlzKGUsIHQpKSB7XG4gICAgICAgICAgICB0aGlzLm92ID0gdDtcbiAgICAgICAgICAgIHRoaXMucXVldWUuYWRkKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbXB1dGUoKSB7XG4gICAgICAgIHRoaXMuaXIgPSB0cnVlO1xuICAgICAgICB0aGlzLm9icy52ZXJzaW9uKys7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmcyh0aGlzKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnYgPSBVcyh0aGlzLmdldC5jYWxsKHRoaXMudXAgPyBBcyh0aGlzLm8pIDogdGhpcy5vLCB0aGlzKSk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLm9icy5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5pciA9IGZhbHNlO1xuICAgICAgICAgICAgZHModGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbkVlKENvbXB1dGVkT2JzZXJ2ZXIpO1xuXG5ydChDb21wdXRlZE9ic2VydmVyKTtcblxuY3QoQ29tcHV0ZWRPYnNlcnZlcik7XG5cbmxldCBjcjtcblxuY29uc3QgdXIgPSByLmNyZWF0ZUludGVyZmFjZShcIklEaXJ0eUNoZWNrZXJcIiwgKHQgPT4gdC5zaW5nbGV0b24oRGlydHlDaGVja2VyKSkpO1xuXG5jb25zdCBhciA9IHtcbiAgICB0aW1lb3V0c1BlckNoZWNrOiAyNSxcbiAgICBkaXNhYmxlZDogZmFsc2UsXG4gICAgdGhyb3c6IGZhbHNlLFxuICAgIHJlc2V0VG9EZWZhdWx0KCkge1xuICAgICAgICB0aGlzLnRpbWVvdXRzUGVyQ2hlY2sgPSA2O1xuICAgICAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XG4gICAgICAgIHRoaXMudGhyb3cgPSBmYWxzZTtcbiAgICB9XG59O1xuXG5jb25zdCBsciA9IHtcbiAgICBwZXJzaXN0ZW50OiB0cnVlXG59O1xuXG5jbGFzcyBEaXJ0eUNoZWNrZXIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5wID0gdDtcbiAgICAgICAgdGhpcy50cmFja2VkID0gW107XG4gICAgICAgIHRoaXMuVCA9IG51bGw7XG4gICAgICAgIHRoaXMuaiA9IDA7XG4gICAgICAgIHRoaXMuY2hlY2sgPSAoKSA9PiB7XG4gICAgICAgICAgICBpZiAoYXIuZGlzYWJsZWQpIHJldHVybjtcbiAgICAgICAgICAgIGlmICgrK3RoaXMuaiA8IGFyLnRpbWVvdXRzUGVyQ2hlY2spIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMuaiA9IDA7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy50cmFja2VkO1xuICAgICAgICAgICAgY29uc3QgZSA9IHQubGVuZ3RoO1xuICAgICAgICAgICAgbGV0IHM7XG4gICAgICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgICAgICBmb3IgKDtyIDwgZTsgKytyKSB7XG4gICAgICAgICAgICAgICAgcyA9IHRbcl07XG4gICAgICAgICAgICAgICAgaWYgKHMuaXNEaXJ0eSgpKSB0aGlzLnF1ZXVlLmFkZChzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgY3JlYXRlUHJvcGVydHkodCwgZSkge1xuICAgICAgICBpZiAoYXIudGhyb3cpIHRocm93IG5ldyBFcnJvcihgQVVSMDIyMjoke2V9YCk7XG4gICAgICAgIHJldHVybiBuZXcgRGlydHlDaGVja1Byb3BlcnR5KHRoaXMsIHQsIGUpO1xuICAgIH1cbiAgICBhZGRQcm9wZXJ0eSh0KSB7XG4gICAgICAgIHRoaXMudHJhY2tlZC5wdXNoKHQpO1xuICAgICAgICBpZiAoMSA9PT0gdGhpcy50cmFja2VkLmxlbmd0aCkgdGhpcy5UID0gdGhpcy5wLnRhc2tRdWV1ZS5xdWV1ZVRhc2sodGhpcy5jaGVjaywgbHIpO1xuICAgIH1cbiAgICByZW1vdmVQcm9wZXJ0eSh0KSB7XG4gICAgICAgIHRoaXMudHJhY2tlZC5zcGxpY2UodGhpcy50cmFja2VkLmluZGV4T2YodCksIDEpO1xuICAgICAgICBpZiAoMCA9PT0gdGhpcy50cmFja2VkLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5ULmNhbmNlbCgpO1xuICAgICAgICAgICAgdGhpcy5UID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuRGlydHlDaGVja2VyLmluamVjdCA9IFsgbCBdO1xuXG5jdChEaXJ0eUNoZWNrZXIpO1xuXG5jbGFzcyBEaXJ0eUNoZWNrUHJvcGVydHkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIHMpIHtcbiAgICAgICAgdGhpcy5vYmogPSBlO1xuICAgICAgICB0aGlzLmtleSA9IHM7XG4gICAgICAgIHRoaXMudHlwZSA9IDA7XG4gICAgICAgIHRoaXMub3YgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuSSA9IHQ7XG4gICAgfVxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vYmpbdGhpcy5rZXldO1xuICAgIH1cbiAgICBzZXRWYWx1ZSh0LCBlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgVHJ5aW5nIHRvIHNldCB2YWx1ZSBmb3IgcHJvcGVydHkgJHt0aGlzLmtleX0gaW4gZGlydHkgY2hlY2tlcmApO1xuICAgIH1cbiAgICBpc0RpcnR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5vdiAhPT0gdGhpcy5vYmpbdGhpcy5rZXldO1xuICAgIH1cbiAgICBmbHVzaCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMub3Y7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmdldFZhbHVlKCk7XG4gICAgICAgIHRoaXMub3YgPSBlO1xuICAgICAgICB0aGlzLnN1YnMubm90aWZ5KGUsIHQsIDApO1xuICAgIH1cbiAgICBzdWJzY3JpYmUodCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzLmFkZCh0KSAmJiAxID09PSB0aGlzLnN1YnMuY291bnQpIHtcbiAgICAgICAgICAgIHRoaXMub3YgPSB0aGlzLm9ialt0aGlzLmtleV07XG4gICAgICAgICAgICB0aGlzLkkuYWRkUHJvcGVydHkodGhpcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdW5zdWJzY3JpYmUodCkge1xuICAgICAgICBpZiAodGhpcy5zdWJzLnJlbW92ZSh0KSAmJiAwID09PSB0aGlzLnN1YnMuY291bnQpIHRoaXMuSS5yZW1vdmVQcm9wZXJ0eSh0aGlzKTtcbiAgICB9XG59XG5cbnJ0KERpcnR5Q2hlY2tQcm9wZXJ0eSk7XG5cbmNsYXNzIFByaW1pdGl2ZU9ic2VydmVyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudHlwZSA9IDA7XG4gICAgICAgIHRoaXMubyA9IHQ7XG4gICAgICAgIHRoaXMuayA9IGU7XG4gICAgfVxuICAgIGdldCBkb05vdENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZ2V0VmFsdWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9bdGhpcy5rXTtcbiAgICB9XG4gICAgc2V0VmFsdWUoKSB7fVxuICAgIHN1YnNjcmliZSgpIHt9XG4gICAgdW5zdWJzY3JpYmUoKSB7fVxufVxuXG5jbGFzcyBQcm9wZXJ0eUFjY2Vzc29yIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMDtcbiAgICB9XG4gICAgZ2V0VmFsdWUodCwgZSkge1xuICAgICAgICByZXR1cm4gdFtlXTtcbiAgICB9XG4gICAgc2V0VmFsdWUodCwgZSwgcywgcikge1xuICAgICAgICBzW3JdID0gdDtcbiAgICB9XG59XG5cbmxldCBmcjtcblxuY2xhc3MgU2V0dGVyT2JzZXJ2ZXIge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy50eXBlID0gMTtcbiAgICAgICAgdGhpcy52ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLm92ID0gdm9pZCAwO1xuICAgICAgICB0aGlzLmlPID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZiA9IDA7XG4gICAgICAgIHRoaXMubyA9IHQ7XG4gICAgICAgIHRoaXMuayA9IGU7XG4gICAgfVxuICAgIGdldFZhbHVlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52O1xuICAgIH1cbiAgICBzZXRWYWx1ZSh0LCBlKSB7XG4gICAgICAgIGlmICh0aGlzLmlPKSB7XG4gICAgICAgICAgICBpZiAoT2JqZWN0LmlzKHQsIHRoaXMudikpIHJldHVybjtcbiAgICAgICAgICAgIHRoaXMub3YgPSB0aGlzLnY7XG4gICAgICAgICAgICB0aGlzLnYgPSB0O1xuICAgICAgICAgICAgdGhpcy5mID0gZTtcbiAgICAgICAgICAgIHRoaXMucXVldWUuYWRkKHRoaXMpO1xuICAgICAgICB9IGVsc2UgdGhpcy5vW3RoaXMua10gPSB0O1xuICAgIH1cbiAgICBzdWJzY3JpYmUodCkge1xuICAgICAgICBpZiAoZmFsc2UgPT09IHRoaXMuaU8pIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgdGhpcy5zdWJzLmFkZCh0KTtcbiAgICB9XG4gICAgZmx1c2goKSB7XG4gICAgICAgIGZyID0gdGhpcy5vdjtcbiAgICAgICAgdGhpcy5vdiA9IHRoaXMudjtcbiAgICAgICAgdGhpcy5zdWJzLm5vdGlmeSh0aGlzLnYsIGZyLCB0aGlzLmYpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgaWYgKGZhbHNlID09PSB0aGlzLmlPKSB7XG4gICAgICAgICAgICB0aGlzLmlPID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMudiA9IHRoaXMub1t0aGlzLmtdO1xuICAgICAgICAgICAgdih0aGlzLm8sIHRoaXMuaywge1xuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldDogKCkgPT4gdGhpcy5nZXRWYWx1ZSgpLFxuICAgICAgICAgICAgICAgIHNldDogdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VmFsdWUodCwgMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIHN0b3AoKSB7XG4gICAgICAgIGlmICh0aGlzLmlPKSB7XG4gICAgICAgICAgICB2KHRoaXMubywgdGhpcy5rLCB7XG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgdmFsdWU6IHRoaXMudlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmlPID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufVxuXG5jbGFzcyBTZXR0ZXJOb3RpZmllciB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgcywgcikge1xuICAgICAgICB0aGlzLnR5cGUgPSAxO1xuICAgICAgICB0aGlzLnYgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMub3YgPSB2b2lkIDA7XG4gICAgICAgIHRoaXMuZiA9IDA7XG4gICAgICAgIHRoaXMubyA9IHQ7XG4gICAgICAgIHRoaXMuUyA9IHM7XG4gICAgICAgIHRoaXMuaHMgPSBwKHMpO1xuICAgICAgICBjb25zdCBpID0gdFtlXTtcbiAgICAgICAgdGhpcy5jYiA9IHAoaSkgPyBpIDogdm9pZCAwO1xuICAgICAgICB0aGlzLnYgPSByO1xuICAgIH1cbiAgICBnZXRWYWx1ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudjtcbiAgICB9XG4gICAgc2V0VmFsdWUodCwgZSkge1xuICAgICAgICB2YXIgcztcbiAgICAgICAgaWYgKHRoaXMuaHMpIHQgPSB0aGlzLlModCwgbnVsbCk7XG4gICAgICAgIGlmICghT2JqZWN0LmlzKHQsIHRoaXMudikpIHtcbiAgICAgICAgICAgIHRoaXMub3YgPSB0aGlzLnY7XG4gICAgICAgICAgICB0aGlzLnYgPSB0O1xuICAgICAgICAgICAgdGhpcy5mID0gZTtcbiAgICAgICAgICAgIG51bGwgPT09IChzID0gdGhpcy5jYikgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5jYWxsKHRoaXMubywgdGhpcy52LCB0aGlzLm92LCBlKTtcbiAgICAgICAgICAgIHRoaXMucXVldWUuYWRkKHRoaXMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZsdXNoKCkge1xuICAgICAgICBmciA9IHRoaXMub3Y7XG4gICAgICAgIHRoaXMub3YgPSB0aGlzLnY7XG4gICAgICAgIHRoaXMuc3Vicy5ub3RpZnkodGhpcy52LCBmciwgdGhpcy5mKTtcbiAgICB9XG59XG5cbnJ0KFNldHRlck9ic2VydmVyKTtcblxucnQoU2V0dGVyTm90aWZpZXIpO1xuXG5jdChTZXR0ZXJPYnNlcnZlcik7XG5cbmN0KFNldHRlck5vdGlmaWVyKTtcblxuY29uc3QgZHIgPSBuZXcgUHJvcGVydHlBY2Nlc3NvcjtcblxuY29uc3QgdnIgPSByLmNyZWF0ZUludGVyZmFjZShcIklPYnNlcnZlckxvY2F0b3JcIiwgKHQgPT4gdC5zaW5nbGV0b24oT2JzZXJ2ZXJMb2NhdG9yKSkpO1xuXG5jb25zdCBwciA9IHIuY3JlYXRlSW50ZXJmYWNlKFwiSU5vZGVPYnNlcnZlckxvY2F0b3JcIiwgKHQgPT4gdC5jYWNoZWRDYWxsYmFjaygodCA9PiB7XG4gICAgdC5nZXRBbGwoZikuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgIHQuZXJyb3IoXCJVc2luZyBkZWZhdWx0IElOb2RlT2JzZXJ2ZXJMb2NhdG9yIGltcGxlbWVudGF0aW9uLiBXaWxsIG5vdCBiZSBhYmxlIHRvIG9ic2VydmUgbm9kZXMgKEhUTUwgZXRjLi4uKS5cIik7XG4gICAgfSkpO1xuICAgIHJldHVybiBuZXcgRGVmYXVsdE5vZGVPYnNlcnZlckxvY2F0b3I7XG59KSkpKTtcblxuY2xhc3MgRGVmYXVsdE5vZGVPYnNlcnZlckxvY2F0b3Ige1xuICAgIGhhbmRsZXMoKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgZ2V0T2JzZXJ2ZXIoKSB7XG4gICAgICAgIHJldHVybiBkcjtcbiAgICB9XG4gICAgZ2V0QWNjZXNzb3IoKSB7XG4gICAgICAgIHJldHVybiBkcjtcbiAgICB9XG59XG5cbmNsYXNzIE9ic2VydmVyTG9jYXRvciB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLkkgPSB0O1xuICAgICAgICB0aGlzLk0gPSBlO1xuICAgICAgICB0aGlzLkYgPSBbXTtcbiAgICB9XG4gICAgYWRkQWRhcHRlcih0KSB7XG4gICAgICAgIHRoaXMuRi5wdXNoKHQpO1xuICAgIH1cbiAgICBnZXRPYnNlcnZlcih0LCBlKSB7XG4gICAgICAgIHZhciBzLCByO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gKHIgPSBudWxsID09PSAocyA9IHQuJG9ic2VydmVycykgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogc1tlXSkgJiYgdm9pZCAwICE9PSByID8gciA6IHRoaXMuVih0LCBlLCB0aGlzLmNyZWF0ZU9ic2VydmVyKHQsIGUpKTtcbiAgICB9XG4gICAgZ2V0QWNjZXNzb3IodCwgZSkge1xuICAgICAgICB2YXIgcztcbiAgICAgICAgY29uc3QgciA9IG51bGwgPT09IChzID0gdC4kb2JzZXJ2ZXJzKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzW2VdO1xuICAgICAgICBpZiAodm9pZCAwICE9PSByKSByZXR1cm4gcjtcbiAgICAgICAgaWYgKHRoaXMuTS5oYW5kbGVzKHQsIGUsIHRoaXMpKSByZXR1cm4gdGhpcy5NLmdldEFjY2Vzc29yKHQsIGUsIHRoaXMpO1xuICAgICAgICByZXR1cm4gZHI7XG4gICAgfVxuICAgIGdldEFycmF5T2JzZXJ2ZXIodCkge1xuICAgICAgICByZXR1cm4ganQodCk7XG4gICAgfVxuICAgIGdldE1hcE9ic2VydmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIHVlKHQpO1xuICAgIH1cbiAgICBnZXRTZXRPYnNlcnZlcih0KSB7XG4gICAgICAgIHJldHVybiBadCh0KTtcbiAgICB9XG4gICAgY3JlYXRlT2JzZXJ2ZXIodCwgZSkge1xuICAgICAgICB2YXIgcywgciwgaSwgbjtcbiAgICAgICAgaWYgKCEodCBpbnN0YW5jZW9mIE9iamVjdCkpIHJldHVybiBuZXcgUHJpbWl0aXZlT2JzZXJ2ZXIodCwgZSk7XG4gICAgICAgIGlmICh0aGlzLk0uaGFuZGxlcyh0LCBlLCB0aGlzKSkgcmV0dXJuIHRoaXMuTS5nZXRPYnNlcnZlcih0LCBlLCB0aGlzKTtcbiAgICAgICAgc3dpdGNoIChlKSB7XG4gICAgICAgICAgY2FzZSBcImxlbmd0aFwiOlxuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBBcnJheSkgcmV0dXJuIGp0KHQpLmdldExlbmd0aE9ic2VydmVyKCk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJzaXplXCI6XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIE1hcCkgcmV0dXJuIHVlKHQpLmdldExlbmd0aE9ic2VydmVyKCk7IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBTZXQpIHJldHVybiBadCh0KS5nZXRMZW5ndGhPYnNlcnZlcigpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBBcnJheSAmJiBhKGUpKSByZXR1cm4ganQodCkuZ2V0SW5kZXhPYnNlcnZlcihOdW1iZXIoZSkpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgbGV0IG8gPSBicih0LCBlKTtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gbykge1xuICAgICAgICAgICAgbGV0IHMgPSB3cih0KTtcbiAgICAgICAgICAgIHdoaWxlIChudWxsICE9PSBzKSB7XG4gICAgICAgICAgICAgICAgbyA9IGJyKHMsIGUpO1xuICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IG8pIHMgPSB3cihzKTsgZWxzZSBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodm9pZCAwICE9PSBvICYmICFkLmNhbGwobywgXCJ2YWx1ZVwiKSkge1xuICAgICAgICAgICAgbGV0IGggPSB0aGlzLk4odCwgZSwgbyk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSBoKSBoID0gbnVsbCA9PT0gKG4gPSBudWxsICE9PSAociA9IG51bGwgPT09IChzID0gby5nZXQpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuZ2V0T2JzZXJ2ZXIpICYmIHZvaWQgMCAhPT0gciA/IHIgOiBudWxsID09PSAoaSA9IG8uc2V0KSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLmdldE9ic2VydmVyKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuKHQsIHRoaXMpO1xuICAgICAgICAgICAgcmV0dXJuIG51bGwgPT0gaCA/IG8uY29uZmlndXJhYmxlID8gQ29tcHV0ZWRPYnNlcnZlci5jcmVhdGUodCwgZSwgbywgdGhpcywgdHJ1ZSkgOiB0aGlzLkkuY3JlYXRlUHJvcGVydHkodCwgZSkgOiBoO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgU2V0dGVyT2JzZXJ2ZXIodCwgZSk7XG4gICAgfVxuICAgIE4odCwgZSwgcykge1xuICAgICAgICBpZiAodGhpcy5GLmxlbmd0aCA+IDApIGZvciAoY29uc3QgciBvZiB0aGlzLkYpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSByLmdldE9ic2VydmVyKHQsIGUsIHMsIHRoaXMpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT0gaSkgcmV0dXJuIGk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIFYodCwgZSwgcykge1xuICAgICAgICBpZiAodHJ1ZSA9PT0gcy5kb05vdENhY2hlKSByZXR1cm4gcztcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdC4kb2JzZXJ2ZXJzKSB7XG4gICAgICAgICAgICB2KHQsIFwiJG9ic2VydmVyc1wiLCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgW2VdOiBzXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdC4kb2JzZXJ2ZXJzW2VdID0gcztcbiAgICB9XG59XG5cbk9ic2VydmVyTG9jYXRvci5pbmplY3QgPSBbIHVyLCBwciBdO1xuXG5mdW5jdGlvbiBncih0KSB7XG4gICAgbGV0IGU7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBBcnJheSkgZSA9IGp0KHQpOyBlbHNlIGlmICh0IGluc3RhbmNlb2YgTWFwKSBlID0gdWUodCk7IGVsc2UgaWYgKHQgaW5zdGFuY2VvZiBTZXQpIGUgPSBadCh0KTtcbiAgICByZXR1cm4gZTtcbn1cblxuY29uc3Qgd3IgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG5cbmNvbnN0IGJyID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcblxuY29uc3QgRXIgPSByLmNyZWF0ZUludGVyZmFjZShcIklPYnNlcnZhdGlvblwiLCAodCA9PiB0LnNpbmdsZXRvbihPYnNlcnZhdGlvbikpKTtcblxuY2xhc3MgT2JzZXJ2YXRpb24ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5vTCA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBnZXQgaW5qZWN0KCkge1xuICAgICAgICByZXR1cm4gWyB2ciBdO1xuICAgIH1cbiAgICBydW4odCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IEVmZmVjdCh0aGlzLm9MLCB0KTtcbiAgICAgICAgZS5ydW4oKTtcbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfVxufVxuXG5jbGFzcyBFZmZlY3Qge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5vTCA9IHQ7XG4gICAgICAgIHRoaXMuZm4gPSBlO1xuICAgICAgICB0aGlzLmludGVyY2VwdG9yID0gdGhpcztcbiAgICAgICAgdGhpcy5tYXhSdW5Db3VudCA9IDEwO1xuICAgICAgICB0aGlzLnF1ZXVlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5ydW5Db3VudCA9IDA7XG4gICAgICAgIHRoaXMuc3RvcHBlZCA9IGZhbHNlO1xuICAgIH1cbiAgICBoYW5kbGVDaGFuZ2UoKSB7XG4gICAgICAgIHRoaXMucXVldWVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5ydW4oKTtcbiAgICB9XG4gICAgaGFuZGxlQ29sbGVjdGlvbkNoYW5nZSgpIHtcbiAgICAgICAgdGhpcy5xdWV1ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnJ1bigpO1xuICAgIH1cbiAgICBydW4oKSB7XG4gICAgICAgIGlmICh0aGlzLnN0b3BwZWQpIHRocm93IG5ldyBFcnJvcihcIkFVUjAyMjVcIik7XG4gICAgICAgIGlmICh0aGlzLnJ1bm5pbmcpIHJldHVybjtcbiAgICAgICAgKyt0aGlzLnJ1bkNvdW50O1xuICAgICAgICB0aGlzLnJ1bm5pbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLnF1ZXVlZCA9IGZhbHNlO1xuICAgICAgICArK3RoaXMub2JzLnZlcnNpb247XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmcyh0aGlzKTtcbiAgICAgICAgICAgIHRoaXMuZm4odGhpcyk7XG4gICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLm9icy5jbGVhcigpO1xuICAgICAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBkcyh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5xdWV1ZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJ1bkNvdW50ID4gdGhpcy5tYXhSdW5Db3VudCkge1xuICAgICAgICAgICAgICAgIHRoaXMucnVuQ291bnQgPSAwO1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQVVSMDIyNmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5ydW4oKTtcbiAgICAgICAgfSBlbHNlIHRoaXMucnVuQ291bnQgPSAwO1xuICAgIH1cbiAgICBzdG9wKCkge1xuICAgICAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLm9icy5jbGVhckFsbCgpO1xuICAgIH1cbn1cblxuRWUoRWZmZWN0KTtcblxuZnVuY3Rpb24gQXIodCkge1xuICAgIGlmICh2b2lkIDAgPT09IHQuJG9ic2VydmVycykgdih0LCBcIiRvYnNlcnZlcnNcIiwge1xuICAgICAgICB2YWx1ZToge31cbiAgICB9KTtcbiAgICByZXR1cm4gdC4kb2JzZXJ2ZXJzO1xufVxuXG5jb25zdCB5ciA9IHt9O1xuXG5mdW5jdGlvbiBtcih0LCBlLCBzKSB7XG4gICAgaWYgKG51bGwgPT0gZSkgcmV0dXJuIChlLCBzLCBpKSA9PiByKGUsIHMsIGksIHQpO1xuICAgIHJldHVybiByKHQsIGUsIHMpO1xuICAgIGZ1bmN0aW9uIHIodCwgZSwgcywgcikge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgY29uc3QgbiA9IHZvaWQgMCA9PT0gZTtcbiAgICAgICAgciA9IFwib2JqZWN0XCIgIT09IHR5cGVvZiByID8ge1xuICAgICAgICAgICAgbmFtZTogclxuICAgICAgICB9IDogciB8fCB7fTtcbiAgICAgICAgaWYgKG4pIGUgPSByLm5hbWU7XG4gICAgICAgIGlmIChudWxsID09IGUgfHwgXCJcIiA9PT0gZSkgdGhyb3cgbmV3IEVycm9yKFwiQVVSMDIyNFwiKTtcbiAgICAgICAgY29uc3QgbyA9IHIuY2FsbGJhY2sgfHwgYCR7U3RyaW5nKGUpfUNoYW5nZWRgO1xuICAgICAgICBsZXQgaCA9IHlyO1xuICAgICAgICBpZiAocykge1xuICAgICAgICAgICAgZGVsZXRlIHMudmFsdWU7XG4gICAgICAgICAgICBkZWxldGUgcy53cml0YWJsZTtcbiAgICAgICAgICAgIGggPSBudWxsID09PSAoaSA9IHMuaW5pdGlhbGl6ZXIpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuY2FsbChzKTtcbiAgICAgICAgICAgIGRlbGV0ZSBzLmluaXRpYWxpemVyO1xuICAgICAgICB9IGVsc2UgcyA9IHtcbiAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgICB9O1xuICAgICAgICBpZiAoIShcImVudW1lcmFibGVcIiBpbiBzKSkgcy5lbnVtZXJhYmxlID0gdHJ1ZTtcbiAgICAgICAgY29uc3QgYyA9IHIuc2V0O1xuICAgICAgICBzLmdldCA9IGZ1bmN0aW9uIHQoKSB7XG4gICAgICAgICAgICB2YXIgcztcbiAgICAgICAgICAgIGNvbnN0IHIgPSBVcih0aGlzLCBlLCBvLCBoLCBjKTtcbiAgICAgICAgICAgIG51bGwgPT09IChzID0gbHMoKSkgfHwgdm9pZCAwID09PSBzID8gdm9pZCAwIDogcy5zdWJzY3JpYmVUbyhyKTtcbiAgICAgICAgICAgIHJldHVybiByLmdldFZhbHVlKCk7XG4gICAgICAgIH07XG4gICAgICAgIHMuc2V0ID0gZnVuY3Rpb24gdChzKSB7XG4gICAgICAgICAgICBVcih0aGlzLCBlLCBvLCBoLCBjKS5zZXRWYWx1ZShzLCAwKTtcbiAgICAgICAgfTtcbiAgICAgICAgcy5nZXQuZ2V0T2JzZXJ2ZXIgPSBmdW5jdGlvbiB0KHMpIHtcbiAgICAgICAgICAgIHJldHVybiBVcihzLCBlLCBvLCBoLCBjKTtcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG4pIHYodC5wcm90b3R5cGUsIGUsIHMpOyBlbHNlIHJldHVybiBzO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gVXIodCwgZSwgcywgciwgaSkge1xuICAgIGNvbnN0IG4gPSBBcih0KTtcbiAgICBsZXQgbyA9IG5bZV07XG4gICAgaWYgKG51bGwgPT0gbykge1xuICAgICAgICBvID0gbmV3IFNldHRlck5vdGlmaWVyKHQsIHMsIGksIHIgPT09IHlyID8gdm9pZCAwIDogcik7XG4gICAgICAgIG5bZV0gPSBvO1xuICAgIH1cbiAgICByZXR1cm4gbztcbn1cblxuZXhwb3J0IHsgVWUgYXMgQWNjZXNzLCBBY2Nlc3NLZXllZEV4cHJlc3Npb24sIEFjY2Vzc01lbWJlckV4cHJlc3Npb24sIEFjY2Vzc1Njb3BlRXhwcmVzc2lvbiwgQWNjZXNzVGhpc0V4cHJlc3Npb24sIFggYXMgQWNjZXNzb3JUeXBlLCBBcnJheUJpbmRpbmdQYXR0ZXJuLCBBcnJheUluZGV4T2JzZXJ2ZXIsIEFycmF5TGl0ZXJhbEV4cHJlc3Npb24sIEFycmF5T2JzZXJ2ZXIsIEFzc2lnbkV4cHJlc3Npb24sIEJpbmFyeUV4cHJlc3Npb24sIFQgYXMgQmluZGluZ0JlaGF2aW9yLCBCaW5kaW5nQmVoYXZpb3JEZWZpbml0aW9uLCBCaW5kaW5nQmVoYXZpb3JFeHByZXNzaW9uLCBCaW5kaW5nQmVoYXZpb3JGYWN0b3J5LCAkIGFzIEJpbmRpbmdCZWhhdmlvclN0cmF0ZWd5LCBCaW5kaW5nQ29udGV4dCwgQmluZGluZ0lkZW50aWZpZXIsIEJpbmRpbmdJbnRlcmNlcHRvciwgQmluZGluZ01lZGlhdG9yLCB6IGFzIEJpbmRpbmdNb2RlLCBCaW5kaW5nT2JzZXJ2ZXJSZWNvcmQsIENhbGxGdW5jdGlvbkV4cHJlc3Npb24sIENhbGxNZW1iZXJFeHByZXNzaW9uLCBDYWxsU2NvcGVFeHByZXNzaW9uLCB5ZSBhcyBDaGFyLCBKIGFzIENvbGxlY3Rpb25LaW5kLCBDb2xsZWN0aW9uTGVuZ3RoT2JzZXJ2ZXIsIENvbGxlY3Rpb25TaXplT2JzZXJ2ZXIsIENvbXB1dGVkT2JzZXJ2ZXIsIENvbmRpdGlvbmFsRXhwcmVzc2lvbiwgdnMgYXMgQ29ubmVjdGFibGVTd2l0Y2hlciwgQ3VzdG9tRXhwcmVzc2lvbiwgWiBhcyBEZWxlZ2F0aW9uU3RyYXRlZ3ksIERlc3RydWN0dXJpbmdBc3NpZ25tZW50RXhwcmVzc2lvbiwgRGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRSZXN0RXhwcmVzc2lvbiwgRGVzdHJ1Y3R1cmluZ0Fzc2lnbm1lbnRTaW5nbGVFeHByZXNzaW9uLCBEaXJ0eUNoZWNrUHJvcGVydHksIGFyIGFzIERpcnR5Q2hlY2tTZXR0aW5ncywgRiBhcyBFeHByZXNzaW9uS2luZCwgUmUgYXMgRXhwcmVzc2lvblR5cGUsIEZsdXNoUXVldWUsIEZvck9mU3RhdGVtZW50LCBIdG1sTGl0ZXJhbEV4cHJlc3Npb24sIF8gYXMgSUNvZXJjaW9uQ29uZmlndXJhdGlvbiwgdXIgYXMgSURpcnR5Q2hlY2tlciwgQWUgYXMgSUV4cHJlc3Npb25QYXJzZXIsIHByIGFzIElOb2RlT2JzZXJ2ZXJMb2NhdG9yLCBFciBhcyBJT2JzZXJ2YXRpb24sIHZyIGFzIElPYnNlcnZlckxvY2F0b3IsIEIgYXMgSVNpZ25hbGVyLCBJbnRlcnBvbGF0aW9uLCBXIGFzIExpZmVjeWNsZUZsYWdzLCBNYXBPYnNlcnZlciwgT2JqZWN0QmluZGluZ1BhdHRlcm4sIE9iamVjdExpdGVyYWxFeHByZXNzaW9uLCBPYnNlcnZhdGlvbiwgT2JzZXJ2ZXJMb2NhdG9yLCBPdmVycmlkZUNvbnRleHQsIFBhcnNlclN0YXRlLCB4ZSBhcyBQcmVjZWRlbmNlLCBQcmltaXRpdmVMaXRlcmFsRXhwcmVzc2lvbiwgUHJpbWl0aXZlT2JzZXJ2ZXIsIFByb3BlcnR5QWNjZXNzb3IsIGhyIGFzIFByb3h5T2JzZXJ2YWJsZSwgU2NvcGUsIFNldE9ic2VydmVyLCBTZXR0ZXJPYnNlcnZlciwgU3Vic2NyaWJlclJlY29yZCwgVGFnZ2VkVGVtcGxhdGVFeHByZXNzaW9uLCBUZW1wbGF0ZUV4cHJlc3Npb24sIFVuYXJ5RXhwcmVzc2lvbiwgRCBhcyBWYWx1ZUNvbnZlcnRlciwgVmFsdWVDb252ZXJ0ZXJEZWZpbml0aW9uLCBWYWx1ZUNvbnZlcnRlckV4cHJlc3Npb24sIE8gYXMgYWxpYXMsIEl0IGFzIGFwcGx5TXV0YXRpb25zVG9JbmRpY2VzLCBMIGFzIGJpbmRpbmdCZWhhdmlvciwgZXQgYXMgY2xvbmVJbmRleE1hcCwgRWUgYXMgY29ubmVjdGFibGUsIFkgYXMgY29weUluZGV4TWFwLCB0dCBhcyBjcmVhdGVJbmRleE1hcCwgVHQgYXMgZGlzYWJsZUFycmF5T2JzZXJ2YXRpb24sIGNlIGFzIGRpc2FibGVNYXBPYnNlcnZhdGlvbiwgR3QgYXMgZGlzYWJsZVNldE9ic2VydmF0aW9uLCBQdCBhcyBlbmFibGVBcnJheU9ic2VydmF0aW9uLCBoZSBhcyBlbmFibGVNYXBPYnNlcnZhdGlvbiwgV3QgYXMgZW5hYmxlU2V0T2JzZXJ2YXRpb24sIGdyIGFzIGdldENvbGxlY3Rpb25PYnNlcnZlciwgc3QgYXMgaXNJbmRleE1hcCwgbXIgYXMgb2JzZXJ2YWJsZSwgamUgYXMgcGFyc2UsIFRlIGFzIHBhcnNlRXhwcmVzc2lvbiwgQyBhcyByZWdpc3RlckFsaWFzZXMsIHJ0IGFzIHN1YnNjcmliZXJDb2xsZWN0aW9uLCBNdCBhcyBzeW5jaHJvbml6ZUluZGljZXMsIGogYXMgdmFsdWVDb252ZXJ0ZXIsIGN0IGFzIHdpdGhGbHVzaFF1ZXVlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXBcbiIsImltcG9ydCB7IEN1c3RvbUVsZW1lbnQgfSBmcm9tIFwiYXVyZWxpYVwiO1xuaW1wb3J0IHsgaXNGaXJlZm94IH0gZnJvbSBcIi4uL3NoYXJlZC9lbnZcIjtcbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsU2NyaXB0KGZuKSB7XG4gICAgY29uc3Qgc291cmNlID0gJzsoJyArIGZuLnRvU3RyaW5nKCkgKyAnKSh3aW5kb3csICknO1xuICAgIGlmIChpc0ZpcmVmb3gpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWV2YWxcbiAgICAgICAgd2luZG93LmV2YWwoc291cmNlKTsgLy8gaW4gRmlyZWZveCwgdGhpcyBldmFsdWF0ZXMgb24gdGhlIGNvbnRlbnQgd2luZG93XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBjb25zdCBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiAgICAgICAgc2NyaXB0LnRleHRDb250ZW50ID0gc291cmNlO1xuICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuYXBwZW5kQ2hpbGQoc2NyaXB0KTtcbiAgICAgICAgc2NyaXB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoc2NyaXB0KTtcbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0QXVyZWxpYUluc3RhbmNlKHdpbikge1xuICAgIGNvbnN0IGFsbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJyonKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFsbC5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBhdXJlbGlhID0gYWxsW2ldLiRhdXJlbGlhO1xuICAgICAgICBpZiAoYXVyZWxpYSkge1xuICAgICAgICAgICAgcmV0dXJuIGF1cmVsaWE7XG4gICAgICAgIH1cbiAgICB9XG59XG5leHBvcnQgZnVuY3Rpb24gZ2V0Q3VzdG9tRWxlbWVudEluZm8oZWxlbWVudCkge1xuICAgIHJldHVybiBDdXN0b21FbGVtZW50LmZvcihlbGVtZW50KTtcbn1cbmV4cG9ydCBmdW5jdGlvbiBpbnN0YWxsKHdpbikge1xuICAgIGxldCBuZXh0RGVidWdJZCA9IDA7XG4gICAgbGV0IGRlYnVnVmFsdWVMb29rdXAgPSB7fTtcbiAgICBjb25zdCBob29rcyA9IHtcbiAgICAgICAgQXVyZWxpYTogdW5kZWZpbmVkLFxuICAgICAgICBjdXJyZW50RWxlbWVudDogdW5kZWZpbmVkLFxuICAgICAgICBjdXJyZW50QXR0cmlidXRlczogW10sXG4gICAgICAgIGdldEFsbEluZm86IChyb290KSA9PiB7XG4gICAgICAgICAgICByb290ID0gcm9vdCA/PyBkb2N1bWVudC5ib2R5O1xuICAgICAgICAgICAgcmV0dXJuIFtob29rcy5nZXRDdXN0b21FbGVtZW50SW5mbyhyb290LCBmYWxzZSksIC4uLkFycmF5LmZyb20ocm9vdC5jaGlsZHJlbikuZmxhdE1hcCh5ID0+IGhvb2tzLmdldEFsbEluZm8oeSkpXS5maWx0ZXIoeCA9PiB4KTtcbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlVmFsdWVzOiAoaW5mbywgcHJvcGVydHkpID0+IHtcbiAgICAgICAgICAgIGlmICghaG9va3MuY3VycmVudEVsZW1lbnQgJiYgIWhvb2tzLmN1cnJlbnRBdHRyaWJ1dGVzLmxlbmd0aClcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SW5mbyA9IGhvb2tzLmN1cnJlbnRFbGVtZW50Py5kZWZpbml0aW9uLmtleSA9PT0gaW5mby5rZXkgPyBob29rcy5jdXJyZW50RWxlbWVudCA6IGhvb2tzLmN1cnJlbnRBdHRyaWJ1dGVzLmZpbmQoeSA9PiB5LmRlZmluaXRpb24ua2V5ID09PSBpbmZvLmtleSk7XG4gICAgICAgICAgICBpbmZvLmJpbmRhYmxlcy5mb3JFYWNoKHggPT4gY3VycmVudEluZm8udmlld01vZGVsW3gubmFtZV0gPSB4LnZhbHVlKTtcbiAgICAgICAgICAgIGluZm8ucHJvcGVydGllcy5mb3JFYWNoKHggPT4ge1xuICAgICAgICAgICAgICAgIC8vIEhNTTogTm90IHN1cmUgaWYgd2UgbmVlZCB0aGUgLnZhbHVlIGNoZWNrXG4gICAgICAgICAgICAgICAgY29uc3QgaXNPYmplY3QgPSB4LnZhbHVlID09PSAnT2JqZWN0JyAmJiB4LnR5cGUgPT09ICdvYmplY3QnO1xuICAgICAgICAgICAgICAgIGlmIChpc09iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdGFyZ2V0UHJvcCA9IGN1cnJlbnRJbmZvLnZpZXdNb2RlbFt4Lm5hbWVdW3Byb3BlcnR5Lm5hbWVdO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRhcmdldFByb3ApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRJbmZvLnZpZXdNb2RlbFt4Lm5hbWVdW3Byb3BlcnR5Lm5hbWVdID0gcHJvcGVydHkudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgO1xuICAgICAgICAgICAgICAgIGN1cnJlbnRJbmZvLnZpZXdNb2RlbFt4Lm5hbWVdID0geC52YWx1ZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0Q3VzdG9tRWxlbWVudEluZm86IChlbGVtZW50LCB0cmF2ZXJzZSA9IHRydWUpID0+IHtcbiAgICAgICAgICAgIGxldCBjdXN0b21FbGVtZW50O1xuICAgICAgICAgICAgbGV0IGN1c3RvbUF0dHJpYnV0ZXM7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHdoaWxlICghY3VzdG9tRWxlbWVudCAmJiBlbGVtZW50ICE9PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGF1ID0gZWxlbWVudFsnJGF1J107XG4gICAgICAgICAgICAgICAgICAgIGlmIChhdSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tRWxlbWVudCA9IGVsZW1lbnRbJyRhdSddWydhdTpyZXNvdXJjZTpjdXN0b20tZWxlbWVudCddO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VzdG9tQXR0cmlidXRlS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGF1KS5maWx0ZXIoeSA9PiB5LmluY2x1ZGVzKCdjdXN0b20tYXR0cmlidXRlJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VzdG9tQXR0cmlidXRlcyA9IGN1c3RvbUF0dHJpYnV0ZUtleXMubWFwKHggPT4gYXVbeF0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgICAgIGlmICghdHJhdmVyc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFjdXN0b21FbGVtZW50ICYmICFjdXN0b21BdHRyaWJ1dGVzKVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIGhvb2tzLmN1cnJlbnRFbGVtZW50ID0gY3VzdG9tRWxlbWVudDtcbiAgICAgICAgICAgIGhvb2tzLmN1cnJlbnRBdHRyaWJ1dGVzID0gY3VzdG9tQXR0cmlidXRlcztcbiAgICAgICAgICAgIGNvbnN0IGN1c3RvbUVsZW1lbnRJbmZvID0gZXh0cmFjdENvbnRyb2xsZXJJbmZvKGN1c3RvbUVsZW1lbnQpO1xuICAgICAgICAgICAgY29uc3QgY3VzdG9tQXR0cmlidXRlc0luZm8gPSBjdXN0b21BdHRyaWJ1dGVzICYmIGN1c3RvbUF0dHJpYnV0ZXMubWFwKGV4dHJhY3RDb250cm9sbGVySW5mbykuZmlsdGVyKHggPT4geCk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGN1c3RvbUVsZW1lbnRJbmZvLFxuICAgICAgICAgICAgICAgIGN1c3RvbUF0dHJpYnV0ZXNJbmZvXG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuICAgICAgICBnZXRFeHBhbmRlZERlYnVnVmFsdWVGb3JJZChpZCkge1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gZGVidWdWYWx1ZUxvb2t1cFtpZF0uZXhwYW5kYWJsZVZhbHVlO1xuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgbGV0IG5ld1ZhbHVlID0ge307XG4gICAgICAgICAgICAgICAgdmFsdWUuZm9yRWFjaCgodmFsdWUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlW2luZGV4XSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc01hcCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICBsZXQgbWFwVG9BcnIgPSBbXTtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbHVlLmZvckVhY2goKHZhbHVlLCBrZXkpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgbWFwVG9BcnIucHVzaChbdmFsdWUsIGtleV0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHZhbHVlID0gbWFwVG9BcnI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChpc1NldCh2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IEFycmF5LmZyb20odmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNvbnZlcnRPYmplY3RUb0RlYnVnSW5mbyh2YWx1ZSk7XG4gICAgICAgICAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yOTkyNDkzMi9ob3ctdG8tcmVsaWFibHktY2hlY2stYW4tb2JqZWN0LWlzLWFuLWVjbWFzY3JpcHQtNi1tYXAtc2V0XG4gICAgICAgICAgICBmdW5jdGlvbiBpc01hcChvKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgTWFwLnByb3RvdHlwZS5oYXMuY2FsbChvKTsgLy8gdGhyb3dzIGlmIG8gaXMgbm90IGFuIG9iamVjdCBvciBoYXMgbm8gW1tNYXBEYXRhXV1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBpc1NldChvKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgU2V0LnByb3RvdHlwZS5oYXMuY2FsbChvKTsgLy8gdGhyb3dzIGlmIG8gaXMgbm90IGFuIG9iamVjdCBvciBoYXMgbm8gW1tTZXREYXRhXV1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdhdS1zdGFydGVkJywgKGN1c3RvbUV2ZW50KSA9PiB7XG4gICAgICAgIGhvb2tzLkF1cmVsaWEgPSBjdXN0b21FdmVudC5kZXRhaWw7XG4gICAgfSwgeyBvbmNlOiB0cnVlIH0pO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh3aW4sICdfX0FVUkVMSUFfREVWVE9PTFNfR0xPQkFMX0hPT0tfXycsIHtcbiAgICAgICAgZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIGhvb2tzO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgZnVuY3Rpb24gZXh0cmFjdENvbnRyb2xsZXJJbmZvKGN1c3RvbUVsZW1lbnQpIHtcbiAgICAgICAgaWYgKCFjdXN0b21FbGVtZW50KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCBiaW5kYWJsZUtleXMgPSBPYmplY3Qua2V5cyhjdXN0b21FbGVtZW50LmRlZmluaXRpb24uYmluZGFibGVzKTtcbiAgICAgICAgY29uc3QgcmV0dXJuVmFsID0ge1xuICAgICAgICAgICAgYmluZGFibGVzOiBiaW5kYWJsZUtleXMubWFwKHkgPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZXRWYWx1ZU9uRGVidWdJbmZvKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogeVxuICAgICAgICAgICAgICAgIH0sIGN1c3RvbUVsZW1lbnQudmlld01vZGVsW3ldLCBjdXN0b21FbGVtZW50LnZpZXdNb2RlbCk7XG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAvLyAgIGJpbmRhYmxlOiBjdXN0b21FbGVtZW50LmRlZmluaXRpb24uYmluZGFibGVzW3ldLFxuICAgICAgICAgICAgICAgIC8vICAgdHlwZTogdHlwZW9mIChjdXN0b21FbGVtZW50LnZpZXdNb2RlbFt5XSksXG4gICAgICAgICAgICAgICAgLy8gICBuYW1lOiB5LCB2YWx1ZTogY3VzdG9tRWxlbWVudC52aWV3TW9kZWxbeV1cbiAgICAgICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHByb3BlcnRpZXM6IE9iamVjdC5rZXlzKGN1c3RvbUVsZW1lbnQudmlld01vZGVsKS5maWx0ZXIoeCA9PiAhYmluZGFibGVLZXlzLnNvbWUoeSA9PiB5ID09PSB4KSkuXG4gICAgICAgICAgICAgICAgZmlsdGVyKHggPT4gIXguc3RhcnRzV2l0aCgnJCcpKS5tYXAoeSA9PiB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNldFZhbHVlT25EZWJ1Z0luZm8oe1xuICAgICAgICAgICAgICAgICAgICBuYW1lOiB5XG4gICAgICAgICAgICAgICAgfSwgY3VzdG9tRWxlbWVudC52aWV3TW9kZWxbeV0sIGN1c3RvbUVsZW1lbnQudmlld01vZGVsKTtcbiAgICAgICAgICAgICAgICAvLyByZXR1cm4ge1xuICAgICAgICAgICAgICAgIC8vICAgdHlwZTogdHlwZW9mIChjdXN0b21FbGVtZW50LnZpZXdNb2RlbFt5XSksXG4gICAgICAgICAgICAgICAgLy8gICBuYW1lOiB5LFxuICAgICAgICAgICAgICAgIC8vICAgdmFsdWU6IGdldFZhbHVlRm9yKGN1c3RvbUVsZW1lbnQudmlld01vZGVsW3ldKVxuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbmFtZTogY3VzdG9tRWxlbWVudC5kZWZpbml0aW9uLm5hbWUsXG4gICAgICAgICAgICBhbGlhc2VzOiBjdXN0b21FbGVtZW50LmRlZmluaXRpb24uYWxpYXNlcyxcbiAgICAgICAgICAgIGtleTogY3VzdG9tRWxlbWVudC5kZWZpbml0aW9uLmtleVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gcmV0dXJuVmFsO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXRWYWx1ZUZvcih2YWx1ZSkge1xuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBOb2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUuY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgcmV0dXJuIGBBcnJheVske3ZhbHVlLmxlbmd0aH1dYDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgKHZhbHVlKSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZS5jb25zdHJ1Y3Rvcikge1xuICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZS5jb25zdHJ1Y3Rvci5uYW1lO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICdPYmplY3QnO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHNldFZhbHVlT25EZWJ1Z0luZm8oZGVidWdJbmZvLCB2YWx1ZSwgaW5zdGFuY2UpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCBleHBhbmRhYmxlVmFsdWU7XG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBOb2RlKSB7XG4gICAgICAgICAgICAgICAgZGVidWdJbmZvLmNhbkV4cGFuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZGVidWdJbmZvLnR5cGUgPSAnbm9kZSc7XG4gICAgICAgICAgICAgICAgZGVidWdJbmZvLnZhbHVlID0gdmFsdWUuY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgICAgICAgICBleHBhbmRhYmxlVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgICAgICAgZGVidWdJbmZvLmNhbkV4cGFuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgZGVidWdJbmZvLnR5cGUgPSAnYXJyYXknO1xuICAgICAgICAgICAgICAgIGRlYnVnSW5mby52YWx1ZSA9IGBBcnJheVske3ZhbHVlLmxlbmd0aH1dYDtcbiAgICAgICAgICAgICAgICBleHBhbmRhYmxlVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlYnVnSW5mby50eXBlID0gdHlwZW9mIHZhbHVlO1xuICAgICAgICAgICAgICAgIGRlYnVnSW5mby52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgZGVidWdJbmZvLnR5cGUgPSAnbnVsbCc7XG4gICAgICAgICAgICAgICAgZGVidWdJbmZvLnZhbHVlID0gJ251bGwnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGRlYnVnSW5mby50eXBlID0gJ3VuZGVmaW5lZCc7XG4gICAgICAgICAgICAgICAgZGVidWdJbmZvLnZhbHVlID0gJ3VuZGVmaW5lZCc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChkZWJ1Z0luZm8udHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgICAgICBkZWJ1Z0luZm8uY2FuRXhwYW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBleHBhbmRhYmxlVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUuY29uc3RydWN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVidWdJbmZvLnZhbHVlID0gdmFsdWUuY29uc3RydWN0b3IubmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnSW5mby52YWx1ZSA9ICdPYmplY3QnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkZWJ1Z0luZm8udHlwZSA9PT0gJ3N0cmluZycgfHwgZGVidWdJbmZvLnR5cGUgPT09ICdudW1iZXInIHx8IGRlYnVnSW5mby50eXBlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICAgICAgICBkZWJ1Z0luZm8uY2FuRWRpdCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWJ1Z0luZm8uZGVidWdJZCA9IGRlYnVnSW5mby5kZWJ1Z0lkIHx8IGdldE5leHREZWJ1Z0lkKCk7XG4gICAgICAgICAgICBkZWJ1Z1ZhbHVlTG9va3VwW2RlYnVnSW5mby5kZWJ1Z0lkXSA9IE9iamVjdC5hc3NpZ24oe1xuICAgICAgICAgICAgICAgIGluc3RhbmNlOiBpbnN0YW5jZSxcbiAgICAgICAgICAgICAgICBleHBhbmRhYmxlVmFsdWU6IGV4cGFuZGFibGVWYWx1ZVxuICAgICAgICAgICAgfSwgZGVidWdJbmZvKTtcbiAgICAgICAgICAgIHJldHVybiBkZWJ1Z0luZm87XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVFcnJvck9iamVjdChlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBjcmVhdGVDb250cm9sbGVyRGVidWdJbmZvKGNvbnRyb2xsZXIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGxldCBjb250cm9sbGVyRGVidWdJbmZvID0ge1xuICAgICAgICAgICAgICAgIG5hbWU6IGNvbnRyb2xsZXIuYmVoYXZpb3IuZWxlbWVudE5hbWUgfHwgY29udHJvbGxlci5iZWhhdmlvci5hdHRyaWJ1dGVOYW1lXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgbGV0IHZpZXdNb2RlbCA9IGNvbnRyb2xsZXIudmlld01vZGVsO1xuICAgICAgICAgICAgbGV0IGJpbmRhYmxlS2V5cyA9IHt9O1xuICAgICAgICAgICAgY29udHJvbGxlckRlYnVnSW5mby5iaW5kYWJsZXMgPSBjb250cm9sbGVyLmJlaGF2aW9yLnByb3BlcnRpZXMubWFwKHggPT4ge1xuICAgICAgICAgICAgICAgIGJpbmRhYmxlS2V5c1t4Lm5hbWVdID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0VmFsdWVPbkRlYnVnSW5mbyh7XG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHgubmFtZSxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlOiB4LmF0dHJpYnV0ZSxcbiAgICAgICAgICAgICAgICB9LCB2aWV3TW9kZWxbeC5uYW1lXSwgdmlld01vZGVsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29udHJvbGxlckRlYnVnSW5mby5wcm9wZXJ0aWVzID0gZ2V0RGVidWdQcm9wZXJ0eUtleXModmlld01vZGVsKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoeCA9PiAhKHggaW4gYmluZGFibGVLZXlzKSlcbiAgICAgICAgICAgICAgICAubWFwKHggPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZXRWYWx1ZU9uRGVidWdJbmZvKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogeFxuICAgICAgICAgICAgICAgIH0sIHZpZXdNb2RlbFt4XSwgdmlld01vZGVsKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXJEZWJ1Z0luZm87XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVFcnJvck9iamVjdChlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBjb252ZXJ0T2JqZWN0VG9EZWJ1Z0luZm8ob2JqLCBibGFja0xpc3QpIHtcbiAgICAgICAgYmxhY2tMaXN0ID0gYmxhY2tMaXN0IHx8IHt9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcHJvcGVydGllczogZ2V0RGVidWdQcm9wZXJ0eUtleXMob2JqKVxuICAgICAgICAgICAgICAgIC5maWx0ZXIoeCA9PiAhKHggaW4gYmxhY2tMaXN0KSlcbiAgICAgICAgICAgICAgICAubWFwKHggPT4ge1xuICAgICAgICAgICAgICAgIHJldHVybiBzZXRWYWx1ZU9uRGVidWdJbmZvKHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogeFxuICAgICAgICAgICAgICAgIH0sIG9ialt4XSwgb2JqKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldERlYnVnSW5mb0Zvck5vZGUoc2VsZWN0ZWROb2RlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB2YXIgZGVidWdJbmZvID0ge307XG4gICAgICAgICAgICBuZXh0RGVidWdJZCA9IDA7XG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWROb2RlLmF1KSB7XG4gICAgICAgICAgICAgICAgdmFyIGF1ID0gc2VsZWN0ZWROb2RlLmF1O1xuICAgICAgICAgICAgICAgIGlmIChhdS5jb250cm9sbGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnSW5mby5jdXN0b21FbGVtZW50ID0gY3JlYXRlQ29udHJvbGxlckRlYnVnSW5mbyhhdS5jb250cm9sbGVyKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRhZ05hbWUgPSBzZWxlY3RlZE5vZGUudGFnTmFtZSA/IHNlbGVjdGVkTm9kZS50YWdOYW1lLnRvTG93ZXJDYXNlKCkgOiBudWxsO1xuICAgICAgICAgICAgICAgIHZhciBjdXN0b21BdHRyaWJ1dGVOYW1lcyA9IGdldERlYnVnUHJvcGVydHlLZXlzKGF1KVxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGtleSAhPT0gJ2NvbnRyb2xsZXInICYmIGtleSAhPT0gdGFnTmFtZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoY3VzdG9tQXR0cmlidXRlTmFtZXMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgIGRlYnVnSW5mby5jdXN0b21BdHRyaWJ1dGVzID0gY3VzdG9tQXR0cmlidXRlTmFtZXMubWFwKHggPT4gY3JlYXRlQ29udHJvbGxlckRlYnVnSW5mbyhhdVt4XSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBvd25pbmdWaWV3ID0gZmluZE93bmluZ1ZpZXdPZk5vZGUoc2VsZWN0ZWROb2RlKTtcbiAgICAgICAgICAgIGlmIChvd25pbmdWaWV3KSB7XG4gICAgICAgICAgICAgICAgaWYgKG93bmluZ1ZpZXcuYmluZGluZ0NvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVidWdJbmZvLmJpbmRpbmdDb250ZXh0ID0gY29udmVydE9iamVjdFRvRGVidWdJbmZvKG93bmluZ1ZpZXcuYmluZGluZ0NvbnRleHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3duaW5nVmlldy5vdmVycmlkZUNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVidWdJbmZvLm92ZXJyaWRlQ29udGV4dCA9IGNvbnZlcnRPYmplY3RUb0RlYnVnSW5mbyhvd25pbmdWaWV3Lm92ZXJyaWRlQ29udGV4dCwgeyBiaW5kaW5nQ29udGV4dDogdHJ1ZSwgcGFyZW50T3ZlcnJpZGVDb250ZXh0OiB0cnVlIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBkZWJ1Z0luZm87XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBjcmVhdGVFcnJvck9iamVjdChlKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBmdW5jdGlvbiBmaW5kT3duaW5nVmlld09mTm9kZShub2RlKSB7XG4gICAgICAgIGZ1bmN0aW9uIG1vdmVVcChuKSB7XG4gICAgICAgICAgICBsZXQgY3VycmVudCA9IG4ucGFyZW50Tm9kZTtcbiAgICAgICAgICAgIGlmIChjdXJyZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbmRDb21wb3NpbmdWaWV3KGN1cnJlbnQpIHx8IGZpbmRTaWJsaW5nUmVwZWF0ZXJWaWV3KGN1cnJlbnQpIHx8IGZpbmRJbW1lZGlhdGVDb250cm9sbGVyT3duaW5nVmlldyhjdXJyZW50KSB8fCBtb3ZlVXAoY3VycmVudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXR0YWNoZWRPd25lcihub2RlKSB8fCBmaW5kU2libGluZ1JlcGVhdGVyVmlldyhub2RlKSB8fCBmaW5kSW1tZWRpYXRlQ29udHJvbGxlck93bmluZ1ZpZXcobm9kZSkgfHwgbW92ZVVwKG5vZGUpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB1cGRhdGVWYWx1ZUZvcklkKGlkLCB2YWx1ZSkge1xuICAgICAgICBsZXQgZGVidWdJbmZvID0gZGVidWdWYWx1ZUxvb2t1cFtpZF07XG4gICAgICAgIGRlYnVnSW5mby5pbnN0YW5jZVtkZWJ1Z0luZm8ubmFtZV0gPSB2YWx1ZTtcbiAgICAgICAgc2V0VmFsdWVPbkRlYnVnSW5mbyhkZWJ1Z0luZm8sIHZhbHVlLCBkZWJ1Z0luZm8uaW5zdGFuY2UpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBnZXROZXh0RGVidWdJZCgpIHtcbiAgICAgICAgcmV0dXJuICsrbmV4dERlYnVnSWQ7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGNyZWF0ZUVycm9yT2JqZWN0KGUpIHtcbiAgICAgICAgcmV0dXJuIFt7XG4gICAgICAgICAgICAgICAgLy8gYmluZGluZ0NvbnRleHQ6IHtcbiAgICAgICAgICAgICAgICAvLyBwcm9wZXJ0aWVzOiBbXG4gICAgICAgICAgICAgICAgLy8ge1xuICAgICAgICAgICAgICAgIG5hbWU6ICdEZWJ1Z2dlciBFcnJvcicsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGUubWVzc2FnZSxcbiAgICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgICBjYW5FZGl0OiBmYWxzZVxuICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAvLyBdXG4gICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgfV07XG4gICAgfVxuICAgIGZ1bmN0aW9uIGF0dGFjaGVkT3duZXIobm9kZSkge1xuICAgICAgICBsZXQgb3duZXJWaWV3ID0gbm9kZS5hdU93bmVyVmlldztcbiAgICAgICAgaWYgKG93bmVyVmlldyAmJiBvd25lclZpZXcudmlld0ZhY3RvcnkpIHtcbiAgICAgICAgICAgIHJldHVybiBvd25lclZpZXc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIG5vZGVJc0ltbWVkaWF0ZUNoaWxkT2ZWaWV3KHZpZXcsIG5vZGUpIHtcbiAgICAgICAgbGV0IGN1cnJlbnRDaGlsZCA9IHZpZXcuZmlyc3RDaGlsZDtcbiAgICAgICAgbGV0IGxhc3RDaGlsZCA9IHZpZXcubGFzdENoaWxkO1xuICAgICAgICBsZXQgbmV4dENoaWxkO1xuICAgICAgICB3aGlsZSAoY3VycmVudENoaWxkKSB7XG4gICAgICAgICAgICBuZXh0Q2hpbGQgPSBjdXJyZW50Q2hpbGQubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICBpZiAoY3VycmVudENoaWxkID09PSBub2RlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3VycmVudENoaWxkID09PSBsYXN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRDaGlsZCA9IG5leHRDaGlsZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZpbmRTaWJsaW5nUmVwZWF0ZXJWaWV3KG5vZGUpIHtcbiAgICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBsZXQgY3VycmVudCA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgICAgIHdoaWxlIChjdXJyZW50KSB7XG4gICAgICAgICAgICBpZiAoY3VycmVudC5ub2RlVHlwZSA9PT0gOCAmJiBjdXJyZW50LnZpZXdTbG90ICYmIGN1cnJlbnQuZGF0YSA9PT0gJ2FuY2hvcicpIHtcbiAgICAgICAgICAgICAgICBsZXQgY2hpbGRyZW4gPSBjdXJyZW50LnZpZXdTbG90LmNoaWxkcmVuO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBpaSA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGlpOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHZpZXcgPSBjaGlsZHJlbltpXTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGVJc0ltbWVkaWF0ZUNoaWxkT2ZWaWV3KHZpZXcsIG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmlldztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50Lm5leHRTaWJsaW5nO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBmdW5jdGlvbiBmaW5kSW1tZWRpYXRlQ29udHJvbGxlck93bmluZ1ZpZXcobm9kZSkge1xuICAgICAgICBsZXQgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuICAgICAgICBpZiAocGFyZW50ICYmIHBhcmVudC5hdSAmJiBwYXJlbnQuYXUuY29udHJvbGxlclxuICAgICAgICAgICAgJiYgcGFyZW50LmF1LmNvbnRyb2xsZXIudmlldyAmJiBub2RlSXNJbW1lZGlhdGVDaGlsZE9mVmlldyhwYXJlbnQuYXUuY29udHJvbGxlci52aWV3LCBub2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuIHBhcmVudC5hdS5jb250cm9sbGVyLnZpZXc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGZpbmRDb21wb3NpbmdWaWV3KG5vZGUpIHtcbiAgICAgICAgaWYgKCFub2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9kZS5hdXJlbGlhKSB7XG4gICAgICAgICAgICByZXR1cm4gbm9kZS5hdXJlbGlhLnJvb3QudmlldztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChhdHRhY2hlZE93bmVyKG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gYXR0YWNoZWRPd25lcihub2RlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChub2RlLmF1KSB7XG4gICAgICAgICAgICB2YXIgYXUgPSBub2RlLmF1O1xuICAgICAgICAgICAgaWYgKGF1LmNvbnRyb2xsZXIpIHsgLy9jdXN0b20gZWxlbWVudFxuICAgICAgICAgICAgICAgIHZhciBjb250cm9sbGVyID0gYXUuY29udHJvbGxlcjtcbiAgICAgICAgICAgICAgICB2YXIgdGFnTmFtZSA9IG5vZGUudGFnTmFtZSA/IG5vZGUudGFnTmFtZS50b0xvd2VyQ2FzZSgpIDogbnVsbDtcbiAgICAgICAgICAgICAgICBpZiAodGFnTmFtZSA9PT0gJ3JvdXRlci12aWV3Jykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29udHJvbGxlci52aWV3TW9kZWwudmlldztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZiAodGFnTmFtZSA9PT0gJ2NvbXBvc2UnKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjb250cm9sbGVyLnZpZXdNb2RlbC5jdXJyZW50Q29udHJvbGxlci52aWV3O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmIChjb250cm9sbGVyWyd3aXRoJ10pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbnRyb2xsZXJbJ3dpdGgnXS52aWV3TW9kZWwudmlldztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldERlYnVnUHJvcGVydHlLZXlzKG9iaikge1xuICAgICAgICBsZXQgcHJvcHMgPSBbXTtcbiAgICAgICAgY29uc3Qga2V5cyA9IFsuLi5PYmplY3Qua2V5cyhvYmopLCAuLi5PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvYmopXTtcbiAgICAgICAgY29uc3QgdW5pcXVlS2V5cyA9IGtleXMuZmlsdGVyKCh2YWx1ZSwgaSwgYXJyKSA9PiBhcnIuaW5kZXhPZih2YWx1ZSkgPT09IGkpO1xuICAgICAgICBmb3IgKGNvbnN0IGtleSBvZiB1bmlxdWVLZXlzKSB7XG4gICAgICAgICAgICBpZiAoa2V5ICYmICFrZXkuc3RhcnRzV2l0aCgnXycpICYmIHR5cGVvZiBvYmpba2V5XSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHByb3BzLnB1c2goa2V5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJvcHM7XG4gICAgfVxufVxuT2JqZWN0LmRlZmluZVByb3BlcnR5KHdpbmRvdywgJ19fQVVSRUxJQV9ERVZUT09MU19IT09LX18nLCB7XG4gICAgZ2V0KCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZ2V0Q3VzdG9tRWxlbWVudEluZm86IChlbGVtZW50KSA9PiB7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxufSk7XG4vLyBpbmplY3QgdGhlIGhvb2tcbmlmIChkb2N1bWVudCBpbnN0YW5jZW9mIEhUTUxEb2N1bWVudCkge1xuICAgIGluc3RhbGxTY3JpcHQoaW5zdGFsbCk7XG59XG4iLCJleHBvcnQgY29uc3QgaXNCcm93c2VyID0gdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCc7XG5leHBvcnQgY29uc3QgdGFyZ2V0ID0gaXNCcm93c2VyID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB7fTtcbmV4cG9ydCBjb25zdCBpc0Nocm9tZSA9IHR5cGVvZiBjaHJvbWUgIT09ICd1bmRlZmluZWQnICYmICEhY2hyb21lLmRldnRvb2xzO1xuZXhwb3J0IGNvbnN0IGlzRmlyZWZveCA9IGlzQnJvd3NlciAmJiBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdGaXJlZm94Jyk7XG5leHBvcnQgY29uc3QgaXNXaW5kb3dzID0gaXNCcm93c2VyICYmIG5hdmlnYXRvci5wbGF0Zm9ybS5zdGFydHNXaXRoKCdXaW4nKTtcbmV4cG9ydCBjb25zdCBpc01hYyA9IGlzQnJvd3NlciAmJiBuYXZpZ2F0b3IucGxhdGZvcm0gPT09ICdNYWNJbnRlbCc7XG5leHBvcnQgY29uc3QgaXNMaW51eCA9IGlzQnJvd3NlciAmJiBuYXZpZ2F0b3IucGxhdGZvcm0uc3RhcnRzV2l0aCgnTGludXgnKTtcbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdGlmKF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0pIHtcblx0XHRyZXR1cm4gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8vIG1vZHVsZSBleHBvcnRzIG11c3QgYmUgcmV0dXJuZWQgZnJvbSBydW50aW1lIHNvIGVudHJ5IGlubGluaW5nIGlzIGRpc2FibGVkXG4vLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbnJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvY29udGVudHNjcmlwdC9jb250ZW50c2NyaXB0LnRzXCIpO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==